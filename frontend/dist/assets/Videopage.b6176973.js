var _t=Object.defineProperty,Et=Object.defineProperties;var xt=Object.getOwnPropertyDescriptors;var yt=Object.getOwnPropertySymbols;var Ct=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable;var bt=(n,t,i)=>t in n?_t(n,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[t]=i,pt=(n,t)=>{for(var i in t||(t={}))Ct.call(t,i)&&bt(n,i,t[i]);if(yt)for(var i of yt(t))Pt.call(t,i)&&bt(n,i,t[i]);return n},wt=(n,t)=>Et(n,xt(t));import{r as react,ad as commonjsGlobal,ab as getAugmentedNamespace,ar as PropTypes,af as e,P as jsx,aa as jsxs,a6 as Fragment,ag as reactDom,al as ChatState,an as useHistory,ah as Box}from"./index.4f379bc2.js";import{a as applyStyles,c as createPopper}from"./popper.550e126a.js";/* empty css               */(function(){let n=0;window.CSSGlobalVariables=function(t={}){if(!new.target)throw new Error('Calling CSSGlobalVariables constructor without "new" is forbidden');const i={filter:!1,autoprefix:!0,normalize:!1};if(typeof t!="object")throw new Error("CSSGlobalVariables constructor expects a config Object as first argument");if(t.hasOwnProperty("normalize")&&typeof t.normalize!="function")throw new Error('Config property "normalize" must be a function');if(t.hasOwnProperty("autoprefix")&&typeof t.autoprefix!="boolean")throw new Error('Config property "autoprefix" must be a boolean');if(t.hasOwnProperty("filter")){if(typeof t.filter!="string")throw new Error('Config property "filter" must be a string');try{document.querySelectorAll(t.filter)}catch{throw new Error('Provided "filter" is an invalid selector ("'+t.filter+'")')}}Object.assign(i,t),n++,i.id=n;const a={},o=new Proxy(a,{get:function(c,f){return f=u(f),Reflect.get(c,f)},set:function(c,f,g){return f=u(f),g=String(g),document.documentElement.style.setProperty(f,g),Reflect.set(c,f,g)},deleteProperty:function(){return!1},has:function(c,f){return f=u(f),Reflect.has(c,f)},defineProperty:function(c,f,g){if(f=u(f),typeof g=="object"&&g.hasOwnProperty("value")){let b=String(g.value);document.documentElement.style.setProperty(f,b),Reflect.set(c,f,b)}return c},ownKeys:function(c){return Reflect.ownKeys(c)},getOwnPropertyDescriptor:function(c,f){return f=u(f),Reflect.getOwnPropertyDescriptor(c,f)}});function u(c=""){if(c=String(c),i.normalize&&(c=i.normalize(c)),c.substring(0,2)!=="--")if(i.autoprefix)c="--"+c;else throw new Error('Invalid CSS Variable name. Name must start with "--" (autoprefix=false)');return c}function l(){Array.from(document.styleSheets).forEach(c=>{if(c.ownerNode.getAttribute("css-global-vars-ignore"))return;if(i.filter){let b=document.querySelectorAll(i.filter),v=!1;for(let _ in Object.keys(b))if(b[_]===c.ownerNode){v=!0;break}if(!v)return!1}let f=!1;try{c.rules||c.cssRules}catch{c.ownerNode.hasAttribute("css-global-vars-ignore")?console.warn("Unexpected error reading CSS properties."):(c.ownerNode.setAttribute("css-global-vars-ignore",!0),console.warn("Cross Origin Policy restrictions are blocking the access to the CSS rules of a remote stylesheet. The affected stylesheet is going to be ignored by CSSGlobalVariables. Check the documentation for instructions to prevent this issue.")),f=!0}if(f)return;let g=c.ownerNode.getAttribute("css-global-vars-id");if(!String(g).split(",").includes(String(i.id))){{let b=c.ownerNode.getAttribute("css-global-vars-id");b===null||b===""?b=i.id:b+=","+i.id,c.ownerNode.setAttribute("css-global-vars-id",b)}Array.from(c.rules||c.cssRules).forEach(b=>{if(b.selectorText===":root"){let v=b.cssText.split("{");v=v[1].replace("}","").split(";");for(let _=0;_<v.length;_++){let x=v[_].split(":");x.length===2&&x[0].indexOf("--")===1&&(a[x[0].trim()]=x[1].trim())}}})}});for(let c in a)a.hasOwnProperty(c)&&(a[c]=window.getComputedStyle(document.documentElement,null).getPropertyValue(c).trim());return!0}var m=new MutationObserver(c=>{let f=!1;c.forEach(g=>{if(g.type==="childList"){for(let b=0;b<g.addedNodes.length;b++)(g.addedNodes[b].tagName==="STYLE"||g.addedNodes[b].tagName==="LINK")&&(f=!0);for(let b=0;b<g.removedNodes.length;b++)(g.removedNodes[b].tagName==="STYLE"||g.removedNodes[b].tagName==="LINK")&&(f=!0)}}),f&&setTimeout(l,500)});return m.observe(document.documentElement,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),l(),o}})();let _temp=window.CSSGlobalVariables;delete window.CSSGlobalVariables;/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var parse_1=parse$2,serialize_1=serialize,decode=decodeURIComponent,encode=encodeURIComponent,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function parse$2(n,t){if(typeof n!="string")throw new TypeError("argument str must be a string");for(var i={},a=t||{},o=n.split(";"),u=a.decode||decode,l=0;l<o.length;l++){var m=o[l],c=m.indexOf("=");if(!(c<0)){var f=m.substring(0,c).trim();if(i[f]==null){var g=m.substring(c+1,m.length).trim();g[0]==='"'&&(g=g.slice(1,-1)),i[f]=tryDecode(g,u)}}}return i}function serialize(n,t,i){var a=i||{},o=a.encode||encode;if(typeof o!="function")throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(n))throw new TypeError("argument name is invalid");var u=o(t);if(u&&!fieldContentRegExp.test(u))throw new TypeError("argument val is invalid");var l=n+"="+u;if(a.maxAge!=null){var m=a.maxAge-0;if(isNaN(m)||!isFinite(m))throw new TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(m)}if(a.domain){if(!fieldContentRegExp.test(a.domain))throw new TypeError("option domain is invalid");l+="; Domain="+a.domain}if(a.path){if(!fieldContentRegExp.test(a.path))throw new TypeError("option path is invalid");l+="; Path="+a.path}if(a.expires){if(typeof a.expires.toUTCString!="function")throw new TypeError("option expires is invalid");l+="; Expires="+a.expires.toUTCString()}if(a.httpOnly&&(l+="; HttpOnly"),a.secure&&(l+="; Secure"),a.sameSite){var c=typeof a.sameSite=="string"?a.sameSite.toLowerCase():a.sameSite;switch(c){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return l}function tryDecode(n,t){try{return t(n)}catch{return n}}function hasDocumentCookie(){return typeof document=="object"&&typeof document.cookie=="string"}function parseCookies(n,t){return typeof n=="string"?parse_1(n,t):typeof n=="object"&&n!==null?n:{}}function isParsingCookie(n,t){return typeof t=="undefined"&&(t=!n||n[0]!=="{"&&n[0]!=="["&&n[0]!=='"'),!t}function readCookie(n,t){t===void 0&&(t={});var i=cleanupCookieValue(n);if(isParsingCookie(i,t.doNotParse))try{return JSON.parse(i)}catch{}return n}function cleanupCookieValue(n){return n&&n[0]==="j"&&n[1]===":"?n.substr(2):n}var __assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(n){for(var t,i=1,a=arguments.length;i<a;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},__assign.apply(this,arguments)},Cookies=function(){function n(t,i){var a=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=parseCookies(t,i),new Promise(function(){a.HAS_DOCUMENT_COOKIE=hasDocumentCookie()}).catch(function(){})}return n.prototype._updateBrowserValues=function(t){!this.HAS_DOCUMENT_COOKIE||(this.cookies=parse_1(document.cookie,t))},n.prototype._emitChange=function(t){for(var i=0;i<this.changeListeners.length;++i)this.changeListeners[i](t)},n.prototype.get=function(t,i,a){return i===void 0&&(i={}),this._updateBrowserValues(a),readCookie(this.cookies[t],i)},n.prototype.getAll=function(t,i){t===void 0&&(t={}),this._updateBrowserValues(i);var a={};for(var o in this.cookies)a[o]=readCookie(this.cookies[o],t);return a},n.prototype.set=function(t,i,a){var o;typeof i=="object"&&(i=JSON.stringify(i)),this.cookies=__assign(__assign({},this.cookies),(o={},o[t]=i,o)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=serialize_1(t,i,a)),this._emitChange({name:t,value:i,options:a})},n.prototype.remove=function(t,i){var a=i=__assign(__assign({},i),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=__assign({},this.cookies),delete this.cookies[t],this.HAS_DOCUMENT_COOKIE&&(document.cookie=serialize_1(t,"",a)),this._emitChange({name:t,value:void 0,options:i})},n.prototype.addChangeListener=function(t){this.changeListeners.push(t)},n.prototype.removeChangeListener=function(t){var i=this.changeListeners.indexOf(t);i>=0&&this.changeListeners.splice(i,1)},n}(),Cookies$1=Cookies,CookiesContext=react.exports.createContext(new Cookies$1);CookiesContext.Provider;CookiesContext.Consumer;var CookiesContext$1=CookiesContext;function isInBrowser(){return typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"}function useCookies(n){var t=react.exports.useContext(CookiesContext$1);if(!t)throw new Error("Missing <CookiesProvider>");var i=t.getAll(),a=react.exports.useState(i),o=a[0],u=a[1],l=react.exports.useRef(o);isInBrowser()&&react.exports.useLayoutEffect(function(){function f(){var g=t.getAll();shouldUpdate(n||null,g,l.current)&&u(g),l.current=g}return t.addChangeListener(f),function(){t.removeChangeListener(f)}},[t]);var m=react.exports.useMemo(function(){return t.set.bind(t)},[t]),c=react.exports.useMemo(function(){return t.remove.bind(t)},[t]);return[o,m,c]}function shouldUpdate(n,t,i){if(!n)return!0;for(var a=0,o=n;a<o.length;a++){var u=o[a];if(t[u]!==i[u])return!0}return!1}var dist={},livekit_models={},long=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Long(n,t,i){this.low=n|0,this.high=t|0,this.unsigned=!!i}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(n){return(n&&n.__isLong__)===!0}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(n,t){var i,a,o;return t?(n>>>=0,(o=0<=n&&n<256)&&(a=UINT_CACHE[n],a)?a:(i=fromBits(n,(n|0)<0?-1:0,!0),o&&(UINT_CACHE[n]=i),i)):(n|=0,(o=-128<=n&&n<128)&&(a=INT_CACHE[n],a)?a:(i=fromBits(n,n<0?-1:0,!1),o&&(INT_CACHE[n]=i),i))}Long.fromInt=fromInt;function fromNumber(n,t){if(isNaN(n))return t?UZERO:ZERO;if(t){if(n<0)return UZERO;if(n>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(n<=-TWO_PWR_63_DBL)return MIN_VALUE;if(n+1>=TWO_PWR_63_DBL)return MAX_VALUE}return n<0?fromNumber(-n,t).neg():fromBits(n%TWO_PWR_32_DBL|0,n/TWO_PWR_32_DBL|0,t)}Long.fromNumber=fromNumber;function fromBits(n,t,i){return new Long(n,t,i)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(n,t,i){if(n.length===0)throw Error("empty string");if(n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return ZERO;if(typeof t=="number"?(i=t,t=!1):t=!!t,i=i||10,i<2||36<i)throw RangeError("radix");var a;if((a=n.indexOf("-"))>0)throw Error("interior hyphen");if(a===0)return fromString(n.substring(1),t,i).neg();for(var o=fromNumber(pow_dbl(i,8)),u=ZERO,l=0;l<n.length;l+=8){var m=Math.min(8,n.length-l),c=parseInt(n.substring(l,l+m),i);if(m<8){var f=fromNumber(pow_dbl(i,m));u=u.mul(f).add(fromNumber(c))}else u=u.mul(o),u=u.add(fromNumber(c))}return u.unsigned=t,u}Long.fromString=fromString;function fromValue(n,t){return typeof n=="number"?fromNumber(n,t):typeof n=="string"?fromString(n,t):fromBits(n.low,n.high,typeof t=="boolean"?t:n.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=1<<16,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low};LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)};LongPrototype.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var i=fromNumber(t),a=this.div(i),o=a.mul(i).sub(this);return a.toString(t)+o.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var u=fromNumber(pow_dbl(t,6),this.unsigned),l=this,m="";;){var c=l.div(u),f=l.sub(c.mul(u)).toInt()>>>0,g=f.toString(t);if(l=c,l.isZero())return g+m;for(;g.length<6;)g="0"+g;m=""+g+m}};LongPrototype.getHighBits=function(){return this.high};LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0};LongPrototype.getLowBits=function(){return this.low};LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0};LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,i=31;i>0&&(t&1<<i)==0;i--);return this.high!=0?i+33:i+1};LongPrototype.isZero=function(){return this.high===0&&this.low===0};LongPrototype.eqz=LongPrototype.isZero;LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0};LongPrototype.isPositive=function(){return this.unsigned||this.high>=0};LongPrototype.isOdd=function(){return(this.low&1)===1};LongPrototype.isEven=function(){return(this.low&1)===0};LongPrototype.equals=function(t){return isLong(t)||(t=fromValue(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};LongPrototype.eq=LongPrototype.equals;LongPrototype.notEquals=function(t){return!this.eq(t)};LongPrototype.neq=LongPrototype.notEquals;LongPrototype.ne=LongPrototype.notEquals;LongPrototype.lessThan=function(t){return this.comp(t)<0};LongPrototype.lt=LongPrototype.lessThan;LongPrototype.lessThanOrEqual=function(t){return this.comp(t)<=0};LongPrototype.lte=LongPrototype.lessThanOrEqual;LongPrototype.le=LongPrototype.lessThanOrEqual;LongPrototype.greaterThan=function(t){return this.comp(t)>0};LongPrototype.gt=LongPrototype.greaterThan;LongPrototype.greaterThanOrEqual=function(t){return this.comp(t)>=0};LongPrototype.gte=LongPrototype.greaterThanOrEqual;LongPrototype.ge=LongPrototype.greaterThanOrEqual;LongPrototype.compare=function(t){if(isLong(t)||(t=fromValue(t)),this.eq(t))return 0;var i=this.isNegative(),a=t.isNegative();return i&&!a?-1:!i&&a?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};LongPrototype.comp=LongPrototype.compare;LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)};LongPrototype.neg=LongPrototype.negate;LongPrototype.add=function(t){isLong(t)||(t=fromValue(t));var i=this.high>>>16,a=this.high&65535,o=this.low>>>16,u=this.low&65535,l=t.high>>>16,m=t.high&65535,c=t.low>>>16,f=t.low&65535,g=0,b=0,v=0,_=0;return _+=u+f,v+=_>>>16,_&=65535,v+=o+c,b+=v>>>16,v&=65535,b+=a+m,g+=b>>>16,b&=65535,g+=i+l,g&=65535,fromBits(v<<16|_,g<<16|b,this.unsigned)};LongPrototype.subtract=function(t){return isLong(t)||(t=fromValue(t)),this.add(t.neg())};LongPrototype.sub=LongPrototype.subtract;LongPrototype.multiply=function(t){if(this.isZero())return ZERO;if(isLong(t)||(t=fromValue(t)),wasm){var i=wasm.mul(this.low,this.high,t.low,t.high);return fromBits(i,wasm.get_high(),this.unsigned)}if(t.isZero())return ZERO;if(this.eq(MIN_VALUE))return t.isOdd()?MIN_VALUE:ZERO;if(t.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(TWO_PWR_24)&&t.lt(TWO_PWR_24))return fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var a=this.high>>>16,o=this.high&65535,u=this.low>>>16,l=this.low&65535,m=t.high>>>16,c=t.high&65535,f=t.low>>>16,g=t.low&65535,b=0,v=0,_=0,x=0;return x+=l*g,_+=x>>>16,x&=65535,_+=u*g,v+=_>>>16,_&=65535,_+=l*f,v+=_>>>16,_&=65535,v+=o*g,b+=v>>>16,v&=65535,v+=u*f,b+=v>>>16,v&=65535,v+=l*c,b+=v>>>16,v&=65535,b+=a*g+o*f+u*c+l*m,b&=65535,fromBits(_<<16|x,b<<16|v,this.unsigned)};LongPrototype.mul=LongPrototype.multiply;LongPrototype.divide=function(t){if(isLong(t)||(t=fromValue(t)),t.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var i=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,t.low,t.high);return fromBits(i,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var a,o,u;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return UZERO;if(t.gt(this.shru(1)))return UONE;u=UZERO}else{if(this.eq(MIN_VALUE)){if(t.eq(ONE)||t.eq(NEG_ONE))return MIN_VALUE;if(t.eq(MIN_VALUE))return ONE;var l=this.shr(1);return a=l.div(t).shl(1),a.eq(ZERO)?t.isNegative()?ONE:NEG_ONE:(o=this.sub(t.mul(a)),u=a.add(o.div(t)),u)}else if(t.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();u=ZERO}for(o=this;o.gte(t);){a=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var m=Math.ceil(Math.log(a)/Math.LN2),c=m<=48?1:pow_dbl(2,m-48),f=fromNumber(a),g=f.mul(t);g.isNegative()||g.gt(o);)a-=c,f=fromNumber(a,this.unsigned),g=f.mul(t);f.isZero()&&(f=ONE),u=u.add(f),o=o.sub(g)}return u};LongPrototype.div=LongPrototype.divide;LongPrototype.modulo=function(t){if(isLong(t)||(t=fromValue(t)),wasm){var i=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,t.low,t.high);return fromBits(i,wasm.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};LongPrototype.mod=LongPrototype.modulo;LongPrototype.rem=LongPrototype.modulo;LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)};LongPrototype.and=function(t){return isLong(t)||(t=fromValue(t)),fromBits(this.low&t.low,this.high&t.high,this.unsigned)};LongPrototype.or=function(t){return isLong(t)||(t=fromValue(t)),fromBits(this.low|t.low,this.high|t.high,this.unsigned)};LongPrototype.xor=function(t){return isLong(t)||(t=fromValue(t)),fromBits(this.low^t.low,this.high^t.high,this.unsigned)};LongPrototype.shiftLeft=function(t){return isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):fromBits(0,this.low<<t-32,this.unsigned)};LongPrototype.shl=LongPrototype.shiftLeft;LongPrototype.shiftRight=function(t){return isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};LongPrototype.shr=LongPrototype.shiftRight;LongPrototype.shiftRightUnsigned=function(t){if(isLong(t)&&(t=t.toInt()),t&=63,t===0)return this;var i=this.high;if(t<32){var a=this.low;return fromBits(a>>>t|i<<32-t,i>>>t,this.unsigned)}else return t===32?fromBits(i,0,this.unsigned):fromBits(i>>>t-32,0,this.unsigned)};LongPrototype.shru=LongPrototype.shiftRightUnsigned;LongPrototype.shr_u=LongPrototype.shiftRightUnsigned;LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this};LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)};LongPrototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};LongPrototype.toBytesLE=function(){var t=this.high,i=this.low;return[i&255,i>>>8&255,i>>>16&255,i>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};LongPrototype.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,i>>>24,i>>>16&255,i>>>8&255,i&255]};Long.fromBytes=function(t,i,a){return a?Long.fromBytesLE(t,i):Long.fromBytesBE(t,i)};Long.fromBytesLE=function(t,i){return new Long(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)};Long.fromBytesBE=function(t,i){return new Long(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)};var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(n,t){for(var i=new Array(arguments.length-1),a=0,o=2,u=!0;o<arguments.length;)i[a++]=arguments[o++];return new Promise(function(m,c){i[a]=function(g){if(u)if(u=!1,g)c(g);else{for(var b=new Array(arguments.length-1),v=0;v<b.length;)b[v++]=arguments[v];m.apply(null,b)}};try{n.apply(t||null,i)}catch(f){u&&(u=!1,c(f))}})}var base64$1={};(function(n){var t=n;t.length=function(m){var c=m.length;if(!c)return 0;for(var f=0;--c%4>1&&m.charAt(c)==="=";)++f;return Math.ceil(m.length*3)/4-f};for(var i=new Array(64),a=new Array(123),o=0;o<64;)a[i[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;t.encode=function(m,c,f){for(var g=null,b=[],v=0,_=0,x;c<f;){var C=m[c++];switch(_){case 0:b[v++]=i[C>>2],x=(C&3)<<4,_=1;break;case 1:b[v++]=i[x|C>>4],x=(C&15)<<2,_=2;break;case 2:b[v++]=i[x|C>>6],b[v++]=i[C&63],_=0;break}v>8191&&((g||(g=[])).push(String.fromCharCode.apply(String,b)),v=0)}return _&&(b[v++]=i[x],b[v++]=61,_===1&&(b[v++]=61)),g?(v&&g.push(String.fromCharCode.apply(String,b.slice(0,v))),g.join("")):String.fromCharCode.apply(String,b.slice(0,v))};var u="invalid encoding";t.decode=function(m,c,f){for(var g=f,b=0,v,_=0;_<m.length;){var x=m.charCodeAt(_++);if(x===61&&b>1)break;if((x=a[x])===void 0)throw Error(u);switch(b){case 0:v=x,b=1;break;case 1:c[f++]=v<<2|(x&48)>>4,v=x,b=2;break;case 2:c[f++]=(v&15)<<4|(x&60)>>2,v=x,b=3;break;case 3:c[f++]=(v&3)<<6|x,b=0;break}}if(b===1)throw Error(u);return f-g},t.test=function(m){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(m)}})(base64$1);var eventemitter=EventEmitter$1;function EventEmitter$1(){this._listeners={}}EventEmitter$1.prototype.on=function(t,i,a){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:i,ctx:a||this}),this};EventEmitter$1.prototype.off=function(t,i){if(t===void 0)this._listeners={};else if(i===void 0)this._listeners[t]=[];else for(var a=this._listeners[t],o=0;o<a.length;)a[o].fn===i?a.splice(o,1):++o;return this};EventEmitter$1.prototype.emit=function(t){var i=this._listeners[t];if(i){for(var a=[],o=1;o<arguments.length;)a.push(arguments[o++]);for(o=0;o<i.length;)i[o].fn.apply(i[o++].ctx,a)}return this};var float=factory(factory);function factory(n){return typeof Float32Array!="undefined"?function(){var t=new Float32Array([-0]),i=new Uint8Array(t.buffer),a=i[3]===128;function o(c,f,g){t[0]=c,f[g]=i[0],f[g+1]=i[1],f[g+2]=i[2],f[g+3]=i[3]}function u(c,f,g){t[0]=c,f[g]=i[3],f[g+1]=i[2],f[g+2]=i[1],f[g+3]=i[0]}n.writeFloatLE=a?o:u,n.writeFloatBE=a?u:o;function l(c,f){return i[0]=c[f],i[1]=c[f+1],i[2]=c[f+2],i[3]=c[f+3],t[0]}function m(c,f){return i[3]=c[f],i[2]=c[f+1],i[1]=c[f+2],i[0]=c[f+3],t[0]}n.readFloatLE=a?l:m,n.readFloatBE=a?m:l}():function(){function t(a,o,u,l){var m=o<0?1:0;if(m&&(o=-o),o===0)a(1/o>0?0:2147483648,u,l);else if(isNaN(o))a(2143289344,u,l);else if(o>34028234663852886e22)a((m<<31|2139095040)>>>0,u,l);else if(o<11754943508222875e-54)a((m<<31|Math.round(o/1401298464324817e-60))>>>0,u,l);else{var c=Math.floor(Math.log(o)/Math.LN2),f=Math.round(o*Math.pow(2,-c)*8388608)&8388607;a((m<<31|c+127<<23|f)>>>0,u,l)}}n.writeFloatLE=t.bind(null,writeUintLE),n.writeFloatBE=t.bind(null,writeUintBE);function i(a,o,u){var l=a(o,u),m=(l>>31)*2+1,c=l>>>23&255,f=l&8388607;return c===255?f?NaN:m*(1/0):c===0?m*1401298464324817e-60*f:m*Math.pow(2,c-150)*(f+8388608)}n.readFloatLE=i.bind(null,readUintLE),n.readFloatBE=i.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var t=new Float64Array([-0]),i=new Uint8Array(t.buffer),a=i[7]===128;function o(c,f,g){t[0]=c,f[g]=i[0],f[g+1]=i[1],f[g+2]=i[2],f[g+3]=i[3],f[g+4]=i[4],f[g+5]=i[5],f[g+6]=i[6],f[g+7]=i[7]}function u(c,f,g){t[0]=c,f[g]=i[7],f[g+1]=i[6],f[g+2]=i[5],f[g+3]=i[4],f[g+4]=i[3],f[g+5]=i[2],f[g+6]=i[1],f[g+7]=i[0]}n.writeDoubleLE=a?o:u,n.writeDoubleBE=a?u:o;function l(c,f){return i[0]=c[f],i[1]=c[f+1],i[2]=c[f+2],i[3]=c[f+3],i[4]=c[f+4],i[5]=c[f+5],i[6]=c[f+6],i[7]=c[f+7],t[0]}function m(c,f){return i[7]=c[f],i[6]=c[f+1],i[5]=c[f+2],i[4]=c[f+3],i[3]=c[f+4],i[2]=c[f+5],i[1]=c[f+6],i[0]=c[f+7],t[0]}n.readDoubleLE=a?l:m,n.readDoubleBE=a?m:l}():function(){function t(a,o,u,l,m,c){var f=l<0?1:0;if(f&&(l=-l),l===0)a(0,m,c+o),a(1/l>0?0:2147483648,m,c+u);else if(isNaN(l))a(0,m,c+o),a(2146959360,m,c+u);else if(l>17976931348623157e292)a(0,m,c+o),a((f<<31|2146435072)>>>0,m,c+u);else{var g;if(l<22250738585072014e-324)g=l/5e-324,a(g>>>0,m,c+o),a((f<<31|g/4294967296)>>>0,m,c+u);else{var b=Math.floor(Math.log(l)/Math.LN2);b===1024&&(b=1023),g=l*Math.pow(2,-b),a(g*4503599627370496>>>0,m,c+o),a((f<<31|b+1023<<20|g*1048576&1048575)>>>0,m,c+u)}}}n.writeDoubleLE=t.bind(null,writeUintLE,0,4),n.writeDoubleBE=t.bind(null,writeUintBE,4,0);function i(a,o,u,l,m){var c=a(l,m+o),f=a(l,m+u),g=(f>>31)*2+1,b=f>>>20&2047,v=4294967296*(f&1048575)+c;return b===2047?v?NaN:g*(1/0):b===0?g*5e-324*v:g*Math.pow(2,b-1075)*(v+4503599627370496)}n.readDoubleLE=i.bind(null,readUintLE,0,4),n.readDoubleBE=i.bind(null,readUintBE,4,0)}(),n}function writeUintLE(n,t,i){t[i]=n&255,t[i+1]=n>>>8&255,t[i+2]=n>>>16&255,t[i+3]=n>>>24}function writeUintBE(n,t,i){t[i]=n>>>24,t[i+1]=n>>>16&255,t[i+2]=n>>>8&255,t[i+3]=n&255}function readUintLE(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16|n[t+3]<<24)>>>0}function readUintBE(n,t){return(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(n){}return null}var utf8$2={};(function(n){var t=n;t.length=function(a){for(var o=0,u=0,l=0;l<a.length;++l)u=a.charCodeAt(l),u<128?o+=1:u<2048?o+=2:(u&64512)===55296&&(a.charCodeAt(l+1)&64512)===56320?(++l,o+=4):o+=3;return o},t.read=function(a,o,u){var l=u-o;if(l<1)return"";for(var m=null,c=[],f=0,g;o<u;)g=a[o++],g<128?c[f++]=g:g>191&&g<224?c[f++]=(g&31)<<6|a[o++]&63:g>239&&g<365?(g=((g&7)<<18|(a[o++]&63)<<12|(a[o++]&63)<<6|a[o++]&63)-65536,c[f++]=55296+(g>>10),c[f++]=56320+(g&1023)):c[f++]=(g&15)<<12|(a[o++]&63)<<6|a[o++]&63,f>8191&&((m||(m=[])).push(String.fromCharCode.apply(String,c)),f=0);return m?(f&&m.push(String.fromCharCode.apply(String,c.slice(0,f))),m.join("")):String.fromCharCode.apply(String,c.slice(0,f))},t.write=function(a,o,u){for(var l=u,m,c,f=0;f<a.length;++f)m=a.charCodeAt(f),m<128?o[u++]=m:m<2048?(o[u++]=m>>6|192,o[u++]=m&63|128):(m&64512)===55296&&((c=a.charCodeAt(f+1))&64512)===56320?(m=65536+((m&1023)<<10)+(c&1023),++f,o[u++]=m>>18|240,o[u++]=m>>12&63|128,o[u++]=m>>6&63|128,o[u++]=m&63|128):(o[u++]=m>>12|224,o[u++]=m>>6&63|128,o[u++]=m&63|128);return u-l}})(utf8$2);var pool_1=pool;function pool(n,t,i){var a=i||8192,o=a>>>1,u=null,l=a;return function(c){if(c<1||c>o)return n(c);l+c>a&&(u=n(a),l=0);var f=t.call(u,l,l+=c);return l&7&&(l=(l|7)+1),f}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(n,t){this.lo=n>>>0,this.hi=t>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function n(t){if(t===0)return zero;var i=t<0;i&&(t=-t);var a=t>>>0,o=(t-a)/4294967296>>>0;return i&&(o=~o>>>0,a=~a>>>0,++a>4294967295&&(a=0,++o>4294967295&&(o=0))),new LongBits$2(a,o)};LongBits$2.from=function n(t){if(typeof t=="number")return LongBits$2.fromNumber(t);if(util$5.isString(t))if(util$5.Long)t=util$5.Long.fromString(t);else return LongBits$2.fromNumber(parseInt(t,10));return t.low||t.high?new LongBits$2(t.low>>>0,t.high>>>0):zero};LongBits$2.prototype.toNumber=function n(t){if(!t&&this.hi>>>31){var i=~this.lo+1>>>0,a=~this.hi>>>0;return i||(a=a+1>>>0),-(i+a*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function n(t){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function n(t){return t===zeroHash?zero:new LongBits$2((charCodeAt.call(t,0)|charCodeAt.call(t,1)<<8|charCodeAt.call(t,2)<<16|charCodeAt.call(t,3)<<24)>>>0,(charCodeAt.call(t,4)|charCodeAt.call(t,5)<<8|charCodeAt.call(t,6)<<16|charCodeAt.call(t,7)<<24)>>>0)};LongBits$2.prototype.toHash=function n(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function n(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};LongBits$2.prototype.zzDecode=function n(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};LongBits$2.prototype.length=function n(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,a=this.hi>>>24;return a===0?i===0?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:a<128?9:10};(function(n){var t=n;t.asPromise=aspromise,t.base64=base64$1,t.EventEmitter=eventemitter,t.float=float,t.inquire=inquire_1,t.utf8=utf8$2,t.pool=pool_1,t.LongBits=longbits,t.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),t.global=t.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u},t.isString=function(u){return typeof u=="string"||u instanceof String},t.isObject=function(u){return u&&typeof u=="object"},t.isset=t.isSet=function(u,l){var m=u[l];return m!=null&&u.hasOwnProperty(l)?typeof m!="object"||(Array.isArray(m)?m.length:Object.keys(m).length)>0:!1},t.Buffer=function(){try{var o=t.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(u){return typeof u=="number"?t.Buffer?t._Buffer_allocUnsafe(u):new t.Array(u):t.Buffer?t._Buffer_from(u):typeof Uint8Array=="undefined"?u:new Uint8Array(u)},t.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(u){return u?t.LongBits.from(u).toHash():t.LongBits.zeroHash},t.longFromHash=function(u,l){var m=t.LongBits.fromHash(u);return t.Long?t.Long.fromBits(m.lo,m.hi,l):m.toNumber(Boolean(l))};function i(o,u,l){for(var m=Object.keys(u),c=0;c<m.length;++c)(o[m[c]]===void 0||!l)&&(o[m[c]]=u[m[c]]);return o}t.merge=i,t.lcFirst=function(u){return u.charAt(0).toLowerCase()+u.substring(1)};function a(o){function u(l,m){if(!(this instanceof u))return new u(l,m);Object.defineProperty(this,"message",{get:function(){return l}}),Error.captureStackTrace?Error.captureStackTrace(this,u):Object.defineProperty(this,"stack",{value:new Error().stack||""}),m&&i(this,m)}return(u.prototype=Object.create(Error.prototype)).constructor=u,Object.defineProperty(u.prototype,"name",{get:function(){return o}}),u.prototype.toString=function(){return this.name+": "+this.message},u}t.newError=a,t.ProtocolError=a("ProtocolError"),t.oneOfGetter=function(u){for(var l={},m=0;m<u.length;++m)l[u[m]]=1;return function(){for(var c=Object.keys(this),f=c.length-1;f>-1;--f)if(l[c[f]]===1&&this[c[f]]!==void 0&&this[c[f]]!==null)return c[f]}},t.oneOfSetter=function(u){return function(l){for(var m=0;m<u.length;++m)u[m]!==l&&delete this[u[m]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var o=t.Buffer;if(!o){t._Buffer_from=t._Buffer_allocUnsafe=null;return}t._Buffer_from=o.from!==Uint8Array.from&&o.from||function(l,m){return new o(l,m)},t._Buffer_allocUnsafe=o.allocUnsafe||function(l){return new o(l)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(n,t,i){this.fn=n,this.len=t,this.next=void 0,this.val=i}function noop$3(){}function State(n){this.head=n.head,this.tail=n.tail,this.len=n.len,this.next=n.states}function Writer$1(){this.len=0,this.head=new Op(noop$3,0,0),this.tail=this.head,this.states=null}var create$1=function n(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function n(t){return new util$4.Array(t)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function n(t,i,a){return this.tail=this.tail.next=new Op(t,i,a),this.len+=i,this};function writeByte(n,t,i){t[i]=n&255}function writeVarint32(n,t,i){for(;n>127;)t[i++]=n&127|128,n>>>=7;t[i]=n}function VarintOp(n,t){this.len=n,this.next=void 0,this.val=t}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function n(t){return this.len+=(this.tail=this.tail.next=new VarintOp((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};Writer$1.prototype.int32=function n(t){return t<0?this._push(writeVarint64,10,LongBits$1.fromNumber(t)):this.uint32(t)};Writer$1.prototype.sint32=function n(t){return this.uint32((t<<1^t>>31)>>>0)};function writeVarint64(n,t,i){for(;n.hi;)t[i++]=n.lo&127|128,n.lo=(n.lo>>>7|n.hi<<25)>>>0,n.hi>>>=7;for(;n.lo>127;)t[i++]=n.lo&127|128,n.lo=n.lo>>>7;t[i++]=n.lo}Writer$1.prototype.uint64=function n(t){var i=LongBits$1.from(t);return this._push(writeVarint64,i.length(),i)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function n(t){var i=LongBits$1.from(t).zzEncode();return this._push(writeVarint64,i.length(),i)};Writer$1.prototype.bool=function n(t){return this._push(writeByte,1,t?1:0)};function writeFixed32(n,t,i){t[i]=n&255,t[i+1]=n>>>8&255,t[i+2]=n>>>16&255,t[i+3]=n>>>24}Writer$1.prototype.fixed32=function n(t){return this._push(writeFixed32,4,t>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function n(t){var i=LongBits$1.from(t);return this._push(writeFixed32,4,i.lo)._push(writeFixed32,4,i.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function n(t){return this._push(util$4.float.writeFloatLE,4,t)};Writer$1.prototype.double=function n(t){return this._push(util$4.float.writeDoubleLE,8,t)};var writeBytes=util$4.Array.prototype.set?function n(t,i,a){i.set(t,a)}:function n(t,i,a){for(var o=0;o<t.length;++o)i[a+o]=t[o]};Writer$1.prototype.bytes=function n(t){var i=t.length>>>0;if(!i)return this._push(writeByte,1,0);if(util$4.isString(t)){var a=Writer$1.alloc(i=base64.length(t));base64.decode(t,a,0),t=a}return this.uint32(i)._push(writeBytes,i,t)};Writer$1.prototype.string=function n(t){var i=utf8$1.length(t);return i?this.uint32(i)._push(utf8$1.write,i,t):this._push(writeByte,1,0)};Writer$1.prototype.fork=function n(){return this.states=new State(this),this.head=this.tail=new Op(noop$3,0,0),this.len=0,this};Writer$1.prototype.reset=function n(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$3,0,0),this.len=0),this};Writer$1.prototype.ldelim=function n(){var t=this.head,i=this.tail,a=this.len;return this.reset().uint32(a),a&&(this.tail.next=t.next,this.tail=i,this.len+=a),this};Writer$1.prototype.finish=function n(){for(var t=this.head.next,i=this.constructor.alloc(this.len),a=0;t;)t.fn(t.val,i,a),a+=t.len,t=t.next;return i};Writer$1._configure=function(n){BufferWriter$1=n,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(t,i,a){i.set(t,a)}:function(t,i,a){if(t.copy)t.copy(i,a,0,t.length);else for(var o=0;o<t.length;)i[a++]=t[o++]}};BufferWriter.prototype.bytes=function n(t){util$3.isString(t)&&(t=util$3._Buffer_from(t,"base64"));var i=t.length>>>0;return this.uint32(i),i&&this._push(BufferWriter.writeBytesBuffer,i,t),this};function writeStringBuffer(n,t,i){n.length<40?util$3.utf8.write(n,t,i):t.utf8Write?t.utf8Write(n,i):t.write(n,i)}BufferWriter.prototype.string=function n(t){var i=util$3.Buffer.byteLength(t);return this.uint32(i),i&&this._push(writeStringBuffer,i,t),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(n,t){return RangeError("index out of range: "+n.pos+" + "+(t||1)+" > "+n.len)}function Reader$1(n){this.buf=n,this.pos=0,this.len=n.length}var create_array=typeof Uint8Array!="undefined"?function n(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader$1(t);throw Error("illegal buffer")}:function n(t){if(Array.isArray(t))return new Reader$1(t);throw Error("illegal buffer")},create=function n(){return util$2.Buffer?function(i){return(Reader$1.create=function(o){return util$2.Buffer.isBuffer(o)?new BufferReader$1(o):create_array(o)})(i)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function n(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return t}}();Reader$1.prototype.int32=function n(){return this.uint32()|0};Reader$1.prototype.sint32=function n(){var t=this.uint32();return t>>>1^-(t&1)|0};function readLongVarint(){var n=new LongBits(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(n.lo=(n.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return n;if(n.lo=(n.lo|(this.buf[this.pos]&127)<<28)>>>0,n.hi=(n.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return n;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(n.lo=(n.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return n}return n.lo=(n.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,n}if(this.len-this.pos>4){for(;t<5;++t)if(n.hi=(n.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return n}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(n.hi=(n.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return n}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function n(){return this.uint32()!==0};function readFixed32_end(n,t){return(n[t-4]|n[t-3]<<8|n[t-2]<<16|n[t-1]<<24)>>>0}Reader$1.prototype.fixed32=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};Reader$1.prototype.double=function n(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};Reader$1.prototype.bytes=function n(){var t=this.uint32(),i=this.pos,a=this.pos+t;if(a>this.len)throw indexOutOfRange(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,a):i===a?new this.buf.constructor(0):this._slice.call(this.buf,i,a)};Reader$1.prototype.string=function n(){var t=this.bytes();return utf8.read(t,0,t.length)};Reader$1.prototype.skip=function n(t){if(typeof t=="number"){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(n){switch(n){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(n=this.uint32()&7)!==4;)this.skipType(n);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+n+" at offset "+this.pos)}return this};Reader$1._configure=function(n){BufferReader$1=n,Reader$1.create=create(),BufferReader$1._configure();var t=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(n){Reader.call(this,n)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function n(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(n,t,i){if(typeof n!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=n,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}Service.prototype.rpcCall=function n(t,i,a,o,u){if(!o)throw TypeError("request must be specified");var l=this;if(!u)return util.asPromise(n,l,t,i,a,o);if(!l.rpcImpl){setTimeout(function(){u(Error("already ended"))},0);return}try{return l.rpcImpl(t,i[l.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(c,f){if(c)return l.emit("error",c,t),u(c);if(f===null){l.end(!0);return}if(!(f instanceof a))try{f=a[l.responseDelimited?"decodeDelimited":"decode"](f)}catch(g){return l.emit("error",g,t),u(g)}return l.emit("data",f,t),u(null,f)})}catch(m){l.emit("error",m,t),setTimeout(function(){u(m)},0);return}};Service.prototype.end=function n(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(n){var t=n;t.Service=service})(rpc);var roots={};(function(n){var t=n;t.build="minimal",t.Writer=writer,t.BufferWriter=writer_buffer,t.Reader=reader,t.BufferReader=reader_buffer,t.util=minimal$1,t.rpc=rpc,t.roots=roots,t.configure=i;function i(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}i()})(indexMinimal);var minimal=indexMinimal;(function(n){var t=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(n,"__esModule",{value:!0}),n.UserPacket=n.SpeakerInfo=n.ActiveSpeakerUpdate=n.DataPacket=n.TrackInfo=n.ParticipantInfo=n.Codec=n.Room=n.dataPacket_KindToJSON=n.dataPacket_KindFromJSON=n.DataPacket_Kind=n.participantInfo_StateToJSON=n.participantInfo_StateFromJSON=n.ParticipantInfo_State=n.trackTypeToJSON=n.trackTypeFromJSON=n.TrackType=n.protobufPackage=void 0;const i=t(long),a=t(minimal);n.protobufPackage="livekit";var o;(function(s){s[s.AUDIO=0]="AUDIO",s[s.VIDEO=1]="VIDEO",s[s.DATA=2]="DATA",s[s.UNRECOGNIZED=-1]="UNRECOGNIZED"})(o=n.TrackType||(n.TrackType={}));function u(s){switch(s){case 0:case"AUDIO":return o.AUDIO;case 1:case"VIDEO":return o.VIDEO;case 2:case"DATA":return o.DATA;case-1:case"UNRECOGNIZED":default:return o.UNRECOGNIZED}}n.trackTypeFromJSON=u;function l(s){switch(s){case o.AUDIO:return"AUDIO";case o.VIDEO:return"VIDEO";case o.DATA:return"DATA";default:return"UNKNOWN"}}n.trackTypeToJSON=l;var m;(function(s){s[s.JOINING=0]="JOINING",s[s.JOINED=1]="JOINED",s[s.ACTIVE=2]="ACTIVE",s[s.DISCONNECTED=3]="DISCONNECTED",s[s.UNRECOGNIZED=-1]="UNRECOGNIZED"})(m=n.ParticipantInfo_State||(n.ParticipantInfo_State={}));function c(s){switch(s){case 0:case"JOINING":return m.JOINING;case 1:case"JOINED":return m.JOINED;case 2:case"ACTIVE":return m.ACTIVE;case 3:case"DISCONNECTED":return m.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return m.UNRECOGNIZED}}n.participantInfo_StateFromJSON=c;function f(s){switch(s){case m.JOINING:return"JOINING";case m.JOINED:return"JOINED";case m.ACTIVE:return"ACTIVE";case m.DISCONNECTED:return"DISCONNECTED";default:return"UNKNOWN"}}n.participantInfo_StateToJSON=f;var g;(function(s){s[s.RELIABLE=0]="RELIABLE",s[s.LOSSY=1]="LOSSY",s[s.UNRECOGNIZED=-1]="UNRECOGNIZED"})(g=n.DataPacket_Kind||(n.DataPacket_Kind={}));function b(s){switch(s){case 0:case"RELIABLE":return g.RELIABLE;case 1:case"LOSSY":return g.LOSSY;case-1:case"UNRECOGNIZED":default:return g.UNRECOGNIZED}}n.dataPacket_KindFromJSON=b;function v(s){switch(s){case g.RELIABLE:return"RELIABLE";case g.LOSSY:return"LOSSY";default:return"UNKNOWN"}}n.dataPacket_KindToJSON=v;const _={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:""};n.Room={encode(s,y=a.default.Writer.create()){s.sid!==""&&y.uint32(10).string(s.sid),s.name!==""&&y.uint32(18).string(s.name),s.emptyTimeout!==0&&y.uint32(24).uint32(s.emptyTimeout),s.maxParticipants!==0&&y.uint32(32).uint32(s.maxParticipants),s.creationTime!==0&&y.uint32(40).int64(s.creationTime),s.turnPassword!==""&&y.uint32(50).string(s.turnPassword);for(const k of s.enabledCodecs)n.Codec.encode(k,y.uint32(58).fork()).ldelim();return y},decode(s,y){const k=s instanceof a.default.Reader?s:new a.default.Reader(s);let S=y===void 0?k.len:k.pos+y;const E=Object.assign({},_);for(E.enabledCodecs=[];k.pos<S;){const z=k.uint32();switch(z>>>3){case 1:E.sid=k.string();break;case 2:E.name=k.string();break;case 3:E.emptyTimeout=k.uint32();break;case 4:E.maxParticipants=k.uint32();break;case 5:E.creationTime=h(k.int64());break;case 6:E.turnPassword=k.string();break;case 7:E.enabledCodecs.push(n.Codec.decode(k,k.uint32()));break;default:k.skipType(z&7);break}}return E},fromJSON(s){const y=Object.assign({},_);if(y.enabledCodecs=[],s.sid!==void 0&&s.sid!==null?y.sid=String(s.sid):y.sid="",s.name!==void 0&&s.name!==null?y.name=String(s.name):y.name="",s.emptyTimeout!==void 0&&s.emptyTimeout!==null?y.emptyTimeout=Number(s.emptyTimeout):y.emptyTimeout=0,s.maxParticipants!==void 0&&s.maxParticipants!==null?y.maxParticipants=Number(s.maxParticipants):y.maxParticipants=0,s.creationTime!==void 0&&s.creationTime!==null?y.creationTime=Number(s.creationTime):y.creationTime=0,s.turnPassword!==void 0&&s.turnPassword!==null?y.turnPassword=String(s.turnPassword):y.turnPassword="",s.enabledCodecs!==void 0&&s.enabledCodecs!==null)for(const k of s.enabledCodecs)y.enabledCodecs.push(n.Codec.fromJSON(k));return y},toJSON(s){const y={};return s.sid!==void 0&&(y.sid=s.sid),s.name!==void 0&&(y.name=s.name),s.emptyTimeout!==void 0&&(y.emptyTimeout=s.emptyTimeout),s.maxParticipants!==void 0&&(y.maxParticipants=s.maxParticipants),s.creationTime!==void 0&&(y.creationTime=s.creationTime),s.turnPassword!==void 0&&(y.turnPassword=s.turnPassword),s.enabledCodecs?y.enabledCodecs=s.enabledCodecs.map(k=>k?n.Codec.toJSON(k):void 0):y.enabledCodecs=[],y},fromPartial(s){const y=Object.assign({},_);if(y.enabledCodecs=[],s.sid!==void 0&&s.sid!==null?y.sid=s.sid:y.sid="",s.name!==void 0&&s.name!==null?y.name=s.name:y.name="",s.emptyTimeout!==void 0&&s.emptyTimeout!==null?y.emptyTimeout=s.emptyTimeout:y.emptyTimeout=0,s.maxParticipants!==void 0&&s.maxParticipants!==null?y.maxParticipants=s.maxParticipants:y.maxParticipants=0,s.creationTime!==void 0&&s.creationTime!==null?y.creationTime=s.creationTime:y.creationTime=0,s.turnPassword!==void 0&&s.turnPassword!==null?y.turnPassword=s.turnPassword:y.turnPassword="",s.enabledCodecs!==void 0&&s.enabledCodecs!==null)for(const k of s.enabledCodecs)y.enabledCodecs.push(n.Codec.fromPartial(k));return y}};const x={mime:"",fmtpLine:""};n.Codec={encode(s,y=a.default.Writer.create()){return s.mime!==""&&y.uint32(10).string(s.mime),s.fmtpLine!==""&&y.uint32(18).string(s.fmtpLine),y},decode(s,y){const k=s instanceof a.default.Reader?s:new a.default.Reader(s);let S=y===void 0?k.len:k.pos+y;const E=Object.assign({},x);for(;k.pos<S;){const z=k.uint32();switch(z>>>3){case 1:E.mime=k.string();break;case 2:E.fmtpLine=k.string();break;default:k.skipType(z&7);break}}return E},fromJSON(s){const y=Object.assign({},x);return s.mime!==void 0&&s.mime!==null?y.mime=String(s.mime):y.mime="",s.fmtpLine!==void 0&&s.fmtpLine!==null?y.fmtpLine=String(s.fmtpLine):y.fmtpLine="",y},toJSON(s){const y={};return s.mime!==void 0&&(y.mime=s.mime),s.fmtpLine!==void 0&&(y.fmtpLine=s.fmtpLine),y},fromPartial(s){const y=Object.assign({},x);return s.mime!==void 0&&s.mime!==null?y.mime=s.mime:y.mime="",s.fmtpLine!==void 0&&s.fmtpLine!==null?y.fmtpLine=s.fmtpLine:y.fmtpLine="",y}};const C={sid:"",identity:"",state:0,metadata:"",joinedAt:0,hidden:!1};n.ParticipantInfo={encode(s,y=a.default.Writer.create()){s.sid!==""&&y.uint32(10).string(s.sid),s.identity!==""&&y.uint32(18).string(s.identity),s.state!==0&&y.uint32(24).int32(s.state);for(const k of s.tracks)n.TrackInfo.encode(k,y.uint32(34).fork()).ldelim();return s.metadata!==""&&y.uint32(42).string(s.metadata),s.joinedAt!==0&&y.uint32(48).int64(s.joinedAt),s.hidden===!0&&y.uint32(56).bool(s.hidden),y},decode(s,y){const k=s instanceof a.default.Reader?s:new a.default.Reader(s);let S=y===void 0?k.len:k.pos+y;const E=Object.assign({},C);for(E.tracks=[];k.pos<S;){const z=k.uint32();switch(z>>>3){case 1:E.sid=k.string();break;case 2:E.identity=k.string();break;case 3:E.state=k.int32();break;case 4:E.tracks.push(n.TrackInfo.decode(k,k.uint32()));break;case 5:E.metadata=k.string();break;case 6:E.joinedAt=h(k.int64());break;case 7:E.hidden=k.bool();break;default:k.skipType(z&7);break}}return E},fromJSON(s){const y=Object.assign({},C);if(y.tracks=[],s.sid!==void 0&&s.sid!==null?y.sid=String(s.sid):y.sid="",s.identity!==void 0&&s.identity!==null?y.identity=String(s.identity):y.identity="",s.state!==void 0&&s.state!==null?y.state=c(s.state):y.state=0,s.tracks!==void 0&&s.tracks!==null)for(const k of s.tracks)y.tracks.push(n.TrackInfo.fromJSON(k));return s.metadata!==void 0&&s.metadata!==null?y.metadata=String(s.metadata):y.metadata="",s.joinedAt!==void 0&&s.joinedAt!==null?y.joinedAt=Number(s.joinedAt):y.joinedAt=0,s.hidden!==void 0&&s.hidden!==null?y.hidden=Boolean(s.hidden):y.hidden=!1,y},toJSON(s){const y={};return s.sid!==void 0&&(y.sid=s.sid),s.identity!==void 0&&(y.identity=s.identity),s.state!==void 0&&(y.state=f(s.state)),s.tracks?y.tracks=s.tracks.map(k=>k?n.TrackInfo.toJSON(k):void 0):y.tracks=[],s.metadata!==void 0&&(y.metadata=s.metadata),s.joinedAt!==void 0&&(y.joinedAt=s.joinedAt),s.hidden!==void 0&&(y.hidden=s.hidden),y},fromPartial(s){const y=Object.assign({},C);if(y.tracks=[],s.sid!==void 0&&s.sid!==null?y.sid=s.sid:y.sid="",s.identity!==void 0&&s.identity!==null?y.identity=s.identity:y.identity="",s.state!==void 0&&s.state!==null?y.state=s.state:y.state=0,s.tracks!==void 0&&s.tracks!==null)for(const k of s.tracks)y.tracks.push(n.TrackInfo.fromPartial(k));return s.metadata!==void 0&&s.metadata!==null?y.metadata=s.metadata:y.metadata="",s.joinedAt!==void 0&&s.joinedAt!==null?y.joinedAt=s.joinedAt:y.joinedAt=0,s.hidden!==void 0&&s.hidden!==null?y.hidden=s.hidden:y.hidden=!1,y}};const I={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1};n.TrackInfo={encode(s,y=a.default.Writer.create()){return s.sid!==""&&y.uint32(10).string(s.sid),s.type!==0&&y.uint32(16).int32(s.type),s.name!==""&&y.uint32(26).string(s.name),s.muted===!0&&y.uint32(32).bool(s.muted),s.width!==0&&y.uint32(40).uint32(s.width),s.height!==0&&y.uint32(48).uint32(s.height),s.simulcast===!0&&y.uint32(56).bool(s.simulcast),y},decode(s,y){const k=s instanceof a.default.Reader?s:new a.default.Reader(s);let S=y===void 0?k.len:k.pos+y;const E=Object.assign({},I);for(;k.pos<S;){const z=k.uint32();switch(z>>>3){case 1:E.sid=k.string();break;case 2:E.type=k.int32();break;case 3:E.name=k.string();break;case 4:E.muted=k.bool();break;case 5:E.width=k.uint32();break;case 6:E.height=k.uint32();break;case 7:E.simulcast=k.bool();break;default:k.skipType(z&7);break}}return E},fromJSON(s){const y=Object.assign({},I);return s.sid!==void 0&&s.sid!==null?y.sid=String(s.sid):y.sid="",s.type!==void 0&&s.type!==null?y.type=u(s.type):y.type=0,s.name!==void 0&&s.name!==null?y.name=String(s.name):y.name="",s.muted!==void 0&&s.muted!==null?y.muted=Boolean(s.muted):y.muted=!1,s.width!==void 0&&s.width!==null?y.width=Number(s.width):y.width=0,s.height!==void 0&&s.height!==null?y.height=Number(s.height):y.height=0,s.simulcast!==void 0&&s.simulcast!==null?y.simulcast=Boolean(s.simulcast):y.simulcast=!1,y},toJSON(s){const y={};return s.sid!==void 0&&(y.sid=s.sid),s.type!==void 0&&(y.type=l(s.type)),s.name!==void 0&&(y.name=s.name),s.muted!==void 0&&(y.muted=s.muted),s.width!==void 0&&(y.width=s.width),s.height!==void 0&&(y.height=s.height),s.simulcast!==void 0&&(y.simulcast=s.simulcast),y},fromPartial(s){const y=Object.assign({},I);return s.sid!==void 0&&s.sid!==null?y.sid=s.sid:y.sid="",s.type!==void 0&&s.type!==null?y.type=s.type:y.type=0,s.name!==void 0&&s.name!==null?y.name=s.name:y.name="",s.muted!==void 0&&s.muted!==null?y.muted=s.muted:y.muted=!1,s.width!==void 0&&s.width!==null?y.width=s.width:y.width=0,s.height!==void 0&&s.height!==null?y.height=s.height:y.height=0,s.simulcast!==void 0&&s.simulcast!==null?y.simulcast=s.simulcast:y.simulcast=!1,y}};const U={kind:0};n.DataPacket={encode(s,y=a.default.Writer.create()){return s.kind!==0&&y.uint32(8).int32(s.kind),s.user!==void 0&&n.UserPacket.encode(s.user,y.uint32(18).fork()).ldelim(),s.speaker!==void 0&&n.ActiveSpeakerUpdate.encode(s.speaker,y.uint32(26).fork()).ldelim(),y},decode(s,y){const k=s instanceof a.default.Reader?s:new a.default.Reader(s);let S=y===void 0?k.len:k.pos+y;const E=Object.assign({},U);for(;k.pos<S;){const z=k.uint32();switch(z>>>3){case 1:E.kind=k.int32();break;case 2:E.user=n.UserPacket.decode(k,k.uint32());break;case 3:E.speaker=n.ActiveSpeakerUpdate.decode(k,k.uint32());break;default:k.skipType(z&7);break}}return E},fromJSON(s){const y=Object.assign({},U);return s.kind!==void 0&&s.kind!==null?y.kind=b(s.kind):y.kind=0,s.user!==void 0&&s.user!==null?y.user=n.UserPacket.fromJSON(s.user):y.user=void 0,s.speaker!==void 0&&s.speaker!==null?y.speaker=n.ActiveSpeakerUpdate.fromJSON(s.speaker):y.speaker=void 0,y},toJSON(s){const y={};return s.kind!==void 0&&(y.kind=v(s.kind)),s.user!==void 0&&(y.user=s.user?n.UserPacket.toJSON(s.user):void 0),s.speaker!==void 0&&(y.speaker=s.speaker?n.ActiveSpeakerUpdate.toJSON(s.speaker):void 0),y},fromPartial(s){const y=Object.assign({},U);return s.kind!==void 0&&s.kind!==null?y.kind=s.kind:y.kind=0,s.user!==void 0&&s.user!==null?y.user=n.UserPacket.fromPartial(s.user):y.user=void 0,s.speaker!==void 0&&s.speaker!==null?y.speaker=n.ActiveSpeakerUpdate.fromPartial(s.speaker):y.speaker=void 0,y}};const M={};n.ActiveSpeakerUpdate={encode(s,y=a.default.Writer.create()){for(const k of s.speakers)n.SpeakerInfo.encode(k,y.uint32(10).fork()).ldelim();return y},decode(s,y){const k=s instanceof a.default.Reader?s:new a.default.Reader(s);let S=y===void 0?k.len:k.pos+y;const E=Object.assign({},M);for(E.speakers=[];k.pos<S;){const z=k.uint32();switch(z>>>3){case 1:E.speakers.push(n.SpeakerInfo.decode(k,k.uint32()));break;default:k.skipType(z&7);break}}return E},fromJSON(s){const y=Object.assign({},M);if(y.speakers=[],s.speakers!==void 0&&s.speakers!==null)for(const k of s.speakers)y.speakers.push(n.SpeakerInfo.fromJSON(k));return y},toJSON(s){const y={};return s.speakers?y.speakers=s.speakers.map(k=>k?n.SpeakerInfo.toJSON(k):void 0):y.speakers=[],y},fromPartial(s){const y=Object.assign({},M);if(y.speakers=[],s.speakers!==void 0&&s.speakers!==null)for(const k of s.speakers)y.speakers.push(n.SpeakerInfo.fromPartial(k));return y}};const V={sid:"",level:0,active:!1};n.SpeakerInfo={encode(s,y=a.default.Writer.create()){return s.sid!==""&&y.uint32(10).string(s.sid),s.level!==0&&y.uint32(21).float(s.level),s.active===!0&&y.uint32(24).bool(s.active),y},decode(s,y){const k=s instanceof a.default.Reader?s:new a.default.Reader(s);let S=y===void 0?k.len:k.pos+y;const E=Object.assign({},V);for(;k.pos<S;){const z=k.uint32();switch(z>>>3){case 1:E.sid=k.string();break;case 2:E.level=k.float();break;case 3:E.active=k.bool();break;default:k.skipType(z&7);break}}return E},fromJSON(s){const y=Object.assign({},V);return s.sid!==void 0&&s.sid!==null?y.sid=String(s.sid):y.sid="",s.level!==void 0&&s.level!==null?y.level=Number(s.level):y.level=0,s.active!==void 0&&s.active!==null?y.active=Boolean(s.active):y.active=!1,y},toJSON(s){const y={};return s.sid!==void 0&&(y.sid=s.sid),s.level!==void 0&&(y.level=s.level),s.active!==void 0&&(y.active=s.active),y},fromPartial(s){const y=Object.assign({},V);return s.sid!==void 0&&s.sid!==null?y.sid=s.sid:y.sid="",s.level!==void 0&&s.level!==null?y.level=s.level:y.level=0,s.active!==void 0&&s.active!==null?y.active=s.active:y.active=!1,y}};const T={participantSid:"",destinationSids:""};n.UserPacket={encode(s,y=a.default.Writer.create()){s.participantSid!==""&&y.uint32(10).string(s.participantSid),s.payload.length!==0&&y.uint32(18).bytes(s.payload);for(const k of s.destinationSids)y.uint32(26).string(k);return y},decode(s,y){const k=s instanceof a.default.Reader?s:new a.default.Reader(s);let S=y===void 0?k.len:k.pos+y;const E=Object.assign({},T);for(E.destinationSids=[],E.payload=new Uint8Array;k.pos<S;){const z=k.uint32();switch(z>>>3){case 1:E.participantSid=k.string();break;case 2:E.payload=k.bytes();break;case 3:E.destinationSids.push(k.string());break;default:k.skipType(z&7);break}}return E},fromJSON(s){const y=Object.assign({},T);if(y.destinationSids=[],y.payload=new Uint8Array,s.participantSid!==void 0&&s.participantSid!==null?y.participantSid=String(s.participantSid):y.participantSid="",s.payload!==void 0&&s.payload!==null&&(y.payload=G(s.payload)),s.destinationSids!==void 0&&s.destinationSids!==null)for(const k of s.destinationSids)y.destinationSids.push(String(k));return y},toJSON(s){const y={};return s.participantSid!==void 0&&(y.participantSid=s.participantSid),s.payload!==void 0&&(y.payload=X(s.payload!==void 0?s.payload:new Uint8Array)),s.destinationSids?y.destinationSids=s.destinationSids.map(k=>k):y.destinationSids=[],y},fromPartial(s){const y=Object.assign({},T);if(y.destinationSids=[],s.participantSid!==void 0&&s.participantSid!==null?y.participantSid=s.participantSid:y.participantSid="",s.payload!==void 0&&s.payload!==null?y.payload=s.payload:y.payload=new Uint8Array,s.destinationSids!==void 0&&s.destinationSids!==null)for(const k of s.destinationSids)y.destinationSids.push(k);return y}};var $=(()=>{if(typeof $!="undefined")return $;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();const B=$.atob||(s=>$.Buffer.from(s,"base64").toString("binary"));function G(s){const y=B(s),k=new Uint8Array(y.length);for(let S=0;S<y.length;++S)k[S]=y.charCodeAt(S);return k}const H=$.btoa||(s=>$.Buffer.from(s,"binary").toString("base64"));function X(s){const y=[];for(const k of s)y.push(String.fromCharCode(k));return H(y.join(""))}function h(s){if(s.gt(Number.MAX_SAFE_INTEGER))throw new $.Error("Value is larger than Number.MAX_SAFE_INTEGER");return s.toNumber()}a.default.util.Long!==i.default&&(a.default.util.Long=i.default,a.default.configure())})(livekit_models);var livekit_rtc={};(function(n){var t=commonjsGlobal&&commonjsGlobal.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(n,"__esModule",{value:!0}),n.SpeakersChanged=n.ICEServer=n.LeaveRequest=n.UpdateTrackSettings=n.UpdateSubscription=n.ParticipantUpdate=n.SessionDescription=n.TrackPublishedResponse=n.JoinResponse=n.SetSimulcastLayers=n.MuteTrackRequest=n.TrickleRequest=n.AddTrackRequest=n.SignalResponse=n.SignalRequest=n.videoQualityToJSON=n.videoQualityFromJSON=n.VideoQuality=n.signalTargetToJSON=n.signalTargetFromJSON=n.SignalTarget=n.protobufPackage=void 0;const i=t(long),a=t(minimal),o=livekit_models;n.protobufPackage="livekit";var u;(function(h){h[h.PUBLISHER=0]="PUBLISHER",h[h.SUBSCRIBER=1]="SUBSCRIBER",h[h.UNRECOGNIZED=-1]="UNRECOGNIZED"})(u=n.SignalTarget||(n.SignalTarget={}));function l(h){switch(h){case 0:case"PUBLISHER":return u.PUBLISHER;case 1:case"SUBSCRIBER":return u.SUBSCRIBER;case-1:case"UNRECOGNIZED":default:return u.UNRECOGNIZED}}n.signalTargetFromJSON=l;function m(h){switch(h){case u.PUBLISHER:return"PUBLISHER";case u.SUBSCRIBER:return"SUBSCRIBER";default:return"UNKNOWN"}}n.signalTargetToJSON=m;var c;(function(h){h[h.LOW=0]="LOW",h[h.MEDIUM=1]="MEDIUM",h[h.HIGH=2]="HIGH",h[h.UNRECOGNIZED=-1]="UNRECOGNIZED"})(c=n.VideoQuality||(n.VideoQuality={}));function f(h){switch(h){case 0:case"LOW":return c.LOW;case 1:case"MEDIUM":return c.MEDIUM;case 2:case"HIGH":return c.HIGH;case-1:case"UNRECOGNIZED":default:return c.UNRECOGNIZED}}n.videoQualityFromJSON=f;function g(h){switch(h){case c.LOW:return"LOW";case c.MEDIUM:return"MEDIUM";case c.HIGH:return"HIGH";default:return"UNKNOWN"}}n.videoQualityToJSON=g;const b={};n.SignalRequest={encode(h,s=a.default.Writer.create()){return h.offer!==void 0&&n.SessionDescription.encode(h.offer,s.uint32(10).fork()).ldelim(),h.answer!==void 0&&n.SessionDescription.encode(h.answer,s.uint32(18).fork()).ldelim(),h.trickle!==void 0&&n.TrickleRequest.encode(h.trickle,s.uint32(26).fork()).ldelim(),h.addTrack!==void 0&&n.AddTrackRequest.encode(h.addTrack,s.uint32(34).fork()).ldelim(),h.mute!==void 0&&n.MuteTrackRequest.encode(h.mute,s.uint32(42).fork()).ldelim(),h.subscription!==void 0&&n.UpdateSubscription.encode(h.subscription,s.uint32(50).fork()).ldelim(),h.trackSetting!==void 0&&n.UpdateTrackSettings.encode(h.trackSetting,s.uint32(58).fork()).ldelim(),h.leave!==void 0&&n.LeaveRequest.encode(h.leave,s.uint32(66).fork()).ldelim(),h.simulcast!==void 0&&n.SetSimulcastLayers.encode(h.simulcast,s.uint32(74).fork()).ldelim(),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},b);for(;y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.offer=n.SessionDescription.decode(y,y.uint32());break;case 2:S.answer=n.SessionDescription.decode(y,y.uint32());break;case 3:S.trickle=n.TrickleRequest.decode(y,y.uint32());break;case 4:S.addTrack=n.AddTrackRequest.decode(y,y.uint32());break;case 5:S.mute=n.MuteTrackRequest.decode(y,y.uint32());break;case 6:S.subscription=n.UpdateSubscription.decode(y,y.uint32());break;case 7:S.trackSetting=n.UpdateTrackSettings.decode(y,y.uint32());break;case 8:S.leave=n.LeaveRequest.decode(y,y.uint32());break;case 9:S.simulcast=n.SetSimulcastLayers.decode(y,y.uint32());break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},b);return h.offer!==void 0&&h.offer!==null?s.offer=n.SessionDescription.fromJSON(h.offer):s.offer=void 0,h.answer!==void 0&&h.answer!==null?s.answer=n.SessionDescription.fromJSON(h.answer):s.answer=void 0,h.trickle!==void 0&&h.trickle!==null?s.trickle=n.TrickleRequest.fromJSON(h.trickle):s.trickle=void 0,h.addTrack!==void 0&&h.addTrack!==null?s.addTrack=n.AddTrackRequest.fromJSON(h.addTrack):s.addTrack=void 0,h.mute!==void 0&&h.mute!==null?s.mute=n.MuteTrackRequest.fromJSON(h.mute):s.mute=void 0,h.subscription!==void 0&&h.subscription!==null?s.subscription=n.UpdateSubscription.fromJSON(h.subscription):s.subscription=void 0,h.trackSetting!==void 0&&h.trackSetting!==null?s.trackSetting=n.UpdateTrackSettings.fromJSON(h.trackSetting):s.trackSetting=void 0,h.leave!==void 0&&h.leave!==null?s.leave=n.LeaveRequest.fromJSON(h.leave):s.leave=void 0,h.simulcast!==void 0&&h.simulcast!==null?s.simulcast=n.SetSimulcastLayers.fromJSON(h.simulcast):s.simulcast=void 0,s},toJSON(h){const s={};return h.offer!==void 0&&(s.offer=h.offer?n.SessionDescription.toJSON(h.offer):void 0),h.answer!==void 0&&(s.answer=h.answer?n.SessionDescription.toJSON(h.answer):void 0),h.trickle!==void 0&&(s.trickle=h.trickle?n.TrickleRequest.toJSON(h.trickle):void 0),h.addTrack!==void 0&&(s.addTrack=h.addTrack?n.AddTrackRequest.toJSON(h.addTrack):void 0),h.mute!==void 0&&(s.mute=h.mute?n.MuteTrackRequest.toJSON(h.mute):void 0),h.subscription!==void 0&&(s.subscription=h.subscription?n.UpdateSubscription.toJSON(h.subscription):void 0),h.trackSetting!==void 0&&(s.trackSetting=h.trackSetting?n.UpdateTrackSettings.toJSON(h.trackSetting):void 0),h.leave!==void 0&&(s.leave=h.leave?n.LeaveRequest.toJSON(h.leave):void 0),h.simulcast!==void 0&&(s.simulcast=h.simulcast?n.SetSimulcastLayers.toJSON(h.simulcast):void 0),s},fromPartial(h){const s=Object.assign({},b);return h.offer!==void 0&&h.offer!==null?s.offer=n.SessionDescription.fromPartial(h.offer):s.offer=void 0,h.answer!==void 0&&h.answer!==null?s.answer=n.SessionDescription.fromPartial(h.answer):s.answer=void 0,h.trickle!==void 0&&h.trickle!==null?s.trickle=n.TrickleRequest.fromPartial(h.trickle):s.trickle=void 0,h.addTrack!==void 0&&h.addTrack!==null?s.addTrack=n.AddTrackRequest.fromPartial(h.addTrack):s.addTrack=void 0,h.mute!==void 0&&h.mute!==null?s.mute=n.MuteTrackRequest.fromPartial(h.mute):s.mute=void 0,h.subscription!==void 0&&h.subscription!==null?s.subscription=n.UpdateSubscription.fromPartial(h.subscription):s.subscription=void 0,h.trackSetting!==void 0&&h.trackSetting!==null?s.trackSetting=n.UpdateTrackSettings.fromPartial(h.trackSetting):s.trackSetting=void 0,h.leave!==void 0&&h.leave!==null?s.leave=n.LeaveRequest.fromPartial(h.leave):s.leave=void 0,h.simulcast!==void 0&&h.simulcast!==null?s.simulcast=n.SetSimulcastLayers.fromPartial(h.simulcast):s.simulcast=void 0,s}};const v={};n.SignalResponse={encode(h,s=a.default.Writer.create()){return h.join!==void 0&&n.JoinResponse.encode(h.join,s.uint32(10).fork()).ldelim(),h.answer!==void 0&&n.SessionDescription.encode(h.answer,s.uint32(18).fork()).ldelim(),h.offer!==void 0&&n.SessionDescription.encode(h.offer,s.uint32(26).fork()).ldelim(),h.trickle!==void 0&&n.TrickleRequest.encode(h.trickle,s.uint32(34).fork()).ldelim(),h.update!==void 0&&n.ParticipantUpdate.encode(h.update,s.uint32(42).fork()).ldelim(),h.trackPublished!==void 0&&n.TrackPublishedResponse.encode(h.trackPublished,s.uint32(50).fork()).ldelim(),h.leave!==void 0&&n.LeaveRequest.encode(h.leave,s.uint32(66).fork()).ldelim(),h.mute!==void 0&&n.MuteTrackRequest.encode(h.mute,s.uint32(74).fork()).ldelim(),h.speakersChanged!==void 0&&n.SpeakersChanged.encode(h.speakersChanged,s.uint32(82).fork()).ldelim(),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},v);for(;y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.join=n.JoinResponse.decode(y,y.uint32());break;case 2:S.answer=n.SessionDescription.decode(y,y.uint32());break;case 3:S.offer=n.SessionDescription.decode(y,y.uint32());break;case 4:S.trickle=n.TrickleRequest.decode(y,y.uint32());break;case 5:S.update=n.ParticipantUpdate.decode(y,y.uint32());break;case 6:S.trackPublished=n.TrackPublishedResponse.decode(y,y.uint32());break;case 8:S.leave=n.LeaveRequest.decode(y,y.uint32());break;case 9:S.mute=n.MuteTrackRequest.decode(y,y.uint32());break;case 10:S.speakersChanged=n.SpeakersChanged.decode(y,y.uint32());break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},v);return h.join!==void 0&&h.join!==null?s.join=n.JoinResponse.fromJSON(h.join):s.join=void 0,h.answer!==void 0&&h.answer!==null?s.answer=n.SessionDescription.fromJSON(h.answer):s.answer=void 0,h.offer!==void 0&&h.offer!==null?s.offer=n.SessionDescription.fromJSON(h.offer):s.offer=void 0,h.trickle!==void 0&&h.trickle!==null?s.trickle=n.TrickleRequest.fromJSON(h.trickle):s.trickle=void 0,h.update!==void 0&&h.update!==null?s.update=n.ParticipantUpdate.fromJSON(h.update):s.update=void 0,h.trackPublished!==void 0&&h.trackPublished!==null?s.trackPublished=n.TrackPublishedResponse.fromJSON(h.trackPublished):s.trackPublished=void 0,h.leave!==void 0&&h.leave!==null?s.leave=n.LeaveRequest.fromJSON(h.leave):s.leave=void 0,h.mute!==void 0&&h.mute!==null?s.mute=n.MuteTrackRequest.fromJSON(h.mute):s.mute=void 0,h.speakersChanged!==void 0&&h.speakersChanged!==null?s.speakersChanged=n.SpeakersChanged.fromJSON(h.speakersChanged):s.speakersChanged=void 0,s},toJSON(h){const s={};return h.join!==void 0&&(s.join=h.join?n.JoinResponse.toJSON(h.join):void 0),h.answer!==void 0&&(s.answer=h.answer?n.SessionDescription.toJSON(h.answer):void 0),h.offer!==void 0&&(s.offer=h.offer?n.SessionDescription.toJSON(h.offer):void 0),h.trickle!==void 0&&(s.trickle=h.trickle?n.TrickleRequest.toJSON(h.trickle):void 0),h.update!==void 0&&(s.update=h.update?n.ParticipantUpdate.toJSON(h.update):void 0),h.trackPublished!==void 0&&(s.trackPublished=h.trackPublished?n.TrackPublishedResponse.toJSON(h.trackPublished):void 0),h.leave!==void 0&&(s.leave=h.leave?n.LeaveRequest.toJSON(h.leave):void 0),h.mute!==void 0&&(s.mute=h.mute?n.MuteTrackRequest.toJSON(h.mute):void 0),h.speakersChanged!==void 0&&(s.speakersChanged=h.speakersChanged?n.SpeakersChanged.toJSON(h.speakersChanged):void 0),s},fromPartial(h){const s=Object.assign({},v);return h.join!==void 0&&h.join!==null?s.join=n.JoinResponse.fromPartial(h.join):s.join=void 0,h.answer!==void 0&&h.answer!==null?s.answer=n.SessionDescription.fromPartial(h.answer):s.answer=void 0,h.offer!==void 0&&h.offer!==null?s.offer=n.SessionDescription.fromPartial(h.offer):s.offer=void 0,h.trickle!==void 0&&h.trickle!==null?s.trickle=n.TrickleRequest.fromPartial(h.trickle):s.trickle=void 0,h.update!==void 0&&h.update!==null?s.update=n.ParticipantUpdate.fromPartial(h.update):s.update=void 0,h.trackPublished!==void 0&&h.trackPublished!==null?s.trackPublished=n.TrackPublishedResponse.fromPartial(h.trackPublished):s.trackPublished=void 0,h.leave!==void 0&&h.leave!==null?s.leave=n.LeaveRequest.fromPartial(h.leave):s.leave=void 0,h.mute!==void 0&&h.mute!==null?s.mute=n.MuteTrackRequest.fromPartial(h.mute):s.mute=void 0,h.speakersChanged!==void 0&&h.speakersChanged!==null?s.speakersChanged=n.SpeakersChanged.fromPartial(h.speakersChanged):s.speakersChanged=void 0,s}};const _={cid:"",name:"",type:0,width:0,height:0,muted:!1};n.AddTrackRequest={encode(h,s=a.default.Writer.create()){return h.cid!==""&&s.uint32(10).string(h.cid),h.name!==""&&s.uint32(18).string(h.name),h.type!==0&&s.uint32(24).int32(h.type),h.width!==0&&s.uint32(32).uint32(h.width),h.height!==0&&s.uint32(40).uint32(h.height),h.muted===!0&&s.uint32(48).bool(h.muted),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},_);for(;y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.cid=y.string();break;case 2:S.name=y.string();break;case 3:S.type=y.int32();break;case 4:S.width=y.uint32();break;case 5:S.height=y.uint32();break;case 6:S.muted=y.bool();break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},_);return h.cid!==void 0&&h.cid!==null?s.cid=String(h.cid):s.cid="",h.name!==void 0&&h.name!==null?s.name=String(h.name):s.name="",h.type!==void 0&&h.type!==null?s.type=o.trackTypeFromJSON(h.type):s.type=0,h.width!==void 0&&h.width!==null?s.width=Number(h.width):s.width=0,h.height!==void 0&&h.height!==null?s.height=Number(h.height):s.height=0,h.muted!==void 0&&h.muted!==null?s.muted=Boolean(h.muted):s.muted=!1,s},toJSON(h){const s={};return h.cid!==void 0&&(s.cid=h.cid),h.name!==void 0&&(s.name=h.name),h.type!==void 0&&(s.type=o.trackTypeToJSON(h.type)),h.width!==void 0&&(s.width=h.width),h.height!==void 0&&(s.height=h.height),h.muted!==void 0&&(s.muted=h.muted),s},fromPartial(h){const s=Object.assign({},_);return h.cid!==void 0&&h.cid!==null?s.cid=h.cid:s.cid="",h.name!==void 0&&h.name!==null?s.name=h.name:s.name="",h.type!==void 0&&h.type!==null?s.type=h.type:s.type=0,h.width!==void 0&&h.width!==null?s.width=h.width:s.width=0,h.height!==void 0&&h.height!==null?s.height=h.height:s.height=0,h.muted!==void 0&&h.muted!==null?s.muted=h.muted:s.muted=!1,s}};const x={candidateInit:"",target:0};n.TrickleRequest={encode(h,s=a.default.Writer.create()){return h.candidateInit!==""&&s.uint32(10).string(h.candidateInit),h.target!==0&&s.uint32(16).int32(h.target),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},x);for(;y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.candidateInit=y.string();break;case 2:S.target=y.int32();break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},x);return h.candidateInit!==void 0&&h.candidateInit!==null?s.candidateInit=String(h.candidateInit):s.candidateInit="",h.target!==void 0&&h.target!==null?s.target=l(h.target):s.target=0,s},toJSON(h){const s={};return h.candidateInit!==void 0&&(s.candidateInit=h.candidateInit),h.target!==void 0&&(s.target=m(h.target)),s},fromPartial(h){const s=Object.assign({},x);return h.candidateInit!==void 0&&h.candidateInit!==null?s.candidateInit=h.candidateInit:s.candidateInit="",h.target!==void 0&&h.target!==null?s.target=h.target:s.target=0,s}};const C={sid:"",muted:!1};n.MuteTrackRequest={encode(h,s=a.default.Writer.create()){return h.sid!==""&&s.uint32(10).string(h.sid),h.muted===!0&&s.uint32(16).bool(h.muted),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},C);for(;y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.sid=y.string();break;case 2:S.muted=y.bool();break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},C);return h.sid!==void 0&&h.sid!==null?s.sid=String(h.sid):s.sid="",h.muted!==void 0&&h.muted!==null?s.muted=Boolean(h.muted):s.muted=!1,s},toJSON(h){const s={};return h.sid!==void 0&&(s.sid=h.sid),h.muted!==void 0&&(s.muted=h.muted),s},fromPartial(h){const s=Object.assign({},C);return h.sid!==void 0&&h.sid!==null?s.sid=h.sid:s.sid="",h.muted!==void 0&&h.muted!==null?s.muted=h.muted:s.muted=!1,s}};const I={trackSid:"",layers:0};n.SetSimulcastLayers={encode(h,s=a.default.Writer.create()){h.trackSid!==""&&s.uint32(10).string(h.trackSid),s.uint32(18).fork();for(const y of h.layers)s.int32(y);return s.ldelim(),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},I);for(S.layers=[];y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.trackSid=y.string();break;case 2:if((E&7)===2){const z=y.uint32()+y.pos;for(;y.pos<z;)S.layers.push(y.int32())}else S.layers.push(y.int32());break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},I);if(s.layers=[],h.trackSid!==void 0&&h.trackSid!==null?s.trackSid=String(h.trackSid):s.trackSid="",h.layers!==void 0&&h.layers!==null)for(const y of h.layers)s.layers.push(f(y));return s},toJSON(h){const s={};return h.trackSid!==void 0&&(s.trackSid=h.trackSid),h.layers?s.layers=h.layers.map(y=>g(y)):s.layers=[],s},fromPartial(h){const s=Object.assign({},I);if(s.layers=[],h.trackSid!==void 0&&h.trackSid!==null?s.trackSid=h.trackSid:s.trackSid="",h.layers!==void 0&&h.layers!==null)for(const y of h.layers)s.layers.push(y);return s}};const U={serverVersion:"",subscriberPrimary:!1};n.JoinResponse={encode(h,s=a.default.Writer.create()){h.room!==void 0&&o.Room.encode(h.room,s.uint32(10).fork()).ldelim(),h.participant!==void 0&&o.ParticipantInfo.encode(h.participant,s.uint32(18).fork()).ldelim();for(const y of h.otherParticipants)o.ParticipantInfo.encode(y,s.uint32(26).fork()).ldelim();h.serverVersion!==""&&s.uint32(34).string(h.serverVersion);for(const y of h.iceServers)n.ICEServer.encode(y,s.uint32(42).fork()).ldelim();return h.subscriberPrimary===!0&&s.uint32(48).bool(h.subscriberPrimary),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},U);for(S.otherParticipants=[],S.iceServers=[];y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.room=o.Room.decode(y,y.uint32());break;case 2:S.participant=o.ParticipantInfo.decode(y,y.uint32());break;case 3:S.otherParticipants.push(o.ParticipantInfo.decode(y,y.uint32()));break;case 4:S.serverVersion=y.string();break;case 5:S.iceServers.push(n.ICEServer.decode(y,y.uint32()));break;case 6:S.subscriberPrimary=y.bool();break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},U);if(s.otherParticipants=[],s.iceServers=[],h.room!==void 0&&h.room!==null?s.room=o.Room.fromJSON(h.room):s.room=void 0,h.participant!==void 0&&h.participant!==null?s.participant=o.ParticipantInfo.fromJSON(h.participant):s.participant=void 0,h.otherParticipants!==void 0&&h.otherParticipants!==null)for(const y of h.otherParticipants)s.otherParticipants.push(o.ParticipantInfo.fromJSON(y));if(h.serverVersion!==void 0&&h.serverVersion!==null?s.serverVersion=String(h.serverVersion):s.serverVersion="",h.iceServers!==void 0&&h.iceServers!==null)for(const y of h.iceServers)s.iceServers.push(n.ICEServer.fromJSON(y));return h.subscriberPrimary!==void 0&&h.subscriberPrimary!==null?s.subscriberPrimary=Boolean(h.subscriberPrimary):s.subscriberPrimary=!1,s},toJSON(h){const s={};return h.room!==void 0&&(s.room=h.room?o.Room.toJSON(h.room):void 0),h.participant!==void 0&&(s.participant=h.participant?o.ParticipantInfo.toJSON(h.participant):void 0),h.otherParticipants?s.otherParticipants=h.otherParticipants.map(y=>y?o.ParticipantInfo.toJSON(y):void 0):s.otherParticipants=[],h.serverVersion!==void 0&&(s.serverVersion=h.serverVersion),h.iceServers?s.iceServers=h.iceServers.map(y=>y?n.ICEServer.toJSON(y):void 0):s.iceServers=[],h.subscriberPrimary!==void 0&&(s.subscriberPrimary=h.subscriberPrimary),s},fromPartial(h){const s=Object.assign({},U);if(s.otherParticipants=[],s.iceServers=[],h.room!==void 0&&h.room!==null?s.room=o.Room.fromPartial(h.room):s.room=void 0,h.participant!==void 0&&h.participant!==null?s.participant=o.ParticipantInfo.fromPartial(h.participant):s.participant=void 0,h.otherParticipants!==void 0&&h.otherParticipants!==null)for(const y of h.otherParticipants)s.otherParticipants.push(o.ParticipantInfo.fromPartial(y));if(h.serverVersion!==void 0&&h.serverVersion!==null?s.serverVersion=h.serverVersion:s.serverVersion="",h.iceServers!==void 0&&h.iceServers!==null)for(const y of h.iceServers)s.iceServers.push(n.ICEServer.fromPartial(y));return h.subscriberPrimary!==void 0&&h.subscriberPrimary!==null?s.subscriberPrimary=h.subscriberPrimary:s.subscriberPrimary=!1,s}};const M={cid:""};n.TrackPublishedResponse={encode(h,s=a.default.Writer.create()){return h.cid!==""&&s.uint32(10).string(h.cid),h.track!==void 0&&o.TrackInfo.encode(h.track,s.uint32(18).fork()).ldelim(),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},M);for(;y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.cid=y.string();break;case 2:S.track=o.TrackInfo.decode(y,y.uint32());break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},M);return h.cid!==void 0&&h.cid!==null?s.cid=String(h.cid):s.cid="",h.track!==void 0&&h.track!==null?s.track=o.TrackInfo.fromJSON(h.track):s.track=void 0,s},toJSON(h){const s={};return h.cid!==void 0&&(s.cid=h.cid),h.track!==void 0&&(s.track=h.track?o.TrackInfo.toJSON(h.track):void 0),s},fromPartial(h){const s=Object.assign({},M);return h.cid!==void 0&&h.cid!==null?s.cid=h.cid:s.cid="",h.track!==void 0&&h.track!==null?s.track=o.TrackInfo.fromPartial(h.track):s.track=void 0,s}};const V={type:"",sdp:""};n.SessionDescription={encode(h,s=a.default.Writer.create()){return h.type!==""&&s.uint32(10).string(h.type),h.sdp!==""&&s.uint32(18).string(h.sdp),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},V);for(;y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.type=y.string();break;case 2:S.sdp=y.string();break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},V);return h.type!==void 0&&h.type!==null?s.type=String(h.type):s.type="",h.sdp!==void 0&&h.sdp!==null?s.sdp=String(h.sdp):s.sdp="",s},toJSON(h){const s={};return h.type!==void 0&&(s.type=h.type),h.sdp!==void 0&&(s.sdp=h.sdp),s},fromPartial(h){const s=Object.assign({},V);return h.type!==void 0&&h.type!==null?s.type=h.type:s.type="",h.sdp!==void 0&&h.sdp!==null?s.sdp=h.sdp:s.sdp="",s}};const T={};n.ParticipantUpdate={encode(h,s=a.default.Writer.create()){for(const y of h.participants)o.ParticipantInfo.encode(y,s.uint32(10).fork()).ldelim();return s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},T);for(S.participants=[];y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.participants.push(o.ParticipantInfo.decode(y,y.uint32()));break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},T);if(s.participants=[],h.participants!==void 0&&h.participants!==null)for(const y of h.participants)s.participants.push(o.ParticipantInfo.fromJSON(y));return s},toJSON(h){const s={};return h.participants?s.participants=h.participants.map(y=>y?o.ParticipantInfo.toJSON(y):void 0):s.participants=[],s},fromPartial(h){const s=Object.assign({},T);if(s.participants=[],h.participants!==void 0&&h.participants!==null)for(const y of h.participants)s.participants.push(o.ParticipantInfo.fromPartial(y));return s}};const $={trackSids:"",subscribe:!1};n.UpdateSubscription={encode(h,s=a.default.Writer.create()){for(const y of h.trackSids)s.uint32(10).string(y);return h.subscribe===!0&&s.uint32(16).bool(h.subscribe),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},$);for(S.trackSids=[];y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.trackSids.push(y.string());break;case 2:S.subscribe=y.bool();break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},$);if(s.trackSids=[],h.trackSids!==void 0&&h.trackSids!==null)for(const y of h.trackSids)s.trackSids.push(String(y));return h.subscribe!==void 0&&h.subscribe!==null?s.subscribe=Boolean(h.subscribe):s.subscribe=!1,s},toJSON(h){const s={};return h.trackSids?s.trackSids=h.trackSids.map(y=>y):s.trackSids=[],h.subscribe!==void 0&&(s.subscribe=h.subscribe),s},fromPartial(h){const s=Object.assign({},$);if(s.trackSids=[],h.trackSids!==void 0&&h.trackSids!==null)for(const y of h.trackSids)s.trackSids.push(y);return h.subscribe!==void 0&&h.subscribe!==null?s.subscribe=h.subscribe:s.subscribe=!1,s}};const B={trackSids:"",disabled:!1,quality:0};n.UpdateTrackSettings={encode(h,s=a.default.Writer.create()){for(const y of h.trackSids)s.uint32(10).string(y);return h.disabled===!0&&s.uint32(24).bool(h.disabled),h.quality!==0&&s.uint32(32).int32(h.quality),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},B);for(S.trackSids=[];y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.trackSids.push(y.string());break;case 3:S.disabled=y.bool();break;case 4:S.quality=y.int32();break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},B);if(s.trackSids=[],h.trackSids!==void 0&&h.trackSids!==null)for(const y of h.trackSids)s.trackSids.push(String(y));return h.disabled!==void 0&&h.disabled!==null?s.disabled=Boolean(h.disabled):s.disabled=!1,h.quality!==void 0&&h.quality!==null?s.quality=f(h.quality):s.quality=0,s},toJSON(h){const s={};return h.trackSids?s.trackSids=h.trackSids.map(y=>y):s.trackSids=[],h.disabled!==void 0&&(s.disabled=h.disabled),h.quality!==void 0&&(s.quality=g(h.quality)),s},fromPartial(h){const s=Object.assign({},B);if(s.trackSids=[],h.trackSids!==void 0&&h.trackSids!==null)for(const y of h.trackSids)s.trackSids.push(y);return h.disabled!==void 0&&h.disabled!==null?s.disabled=h.disabled:s.disabled=!1,h.quality!==void 0&&h.quality!==null?s.quality=h.quality:s.quality=0,s}};const G={canReconnect:!1};n.LeaveRequest={encode(h,s=a.default.Writer.create()){return h.canReconnect===!0&&s.uint32(8).bool(h.canReconnect),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},G);for(;y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.canReconnect=y.bool();break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},G);return h.canReconnect!==void 0&&h.canReconnect!==null?s.canReconnect=Boolean(h.canReconnect):s.canReconnect=!1,s},toJSON(h){const s={};return h.canReconnect!==void 0&&(s.canReconnect=h.canReconnect),s},fromPartial(h){const s=Object.assign({},G);return h.canReconnect!==void 0&&h.canReconnect!==null?s.canReconnect=h.canReconnect:s.canReconnect=!1,s}};const H={urls:"",username:"",credential:""};n.ICEServer={encode(h,s=a.default.Writer.create()){for(const y of h.urls)s.uint32(10).string(y);return h.username!==""&&s.uint32(18).string(h.username),h.credential!==""&&s.uint32(26).string(h.credential),s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},H);for(S.urls=[];y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.urls.push(y.string());break;case 2:S.username=y.string();break;case 3:S.credential=y.string();break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},H);if(s.urls=[],h.urls!==void 0&&h.urls!==null)for(const y of h.urls)s.urls.push(String(y));return h.username!==void 0&&h.username!==null?s.username=String(h.username):s.username="",h.credential!==void 0&&h.credential!==null?s.credential=String(h.credential):s.credential="",s},toJSON(h){const s={};return h.urls?s.urls=h.urls.map(y=>y):s.urls=[],h.username!==void 0&&(s.username=h.username),h.credential!==void 0&&(s.credential=h.credential),s},fromPartial(h){const s=Object.assign({},H);if(s.urls=[],h.urls!==void 0&&h.urls!==null)for(const y of h.urls)s.urls.push(y);return h.username!==void 0&&h.username!==null?s.username=h.username:s.username="",h.credential!==void 0&&h.credential!==null?s.credential=h.credential:s.credential="",s}};const X={};n.SpeakersChanged={encode(h,s=a.default.Writer.create()){for(const y of h.speakers)o.SpeakerInfo.encode(y,s.uint32(10).fork()).ldelim();return s},decode(h,s){const y=h instanceof a.default.Reader?h:new a.default.Reader(h);let k=s===void 0?y.len:y.pos+s;const S=Object.assign({},X);for(S.speakers=[];y.pos<k;){const E=y.uint32();switch(E>>>3){case 1:S.speakers.push(o.SpeakerInfo.decode(y,y.uint32()));break;default:y.skipType(E&7);break}}return S},fromJSON(h){const s=Object.assign({},X);if(s.speakers=[],h.speakers!==void 0&&h.speakers!==null)for(const y of h.speakers)s.speakers.push(o.SpeakerInfo.fromJSON(y));return s},toJSON(h){const s={};return h.speakers?s.speakers=h.speakers.map(y=>y?o.SpeakerInfo.toJSON(y):void 0):s.speakers=[],s},fromPartial(h){const s=Object.assign({},X);if(s.speakers=[],h.speakers!==void 0&&h.speakers!==null)for(const y of h.speakers)s.speakers.push(o.SpeakerInfo.fromPartial(y));return s}},a.default.util.Long!==i.default&&(a.default.util.Long=i.default,a.default.configure())})(livekit_rtc);var LocalParticipant$1={},loglevel={exports:{}};(function(n){(function(t,i){n.exports?n.exports=i():t.log=i()})(commonjsGlobal,function(){var t=function(){},i="undefined",a=typeof window!==i&&typeof window.navigator!==i&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"];function u(C,I){var U=C[I];if(typeof U.bind=="function")return U.bind(C);try{return Function.prototype.bind.call(U,C)}catch{return function(){return Function.prototype.apply.apply(U,[C,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function m(C){return C==="debug"&&(C="log"),typeof console===i?!1:C==="trace"&&a?l:console[C]!==void 0?u(console,C):console.log!==void 0?u(console,"log"):t}function c(C,I){for(var U=0;U<o.length;U++){var M=o[U];this[M]=U<C?t:this.methodFactory(M,C,I)}this.log=this.debug}function f(C,I,U){return function(){typeof console!==i&&(c.call(this,I,U),this[C].apply(this,arguments))}}function g(C,I,U){return m(C)||f.apply(this,arguments)}function b(C,I,U){var M=this,V;I=I==null?"WARN":I;var T="loglevel";typeof C=="string"?T+=":"+C:typeof C=="symbol"&&(T=void 0);function $(X){var h=(o[X]||"silent").toUpperCase();if(!(typeof window===i||!T)){try{window.localStorage[T]=h;return}catch{}try{window.document.cookie=encodeURIComponent(T)+"="+h+";"}catch{}}}function B(){var X;if(!(typeof window===i||!T)){try{X=window.localStorage[T]}catch{}if(typeof X===i)try{var h=window.document.cookie,s=h.indexOf(encodeURIComponent(T)+"=");s!==-1&&(X=/^([^;]+)/.exec(h.slice(s))[1])}catch{}return M.levels[X]===void 0&&(X=void 0),X}}function G(){if(!(typeof window===i||!T)){try{window.localStorage.removeItem(T);return}catch{}try{window.document.cookie=encodeURIComponent(T)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}M.name=C,M.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},M.methodFactory=U||g,M.getLevel=function(){return V},M.setLevel=function(X,h){if(typeof X=="string"&&M.levels[X.toUpperCase()]!==void 0&&(X=M.levels[X.toUpperCase()]),typeof X=="number"&&X>=0&&X<=M.levels.SILENT){if(V=X,h!==!1&&$(X),c.call(M,X,C),typeof console===i&&X<M.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+X},M.setDefaultLevel=function(X){I=X,B()||M.setLevel(X,!1)},M.resetLevel=function(){M.setLevel(I,!1),G()},M.enableAll=function(X){M.setLevel(M.levels.TRACE,X)},M.disableAll=function(X){M.setLevel(M.levels.SILENT,X)};var H=B();H==null&&(H=I),M.setLevel(H,!1)}var v=new b,_={};v.getLogger=function(I){if(typeof I!="symbol"&&typeof I!="string"||I==="")throw new TypeError("You must supply a name when creating a logger.");var U=_[I];return U||(U=_[I]=new b(I,v.getLevel(),v.methodFactory)),U};var x=typeof window!==i?window.log:void 0;return v.noConflict=function(){return typeof window!==i&&window.log===v&&(window.log=x),v},v.getLoggers=function(){return _},v.default=v,v})})(loglevel);var errors={};Object.defineProperty(errors,"__esModule",{value:!0});errors.PublishDataError=errors.UnexpectedConnectionState=errors.UnsupportedServer=errors.TrackInvalidError=errors.ConnectionError=errors.LivekitError=void 0;class LivekitError extends Error{constructor(t,i){super(i||"an error has occured"),this.code=t}}errors.LivekitError=LivekitError;class ConnectionError extends LivekitError{constructor(t){super(1,t)}}errors.ConnectionError=ConnectionError;class TrackInvalidError extends LivekitError{constructor(t){super(20,t||"Track is invalid")}}errors.TrackInvalidError=TrackInvalidError;class UnsupportedServer extends LivekitError{constructor(t){super(10,t||"Unsupported server")}}errors.UnsupportedServer=UnsupportedServer;class UnexpectedConnectionState extends LivekitError{constructor(t){super(12,t||"Unexpected connection state")}}errors.UnexpectedConnectionState=UnexpectedConnectionState;class PublishDataError extends LivekitError{constructor(t){super(13,t||"Unable to publish data")}}errors.PublishDataError=PublishDataError;var events$1={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.TrackEvent=n.EngineEvent=n.ParticipantEvent=n.RoomEvent=void 0,function(t){t.Reconnecting="reconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.ActiveSpeakersChanged="activeSpeakersChanged",t.MetadataChanged="metadataChanged",t.DataReceived="dataReceived",t.AudioPlaybackStatusChanged="audioPlaybackChanged"}(n.RoomEvent||(n.RoomEvent={})),function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.MetadataChanged="metadataChanged",t.DataReceived="dataReceived",t.IsSpeakingChanged="isSpeakingChanged"}(n.ParticipantEvent||(n.ParticipantEvent={})),function(t){t.Connected="connected",t.Disconnected="disconnected",t.Reconnecting="reconnecting",t.Reconnected="reconnected",t.ParticipantUpdate="participantUpdate",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.SpeakersChanged="speakersChanged",t.DataPacketReceived="dataPacketReceived",t.RemoteMuteChanged="remoteMuteChanged"}(n.EngineEvent||(n.EngineEvent={})),function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed"}(n.TrackEvent||(n.TrackEvent={}))})(events$1);var LocalAudioTrack$1={},LocalTrack$1={},options$1={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.VideoPresets43=n.VideoPresets=n.AudioPresets=n.VideoPreset=void 0;class t{constructor(a,o,u,l){this.width=a,this.height=o,this.encoding={maxBitrate:u,maxFramerate:l}}get resolution(){return{width:{ideal:this.width},height:{ideal:this.height},frameRate:{ideal:this.encoding.maxFramerate}}}}n.VideoPreset=t,function(i){i.telephone={maxBitrate:12e3},i.speech={maxBitrate:2e4},i.music={maxBitrate:32e3}}(n.AudioPresets||(n.AudioPresets={})),n.VideoPresets={qvga:new t(320,180,125e3,15),vga:new t(640,360,4e5,30),qhd:new t(960,540,8e5,30),hd:new t(1280,720,25e5,30),fhd:new t(1920,1080,4e6,30)},n.VideoPresets43={qvga:new t(240,180,1e5,15),vga:new t(480,360,32e4,30),qhd:new t(720,540,64e4,30),hd:new t(960,720,2e6,30),fhd:new t(1440,1080,32e5,30)}})(options$1);var Track={},events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function n(t,i,a){return Function.prototype.apply.call(t,i,a)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ReflectOwnKeys=function(t){return Object.getOwnPropertyNames(t)};function ProcessEmitWarning(n){console&&console.warn&&console.warn(n)}var NumberIsNaN=Number.isNaN||function n(t){return t!==t};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(n){if(typeof n!="number"||n<0||NumberIsNaN(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");defaultMaxListeners=n}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function n(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function _getMaxListeners(n){return n._maxListeners===void 0?EventEmitter.defaultMaxListeners:n._maxListeners}EventEmitter.prototype.getMaxListeners=function n(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function n(t){for(var i=[],a=1;a<arguments.length;a++)i.push(arguments[a]);var o=t==="error",u=this._events;if(u!==void 0)o=o&&u.error===void 0;else if(!o)return!1;if(o){var l;if(i.length>0&&(l=i[0]),l instanceof Error)throw l;var m=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw m.context=l,m}var c=u[t];if(c===void 0)return!1;if(typeof c=="function")ReflectApply(c,this,i);else for(var f=c.length,g=arrayClone(c,f),a=0;a<f;++a)ReflectApply(g[a],this,i);return!0};function _addListener(n,t,i,a){var o,u,l;if(checkListener(i),u=n._events,u===void 0?(u=n._events=Object.create(null),n._eventsCount=0):(u.newListener!==void 0&&(n.emit("newListener",t,i.listener?i.listener:i),u=n._events),l=u[t]),l===void 0)l=u[t]=i,++n._eventsCount;else if(typeof l=="function"?l=u[t]=a?[i,l]:[l,i]:a?l.unshift(i):l.push(i),o=_getMaxListeners(n),o>0&&l.length>o&&!l.warned){l.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=n,m.type=t,m.count=l.length,ProcessEmitWarning(m)}return n}EventEmitter.prototype.addListener=function n(t,i){return _addListener(this,t,i,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function n(t,i){return _addListener(this,t,i,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(n,t,i){var a={fired:!1,wrapFn:void 0,target:n,type:t,listener:i},o=onceWrapper.bind(a);return o.listener=i,a.wrapFn=o,o}EventEmitter.prototype.once=function n(t,i){return checkListener(i),this.on(t,_onceWrap(this,t,i)),this};EventEmitter.prototype.prependOnceListener=function n(t,i){return checkListener(i),this.prependListener(t,_onceWrap(this,t,i)),this};EventEmitter.prototype.removeListener=function n(t,i){var a,o,u,l,m;if(checkListener(i),o=this._events,o===void 0)return this;if(a=o[t],a===void 0)return this;if(a===i||a.listener===i)--this._eventsCount===0?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,a.listener||i));else if(typeof a!="function"){for(u=-1,l=a.length-1;l>=0;l--)if(a[l]===i||a[l].listener===i){m=a[l].listener,u=l;break}if(u<0)return this;u===0?a.shift():spliceOne(a,u),a.length===1&&(o[t]=a[0]),o.removeListener!==void 0&&this.emit("removeListener",t,m||i)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function n(t){var i,a,o;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[t]),this;if(arguments.length===0){var u=Object.keys(a),l;for(o=0;o<u.length;++o)l=u[o],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(i=a[t],typeof i=="function")this.removeListener(t,i);else if(i!==void 0)for(o=i.length-1;o>=0;o--)this.removeListener(t,i[o]);return this};function _listeners(n,t,i){var a=n._events;if(a===void 0)return[];var o=a[t];return o===void 0?[]:typeof o=="function"?i?[o.listener||o]:[o]:i?unwrapListeners(o):arrayClone(o,o.length)}EventEmitter.prototype.listeners=function n(t){return _listeners(this,t,!0)};EventEmitter.prototype.rawListeners=function n(t){return _listeners(this,t,!1)};EventEmitter.listenerCount=function(n,t){return typeof n.listenerCount=="function"?n.listenerCount(t):listenerCount.call(n,t)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(n){var t=this._events;if(t!==void 0){var i=t[n];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}EventEmitter.prototype.eventNames=function n(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(n,t){for(var i=new Array(t),a=0;a<t;++a)i[a]=n[a];return i}function spliceOne(n,t){for(;t+1<n.length;t++)n[t]=n[t+1];n.pop()}function unwrapListeners(n){for(var t=new Array(n.length),i=0;i<t.length;++i)t[i]=n[i].listener||n[i];return t}function once(n,t){return new Promise(function(i,a){function o(l){n.removeListener(t,u),a(l)}function u(){typeof n.removeListener=="function"&&n.removeListener("error",o),i([].slice.call(arguments))}eventTargetAgnosticAddListener(n,t,u,{once:!0}),t!=="error"&&addErrorHandlerIfEventEmitter(n,o,{once:!0})})}function addErrorHandlerIfEventEmitter(n,t,i){typeof n.on=="function"&&eventTargetAgnosticAddListener(n,"error",t,i)}function eventTargetAgnosticAddListener(n,t,i,a){if(typeof n.on=="function")a.once?n.once(t,i):n.on(t,i);else if(typeof n.addEventListener=="function")n.addEventListener(t,function o(u){a.once&&n.removeEventListener(t,o),i(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.detachTrack=n.attachToElement=n.Track=void 0;const t=events.exports,i=livekit_models,a=events$1,o=[];class u extends t.EventEmitter{constructor(f,g,b){super(),this.attachedElements=[],this.isMuted=!1,this.kind=g,this.mediaStreamTrack=f,this.name=b||""}attach(f){let g="audio";return this.kind===u.Kind.Video&&(g="video"),f||(g==="audio"&&(o.forEach(b=>{b.parentElement===null&&!f&&(f=b)}),f&&o.splice(o.indexOf(f),1)),f||(f=document.createElement(g))),f instanceof HTMLVideoElement&&(f.playsInline=!0,f.autoplay=!0),this.attachedElements.includes(f)||(l(this.mediaStreamTrack,f),this.attachedElements.push(f),f instanceof HTMLAudioElement&&f.play().then(()=>{this.emit(a.TrackEvent.AudioPlaybackStarted)}).catch(b=>{this.emit(a.TrackEvent.AudioPlaybackFailed,b)})),f}detach(f){if(f){m(this.mediaStreamTrack,f);const b=this.attachedElements.indexOf(f);return b>=0&&(this.attachedElements.splice(b,1),this.recycleElement(f)),f}const g=[];return this.attachedElements.forEach(b=>{m(this.mediaStreamTrack,b),g.push(b),this.recycleElement(b)}),this.attachedElements=[],g}stop(){this.mediaStreamTrack.stop()}recycleElement(f){if(f instanceof HTMLAudioElement){let g=!0;f.pause(),o.forEach(b=>{b.parentElement||(g=!1)}),g&&o.push(f)}}}n.Track=u;function l(c,f){let g;f.srcObject instanceof MediaStream?g=f.srcObject:(g=new MediaStream,f.srcObject=g);let b;c.kind==="audio"?b=g.getAudioTracks():b=g.getVideoTracks(),b.forEach(v=>{g.removeTrack(v)}),g.addTrack(c)}n.attachToElement=l;function m(c,f){f.srcObject instanceof MediaStream&&(f.srcObject.removeTrack(c),f.srcObject=null)}n.detachTrack=m,function(c){let f;(function(v){v.Audio="audio",v.Video="video",v.Unknown="unknown"})(f=c.Kind||(c.Kind={}));function g(v){switch(v){case f.Audio:return i.TrackType.AUDIO;case f.Video:return i.TrackType.VIDEO;default:return i.TrackType.UNRECOGNIZED}}c.kindToProto=g;function b(v){switch(v){case i.TrackType.AUDIO:return f.Audio;case i.TrackType.VIDEO:return f.Video;default:return f.Unknown}}c.kindFromProto=b}(u=n.Track||(n.Track={}))})(Track);var __awaiter$6=commonjsGlobal&&commonjsGlobal.__awaiter||function(n,t,i,a){function o(u){return u instanceof i?u:new i(function(l){l(u)})}return new(i||(i=Promise))(function(u,l){function m(g){try{f(a.next(g))}catch(b){l(b)}}function c(g){try{f(a.throw(g))}catch(b){l(b)}}function f(g){g.done?u(g.value):o(g.value).then(m,c)}f((a=a.apply(n,t||[])).next())})},__importDefault$9=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(LocalTrack$1,"__esModule",{value:!0});const loglevel_1$5=__importDefault$9(loglevel.exports),errors_1$2=errors,events_1$7=events$1,options_1$1=options$1,Track_1$8=Track;class LocalTrack extends Track_1$8.Track{constructor(t,i,a,o){super(t,i,a),this.constraints=o!=null?o:t.getConstraints()}get id(){return this.mediaStreamTrack.id}get dimensions(){if(this.kind!==Track_1$8.Track.Kind.Video)return;const{width:t,height:i}=this.mediaStreamTrack.getSettings();if(t&&i)return{width:t,height:i}}static constraintsForOptions(t){const i={},a=Object.assign({},options_1$1.VideoPresets.qhd.resolution);typeof t.video=="object"&&t.video&&(Object.assign(a,t.video),t.video.resolution&&Object.assign(a,t.video.resolution)),t.video===!1?i.video=!1:i.video=a;const o={echoCancellation:!0,noiseSuppression:!0};return typeof t.audio=="object"&&t.audio&&Object.assign(o,t.audio),t.audio===!1?i.audio=!1:i.audio=o,i}mute(){return this.setTrackMuted(!0),this}unmute(){return this.setTrackMuted(!1),this}restart(t){return __awaiter$6(this,void 0,void 0,function*(){if(!this.sender)throw new errors_1$2.TrackInvalidError("unable to restart an unpublished track");t||(t=this.constraints),loglevel_1$5.default.debug("restarting track with constraints",t);const i={audio:!1,video:!1};this.kind===Track_1$8.Track.Kind.Video?i.video=t:i.audio=t;const o=(yield navigator.mediaDevices.getUserMedia(i)).getTracks()[0];return loglevel_1$5.default.info("re-acquired MediaStreamTrack"),this.mediaStreamTrack.stop(),this.attachedElements.forEach(u=>{Track_1$8.detachTrack(this.mediaStreamTrack,u)}),o.enabled=this.mediaStreamTrack.enabled,yield this.sender.replaceTrack(o),this.mediaStreamTrack=o,this.attachedElements.forEach(u=>{Track_1$8.attachToElement(o,u)}),this.constraints=t,this})}setTrackMuted(t){this.isMuted!==t&&(this.isMuted=t,this.mediaStreamTrack.enabled=!t,this.emit(t?events_1$7.TrackEvent.Muted:events_1$7.TrackEvent.Unmuted,this))}}LocalTrack$1.default=LocalTrack;var __awaiter$5=commonjsGlobal&&commonjsGlobal.__awaiter||function(n,t,i,a){function o(u){return u instanceof i?u:new i(function(l){l(u)})}return new(i||(i=Promise))(function(u,l){function m(g){try{f(a.next(g))}catch(b){l(b)}}function c(g){try{f(a.throw(g))}catch(b){l(b)}}function f(g){g.done?u(g.value):o(g.value).then(m,c)}f((a=a.apply(n,t||[])).next())})},__importDefault$8=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(LocalAudioTrack$1,"__esModule",{value:!0});const LocalTrack_1$1=__importDefault$8(LocalTrack$1),Track_1$7=Track;class LocalAudioTrack extends LocalTrack_1$1.default{constructor(t,i,a){super(t,Track_1$7.Track.Kind.Audio,i,a)}restartTrack(t){return __awaiter$5(this,void 0,void 0,function*(){let i;if(t){const a=LocalTrack_1$1.default.constraintsForOptions({audio:t});typeof a.audio!="boolean"&&(i=a.audio)}yield this.restart(i)})}}LocalAudioTrack$1.default=LocalAudioTrack;var LocalTrackPublication$1={},TrackPublication$1={},LocalVideoTrack$1={},stats={};Object.defineProperty(stats,"__esModule",{value:!0});stats.monitorFrequency=void 0;stats.monitorFrequency=2e3;var __awaiter$4=commonjsGlobal&&commonjsGlobal.__awaiter||function(n,t,i,a){function o(u){return u instanceof i?u:new i(function(l){l(u)})}return new(i||(i=Promise))(function(u,l){function m(g){try{f(a.next(g))}catch(b){l(b)}}function c(g){try{f(a.throw(g))}catch(b){l(b)}}function f(g){g.done?u(g.value):o(g.value).then(m,c)}f((a=a.apply(n,t||[])).next())})},__importDefault$7=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(LocalVideoTrack$1,"__esModule",{value:!0});const loglevel_1$4=__importDefault$7(loglevel.exports),livekit_rtc_1$3=livekit_rtc,stats_1=stats,LocalTrack_1=__importDefault$7(LocalTrack$1),Track_1$6=Track,QUALITY_UPGRADE_DELAY=60*1e3,QUALITY_DOWNGRADE_DELAY=5*1e3,ridOrder=["f","h","q"];class LocalVideoTrack extends LocalTrack_1.default{constructor(t,i,a){super(t,Track_1$6.Track.Kind.Video,i,a),this.monitorSender=()=>__awaiter$4(this,void 0,void 0,function*(){if(!this.sender)return;const o=yield this.getSenderStats(),u=new Map(o.map(l=>[l.rid,l]));this.prevStats&&this.isSimulcast&&this.checkAndUpdateSimulcast(u),this.prevStats=u,setTimeout(()=>{this.monitorSender()},stats_1.monitorFrequency)})}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(t){!this.isSimulcast||(this.signalClient=t,setTimeout(()=>{this.monitorSender()},stats_1.monitorFrequency))}stop(){this.sender=void 0,this.mediaStreamTrack.getConstraints(),super.stop()}mute(){return this.mediaStreamTrack.stop(),super.mute()}unmute(){return this.restartTrack(),super.unmute()}getSenderStats(){return __awaiter$4(this,void 0,void 0,function*(){if(!this.sender)return[];const t=[],i=yield this.sender.getStats();let a;return i.forEach(o=>{o.type==="track"&&o.trackIdentifier===this.mediaStreamTrack.id&&(a=o)}),a&&(i.forEach(o=>{if(o.type==="outbound-rtp"&&o.trackId===a.id){const u={type:"video",streamId:o.id,frameHeight:o.frameHeight,frameWidth:o.frameWidth,firCount:o.firCount,pliCount:o.pliCount,nackCount:o.nackCount,packetsSent:o.packetsSent,framesSent:o.framesSent,timestamp:o.timestamp,rid:o.rid,retransmittedPacketsSent:o.retransmittedPacketsSent,qualityLimitationReason:o.qualityLimitationReason,qualityLimitationResolutionChanges:o.qualityLimitationResolutionChanges},l=i.get(o.remoteId);l&&(u.jitter=l.jitter,u.packetsLost=l.packetsLost,u.roundTripTime=l.roundTripTime),t.push(u)}}),t.sort((o,u)=>{const l=ridOrder.indexOf(o.rid),m=ridOrder.indexOf(u.rid);return l===m?0:l<m?-1:1})),t})}setPublishingQuality(t){var i;if(!this.isSimulcast||!this.encodings)return;let a=!1;const o=[];if(this.encodings.forEach(l=>{var m;const c=videoQualityForRid((m=l.rid)!==null&&m!==void 0?m:""),f=c<=t;f!==l.active&&(a=!0,l.active=f),f&&o.push(c)}),!a||!this.sender||!this.sid)return;this.lastQualityChange=new Date().getTime(),this.lastExplicitQualityChange=new Date().getTime(),(i=this.signalClient)===null||i===void 0||i.sendSetSimulcastLayers(this.sid,o);const u=this.sender.getParameters();u.encodings=this.encodings,loglevel_1$4.default.debug("setting publishing quality. max quality",t),this.sender.setParameters(u)}restartTrack(t){return __awaiter$4(this,void 0,void 0,function*(){let i;if(t){const a=LocalTrack_1.default.constraintsForOptions({video:t});typeof a.video!="boolean"&&(i=a.video)}yield this.restart(i)})}checkAndUpdateSimulcast(t){var i,a;if(!this.sender||this.isMuted)return;const o=this.sender.getParameters();this.encodings=o.encodings;let u;if(this.encodings.forEach(g=>{u===void 0&&g.active&&(u=g)}),!u)return;const l=(i=u.rid)!==null&&i!==void 0?i:"",m=t.get(l),c=(a=this.prevStats)===null||a===void 0?void 0:a.get(l);if(!m||!c)return;const f=videoQualityForRid(l);if(m.qualityLimitationResolutionChanges-c.qualityLimitationResolutionChanges>0&&(this.lastQualityChange=new Date().getTime()),m.framesSent-c.framesSent>0){if(f===livekit_rtc_1$3.VideoQuality.HIGH||!this.lastQualityChange)return;const g=f+1;if(new Date().getTime()-this.lastQualityChange<QUALITY_UPGRADE_DELAY)return;loglevel_1$4.default.debug("upgrading video quality to",g),this.setPublishingQuality(g);return}this.lastExplicitQualityChange&&new Date().getTime()-this.lastExplicitQualityChange<QUALITY_DOWNGRADE_DELAY||f!==livekit_rtc_1$3.VideoQuality.UNRECOGNIZED&&f!==livekit_rtc_1$3.VideoQuality.LOW&&(loglevel_1$4.default.debug("downgrading video quality to",f-1),this.setPublishingQuality(f-1))}}LocalVideoTrack$1.default=LocalVideoTrack;function videoQualityForRid(n){switch(n){case"f":return livekit_rtc_1$3.VideoQuality.HIGH;case"h":return livekit_rtc_1$3.VideoQuality.MEDIUM;case"q":return livekit_rtc_1$3.VideoQuality.LOW;default:return livekit_rtc_1$3.VideoQuality.UNRECOGNIZED}}var RemoteAudioTrack$1={};Object.defineProperty(RemoteAudioTrack$1,"__esModule",{value:!0});const events_1$6=events$1,Track_1$5=Track;class RemoteAudioTrack extends Track_1$5.Track{constructor(t,i,a){super(t,Track_1$5.Track.Kind.Audio),this.sid=i,this.receiver=a}setMuted(t){this.isMuted!==t&&(this.isMuted=t,this.emit(t?events_1$6.TrackEvent.Muted:events_1$6.TrackEvent.Unmuted,this))}}RemoteAudioTrack$1.default=RemoteAudioTrack;var RemoteVideoTrack$1={};Object.defineProperty(RemoteVideoTrack$1,"__esModule",{value:!0});const events_1$5=events$1,Track_1$4=Track;class RemoteVideoTrack extends Track_1$4.Track{constructor(t,i,a){super(t,Track_1$4.Track.Kind.Video),this.sid=i,this.receiver=a}setMuted(t){this.isMuted!==t&&(this.isMuted=t,this.emit(t?events_1$5.TrackEvent.Muted:events_1$5.TrackEvent.Unmuted,this)),this.attachedElements.forEach(i=>{t?Track_1$4.detachTrack(this.mediaStreamTrack,i):Track_1$4.attachToElement(this.mediaStreamTrack,i)})}stop(){super.stop()}}RemoteVideoTrack$1.default=RemoteVideoTrack;var __importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(TrackPublication$1,"__esModule",{value:!0});const events_1$4=events.exports,events_2$1=events$1,LocalAudioTrack_1$1=__importDefault$6(LocalAudioTrack$1),LocalVideoTrack_1$1=__importDefault$6(LocalVideoTrack$1),RemoteAudioTrack_1$1=__importDefault$6(RemoteAudioTrack$1),RemoteVideoTrack_1$1=__importDefault$6(RemoteVideoTrack$1),Track_1$3=Track;class TrackPublication extends events_1$4.EventEmitter{constructor(t,i,a){super(),this.metadataMuted=!1,this.kind=t,this.trackSid=i,this.trackName=a}setTrack(t){this.track=t,t&&(t.on(events_2$1.TrackEvent.Muted,()=>{this.emit(events_2$1.TrackEvent.Muted)}),t.on(events_2$1.TrackEvent.Unmuted,()=>{this.emit(events_2$1.TrackEvent.Unmuted)}))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get audioTrack(){if(this.track instanceof LocalAudioTrack_1$1.default||this.track instanceof RemoteAudioTrack_1$1.default)return this.track}get videoTrack(){if(this.track instanceof LocalVideoTrack_1$1.default||this.track instanceof RemoteVideoTrack_1$1.default)return this.track}updateInfo(t){this.trackSid=t.sid,this.trackName=t.name,this.kind===Track_1$3.Track.Kind.Video&&t.width>0&&(this.dimensions={width:t.width,height:t.height},this.simulcasted=t.simulcast)}}TrackPublication$1.default=TrackPublication;var __importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(LocalTrackPublication$1,"__esModule",{value:!0});const TrackPublication_1$1=__importDefault$5(TrackPublication$1);class LocalTrackPublication extends TrackPublication_1$1.default{constructor(t,i,a){super(t,i.sid,i.name),this.updateInfo(i),this.setTrack(a)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}mute(){var t;(t=this.track)===null||t===void 0||t.mute()}unmute(){var t;(t=this.track)===null||t===void 0||t.unmute()}}LocalTrackPublication$1.default=LocalTrackPublication;var Participant$1={};Object.defineProperty(Participant$1,"__esModule",{value:!0});const events_1$3=events.exports,events_2=events$1,Track_1$2=Track;class Participant extends events_1$3.EventEmitter{constructor(t,i){super(),this.audioLevel=0,this.isSpeaking=!1,this.sid=t,this.identity=i,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}get joinedAt(){return this.participantInfo?new Date(this.participantInfo.joinedAt*1e3):new Date}updateInfo(t){this.identity=t.identity,this.sid=t.sid,this.setMetadata(t.metadata),this.participantInfo=t}setMetadata(t){const i=!this.participantInfo||this.participantInfo.metadata!==t,a=this.metadata;this.metadata=t,i&&this.emit(events_2.ParticipantEvent.MetadataChanged,a)}setIsSpeaking(t){t!==this.isSpeaking&&(this.isSpeaking=t,t&&(this.lastSpokeAt=new Date),this.emit(events_2.ParticipantEvent.IsSpeakingChanged,t))}addTrackPublication(t){t.on(events_2.TrackEvent.Muted,()=>{this.emit(events_2.ParticipantEvent.TrackMuted,t)}),t.on(events_2.TrackEvent.Unmuted,()=>{this.emit(events_2.ParticipantEvent.TrackUnmuted,t)});const i=t;switch(i.track&&(i.track.sid=t.trackSid),this.tracks.set(t.trackSid,t),t.kind){case Track_1$2.Track.Kind.Audio:this.audioTracks.set(t.trackSid,t);break;case Track_1$2.Track.Kind.Video:this.videoTracks.set(t.trackSid,t);break}}}Participant$1.default=Participant;var RemoteParticipant$1={},RemoteTrackPublication$1={},__importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(RemoteTrackPublication$1,"__esModule",{value:!0});const livekit_rtc_1$2=livekit_rtc,events_1$2=events$1,TrackPublication_1=__importDefault$4(TrackPublication$1);class RemoteTrackPublication extends TrackPublication_1.default{constructor(){super(...arguments),this.disabled=!1,this.currentVideoQuality=livekit_rtc_1$2.VideoQuality.HIGH}setSubscribed(t){this.subscribed=t;const i={trackSids:[this.trackSid],subscribe:this.subscribed};this.emit(events_1$2.TrackEvent.UpdateSubscription,i)}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isEnabled(){return!this.disabled}setEnabled(t){this.disabled!==!t&&(this.disabled=!t,this.emitTrackUpdate())}setVideoQuality(t){this.currentVideoQuality!==t&&(this.currentVideoQuality=t,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}updateInfo(t){var i;super.updateInfo(t),this.metadataMuted=t.muted,(i=this.track)===null||i===void 0||i.setMuted(t.muted)}emitTrackUpdate(){const t={trackSids:[this.trackSid],disabled:this.disabled,quality:this.currentVideoQuality};this.emit(events_1$2.TrackEvent.UpdateSettings,t)}}RemoteTrackPublication$1.default=RemoteTrackPublication;var __importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(RemoteParticipant$1,"__esModule",{value:!0});const loglevel_1$3=__importDefault$3(loglevel.exports),events_1$1=events$1,RemoteAudioTrack_1=__importDefault$3(RemoteAudioTrack$1),RemoteTrackPublication_1=__importDefault$3(RemoteTrackPublication$1),RemoteVideoTrack_1=__importDefault$3(RemoteVideoTrack$1),Track_1$1=Track,Participant_1$1=__importDefault$3(Participant$1);class RemoteParticipant extends Participant_1$1.default{constructor(t,i,a){super(i,a||""),this.signalClient=t,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map}static fromParticipantInfo(t,i){const a=new RemoteParticipant(t,i.sid,i.identity);return a.updateInfo(i),a}addTrackPublication(t){super.addTrackPublication(t),t.on(events_1$1.TrackEvent.UpdateSettings,i=>{this.signalClient.sendUpdateTrackSettings(i)}),t.on(events_1$1.TrackEvent.UpdateSubscription,i=>{this.signalClient.sendUpdateSubscription(i)})}addSubscribedMediaTrack(t,i,a,o){let u=this.getTrackPublication(i);if(u||i.startsWith("TR")||this.tracks.forEach(c=>{!u&&t.kind===c.kind.toString()&&(u=c)}),!u){if(o===0){loglevel_1$3.default.error("could not find published track",this.sid,i),this.emit(events_1$1.ParticipantEvent.TrackSubscriptionFailed,i);return}o===void 0&&(o=20),setTimeout(()=>{this.addSubscribedMediaTrack(t,i,a,o-1)},150);return}const l=t.kind==="video";let m;return l?m=new RemoteVideoTrack_1.default(t,i,a):m=new RemoteAudioTrack_1.default(t,i,a),u.setTrack(m),m.name=u.trackName,m.sid=u.trackSid,m.isMuted=u.isMuted,t.onended=()=>{this.emit(events_1$1.ParticipantEvent.TrackUnsubscribed,m,u)},this.emit(events_1$1.ParticipantEvent.TrackSubscribed,m,u),u}get hasMetadata(){return!!this.participantInfo}getTrackPublication(t){return this.tracks.get(t)}updateInfo(t){const i=this.hasMetadata;super.updateInfo(t);const a=new Map,o=new Map;t.tracks.forEach(u=>{let l=this.getTrackPublication(u.sid);if(l)l.updateInfo(u);else{const m=Track_1$1.Track.kindFromProto(u.type);if(!m)return;l=new RemoteTrackPublication_1.default(m,u.sid,u.name),l.updateInfo(u),o.set(u.sid,l),this.addTrackPublication(l)}a.set(u.sid,l)}),i&&o.forEach(u=>{this.emit(events_1$1.ParticipantEvent.TrackPublished,u)}),this.tracks.forEach(u=>{a.has(u.trackSid)||this.unpublishTrack(u.trackSid,!0)})}unpublishTrack(t,i){const a=this.tracks.get(t);if(!!a){switch(this.tracks.delete(t),a.kind){case Track_1$1.Track.Kind.Audio:this.audioTracks.delete(t);break;case Track_1$1.Track.Kind.Video:this.videoTracks.delete(t);break}if(a.track){const{track:o}=a;o.stop(),a.setTrack(void 0),this.emit(events_1$1.ParticipantEvent.TrackUnsubscribed,o,a)}i&&this.emit(events_1$1.ParticipantEvent.TrackUnpublished,a)}}emit(t,...i){return loglevel_1$3.default.trace("participant event",this.sid,t,...i),super.emit(t,...i)}}RemoteParticipant$1.default=RemoteParticipant;var __awaiter$3=commonjsGlobal&&commonjsGlobal.__awaiter||function(n,t,i,a){function o(u){return u instanceof i?u:new i(function(l){l(u)})}return new(i||(i=Promise))(function(u,l){function m(g){try{f(a.next(g))}catch(b){l(b)}}function c(g){try{f(a.throw(g))}catch(b){l(b)}}function f(g){g.done?u(g.value):o(g.value).then(m,c)}f((a=a.apply(n,t||[])).next())})},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(LocalParticipant$1,"__esModule",{value:!0});const loglevel_1$2=__importDefault$2(loglevel.exports),livekit_rtc_1$1=livekit_rtc,errors_1$1=errors,events_1=events$1,LocalAudioTrack_1=__importDefault$2(LocalAudioTrack$1),LocalTrackPublication_1=__importDefault$2(LocalTrackPublication$1),LocalVideoTrack_1=__importDefault$2(LocalVideoTrack$1),options_1=options$1,Track_1=Track,Participant_1=__importDefault$2(Participant$1),RemoteParticipant_1=__importDefault$2(RemoteParticipant$1);class LocalParticipant extends Participant_1.default{constructor(t,i,a){super(t,i),this.onTrackUnmuted=o=>{this.onTrackMuted(o,!1)},this.onTrackMuted=(o,u)=>{if(u===void 0&&(u=!0),!o.sid){loglevel_1$2.default.error("could not update mute status for unpublished track",o);return}this.engine.updateMuteStatus(o.sid,u)},this.presets169=[options_1.VideoPresets.qvga,options_1.VideoPresets.vga,options_1.VideoPresets.qhd,options_1.VideoPresets.hd,options_1.VideoPresets.fhd],this.presets43=[options_1.VideoPresets43.qvga,options_1.VideoPresets43.vga,options_1.VideoPresets43.qhd,options_1.VideoPresets43.hd,options_1.VideoPresets43.fhd],this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=a,this.engine.on(events_1.EngineEvent.RemoteMuteChanged,(o,u)=>{const l=this.tracks.get(o);!l||!l.track||(u?l.mute():l.unmute())})}publishTrack(t,i){return __awaiter$3(this,void 0,void 0,function*(){if(t instanceof MediaStreamTrack)switch(t.kind){case"audio":t=new LocalAudioTrack_1.default(t,i==null?void 0:i.name);break;case"video":t=new LocalVideoTrack_1.default(t,i==null?void 0:i.name);break;default:throw new errors_1$1.TrackInvalidError(`unsupported MediaStreamTrack kind ${t.kind}`)}let a;if(this.tracks.forEach(b=>{!b.track||b.track===t&&(a=b)}),a)return a;t.on(events_1.TrackEvent.Muted,this.onTrackMuted),t.on(events_1.TrackEvent.Unmuted,this.onTrackUnmuted),t.mediaStreamTrack.addEventListener("ended",()=>{this.unpublishTrack(t)});const o=t.mediaStreamTrack.id,u=livekit_rtc_1$1.AddTrackRequest.fromPartial({cid:o,name:t.name,type:Track_1.Track.kindToProto(t.kind),muted:t.isMuted});t.dimensions&&(u.width=t.dimensions.width,u.height=t.dimensions.height);const l=yield this.engine.addTrack(u),m=new LocalTrackPublication_1.default(t.kind,l,t);t.sid=l.sid;let c;if(t.kind===Track_1.Track.Kind.Video){const b=t.mediaStreamTrack.getSettings();c=this.computeVideoEncodings(b.width,b.height,i)}else t.kind===Track_1.Track.Kind.Audio&&(i==null?void 0:i.audioBitrate)&&(c=[{maxBitrate:i==null?void 0:i.audioBitrate}]);if(!this.engine.publisher)throw new errors_1$1.UnexpectedConnectionState("publisher is closed");loglevel_1$2.default.debug("publishing with encodings",c);const f={direction:"sendonly"};c&&(f.sendEncodings=c);const g=this.engine.publisher.pc.addTransceiver(t.mediaStreamTrack,f);return this.engine.negotiate(),t.sender=g.sender,t instanceof LocalVideoTrack_1.default&&t.startMonitor(this.engine.client),i!=null&&i.videoCodec&&this.setPreferredCodec(g,t.kind,i.videoCodec),this.addTrackPublication(m),this.emit(events_1.ParticipantEvent.TrackPublished,m),m})}unpublishTrack(t){const i=this.getPublicationForTrack(t);if(loglevel_1$2.default.debug("unpublishTrack","unpublishing track",t),!i)return loglevel_1$2.default.warn("unpublishTrack","track was not unpublished because no publication was found",t),null;(t instanceof LocalAudioTrack_1.default||t instanceof LocalVideoTrack_1.default)&&(t.removeListener(events_1.TrackEvent.Muted,this.onTrackMuted),t.removeListener(events_1.TrackEvent.Unmuted,this.onTrackUnmuted)),t.stop();let a;switch(t instanceof MediaStreamTrack?a=t:a=t.mediaStreamTrack,this.engine.publisher&&this.engine.publisher.pc.getSenders().forEach(u=>{var l;if(u.track===a)try{(l=this.engine.publisher)===null||l===void 0||l.pc.removeTrack(u),this.engine.negotiate()}catch(m){loglevel_1$2.default.warn("unpublishTrack","failed to remove track",m)}}),this.tracks.delete(i.trackSid),i.kind){case Track_1.Track.Kind.Audio:this.audioTracks.delete(i.trackSid);break;case Track_1.Track.Kind.Video:this.videoTracks.delete(i.trackSid);break}return i}unpublishTracks(t){const i=[];return t.forEach(a=>{const o=this.unpublishTrack(a);o&&i.push(o)}),i}get publisherMetrics(){return null}publishData(t,i,a){return __awaiter$3(this,void 0,void 0,function*(){const o=[];a!==void 0&&a.forEach(l=>{l instanceof RemoteParticipant_1.default?o.push(l.sid):o.push(l)});const u={kind:i,user:{participantSid:this.sid,payload:t,destinationSids:o}};yield this.engine.sendDataPacket(u,i)})}getPublicationForTrack(t){let i;return this.tracks.forEach(a=>{const o=a.track;!o||(t instanceof MediaStreamTrack?(o instanceof LocalAudioTrack_1.default||o instanceof LocalVideoTrack_1.default)&&o.mediaStreamTrack===t&&(i=a):t===o&&(i=a))}),i}setPreferredCodec(t,i,a){if(!("getCapabilities"in RTCRtpSender))return;const o=RTCRtpSender.getCapabilities(i);if(!o)return;const u=o.codecs.find(l=>{const m=l.mimeType.toLowerCase(),c=m===`video/${a}`;return a==="h264"&&l.sdpFmtpLine?c&&l.sdpFmtpLine.includes("profile-level-id=42e01f"):c||m==="audio/opus"});u&&"setCodecPreferences"in t&&t.setCodecPreferences([u])}computeVideoEncodings(t,i,a){let o,u=a==null?void 0:a.videoEncoding;if(!(!u&&!(a!=null&&a.simulcast)||!t||!i)){if(u||(u=this.determineAppropriateEncoding(t,i),loglevel_1$2.default.debug("using video encoding",u)),a!=null&&a.simulcast){o=[{rid:"f",maxBitrate:u.maxBitrate,maxFramerate:u.maxFramerate}];const l=this.presetsForResolution(t,i),m=l[1],c=l[0];t>=960?(o.push({rid:"h",scaleResolutionDownBy:i/m.height,maxBitrate:m.encoding.maxBitrate,maxFramerate:m.encoding.maxFramerate}),o.push({rid:"q",scaleResolutionDownBy:i/c.height,maxBitrate:c.encoding.maxBitrate,maxFramerate:c.encoding.maxFramerate})):o.push({rid:"h",scaleResolutionDownBy:i/c.height,maxBitrate:c.encoding.maxBitrate,maxFramerate:c.encoding.maxFramerate})}else o=[u];return o}}determineAppropriateEncoding(t,i){const a=this.presetsForResolution(t,i);let{encoding:o}=a[0];for(let u=0;u<a.length;u+=1){const l=a[u];t>=l.width&&i>=l.height&&(o=l.encoding)}return o}presetsForResolution(t,i){const a=t/i;return Math.abs(a-16/9)<Math.abs(a-4/3)?this.presets169:this.presets43}}LocalParticipant$1.default=LocalParticipant;var Room={},RTCEngine={},PCTransport$1={};function r(n,t,i){var a,o,u;t===void 0&&(t=50),i===void 0&&(i={});var l=(a=i.isImmediate)!=null&&a,m=(o=i.callback)!=null&&o,c=i.maxWait,f=Date.now(),g=[];function b(){if(c!==void 0){var _=Date.now()-f;if(_+t>=c)return c-_}return t}var v=function(){var _=[].slice.call(arguments),x=this;return new Promise(function(C,I){var U=l&&u===void 0;if(u!==void 0&&clearTimeout(u),u=setTimeout(function(){if(u=void 0,f=Date.now(),!l){var V=n.apply(x,_);m&&m(V),g.forEach(function(T){return(0,T.resolve)(V)}),g=[]}},b()),U){var M=n.apply(x,_);return m&&m(M),C(M)}g.push({resolve:C,reject:I})})};return v.cancel=function(_){u!==void 0&&clearTimeout(u),g.forEach(function(x){return(0,x.reject)(_)}),g=[]},v}var index_esm=Object.freeze(Object.defineProperty({__proto__:null,debounce:r},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(index_esm),__awaiter$2=commonjsGlobal&&commonjsGlobal.__awaiter||function(n,t,i,a){function o(u){return u instanceof i?u:new i(function(l){l(u)})}return new(i||(i=Promise))(function(u,l){function m(g){try{f(a.next(g))}catch(b){l(b)}}function c(g){try{f(a.throw(g))}catch(b){l(b)}}function f(g){g.done?u(g.value):o(g.value).then(m,c)}f((a=a.apply(n,t||[])).next())})},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(PCTransport$1,"__esModule",{value:!0});const loglevel_1$1=__importDefault$1(loglevel.exports),ts_debounce_1=require$$1;class PCTransport{constructor(t){this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.negotiate=ts_debounce_1.debounce(()=>{this.createAndSendOffer()},100),this.pc=new RTCPeerConnection(t)}addIceCandidate(t){return __awaiter$2(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(t);this.pendingCandidates.push(t)})}setRemoteDescription(t){return __awaiter$2(this,void 0,void 0,function*(){yield this.pc.setRemoteDescription(t),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate&&(this.renegotiate=!1,this.createAndSendOffer())})}createAndSendOffer(t){return __awaiter$2(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(t!=null&&t.iceRestart&&(loglevel_1$1.default.debug("restarting ICE"),this.restartingIce=!0),this.pc.signalingState==="have-local-offer"){const a=this.pc.remoteDescription;if((t==null?void 0:t.iceRestart)&&a)yield this.pc.setRemoteDescription(a);else{this.renegotiate=!0;return}}loglevel_1$1.default.debug("starting to negotiate");const i=yield this.pc.createOffer(t);yield this.pc.setLocalDescription(i),this.onOffer(i)})}close(){this.pc.close()}}PCTransport$1.default=PCTransport;var utils={},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(n,t,i,a){function o(u){return u instanceof i?u:new i(function(l){l(u)})}return new(i||(i=Promise))(function(u,l){function m(g){try{f(a.next(g))}catch(b){l(b)}}function c(g){try{f(a.throw(g))}catch(b){l(b)}}function f(g){g.done?u(g.value):o(g.value).then(m,c)}f((a=a.apply(n,t||[])).next())})};Object.defineProperty(utils,"__esModule",{value:!0});utils.sleep=utils.useLegacyAPI=utils.unpackStreamId=void 0;const separator="|";function unpackStreamId(n){const t=n.split(separator);return t.length>1?[t[0],n.substr(t[0].length+1)]:[n,""]}utils.unpackStreamId=unpackStreamId;function useLegacyAPI(){return typeof navigator!="undefined"&&navigator.product==="ReactNative"}utils.useLegacyAPI=useLegacyAPI;function sleep(n){return __awaiter$1(this,void 0,void 0,function*(){return new Promise(t=>setTimeout(t,n))})}utils.sleep=sleep;(function(n){var t=commonjsGlobal&&commonjsGlobal.__awaiter||function(C,I,U,M){function V(T){return T instanceof U?T:new U(function($){$(T)})}return new(U||(U=Promise))(function(T,$){function B(X){try{H(M.next(X))}catch(h){$(h)}}function G(X){try{H(M.throw(X))}catch(h){$(h)}}function H(X){X.done?T(X.value):V(X.value).then(B,G)}H((M=M.apply(C,I||[])).next())})},i=commonjsGlobal&&commonjsGlobal.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(n,"__esModule",{value:!0}),n.maxICEConnectTimeout=void 0;const a=events.exports,o=i(loglevel.exports),u=livekit_models,l=livekit_rtc,m=errors,c=events$1,f=i(PCTransport$1),g=utils,b="_lossy",v="_reliable",_=5;n.maxICEConnectTimeout=5*1e3;class x extends a.EventEmitter{constructor(I,U){super(),this.subscriberPrimary=!1,this.iceConnected=!1,this.isClosed=!0,this.pendingTrackResolvers={},this.hasPublished=!1,this.reconnectAttempts=0,this.handleDataChannel=({channel:M})=>t(this,void 0,void 0,function*(){if(!!M){if(M.label===v)this.reliableDCSub=M;else if(M.label===b)this.lossyDCSub=M;else return;M.onmessage=this.handleDataMessage}}),this.handleDataMessage=M=>t(this,void 0,void 0,function*(){let V;if(M.data instanceof ArrayBuffer)V=M.data;else if(M.data instanceof Blob)V=yield M.data.arrayBuffer();else{o.default.error("unsupported data type",M.data);return}const T=u.DataPacket.decode(new Uint8Array(V));T.speaker?this.emit(c.EngineEvent.ActiveSpeakersUpdate,T.speaker.speakers):T.user&&this.emit(c.EngineEvent.DataPacketReceived,T.user,T.kind)}),this.handleDisconnect=M=>{if(this.isClosed)return;if(o.default.debug(`${M} disconnected`),this.reconnectAttempts>=_){o.default.info("could not connect to signal after",_,"attempts. giving up"),this.close(),this.emit(c.EngineEvent.Disconnected);return}const V=this.reconnectAttempts*this.reconnectAttempts*300;setTimeout(()=>{this.reconnect().then(()=>{this.reconnectAttempts=0}).catch(this.handleDisconnect)},V)},this.client=I,this.rtcConfig=U||{}}join(I,U,M){return t(this,void 0,void 0,function*(){this.url=I,this.token=U;const V=yield this.client.join(I,U,M);return this.isClosed=!1,this.subscriberPrimary=V.subscriberPrimary,this.publisher||this.configure(V),this.subscriberPrimary||(yield this.negotiate()),V})}close(){this.isClosed=!0,this.publisher&&(this.publisher.pc.getSenders().forEach(I=>{var U;try{(U=this.publisher)===null||U===void 0||U.pc.removeTrack(I)}catch(M){o.default.warn("could not removeTrack",M)}}),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),this.client.close()}addTrack(I){if(this.pendingTrackResolvers[I.cid])throw new m.TrackInvalidError("a track with the same ID has already been published");return new Promise(U=>{this.pendingTrackResolvers[I.cid]=U,this.client.sendAddTrack(I)})}updateMuteStatus(I,U){this.client.sendMuteTrack(I,U)}configure(I){if(this.publisher||this.subscriber)return;if(I.iceServers&&!this.rtcConfig.iceServers){const M=[];I.iceServers.forEach(V=>{const T={urls:V.urls};V.username&&(T.username=V.username),V.credential&&(T.credential=V.credential),M.push(T)}),this.rtcConfig.iceServers=M}this.publisher=new f.default(this.rtcConfig),this.subscriber=new f.default(this.rtcConfig),this.publisher.pc.onicecandidate=M=>{!M.candidate||(o.default.trace("adding ICE candidate for peer",M.candidate),this.client.sendIceCandidate(M.candidate,l.SignalTarget.PUBLISHER))},this.subscriber.pc.onicecandidate=M=>{!M.candidate||this.client.sendIceCandidate(M.candidate,l.SignalTarget.SUBSCRIBER)},this.publisher.onOffer=M=>{this.client.sendOffer(M)};let U=this.publisher.pc;I.subscriberPrimary&&(U=this.subscriber.pc,this.subscriber.pc.ondatachannel=this.handleDataChannel),U.oniceconnectionstatechange=()=>{U.iceConnectionState==="connected"?(o.default.trace("ICE connected"),this.iceConnected||(this.iceConnected=!0,this.emit(c.EngineEvent.Connected))):U.iceConnectionState==="failed"&&(o.default.trace("ICE disconnected"),this.iceConnected&&(this.iceConnected=!1,this.handleDisconnect("peerconnection")))},this.subscriber.pc.ontrack=M=>{this.emit(c.EngineEvent.MediaTrackAdded,M.track,M.streams[0],M.receiver)},this.lossyDC=this.publisher.pc.createDataChannel(b,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.publisher.pc.createDataChannel(v,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.client.onAnswer=M=>t(this,void 0,void 0,function*(){!this.publisher||(o.default.debug("received server answer",M.type,this.publisher.pc.signalingState),yield this.publisher.setRemoteDescription(M))}),this.client.onTrickle=(M,V)=>{!this.publisher||!this.subscriber||(o.default.trace("got ICE candidate from peer",M,V),V===l.SignalTarget.PUBLISHER?this.publisher.addIceCandidate(M):this.subscriber.addIceCandidate(M))},this.client.onOffer=M=>t(this,void 0,void 0,function*(){if(!this.subscriber)return;o.default.debug("received server offer",M.type,this.subscriber.pc.signalingState),yield this.subscriber.setRemoteDescription(M);const V=yield this.subscriber.pc.createAnswer();yield this.subscriber.pc.setLocalDescription(V),this.client.sendAnswer(V)}),this.client.onParticipantUpdate=M=>{this.emit(c.EngineEvent.ParticipantUpdate,M)},this.client.onLocalTrackPublished=M=>{const V=this.pendingTrackResolvers[M.cid];if(!V){o.default.error("missing track resolver for ",M.cid);return}delete this.pendingTrackResolvers[M.cid],V(M.track)},this.client.onSpeakersChanged=M=>{this.emit(c.EngineEvent.SpeakersChanged,M)},this.client.onClose=()=>{this.handleDisconnect("signal")},this.client.onLeave=()=>{this.close(),this.emit(c.EngineEvent.Disconnected)},this.client.onRemoteMuteChanged=(M,V)=>{this.emit(c.EngineEvent.RemoteMuteChanged,M,V)}}reconnect(){return t(this,void 0,void 0,function*(){if(this.isClosed)return;if(!this.url||!this.token)throw new m.ConnectionError("could not reconnect, url or token not saved");if(o.default.info("reconnecting to signal connection, attempt",this.reconnectAttempts),this.reconnectAttempts===0&&this.emit(c.EngineEvent.Reconnecting),this.reconnectAttempts+=1,yield this.client.reconnect(this.url,this.token),!this.publisher||!this.subscriber)throw new m.UnexpectedConnectionState("publisher and subscriber connections unset");this.subscriber.restartingIce=!0,this.hasPublished&&(yield this.publisher.createAndSendOffer({iceRestart:!0}));const I=new Date().getTime();for(;new Date().getTime()-I<n.maxICEConnectTimeout*2;){if(this.iceConnected){this.emit(c.EngineEvent.Reconnected);return}yield g.sleep(100)}throw new m.ConnectionError("could not establish ICE connection")})}sendDataPacket(I,U){return t(this,void 0,void 0,function*(){const M=u.DataPacket.encode(I).finish();yield this.ensurePublisherConnected(),U===u.DataPacket_Kind.LOSSY&&this.lossyDC?this.lossyDC.send(M):U===u.DataPacket_Kind.RELIABLE&&this.reliableDC&&this.reliableDC.send(M)})}ensurePublisherConnected(){return t(this,void 0,void 0,function*(){if(!this.subscriberPrimary||this.publisher&&this.publisher.pc.iceConnectionState==="connected")return;yield this.negotiate();const I=new Date().getTime()+n.maxICEConnectTimeout;for(;new Date().getTime()<I;){if(this.publisher&&this.publisher.pc.iceConnectionState==="connected")return;yield g.sleep(50)}throw new m.ConnectionError("could not establish publisher connection")})}negotiate(){return t(this,void 0,void 0,function*(){!this.publisher||(this.hasPublished=!0,this.publisher.negotiate())})}}n.default=x})(RTCEngine);(function(n){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(M,V,T,$){$===void 0&&($=T),Object.defineProperty(M,$,{enumerable:!0,get:function(){return V[T]}})}:function(M,V,T,$){$===void 0&&($=T),M[$]=V[T]}),i=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(M,V){Object.defineProperty(M,"default",{enumerable:!0,value:V})}:function(M,V){M.default=V}),a=commonjsGlobal&&commonjsGlobal.__importStar||function(M){if(M&&M.__esModule)return M;var V={};if(M!=null)for(var T in M)T!=="default"&&Object.prototype.hasOwnProperty.call(M,T)&&t(V,M,T);return i(V,M),V},o=commonjsGlobal&&commonjsGlobal.__awaiter||function(M,V,T,$){function B(G){return G instanceof T?G:new T(function(H){H(G)})}return new(T||(T=Promise))(function(G,H){function X(y){try{s($.next(y))}catch(k){H(k)}}function h(y){try{s($.throw(y))}catch(k){H(k)}}function s(y){y.done?G(y.value):B(y.value).then(X,h)}s(($=$.apply(M,V||[])).next())})},u=commonjsGlobal&&commonjsGlobal.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(n,"__esModule",{value:!0}),n.RoomState=void 0;const l=events.exports,m=u(loglevel.exports),c=livekit_models,f=errors,g=events$1,b=u(LocalParticipant$1),v=u(RemoteParticipant$1),_=a(RTCEngine),x=Track,C=utils;var I;(function(M){M.Disconnected="disconnected",M.Connected="connected",M.Reconnecting="reconnecting"})(I=n.RoomState||(n.RoomState={}));class U extends l.EventEmitter{constructor(V,T){super(),this.state=I.Disconnected,this.activeSpeakers=[],this.audioEnabled=!0,this.connect=($,B,G)=>o(this,void 0,void 0,function*(){if(this.localParticipant)return m.default.warn("already connected to room",this.name),this;try{const H=yield this.engine.join($,B,G);if(m.default.debug("connected to Livekit Server",H.serverVersion),!H.serverVersion)throw new f.UnsupportedServer("unknown server version");this.state=I.Connected;const X=H.participant;this.localParticipant=new b.default(X.sid,X.identity,this.engine),this.localParticipant.updateInfo(X),this.localParticipant.on(g.ParticipantEvent.MetadataChanged,(h,s)=>{this.emit(g.RoomEvent.MetadataChanged,h,s)}),this.localParticipant.on(g.ParticipantEvent.TrackMuted,h=>{this.emit(g.RoomEvent.TrackMuted,h,this.localParticipant)}),this.localParticipant.on(g.ParticipantEvent.TrackUnmuted,h=>{this.emit(g.RoomEvent.TrackUnmuted,h,this.localParticipant)}),H.otherParticipants.forEach(h=>{this.getOrCreateParticipant(h.sid,h)}),this.name=H.room.name,this.sid=H.room.sid}catch(H){throw this.engine.close(),H}return new Promise((H,X)=>{const h=setTimeout(()=>{this.engine.close(),X(new f.ConnectionError("could not connect after timeout"))},_.maxICEConnectTimeout);this.engine.once(g.EngineEvent.Connected,()=>{clearTimeout(h),window.addEventListener("beforeunload",this.disconnect),H(this)})})}),this.disconnect=()=>{this.engine.client.sendLeave(),this.engine.close(),this.handleDisconnect()},this.handleActiveSpeakersUpdate=$=>{const B=[],G={};$.forEach(H=>{if(G[H.sid]=!0,H.sid===this.localParticipant.sid)this.localParticipant.audioLevel=H.level,this.localParticipant.setIsSpeaking(!0),B.push(this.localParticipant);else{const X=this.participants.get(H.sid);X&&(X.audioLevel=H.level,X.setIsSpeaking(!0),B.push(X))}}),G[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(H=>{G[H.sid]||(H.audioLevel=0,H.setIsSpeaking(!1))}),this.activeSpeakers=B,this.emit(g.RoomEvent.ActiveSpeakersChanged,B)},this.handleSpeakersChanged=$=>{const B=new Map;this.activeSpeakers.forEach(H=>{B.set(H.sid,H)}),$.forEach(H=>{let X=this.participants.get(H.sid);H.sid===this.localParticipant.sid&&(X=this.localParticipant),X&&(X.audioLevel=H.level,X.setIsSpeaking(H.active),H.active?B.set(H.sid,X):B.delete(H.sid))});const G=Array.from(B.values());G.sort((H,X)=>X.audioLevel-H.audioLevel),this.activeSpeakers=G,this.emit(g.RoomEvent.ActiveSpeakersChanged,G)},this.handleDataPacket=($,B)=>{const G=this.participants.get($.participantSid);this.emit(g.RoomEvent.DataReceived,$.payload,G,B),G==null||G.emit(g.ParticipantEvent.DataReceived,$.payload,B)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(g.RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=$=>{m.default.warn("could not playback audio",$),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(g.RoomEvent.AudioPlaybackStatusChanged,!1))},this.participants=new Map,this.engine=new _.default(V,T),this.acquireAudioContext(),this.engine.on(g.EngineEvent.MediaTrackAdded,($,B,G)=>{this.onTrackAdded($,B,G)}),this.engine.on(g.EngineEvent.Disconnected,()=>{this.handleDisconnect()}),this.engine.on(g.EngineEvent.ParticipantUpdate,$=>{this.handleParticipantUpdates($)}),this.engine.on(g.EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate),this.engine.on(g.EngineEvent.SpeakersChanged,this.handleSpeakersChanged),this.engine.on(g.EngineEvent.DataPacketReceived,this.handleDataPacket),this.engine.on(g.EngineEvent.Reconnecting,()=>{this.state=I.Reconnecting,this.emit(g.RoomEvent.Reconnecting)}),this.engine.on(g.EngineEvent.Reconnected,()=>{this.state=I.Connected,this.emit(g.RoomEvent.Reconnected)})}startAudio(){return o(this,void 0,void 0,function*(){this.acquireAudioContext();const V=[];this.participants.forEach(T=>{T.audioTracks.forEach($=>{$.track&&$.track.attachedElements.forEach(B=>{V.push(B)})})});try{yield Promise.all(V.map(T=>T.play())),this.handleAudioPlaybackStarted()}catch(T){throw this.handleAudioPlaybackFailed(T),T}})}get canPlaybackAudio(){return this.audioEnabled}onTrackAdded(V,T,$){const B=C.unpackStreamId(T.id),G=B[0];let H=B[1];(!H||H==="")&&(H=V.id),this.getOrCreateParticipant(G).addSubscribedMediaTrack(V,H,$)}handleDisconnect(){this.state!==I.Disconnected&&(this.participants.forEach(V=>{V.tracks.forEach(T=>{V.unpublishTrack(T.trackSid)})}),this.localParticipant.tracks.forEach(V=>{var T,$;(T=V.track)===null||T===void 0||T.stop(),($=V.track)===null||$===void 0||$.detach()}),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&(this.audioContext.close(),this.audioContext=void 0),window.removeEventListener("beforeunload",this.disconnect),this.emit(g.RoomEvent.Disconnected),this.state=I.Disconnected)}handleParticipantUpdates(V){V.forEach(T=>{if(T.sid===this.localParticipant.sid){this.localParticipant.updateInfo(T);return}let $=this.participants.get(T.sid);const B=!$;$=this.getOrCreateParticipant(T.sid,T),T.state===c.ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(T.sid,$):B?this.emit(g.RoomEvent.ParticipantConnected,$):$.updateInfo(T)})}handleParticipantDisconnected(V,T){this.participants.delete(V),T&&(T.tracks.forEach($=>{T.unpublishTrack($.trackSid)}),this.emit(g.RoomEvent.ParticipantDisconnected,T))}acquireAudioContext(){this.audioContext&&this.audioContext.close();const V=window.AudioContext||window.webkitAudioContext;V&&(this.audioContext=new V)}getOrCreateParticipant(V,T){let $=this.participants.get(V);return $||(T?$=v.default.fromParticipantInfo(this.engine.client,T):$=new v.default(this.engine.client,V,""),this.participants.set(V,$),$.on(g.ParticipantEvent.TrackPublished,B=>{this.emit(g.RoomEvent.TrackPublished,B,$)}),$.on(g.ParticipantEvent.TrackSubscribed,(B,G)=>{B.kind===x.Track.Kind.Audio&&(B.on(g.TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),B.on(g.TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)),this.emit(g.RoomEvent.TrackSubscribed,B,G,$)}),$.on(g.ParticipantEvent.TrackUnpublished,B=>{this.emit(g.RoomEvent.TrackUnpublished,B,$)}),$.on(g.ParticipantEvent.TrackUnsubscribed,(B,G)=>{this.emit(g.RoomEvent.TrackUnsubscribed,B,G,$)}),$.on(g.ParticipantEvent.TrackSubscriptionFailed,B=>{this.emit(g.RoomEvent.TrackSubscriptionFailed,B,$)}),$.on(g.ParticipantEvent.TrackMuted,B=>{this.emit(g.RoomEvent.TrackMuted,B,$)}),$.on(g.ParticipantEvent.TrackUnmuted,B=>{this.emit(g.RoomEvent.TrackUnmuted,B,$)}),$.on(g.ParticipantEvent.MetadataChanged,(B,G)=>{this.emit(g.RoomEvent.MetadataChanged,B,G)})),$}emit(V,...T){return m.default.debug("room event",V,...T),super.emit(V,...T)}}n.default=U})(Room);var livekit={},SignalClient={};let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(n,t,i){const a=n.match(t);return a&&a.length>=i&&parseInt(a[i],10)}function wrapPeerConnectionEvent(n,t,i){if(!n.RTCPeerConnection)return;const a=n.RTCPeerConnection.prototype,o=a.addEventListener;a.addEventListener=function(l,m){if(l!==t)return o.apply(this,arguments);const c=f=>{const g=i(f);g&&(m.handleEvent?m.handleEvent(g):m(g))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(m,c),o.apply(this,[l,c])};const u=a.removeEventListener;a.removeEventListener=function(l,m){if(l!==t||!this._eventMap||!this._eventMap[t])return u.apply(this,arguments);if(!this._eventMap[t].has(m))return u.apply(this,arguments);const c=this._eventMap[t].get(m);return this._eventMap[t].delete(m),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,u.apply(this,[l,c])},Object.defineProperty(a,"on"+t,{get(){return this["_on"+t]},set(l){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),l&&this.addEventListener(t,this["_on"+t]=l)},enumerable:!0,configurable:!0})}function disableLog(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(logDisabled_=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(deprecationWarnings_=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function log$1(){if(typeof window=="object"){if(logDisabled_)return;typeof console!="undefined"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(n,t){!deprecationWarnings_||console.warn(n+" is deprecated, please use "+t+" instead.")}function detectBrowser(n){const t={browser:null,version:null};if(typeof n=="undefined"||!n.navigator)return t.browser="Not a browser.",t;const{navigator:i}=n;if(i.mozGetUserMedia)t.browser="firefox",t.version=extractVersion(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection&&!n.RTCIceGatherer)t.browser="chrome",t.version=extractVersion(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(i.mediaDevices&&i.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=extractVersion(i.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(n.RTCPeerConnection&&i.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=extractVersion(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function isObject(n){return Object.prototype.toString.call(n)==="[object Object]"}function compactObject(n){return isObject(n)?Object.keys(n).reduce(function(t,i){const a=isObject(n[i]),o=a?compactObject(n[i]):n[i],u=a&&!Object.keys(o).length;return o===void 0||u?t:Object.assign(t,{[i]:o})},{}):n}function walkStats(n,t,i){!t||i.has(t.id)||(i.set(t.id,t),Object.keys(t).forEach(a=>{a.endsWith("Id")?walkStats(n,n.get(t[a]),i):a.endsWith("Ids")&&t[a].forEach(o=>{walkStats(n,n.get(o),i)})}))}function filterStats(n,t,i){const a=i?"outbound-rtp":"inbound-rtp",o=new Map;if(t===null)return o;const u=[];return n.forEach(l=>{l.type==="track"&&l.trackIdentifier===t.id&&u.push(l)}),u.forEach(l=>{n.forEach(m=>{m.type===a&&m.trackId===l.id&&walkStats(n,m,o)})}),o}const logging=log$1;function shimGetUserMedia$3(n,t){const i=n&&n.navigator;if(!i.mediaDevices)return;const a=function(m){if(typeof m!="object"||m.mandatory||m.optional)return m;const c={};return Object.keys(m).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const g=typeof m[f]=="object"?m[f]:{ideal:m[f]};g.exact!==void 0&&typeof g.exact=="number"&&(g.min=g.max=g.exact);const b=function(v,_){return v?v+_.charAt(0).toUpperCase()+_.slice(1):_==="deviceId"?"sourceId":_};if(g.ideal!==void 0){c.optional=c.optional||[];let v={};typeof g.ideal=="number"?(v[b("min",f)]=g.ideal,c.optional.push(v),v={},v[b("max",f)]=g.ideal,c.optional.push(v)):(v[b("",f)]=g.ideal,c.optional.push(v))}g.exact!==void 0&&typeof g.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[b("",f)]=g.exact):["min","max"].forEach(v=>{g[v]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[b(v,f)]=g[v])})}),m.advanced&&(c.optional=(c.optional||[]).concat(m.advanced)),c},o=function(m,c){if(t.version>=61)return c(m);if(m=JSON.parse(JSON.stringify(m)),m&&typeof m.audio=="object"){const f=function(g,b,v){b in g&&!(v in g)&&(g[v]=g[b],delete g[b])};m=JSON.parse(JSON.stringify(m)),f(m.audio,"autoGainControl","googAutoGainControl"),f(m.audio,"noiseSuppression","googNoiseSuppression"),m.audio=a(m.audio)}if(m&&typeof m.video=="object"){let f=m.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const g=t.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(i.mediaDevices.getSupportedConstraints&&i.mediaDevices.getSupportedConstraints().facingMode&&!g)){delete m.video.facingMode;let b;if(f.exact==="environment"||f.ideal==="environment"?b=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(b=["front"]),b)return i.mediaDevices.enumerateDevices().then(v=>{v=v.filter(x=>x.kind==="videoinput");let _=v.find(x=>b.some(C=>x.label.toLowerCase().includes(C)));return!_&&v.length&&b.includes("back")&&(_=v[v.length-1]),_&&(m.video.deviceId=f.exact?{exact:_.deviceId}:{ideal:_.deviceId}),m.video=a(m.video),logging("chrome: "+JSON.stringify(m)),c(m)})}m.video=a(m.video)}return logging("chrome: "+JSON.stringify(m)),c(m)},u=function(m){return t.version>=64?m:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[m.name]||m.name,message:m.message,constraint:m.constraint||m.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(m,c,f){o(m,g=>{i.webkitGetUserMedia(g,c,b=>{f&&f(u(b))})})};if(i.getUserMedia=l.bind(i),i.mediaDevices.getUserMedia){const m=i.mediaDevices.getUserMedia.bind(i.mediaDevices);i.mediaDevices.getUserMedia=function(c){return o(c,f=>m(f).then(g=>{if(f.audio&&!g.getAudioTracks().length||f.video&&!g.getVideoTracks().length)throw g.getTracks().forEach(b=>{b.stop()}),new DOMException("","NotFoundError");return g},g=>Promise.reject(u(g))))}}}function shimGetDisplayMedia$2(n,t){if(!(n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices)&&!!n.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}n.navigator.mediaDevices.getDisplayMedia=function(a){return t(a).then(o=>{const u=a.video&&a.video.width,l=a.video&&a.video.height,m=a.video&&a.video.frameRate;return a.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:o,maxFrameRate:m||3}},u&&(a.video.mandatory.maxWidth=u),l&&(a.video.mandatory.maxHeight=l),n.navigator.mediaDevices.getUserMedia(a)})}}}function shimMediaStream(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function shimOnTrack$1(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(i){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=i)},enumerable:!0,configurable:!0});const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=a=>{a.stream.addEventListener("addtrack",o=>{let u;n.RTCPeerConnection.prototype.getReceivers?u=this.getReceivers().find(m=>m.track&&m.track.id===o.track.id):u={track:o.track};const l=new Event("track");l.track=o.track,l.receiver=u,l.transceiver={receiver:u},l.streams=[a.stream],this.dispatchEvent(l)}),a.stream.getTracks().forEach(o=>{let u;n.RTCPeerConnection.prototype.getReceivers?u=this.getReceivers().find(m=>m.track&&m.track.id===o.id):u={track:o};const l=new Event("track");l.track=o,l.receiver=u,l.transceiver={receiver:u},l.streams=[a.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else wrapPeerConnectionEvent(n,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function shimGetSendersWithDtmf(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const t=function(o,u){return{track:u,get dtmf(){return this._dtmf===void 0&&(u.kind==="audio"?this._dtmf=o.createDTMFSender(u):this._dtmf=null),this._dtmf},_pc:o}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(m,c){let f=o.apply(this,arguments);return f||(f=t(this,m),this._senders.push(f)),f};const u=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(m){u.apply(this,arguments);const c=this._senders.indexOf(m);c!==-1&&this._senders.splice(c,1)}}const i=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(u){this._senders=this._senders||[],i.apply(this,[u]),u.getTracks().forEach(l=>{this._senders.push(t(this,l))})};const a=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(u){this._senders=this._senders||[],a.apply(this,[u]),u.getTracks().forEach(l=>{const m=this._senders.find(c=>c.track===l);m&&this._senders.splice(this._senders.indexOf(m),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const t=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const a=t.apply(this,[]);return a.forEach(o=>o._pc=this),a},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(n){if(!n.RTCPeerConnection)return;const t=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[a,o,u]=arguments;if(arguments.length>0&&typeof a=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof a!="function"))return t.apply(this,[]);const l=function(c){const f={};return c.result().forEach(b=>{const v={id:b.id,timestamp:b.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[b.type]||b.type};b.names().forEach(_=>{v[_]=b.stat(_)}),f[v.id]=v}),f},m=function(c){return new Map(Object.keys(c).map(f=>[f,c[f]]))};if(arguments.length>=2){const c=function(f){o(m(l(f)))};return t.apply(this,[c,a])}return new Promise((c,f)=>{t.apply(this,[function(g){c(m(l(g)))},f])}).then(o,u)}}function shimSenderReceiverGetStats(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const i=n.RTCPeerConnection.prototype.getSenders;i&&(n.RTCPeerConnection.prototype.getSenders=function(){const u=i.apply(this,[]);return u.forEach(l=>l._pc=this),u});const a=n.RTCPeerConnection.prototype.addTrack;a&&(n.RTCPeerConnection.prototype.addTrack=function(){const u=a.apply(this,arguments);return u._pc=this,u}),n.RTCRtpSender.prototype.getStats=function(){const u=this;return this._pc.getStats().then(l=>filterStats(l,u.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const i=n.RTCPeerConnection.prototype.getReceivers;i&&(n.RTCPeerConnection.prototype.getReceivers=function(){const o=i.apply(this,[]);return o.forEach(u=>u._pc=this),o}),wrapPeerConnectionEvent(n,"track",a=>(a.receiver._pc=a.srcElement,a)),n.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(u=>filterStats(u,o.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype&&"getStats"in n.RTCRtpReceiver.prototype))return;const t=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const a=arguments[0];let o,u,l;return this.getSenders().forEach(m=>{m.track===a&&(o?l=!0:o=m)}),this.getReceivers().forEach(m=>(m.track===a&&(u?l=!0:u=m),m.track===a)),l||o&&u?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():u?u.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const t=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(l,m){if(!m)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=t.apply(this,arguments);return this._shimmedLocalStreams[m.id]?this._shimmedLocalStreams[m.id].indexOf(c)===-1&&this._shimmedLocalStreams[m.id].push(c):this._shimmedLocalStreams[m.id]=[m,c],c};const i=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(f=>{if(this.getSenders().find(b=>b.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const m=this.getSenders();i.apply(this,arguments);const c=this.getSenders().filter(f=>m.indexOf(f)===-1);this._shimmedLocalStreams[l.id]=[l].concat(c)};const a=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],a.apply(this,arguments)};const o=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(m=>{const c=this._shimmedLocalStreams[m].indexOf(l);c!==-1&&this._shimmedLocalStreams[m].splice(c,1),this._shimmedLocalStreams[m].length===1&&delete this._shimmedLocalStreams[m]}),o.apply(this,arguments)}}function shimAddTrackRemoveTrack(n,t){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&t.version>=65)return shimAddTrackRemoveTrackWithNative(n);const i=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const g=i.apply(this);return this._reverseStreams=this._reverseStreams||{},g.map(b=>this._reverseStreams[b.id])};const a=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(g){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},g.getTracks().forEach(b=>{if(this.getSenders().find(_=>_.track===b))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[g.id]){const b=new n.MediaStream(g.getTracks());this._streams[g.id]=b,this._reverseStreams[b.id]=g,g=b}a.apply(this,[g])};const o=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(g){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[g.id]||g]),delete this._reverseStreams[this._streams[g.id]?this._streams[g.id].id:g.id],delete this._streams[g.id]},n.RTCPeerConnection.prototype.addTrack=function(g,b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(C=>C===g))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===g))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const x=this._streams[b.id];if(x)x.addTrack(g),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new n.MediaStream([g]);this._streams[b.id]=C,this._reverseStreams[C.id]=b,this.addStream(C)}return this.getSenders().find(C=>C.track===g)};function u(f,g){let b=g.sdp;return Object.keys(f._reverseStreams||[]).forEach(v=>{const _=f._reverseStreams[v],x=f._streams[_.id];b=b.replace(new RegExp(x.id,"g"),_.id)}),new RTCSessionDescription({type:g.type,sdp:b})}function l(f,g){let b=g.sdp;return Object.keys(f._reverseStreams||[]).forEach(v=>{const _=f._reverseStreams[v],x=f._streams[_.id];b=b.replace(new RegExp(_.id,"g"),x.id)}),new RTCSessionDescription({type:g.type,sdp:b})}["createOffer","createAnswer"].forEach(function(f){const g=n.RTCPeerConnection.prototype[f],b={[f](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?g.apply(this,[x=>{const C=u(this,x);v[0].apply(null,[C])},x=>{v[1]&&v[1].apply(null,x)},arguments[2]]):g.apply(this,arguments).then(x=>u(this,x))}};n.RTCPeerConnection.prototype[f]=b[f]});const m=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?m.apply(this,arguments):(arguments[0]=l(this,arguments[0]),m.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const f=c.get.apply(this);return f.type===""?f:u(this,f)}}),n.RTCPeerConnection.prototype.removeTrack=function(g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!g._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(g._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(_=>{this._streams[_].getTracks().find(C=>g.track===C)&&(v=this._streams[_])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(g.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$2(n,t){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),!!n.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const a=n.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};n.RTCPeerConnection.prototype[i]=o[i]})}function fixNegotiationNeeded(n,t){wrapPeerConnectionEvent(n,"negotiationneeded",i=>{const a=i.target;if(!((t.version<72||a.getConfiguration&&a.getConfiguration().sdpSemantics==="plan-b")&&a.signalingState!=="stable"))return i})}var chromeShim=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream,shimOnTrack:shimOnTrack$1,shimGetSendersWithDtmf,shimGetStats,shimSenderReceiverGetStats,shimAddTrackRemoveTrackWithNative,shimAddTrackRemoveTrack,shimPeerConnection:shimPeerConnection$2,fixNegotiationNeeded,shimGetUserMedia:shimGetUserMedia$3,shimGetDisplayMedia:shimGetDisplayMedia$2},Symbol.toStringTag,{value:"Module"}));function filterIceServers$1(n,t){let i=!1;return n=JSON.parse(JSON.stringify(n)),n.filter(a=>{if(a&&(a.urls||a.url)){let o=a.urls||a.url;a.url&&!a.urls&&deprecated("RTCIceServer.url","RTCIceServer.urls");const u=typeof o=="string";return u&&(o=[o]),o=o.filter(l=>{if(l.indexOf("stun:")===0)return!1;const m=l.startsWith("turn")&&!l.startsWith("turn:[")&&l.includes("transport=udp");return m&&!i?(i=!0,!0):m&&!i}),delete a.url,a.urls=u?o[0]:o,!!o.length}})}var sdp={exports:{}};(function(n){var t={};t.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},t.localCName=t.generateIdentifier(),t.splitLines=function(i){return i.trim().split(`
`).map(function(a){return a.trim()})},t.splitSections=function(i){var a=i.split(`
m=`);return a.map(function(o,u){return(u>0?"m="+o:o).trim()+`\r
`})},t.getDescription=function(i){var a=t.splitSections(i);return a&&a[0]},t.getMediaSections=function(i){var a=t.splitSections(i);return a.shift(),a},t.matchPrefix=function(i,a){return t.splitLines(i).filter(function(o){return o.indexOf(a)===0})},t.parseCandidate=function(i){var a;i.indexOf("a=candidate:")===0?a=i.substring(12).split(" "):a=i.substring(10).split(" ");for(var o={foundation:a[0],component:parseInt(a[1],10),protocol:a[2].toLowerCase(),priority:parseInt(a[3],10),ip:a[4],address:a[4],port:parseInt(a[5],10),type:a[7]},u=8;u<a.length;u+=2)switch(a[u]){case"raddr":o.relatedAddress=a[u+1];break;case"rport":o.relatedPort=parseInt(a[u+1],10);break;case"tcptype":o.tcpType=a[u+1];break;case"ufrag":o.ufrag=a[u+1],o.usernameFragment=a[u+1];break;default:o[a[u]]=a[u+1];break}return o},t.writeCandidate=function(i){var a=[];a.push(i.foundation),a.push(i.component),a.push(i.protocol.toUpperCase()),a.push(i.priority),a.push(i.address||i.ip),a.push(i.port);var o=i.type;return a.push("typ"),a.push(o),o!=="host"&&i.relatedAddress&&i.relatedPort&&(a.push("raddr"),a.push(i.relatedAddress),a.push("rport"),a.push(i.relatedPort)),i.tcpType&&i.protocol.toLowerCase()==="tcp"&&(a.push("tcptype"),a.push(i.tcpType)),(i.usernameFragment||i.ufrag)&&(a.push("ufrag"),a.push(i.usernameFragment||i.ufrag)),"candidate:"+a.join(" ")},t.parseIceOptions=function(i){return i.substr(14).split(" ")},t.parseRtpMap=function(i){var a=i.substr(9).split(" "),o={payloadType:parseInt(a.shift(),10)};return a=a[0].split("/"),o.name=a[0],o.clockRate=parseInt(a[1],10),o.channels=a.length===3?parseInt(a[2],10):1,o.numChannels=o.channels,o},t.writeRtpMap=function(i){var a=i.payloadType;i.preferredPayloadType!==void 0&&(a=i.preferredPayloadType);var o=i.channels||i.numChannels||1;return"a=rtpmap:"+a+" "+i.name+"/"+i.clockRate+(o!==1?"/"+o:"")+`\r
`},t.parseExtmap=function(i){var a=i.substr(9).split(" ");return{id:parseInt(a[0],10),direction:a[0].indexOf("/")>0?a[0].split("/")[1]:"sendrecv",uri:a[1]}},t.writeExtmap=function(i){return"a=extmap:"+(i.id||i.preferredId)+(i.direction&&i.direction!=="sendrecv"?"/"+i.direction:"")+" "+i.uri+`\r
`},t.parseFmtp=function(i){for(var a={},o,u=i.substr(i.indexOf(" ")+1).split(";"),l=0;l<u.length;l++)o=u[l].trim().split("="),a[o[0].trim()]=o[1];return a},t.writeFmtp=function(i){var a="",o=i.payloadType;if(i.preferredPayloadType!==void 0&&(o=i.preferredPayloadType),i.parameters&&Object.keys(i.parameters).length){var u=[];Object.keys(i.parameters).forEach(function(l){i.parameters[l]?u.push(l+"="+i.parameters[l]):u.push(l)}),a+="a=fmtp:"+o+" "+u.join(";")+`\r
`}return a},t.parseRtcpFb=function(i){var a=i.substr(i.indexOf(" ")+1).split(" ");return{type:a.shift(),parameter:a.join(" ")}},t.writeRtcpFb=function(i){var a="",o=i.payloadType;return i.preferredPayloadType!==void 0&&(o=i.preferredPayloadType),i.rtcpFeedback&&i.rtcpFeedback.length&&i.rtcpFeedback.forEach(function(u){a+="a=rtcp-fb:"+o+" "+u.type+(u.parameter&&u.parameter.length?" "+u.parameter:"")+`\r
`}),a},t.parseSsrcMedia=function(i){var a=i.indexOf(" "),o={ssrc:parseInt(i.substr(7,a-7),10)},u=i.indexOf(":",a);return u>-1?(o.attribute=i.substr(a+1,u-a-1),o.value=i.substr(u+1)):o.attribute=i.substr(a+1),o},t.parseSsrcGroup=function(i){var a=i.substr(13).split(" ");return{semantics:a.shift(),ssrcs:a.map(function(o){return parseInt(o,10)})}},t.getMid=function(i){var a=t.matchPrefix(i,"a=mid:")[0];if(a)return a.substr(6)},t.parseFingerprint=function(i){var a=i.substr(14).split(" ");return{algorithm:a[0].toLowerCase(),value:a[1]}},t.getDtlsParameters=function(i,a){var o=t.matchPrefix(i+a,"a=fingerprint:");return{role:"auto",fingerprints:o.map(t.parseFingerprint)}},t.writeDtlsParameters=function(i,a){var o="a=setup:"+a+`\r
`;return i.fingerprints.forEach(function(u){o+="a=fingerprint:"+u.algorithm+" "+u.value+`\r
`}),o},t.parseCryptoLine=function(i){var a=i.substr(9).split(" ");return{tag:parseInt(a[0],10),cryptoSuite:a[1],keyParams:a[2],sessionParams:a.slice(3)}},t.writeCryptoLine=function(i){return"a=crypto:"+i.tag+" "+i.cryptoSuite+" "+(typeof i.keyParams=="object"?t.writeCryptoKeyParams(i.keyParams):i.keyParams)+(i.sessionParams?" "+i.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(i){if(i.indexOf("inline:")!==0)return null;var a=i.substr(7).split("|");return{keyMethod:"inline",keySalt:a[0],lifeTime:a[1],mkiValue:a[2]?a[2].split(":")[0]:void 0,mkiLength:a[2]?a[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(i){return i.keyMethod+":"+i.keySalt+(i.lifeTime?"|"+i.lifeTime:"")+(i.mkiValue&&i.mkiLength?"|"+i.mkiValue+":"+i.mkiLength:"")},t.getCryptoParameters=function(i,a){var o=t.matchPrefix(i+a,"a=crypto:");return o.map(t.parseCryptoLine)},t.getIceParameters=function(i,a){var o=t.matchPrefix(i+a,"a=ice-ufrag:")[0],u=t.matchPrefix(i+a,"a=ice-pwd:")[0];return o&&u?{usernameFragment:o.substr(12),password:u.substr(10)}:null},t.writeIceParameters=function(i){return"a=ice-ufrag:"+i.usernameFragment+`\r
a=ice-pwd:`+i.password+`\r
`},t.parseRtpParameters=function(i){for(var a={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=t.splitLines(i),u=o[0].split(" "),l=3;l<u.length;l++){var m=u[l],c=t.matchPrefix(i,"a=rtpmap:"+m+" ")[0];if(c){var f=t.parseRtpMap(c),g=t.matchPrefix(i,"a=fmtp:"+m+" ");switch(f.parameters=g.length?t.parseFmtp(g[0]):{},f.rtcpFeedback=t.matchPrefix(i,"a=rtcp-fb:"+m+" ").map(t.parseRtcpFb),a.codecs.push(f),f.name.toUpperCase()){case"RED":case"ULPFEC":a.fecMechanisms.push(f.name.toUpperCase());break}}}return t.matchPrefix(i,"a=extmap:").forEach(function(b){a.headerExtensions.push(t.parseExtmap(b))}),a},t.writeRtpDescription=function(i,a){var o="";o+="m="+i+" ",o+=a.codecs.length>0?"9":"0",o+=" UDP/TLS/RTP/SAVPF ",o+=a.codecs.map(function(l){return l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType}).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,a.codecs.forEach(function(l){o+=t.writeRtpMap(l),o+=t.writeFmtp(l),o+=t.writeRtcpFb(l)});var u=0;return a.codecs.forEach(function(l){l.maxptime>u&&(u=l.maxptime)}),u>0&&(o+="a=maxptime:"+u+`\r
`),o+=`a=rtcp-mux\r
`,a.headerExtensions&&a.headerExtensions.forEach(function(l){o+=t.writeExtmap(l)}),o},t.parseRtpEncodingParameters=function(i){var a=[],o=t.parseRtpParameters(i),u=o.fecMechanisms.indexOf("RED")!==-1,l=o.fecMechanisms.indexOf("ULPFEC")!==-1,m=t.matchPrefix(i,"a=ssrc:").map(function(v){return t.parseSsrcMedia(v)}).filter(function(v){return v.attribute==="cname"}),c=m.length>0&&m[0].ssrc,f,g=t.matchPrefix(i,"a=ssrc-group:FID").map(function(v){var _=v.substr(17).split(" ");return _.map(function(x){return parseInt(x,10)})});g.length>0&&g[0].length>1&&g[0][0]===c&&(f=g[0][1]),o.codecs.forEach(function(v){if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){var _={ssrc:c,codecPayloadType:parseInt(v.parameters.apt,10)};c&&f&&(_.rtx={ssrc:f}),a.push(_),u&&(_=JSON.parse(JSON.stringify(_)),_.fec={ssrc:c,mechanism:l?"red+ulpfec":"red"},a.push(_))}}),a.length===0&&c&&a.push({ssrc:c});var b=t.matchPrefix(i,"b=");return b.length&&(b[0].indexOf("b=TIAS:")===0?b=parseInt(b[0].substr(7),10):b[0].indexOf("b=AS:")===0?b=parseInt(b[0].substr(5),10)*1e3*.95-50*40*8:b=void 0,a.forEach(function(v){v.maxBitrate=b})),a},t.parseRtcpParameters=function(i){var a={},o=t.matchPrefix(i,"a=ssrc:").map(function(m){return t.parseSsrcMedia(m)}).filter(function(m){return m.attribute==="cname"})[0];o&&(a.cname=o.value,a.ssrc=o.ssrc);var u=t.matchPrefix(i,"a=rtcp-rsize");a.reducedSize=u.length>0,a.compound=u.length===0;var l=t.matchPrefix(i,"a=rtcp-mux");return a.mux=l.length>0,a},t.parseMsid=function(i){var a,o=t.matchPrefix(i,"a=msid:");if(o.length===1)return a=o[0].substr(7).split(" "),{stream:a[0],track:a[1]};var u=t.matchPrefix(i,"a=ssrc:").map(function(l){return t.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="msid"});if(u.length>0)return a=u[0].value.split(" "),{stream:a[0],track:a[1]}},t.parseSctpDescription=function(i){var a=t.parseMLine(i),o=t.matchPrefix(i,"a=max-message-size:"),u;o.length>0&&(u=parseInt(o[0].substr(19),10)),isNaN(u)&&(u=65536);var l=t.matchPrefix(i,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substr(12),10),protocol:a.fmt,maxMessageSize:u};var m=t.matchPrefix(i,"a=sctpmap:");if(m.length>0){var c=t.matchPrefix(i,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:u}}},t.writeSctpDescription=function(i,a){var o=[];return i.protocol!=="DTLS/SCTP"?o=["m="+i.kind+" 9 "+i.protocol+" "+a.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+a.port+`\r
`]:o=["m="+i.kind+" 9 "+i.protocol+" "+a.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+a.port+" "+a.protocol+` 65535\r
`],a.maxMessageSize!==void 0&&o.push("a=max-message-size:"+a.maxMessageSize+`\r
`),o.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(i,a,o){var u,l=a!==void 0?a:2;i?u=i:u=t.generateSessionId();var m=o||"thisisadapterortc";return`v=0\r
o=`+m+" "+u+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.writeMediaSection=function(i,a,o,u){var l=t.writeRtpDescription(i.kind,a);if(l+=t.writeIceParameters(i.iceGatherer.getLocalParameters()),l+=t.writeDtlsParameters(i.dtlsTransport.getLocalParameters(),o==="offer"?"actpass":"active"),l+="a=mid:"+i.mid+`\r
`,i.direction?l+="a="+i.direction+`\r
`:i.rtpSender&&i.rtpReceiver?l+=`a=sendrecv\r
`:i.rtpSender?l+=`a=sendonly\r
`:i.rtpReceiver?l+=`a=recvonly\r
`:l+=`a=inactive\r
`,i.rtpSender){var m="msid:"+u.id+" "+i.rtpSender.track.id+`\r
`;l+="a="+m,l+="a=ssrc:"+i.sendEncodingParameters[0].ssrc+" "+m,i.sendEncodingParameters[0].rtx&&(l+="a=ssrc:"+i.sendEncodingParameters[0].rtx.ssrc+" "+m,l+="a=ssrc-group:FID "+i.sendEncodingParameters[0].ssrc+" "+i.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return l+="a=ssrc:"+i.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+`\r
`,i.rtpSender&&i.sendEncodingParameters[0].rtx&&(l+="a=ssrc:"+i.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+`\r
`),l},t.getDirection=function(i,a){for(var o=t.splitLines(i),u=0;u<o.length;u++)switch(o[u]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[u].substr(2)}return a?t.getDirection(a):"sendrecv"},t.getKind=function(i){var a=t.splitLines(i),o=a[0].split(" ");return o[0].substr(2)},t.isRejected=function(i){return i.split(" ",2)[1]==="0"},t.parseMLine=function(i){var a=t.splitLines(i),o=a[0].substr(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},t.parseOLine=function(i){var a=t.matchPrefix(i,"o=")[0],o=a.substr(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},t.isValidSDP=function(i){if(typeof i!="string"||i.length===0)return!1;for(var a=t.splitLines(i),o=0;o<a.length;o++)if(a[o].length<2||a[o].charAt(1)!=="=")return!1;return!0},n.exports=t})(sdp);var SDPUtils$1=sdp.exports,SDPUtils=sdp.exports;function fixStatsType(n){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[n.type]||n.type}function writeMediaSection(n,t,i,a,o){var u=SDPUtils.writeRtpDescription(n.kind,t);if(u+=SDPUtils.writeIceParameters(n.iceGatherer.getLocalParameters()),u+=SDPUtils.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":o||"active"),u+="a=mid:"+n.mid+`\r
`,n.rtpSender&&n.rtpReceiver?u+=`a=sendrecv\r
`:n.rtpSender?u+=`a=sendonly\r
`:n.rtpReceiver?u+=`a=recvonly\r
`:u+=`a=inactive\r
`,n.rtpSender){var l=n.rtpSender._initialTrackId||n.rtpSender.track.id;n.rtpSender._initialTrackId=l;var m="msid:"+(a?a.id:"-")+" "+l+`\r
`;u+="a="+m,u+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+m,n.sendEncodingParameters[0].rtx&&(u+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+m,u+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return u+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+SDPUtils.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(u+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+SDPUtils.localCName+`\r
`),u}function filterIceServers(n,t){var i=!1;return n=JSON.parse(JSON.stringify(n)),n.filter(function(a){if(a&&(a.urls||a.url)){var o=a.urls||a.url;a.url&&!a.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var u=typeof o=="string";return u&&(o=[o]),o=o.filter(function(l){var m=l.indexOf("turn:")===0&&l.indexOf("transport=udp")!==-1&&l.indexOf("turn:[")===-1&&!i;return m?(i=!0,!0):l.indexOf("stun:")===0&&t>=14393&&l.indexOf("?transport=udp")===-1}),delete a.url,a.urls=u?o[0]:o,!!o.length}})}function getCommonCapabilities(n,t){var i={codecs:[],headerExtensions:[],fecMechanisms:[]},a=function(u,l){u=parseInt(u,10);for(var m=0;m<l.length;m++)if(l[m].payloadType===u||l[m].preferredPayloadType===u)return l[m]},o=function(u,l,m,c){var f=a(u.parameters.apt,m),g=a(l.parameters.apt,c);return f&&g&&f.name.toLowerCase()===g.name.toLowerCase()};return n.codecs.forEach(function(u){for(var l=0;l<t.codecs.length;l++){var m=t.codecs[l];if(u.name.toLowerCase()===m.name.toLowerCase()&&u.clockRate===m.clockRate){if(u.name.toLowerCase()==="rtx"&&u.parameters&&m.parameters.apt&&!o(u,m,n.codecs,t.codecs))continue;m=JSON.parse(JSON.stringify(m)),m.numChannels=Math.min(u.numChannels,m.numChannels),i.codecs.push(m),m.rtcpFeedback=m.rtcpFeedback.filter(function(c){for(var f=0;f<u.rtcpFeedback.length;f++)if(u.rtcpFeedback[f].type===c.type&&u.rtcpFeedback[f].parameter===c.parameter)return!0;return!1});break}}}),n.headerExtensions.forEach(function(u){for(var l=0;l<t.headerExtensions.length;l++){var m=t.headerExtensions[l];if(u.uri===m.uri){i.headerExtensions.push(m);break}}}),i}function isActionAllowedInSignalingState(n,t,i){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][n].indexOf(i)!==-1}function maybeAddCandidate(n,t){var i=n.getRemoteCandidates().find(function(a){return t.foundation===a.foundation&&t.ip===a.ip&&t.port===a.port&&t.priority===a.priority&&t.protocol===a.protocol&&t.type===a.type});return i||n.addRemoteCandidate(t),!i}function makeError(n,t){var i=new Error(t);return i.name=n,i.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[n],i}var rtcpeerconnection=function(n,t){function i(c,f){f.addTrack(c),f.dispatchEvent(new n.MediaStreamTrackEvent("addtrack",{track:c}))}function a(c,f){f.removeTrack(c),f.dispatchEvent(new n.MediaStreamTrackEvent("removetrack",{track:c}))}function o(c,f,g,b){var v=new Event("track");v.track=f,v.receiver=g,v.transceiver={receiver:g},v.streams=b,n.setTimeout(function(){c._dispatchEvent("track",v)})}var u=function(c){var f=this,g=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(v){f[v]=g[v].bind(g)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",c=JSON.parse(JSON.stringify(c||{})),this.usingBundle=c.bundlePolicy==="max-bundle",c.rtcpMuxPolicy==="negotiate")throw makeError("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(c.rtcpMuxPolicy||(c.rtcpMuxPolicy="require"),c.iceTransportPolicy){case"all":case"relay":break;default:c.iceTransportPolicy="all";break}switch(c.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:c.bundlePolicy="balanced";break}if(c.iceServers=filterIceServers(c.iceServers||[],t),this._iceGatherers=[],c.iceCandidatePoolSize)for(var b=c.iceCandidatePoolSize;b>0;b--)this._iceGatherers.push(new n.RTCIceGatherer({iceServers:c.iceServers,gatherPolicy:c.iceTransportPolicy}));else c.iceCandidatePoolSize=0;this._config=c,this.transceivers=[],this._sdpSessionId=SDPUtils.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(u.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(u.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),u.prototype.onicecandidate=null,u.prototype.onaddstream=null,u.prototype.ontrack=null,u.prototype.onremovestream=null,u.prototype.onsignalingstatechange=null,u.prototype.oniceconnectionstatechange=null,u.prototype.onconnectionstatechange=null,u.prototype.onicegatheringstatechange=null,u.prototype.onnegotiationneeded=null,u.prototype.ondatachannel=null,u.prototype._dispatchEvent=function(c,f){this._isClosed||(this.dispatchEvent(f),typeof this["on"+c]=="function"&&this["on"+c](f))},u.prototype._emitGatheringStateChange=function(){var c=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",c)},u.prototype.getConfiguration=function(){return this._config},u.prototype.getLocalStreams=function(){return this.localStreams},u.prototype.getRemoteStreams=function(){return this.remoteStreams},u.prototype._createTransceiver=function(c,f){var g=this.transceivers.length>0,b={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:c,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&g)b.iceTransport=this.transceivers[0].iceTransport,b.dtlsTransport=this.transceivers[0].dtlsTransport;else{var v=this._createIceAndDtlsTransports();b.iceTransport=v.iceTransport,b.dtlsTransport=v.dtlsTransport}return f||this.transceivers.push(b),b},u.prototype.addTrack=function(c,f){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var g=this.transceivers.find(function(_){return _.track===c});if(g)throw makeError("InvalidAccessError","Track already exists.");for(var b,v=0;v<this.transceivers.length;v++)!this.transceivers[v].track&&this.transceivers[v].kind===c.kind&&(b=this.transceivers[v]);return b||(b=this._createTransceiver(c.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(f)===-1&&this.localStreams.push(f),b.track=c,b.stream=f,b.rtpSender=new n.RTCRtpSender(c,b.dtlsTransport),b.rtpSender},u.prototype.addStream=function(c){var f=this;if(t>=15025)c.getTracks().forEach(function(b){f.addTrack(b,c)});else{var g=c.clone();c.getTracks().forEach(function(b,v){var _=g.getTracks()[v];b.addEventListener("enabled",function(x){_.enabled=x.enabled})}),g.getTracks().forEach(function(b){f.addTrack(b,g)})}},u.prototype.removeTrack=function(c){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(c instanceof n.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var f=this.transceivers.find(function(v){return v.rtpSender===c});if(!f)throw makeError("InvalidAccessError","Sender was not created by this connection.");var g=f.stream;f.rtpSender.stop(),f.rtpSender=null,f.track=null,f.stream=null;var b=this.transceivers.map(function(v){return v.stream});b.indexOf(g)===-1&&this.localStreams.indexOf(g)>-1&&this.localStreams.splice(this.localStreams.indexOf(g),1),this._maybeFireNegotiationNeeded()},u.prototype.removeStream=function(c){var f=this;c.getTracks().forEach(function(g){var b=f.getSenders().find(function(v){return v.track===g});b&&f.removeTrack(b)})},u.prototype.getSenders=function(){return this.transceivers.filter(function(c){return!!c.rtpSender}).map(function(c){return c.rtpSender})},u.prototype.getReceivers=function(){return this.transceivers.filter(function(c){return!!c.rtpReceiver}).map(function(c){return c.rtpReceiver})},u.prototype._createIceGatherer=function(c,f){var g=this;if(f&&c>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var b=new n.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(b,"state",{value:"new",writable:!0}),this.transceivers[c].bufferedCandidateEvents=[],this.transceivers[c].bufferCandidates=function(v){var _=!v.candidate||Object.keys(v.candidate).length===0;b.state=_?"completed":"gathering",g.transceivers[c].bufferedCandidateEvents!==null&&g.transceivers[c].bufferedCandidateEvents.push(v)},b.addEventListener("localcandidate",this.transceivers[c].bufferCandidates),b},u.prototype._gather=function(c,f){var g=this,b=this.transceivers[f].iceGatherer;if(!b.onlocalcandidate){var v=this.transceivers[f].bufferedCandidateEvents;this.transceivers[f].bufferedCandidateEvents=null,b.removeEventListener("localcandidate",this.transceivers[f].bufferCandidates),b.onlocalcandidate=function(_){if(!(g.usingBundle&&f>0)){var x=new Event("icecandidate");x.candidate={sdpMid:c,sdpMLineIndex:f};var C=_.candidate,I=!C||Object.keys(C).length===0;if(I)(b.state==="new"||b.state==="gathering")&&(b.state="completed");else{b.state==="new"&&(b.state="gathering"),C.component=1,C.ufrag=b.getLocalParameters().usernameFragment;var U=SDPUtils.writeCandidate(C);x.candidate=Object.assign(x.candidate,SDPUtils.parseCandidate(U)),x.candidate.candidate=U,x.candidate.toJSON=function(){return{candidate:x.candidate.candidate,sdpMid:x.candidate.sdpMid,sdpMLineIndex:x.candidate.sdpMLineIndex,usernameFragment:x.candidate.usernameFragment}}}var M=SDPUtils.getMediaSections(g._localDescription.sdp);I?M[x.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:M[x.candidate.sdpMLineIndex]+="a="+x.candidate.candidate+`\r
`,g._localDescription.sdp=SDPUtils.getDescription(g._localDescription.sdp)+M.join("");var V=g.transceivers.every(function(T){return T.iceGatherer&&T.iceGatherer.state==="completed"});g.iceGatheringState!=="gathering"&&(g.iceGatheringState="gathering",g._emitGatheringStateChange()),I||g._dispatchEvent("icecandidate",x),V&&(g._dispatchEvent("icecandidate",new Event("icecandidate")),g.iceGatheringState="complete",g._emitGatheringStateChange())}},n.setTimeout(function(){v.forEach(function(_){b.onlocalcandidate(_)})},0)}},u.prototype._createIceAndDtlsTransports=function(){var c=this,f=new n.RTCIceTransport(null);f.onicestatechange=function(){c._updateIceConnectionState(),c._updateConnectionState()};var g=new n.RTCDtlsTransport(f);return g.ondtlsstatechange=function(){c._updateConnectionState()},g.onerror=function(){Object.defineProperty(g,"state",{value:"failed",writable:!0}),c._updateConnectionState()},{iceTransport:f,dtlsTransport:g}},u.prototype._disposeIceAndDtlsTransports=function(c){var f=this.transceivers[c].iceGatherer;f&&(delete f.onlocalcandidate,delete this.transceivers[c].iceGatherer);var g=this.transceivers[c].iceTransport;g&&(delete g.onicestatechange,delete this.transceivers[c].iceTransport);var b=this.transceivers[c].dtlsTransport;b&&(delete b.ondtlsstatechange,delete b.onerror,delete this.transceivers[c].dtlsTransport)},u.prototype._transceive=function(c,f,g){var b=getCommonCapabilities(c.localCapabilities,c.remoteCapabilities);f&&c.rtpSender&&(b.encodings=c.sendEncodingParameters,b.rtcp={cname:SDPUtils.localCName,compound:c.rtcpParameters.compound},c.recvEncodingParameters.length&&(b.rtcp.ssrc=c.recvEncodingParameters[0].ssrc),c.rtpSender.send(b)),g&&c.rtpReceiver&&b.codecs.length>0&&(c.kind==="video"&&c.recvEncodingParameters&&t<15019&&c.recvEncodingParameters.forEach(function(v){delete v.rtx}),c.recvEncodingParameters.length?b.encodings=c.recvEncodingParameters:b.encodings=[{}],b.rtcp={compound:c.rtcpParameters.compound},c.rtcpParameters.cname&&(b.rtcp.cname=c.rtcpParameters.cname),c.sendEncodingParameters.length&&(b.rtcp.ssrc=c.sendEncodingParameters[0].ssrc),c.rtpReceiver.receive(b))},u.prototype.setLocalDescription=function(c){var f=this;if(["offer","answer"].indexOf(c.type)===-1)return Promise.reject(makeError("TypeError",'Unsupported type "'+c.type+'"'));if(!isActionAllowedInSignalingState("setLocalDescription",c.type,f.signalingState)||f._isClosed)return Promise.reject(makeError("InvalidStateError","Can not set local "+c.type+" in state "+f.signalingState));var g,b;if(c.type==="offer")g=SDPUtils.splitSections(c.sdp),b=g.shift(),g.forEach(function(_,x){var C=SDPUtils.parseRtpParameters(_);f.transceivers[x].localCapabilities=C}),f.transceivers.forEach(function(_,x){f._gather(_.mid,x)});else if(c.type==="answer"){g=SDPUtils.splitSections(f._remoteDescription.sdp),b=g.shift();var v=SDPUtils.matchPrefix(b,"a=ice-lite").length>0;g.forEach(function(_,x){var C=f.transceivers[x],I=C.iceGatherer,U=C.iceTransport,M=C.dtlsTransport,V=C.localCapabilities,T=C.remoteCapabilities,$=SDPUtils.isRejected(_)&&SDPUtils.matchPrefix(_,"a=bundle-only").length===0;if(!$&&!C.rejected){var B=SDPUtils.getIceParameters(_,b),G=SDPUtils.getDtlsParameters(_,b);v&&(G.role="server"),(!f.usingBundle||x===0)&&(f._gather(C.mid,x),U.state==="new"&&U.start(I,B,v?"controlling":"controlled"),M.state==="new"&&M.start(G));var H=getCommonCapabilities(V,T);f._transceive(C,H.codecs.length>0,!1)}})}return f._localDescription={type:c.type,sdp:c.sdp},c.type==="offer"?f._updateSignalingState("have-local-offer"):f._updateSignalingState("stable"),Promise.resolve()},u.prototype.setRemoteDescription=function(c){var f=this;if(["offer","answer"].indexOf(c.type)===-1)return Promise.reject(makeError("TypeError",'Unsupported type "'+c.type+'"'));if(!isActionAllowedInSignalingState("setRemoteDescription",c.type,f.signalingState)||f._isClosed)return Promise.reject(makeError("InvalidStateError","Can not set remote "+c.type+" in state "+f.signalingState));var g={};f.remoteStreams.forEach(function(U){g[U.id]=U});var b=[],v=SDPUtils.splitSections(c.sdp),_=v.shift(),x=SDPUtils.matchPrefix(_,"a=ice-lite").length>0,C=SDPUtils.matchPrefix(_,"a=group:BUNDLE ").length>0;f.usingBundle=C;var I=SDPUtils.matchPrefix(_,"a=ice-options:")[0];return I?f.canTrickleIceCandidates=I.substr(14).split(" ").indexOf("trickle")>=0:f.canTrickleIceCandidates=!1,v.forEach(function(U,M){var V=SDPUtils.splitLines(U),T=SDPUtils.getKind(U),$=SDPUtils.isRejected(U)&&SDPUtils.matchPrefix(U,"a=bundle-only").length===0,B=V[0].substr(2).split(" ")[2],G=SDPUtils.getDirection(U,_),H=SDPUtils.parseMsid(U),X=SDPUtils.getMid(U)||SDPUtils.generateIdentifier();if($||T==="application"&&(B==="DTLS/SCTP"||B==="UDP/DTLS/SCTP")){f.transceivers[M]={mid:X,kind:T,protocol:B,rejected:!0};return}!$&&f.transceivers[M]&&f.transceivers[M].rejected&&(f.transceivers[M]=f._createTransceiver(T,!0));var h,s,y,k,S,E,z,te,W,Y=SDPUtils.parseRtpParameters(U),q,ee;$||(q=SDPUtils.getIceParameters(U,_),ee=SDPUtils.getDtlsParameters(U,_),ee.role="client"),z=SDPUtils.parseRtpEncodingParameters(U);var re=SDPUtils.parseRtcpParameters(U),F=SDPUtils.matchPrefix(U,"a=end-of-candidates",_).length>0,N=SDPUtils.matchPrefix(U,"a=candidate:").map(function(ne){return SDPUtils.parseCandidate(ne)}).filter(function(ne){return ne.component===1});if((c.type==="offer"||c.type==="answer")&&!$&&C&&M>0&&f.transceivers[M]&&(f._disposeIceAndDtlsTransports(M),f.transceivers[M].iceGatherer=f.transceivers[0].iceGatherer,f.transceivers[M].iceTransport=f.transceivers[0].iceTransport,f.transceivers[M].dtlsTransport=f.transceivers[0].dtlsTransport,f.transceivers[M].rtpSender&&f.transceivers[M].rtpSender.setTransport(f.transceivers[0].dtlsTransport),f.transceivers[M].rtpReceiver&&f.transceivers[M].rtpReceiver.setTransport(f.transceivers[0].dtlsTransport)),c.type==="offer"&&!$){h=f.transceivers[M]||f._createTransceiver(T),h.mid=X,h.iceGatherer||(h.iceGatherer=f._createIceGatherer(M,C)),N.length&&h.iceTransport.state==="new"&&(F&&(!C||M===0)?h.iceTransport.setRemoteCandidates(N):N.forEach(function(ne){maybeAddCandidate(h.iceTransport,ne)})),te=n.RTCRtpReceiver.getCapabilities(T),t<15019&&(te.codecs=te.codecs.filter(function(ne){return ne.name!=="rtx"})),E=h.sendEncodingParameters||[{ssrc:(2*M+2)*1001}];var Z=!1;if(G==="sendrecv"||G==="sendonly"){if(Z=!h.rtpReceiver,S=h.rtpReceiver||new n.RTCRtpReceiver(h.dtlsTransport,T),Z){var A;W=S.track,H&&H.stream==="-"||(H?(g[H.stream]||(g[H.stream]=new n.MediaStream,Object.defineProperty(g[H.stream],"id",{get:function(){return H.stream}})),Object.defineProperty(W,"id",{get:function(){return H.track}}),A=g[H.stream]):(g.default||(g.default=new n.MediaStream),A=g.default)),A&&(i(W,A),h.associatedRemoteMediaStreams.push(A)),b.push([W,S,A])}}else h.rtpReceiver&&h.rtpReceiver.track&&(h.associatedRemoteMediaStreams.forEach(function(ne){var K=ne.getTracks().find(function(P){return P.id===h.rtpReceiver.track.id});K&&a(K,ne)}),h.associatedRemoteMediaStreams=[]);h.localCapabilities=te,h.remoteCapabilities=Y,h.rtpReceiver=S,h.rtcpParameters=re,h.sendEncodingParameters=E,h.recvEncodingParameters=z,f._transceive(f.transceivers[M],!1,Z)}else if(c.type==="answer"&&!$){h=f.transceivers[M],s=h.iceGatherer,y=h.iceTransport,k=h.dtlsTransport,S=h.rtpReceiver,E=h.sendEncodingParameters,te=h.localCapabilities,f.transceivers[M].recvEncodingParameters=z,f.transceivers[M].remoteCapabilities=Y,f.transceivers[M].rtcpParameters=re,N.length&&y.state==="new"&&((x||F)&&(!C||M===0)?y.setRemoteCandidates(N):N.forEach(function(ne){maybeAddCandidate(h.iceTransport,ne)})),(!C||M===0)&&(y.state==="new"&&y.start(s,q,"controlling"),k.state==="new"&&k.start(ee));var O=getCommonCapabilities(h.localCapabilities,h.remoteCapabilities),D=O.codecs.filter(function(ne){return ne.name.toLowerCase()==="rtx"}).length;!D&&h.sendEncodingParameters[0].rtx&&delete h.sendEncodingParameters[0].rtx,f._transceive(h,G==="sendrecv"||G==="recvonly",G==="sendrecv"||G==="sendonly"),S&&(G==="sendrecv"||G==="sendonly")?(W=S.track,H?(g[H.stream]||(g[H.stream]=new n.MediaStream),i(W,g[H.stream]),b.push([W,S,g[H.stream]])):(g.default||(g.default=new n.MediaStream),i(W,g.default),b.push([W,S,g.default]))):delete h.rtpReceiver}}),f._dtlsRole===void 0&&(f._dtlsRole=c.type==="offer"?"active":"passive"),f._remoteDescription={type:c.type,sdp:c.sdp},c.type==="offer"?f._updateSignalingState("have-remote-offer"):f._updateSignalingState("stable"),Object.keys(g).forEach(function(U){var M=g[U];if(M.getTracks().length){if(f.remoteStreams.indexOf(M)===-1){f.remoteStreams.push(M);var V=new Event("addstream");V.stream=M,n.setTimeout(function(){f._dispatchEvent("addstream",V)})}b.forEach(function(T){var $=T[0],B=T[1];M.id===T[2].id&&o(f,$,B,[M])})}}),b.forEach(function(U){U[2]||o(f,U[0],U[1],[])}),n.setTimeout(function(){!(f&&f.transceivers)||f.transceivers.forEach(function(U){U.iceTransport&&U.iceTransport.state==="new"&&U.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),U.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},u.prototype.close=function(){this.transceivers.forEach(function(c){c.iceTransport&&c.iceTransport.stop(),c.dtlsTransport&&c.dtlsTransport.stop(),c.rtpSender&&c.rtpSender.stop(),c.rtpReceiver&&c.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},u.prototype._updateSignalingState=function(c){this.signalingState=c;var f=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",f)},u.prototype._maybeFireNegotiationNeeded=function(){var c=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,n.setTimeout(function(){if(c.needNegotiation){c.needNegotiation=!1;var f=new Event("negotiationneeded");c._dispatchEvent("negotiationneeded",f)}},0))},u.prototype._updateIceConnectionState=function(){var c,f={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(b){b.iceTransport&&!b.rejected&&f[b.iceTransport.state]++}),c="new",f.failed>0?c="failed":f.checking>0?c="checking":f.disconnected>0?c="disconnected":f.new>0?c="new":f.connected>0?c="connected":f.completed>0&&(c="completed"),c!==this.iceConnectionState){this.iceConnectionState=c;var g=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",g)}},u.prototype._updateConnectionState=function(){var c,f={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(b){b.iceTransport&&b.dtlsTransport&&!b.rejected&&(f[b.iceTransport.state]++,f[b.dtlsTransport.state]++)}),f.connected+=f.completed,c="new",f.failed>0?c="failed":f.connecting>0?c="connecting":f.disconnected>0?c="disconnected":f.new>0?c="new":f.connected>0&&(c="connected"),c!==this.connectionState){this.connectionState=c;var g=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",g)}},u.prototype.createOffer=function(){var c=this;if(c._isClosed)return Promise.reject(makeError("InvalidStateError","Can not call createOffer after close"));var f=c.transceivers.filter(function(x){return x.kind==="audio"}).length,g=c.transceivers.filter(function(x){return x.kind==="video"}).length,b=arguments[0];if(b){if(b.mandatory||b.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");b.offerToReceiveAudio!==void 0&&(b.offerToReceiveAudio===!0?f=1:b.offerToReceiveAudio===!1?f=0:f=b.offerToReceiveAudio),b.offerToReceiveVideo!==void 0&&(b.offerToReceiveVideo===!0?g=1:b.offerToReceiveVideo===!1?g=0:g=b.offerToReceiveVideo)}for(c.transceivers.forEach(function(x){x.kind==="audio"?(f--,f<0&&(x.wantReceive=!1)):x.kind==="video"&&(g--,g<0&&(x.wantReceive=!1))});f>0||g>0;)f>0&&(c._createTransceiver("audio"),f--),g>0&&(c._createTransceiver("video"),g--);var v=SDPUtils.writeSessionBoilerplate(c._sdpSessionId,c._sdpSessionVersion++);c.transceivers.forEach(function(x,C){var I=x.track,U=x.kind,M=x.mid||SDPUtils.generateIdentifier();x.mid=M,x.iceGatherer||(x.iceGatherer=c._createIceGatherer(C,c.usingBundle));var V=n.RTCRtpSender.getCapabilities(U);t<15019&&(V.codecs=V.codecs.filter(function($){return $.name!=="rtx"})),V.codecs.forEach(function($){$.name==="H264"&&$.parameters["level-asymmetry-allowed"]===void 0&&($.parameters["level-asymmetry-allowed"]="1"),x.remoteCapabilities&&x.remoteCapabilities.codecs&&x.remoteCapabilities.codecs.forEach(function(B){$.name.toLowerCase()===B.name.toLowerCase()&&$.clockRate===B.clockRate&&($.preferredPayloadType=B.payloadType)})}),V.headerExtensions.forEach(function($){var B=x.remoteCapabilities&&x.remoteCapabilities.headerExtensions||[];B.forEach(function(G){$.uri===G.uri&&($.id=G.id)})});var T=x.sendEncodingParameters||[{ssrc:(2*C+1)*1001}];I&&t>=15019&&U==="video"&&!T[0].rtx&&(T[0].rtx={ssrc:T[0].ssrc+1}),x.wantReceive&&(x.rtpReceiver=new n.RTCRtpReceiver(x.dtlsTransport,U)),x.localCapabilities=V,x.sendEncodingParameters=T}),c._config.bundlePolicy!=="max-compat"&&(v+="a=group:BUNDLE "+c.transceivers.map(function(x){return x.mid}).join(" ")+`\r
`),v+=`a=ice-options:trickle\r
`,c.transceivers.forEach(function(x,C){v+=writeMediaSection(x,x.localCapabilities,"offer",x.stream,c._dtlsRole),v+=`a=rtcp-rsize\r
`,x.iceGatherer&&c.iceGatheringState!=="new"&&(C===0||!c.usingBundle)&&(x.iceGatherer.getLocalCandidates().forEach(function(I){I.component=1,v+="a="+SDPUtils.writeCandidate(I)+`\r
`}),x.iceGatherer.state==="completed"&&(v+=`a=end-of-candidates\r
`))});var _=new n.RTCSessionDescription({type:"offer",sdp:v});return Promise.resolve(_)},u.prototype.createAnswer=function(){var c=this;if(c._isClosed)return Promise.reject(makeError("InvalidStateError","Can not call createAnswer after close"));if(!(c.signalingState==="have-remote-offer"||c.signalingState==="have-local-pranswer"))return Promise.reject(makeError("InvalidStateError","Can not call createAnswer in signalingState "+c.signalingState));var f=SDPUtils.writeSessionBoilerplate(c._sdpSessionId,c._sdpSessionVersion++);c.usingBundle&&(f+="a=group:BUNDLE "+c.transceivers.map(function(v){return v.mid}).join(" ")+`\r
`),f+=`a=ice-options:trickle\r
`;var g=SDPUtils.getMediaSections(c._remoteDescription.sdp).length;c.transceivers.forEach(function(v,_){if(!(_+1>g)){if(v.rejected){v.kind==="application"?v.protocol==="DTLS/SCTP"?f+=`m=application 0 DTLS/SCTP 5000\r
`:f+="m=application 0 "+v.protocol+` webrtc-datachannel\r
`:v.kind==="audio"?f+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:v.kind==="video"&&(f+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),f+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+v.mid+`\r
`;return}if(v.stream){var x;v.kind==="audio"?x=v.stream.getAudioTracks()[0]:v.kind==="video"&&(x=v.stream.getVideoTracks()[0]),x&&t>=15019&&v.kind==="video"&&!v.sendEncodingParameters[0].rtx&&(v.sendEncodingParameters[0].rtx={ssrc:v.sendEncodingParameters[0].ssrc+1})}var C=getCommonCapabilities(v.localCapabilities,v.remoteCapabilities),I=C.codecs.filter(function(U){return U.name.toLowerCase()==="rtx"}).length;!I&&v.sendEncodingParameters[0].rtx&&delete v.sendEncodingParameters[0].rtx,f+=writeMediaSection(v,C,"answer",v.stream,c._dtlsRole),v.rtcpParameters&&v.rtcpParameters.reducedSize&&(f+=`a=rtcp-rsize\r
`)}});var b=new n.RTCSessionDescription({type:"answer",sdp:f});return Promise.resolve(b)},u.prototype.addIceCandidate=function(c){var f=this,g;return c&&!(c.sdpMLineIndex!==void 0||c.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(b,v){if(f._remoteDescription)if(!c||c.candidate==="")for(var _=0;_<f.transceivers.length&&!(!f.transceivers[_].rejected&&(f.transceivers[_].iceTransport.addRemoteCandidate({}),g=SDPUtils.getMediaSections(f._remoteDescription.sdp),g[_]+=`a=end-of-candidates\r
`,f._remoteDescription.sdp=SDPUtils.getDescription(f._remoteDescription.sdp)+g.join(""),f.usingBundle));_++);else{var x=c.sdpMLineIndex;if(c.sdpMid){for(var C=0;C<f.transceivers.length;C++)if(f.transceivers[C].mid===c.sdpMid){x=C;break}}var I=f.transceivers[x];if(I){if(I.rejected)return b();var U=Object.keys(c.candidate).length>0?SDPUtils.parseCandidate(c.candidate):{};if(U.protocol==="tcp"&&(U.port===0||U.port===9)||U.component&&U.component!==1)return b();if((x===0||x>0&&I.iceTransport!==f.transceivers[0].iceTransport)&&!maybeAddCandidate(I.iceTransport,U))return v(makeError("OperationError","Can not add ICE candidate"));var M=c.candidate.trim();M.indexOf("a=")===0&&(M=M.substr(2)),g=SDPUtils.getMediaSections(f._remoteDescription.sdp),g[x]+="a="+(U.type?M:"end-of-candidates")+`\r
`,f._remoteDescription.sdp=SDPUtils.getDescription(f._remoteDescription.sdp)+g.join("")}else return v(makeError("OperationError","Can not add ICE candidate"))}else return v(makeError("InvalidStateError","Can not add ICE candidate without a remote description"));b()})},u.prototype.getStats=function(c){if(c&&c instanceof n.MediaStreamTrack){var f=null;if(this.transceivers.forEach(function(b){b.rtpSender&&b.rtpSender.track===c?f=b.rtpSender:b.rtpReceiver&&b.rtpReceiver.track===c&&(f=b.rtpReceiver)}),!f)throw makeError("InvalidAccessError","Invalid selector.");return f.getStats()}var g=[];return this.transceivers.forEach(function(b){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(v){b[v]&&g.push(b[v].getStats())})}),Promise.all(g).then(function(b){var v=new Map;return b.forEach(function(_){_.forEach(function(x){v.set(x.id,x)})}),v})};var l=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];l.forEach(function(c){var f=n[c];if(f&&f.prototype&&f.prototype.getStats){var g=f.prototype.getStats;f.prototype.getStats=function(){return g.apply(this).then(function(b){var v=new Map;return Object.keys(b).forEach(function(_){b[_].type=fixStatsType(b[_]),v.set(_,b[_])}),v})}}});var m=["createOffer","createAnswer"];return m.forEach(function(c){var f=u.prototype[c];u.prototype[c]=function(){var g=arguments;return typeof g[0]=="function"||typeof g[1]=="function"?f.apply(this,[arguments[2]]).then(function(b){typeof g[0]=="function"&&g[0].apply(null,[b])},function(b){typeof g[1]=="function"&&g[1].apply(null,[b])}):f.apply(this,arguments)}}),m=["setLocalDescription","setRemoteDescription","addIceCandidate"],m.forEach(function(c){var f=u.prototype[c];u.prototype[c]=function(){var g=arguments;return typeof g[1]=="function"||typeof g[2]=="function"?f.apply(this,arguments).then(function(){typeof g[1]=="function"&&g[1].apply(null)},function(b){typeof g[2]=="function"&&g[2].apply(null,[b])}):f.apply(this,arguments)}}),["getStats"].forEach(function(c){var f=u.prototype[c];u.prototype[c]=function(){var g=arguments;return typeof g[1]=="function"?f.apply(this,arguments).then(function(){typeof g[1]=="function"&&g[1].apply(null)}):f.apply(this,arguments)}}),u};function shimGetUserMedia$2(n){const t=n&&n.navigator,i=function(o){return{name:{PermissionDeniedError:"NotAllowedError"}[o.name]||o.name,message:o.message,constraint:o.constraint,toString(){return this.name}}},a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(o){return a(o).catch(u=>Promise.reject(i(u)))}}function shimGetDisplayMedia$1(n){"getDisplayMedia"in n.navigator&&(!n.navigator.mediaDevices||n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=n.navigator.getDisplayMedia.bind(n.navigator)))}function shimPeerConnection$1(n,t){if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(o){return o}),n.RTCSessionDescription||(n.RTCSessionDescription=function(o){return o}),t.version<15025)){const a=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set(o){a.set.call(this,o);const u=new Event("enabled");u.enabled=o,this.dispatchEvent(u)}})}n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)&&Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new n.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);const i=rtcpeerconnection(n,t.version);n.RTCPeerConnection=function(o){return o&&o.iceServers&&(o.iceServers=filterIceServers$1(o.iceServers,t.version),log$1("ICE servers after filtering:",o.iceServers)),new i(o)},n.RTCPeerConnection.prototype=i.prototype}function shimReplaceTrack(n){n.RTCRtpSender&&!("replaceTrack"in n.RTCRtpSender.prototype)&&(n.RTCRtpSender.prototype.replaceTrack=n.RTCRtpSender.prototype.setTrack)}var edgeShim=Object.freeze(Object.defineProperty({__proto__:null,shimPeerConnection:shimPeerConnection$1,shimReplaceTrack,shimGetUserMedia:shimGetUserMedia$2,shimGetDisplayMedia:shimGetDisplayMedia$1},Symbol.toStringTag,{value:"Module"}));function shimGetUserMedia$1(n,t){const i=n&&n.navigator,a=n&&n.MediaStreamTrack;if(i.getUserMedia=function(o,u,l){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),i.mediaDevices.getUserMedia(o).then(u,l)},!(t.version>55&&"autoGainControl"in i.mediaDevices.getSupportedConstraints())){const o=function(l,m,c){m in l&&!(c in l)&&(l[c]=l[m],delete l[m])},u=i.mediaDevices.getUserMedia.bind(i.mediaDevices);if(i.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),o(l.audio,"autoGainControl","mozAutoGainControl"),o(l.audio,"noiseSuppression","mozNoiseSuppression")),u(l)},a&&a.prototype.getSettings){const l=a.prototype.getSettings;a.prototype.getSettings=function(){const m=l.apply(this,arguments);return o(m,"mozAutoGainControl","autoGainControl"),o(m,"mozNoiseSuppression","noiseSuppression"),m}}if(a&&a.prototype.applyConstraints){const l=a.prototype.applyConstraints;a.prototype.applyConstraints=function(m){return this.kind==="audio"&&typeof m=="object"&&(m=JSON.parse(JSON.stringify(m)),o(m,"autoGainControl","mozAutoGainControl"),o(m,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[m])}}}}function shimGetDisplayMedia(n,t){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||!n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=function(a){if(!(a&&a.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return a.video===!0?a.video={mediaSource:t}:a.video.mediaSource=t,n.navigator.mediaDevices.getUserMedia(a)})}function shimOnTrack(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(n,t){if(typeof n!="object"||!(n.RTCPeerConnection||n.mozRTCPeerConnection))return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const u=n.RTCPeerConnection.prototype[o],l={[o](){return arguments[0]=new(o==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),u.apply(this,arguments)}};n.RTCPeerConnection.prototype[o]=l[o]});const i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[u,l,m]=arguments;return a.apply(this,[u||null]).then(c=>{if(t.version<53&&!l)try{c.forEach(f=>{f.type=i[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;c.forEach((g,b)=>{c.set(b,Object.assign({},g,{type:i[g.type]||g.type}))})}return c}).then(l,m)}}function shimSenderGetStats(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const t=n.RTCPeerConnection.prototype.getSenders;t&&(n.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(u=>u._pc=this),o});const i=n.RTCPeerConnection.prototype.addTrack;i&&(n.RTCPeerConnection.prototype.addTrack=function(){const o=i.apply(this,arguments);return o._pc=this,o}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){const a=t.apply(this,[]);return a.forEach(o=>o._pc=this),a}),wrapPeerConnectionEvent(n,"track",i=>(i.receiver._pc=i.srcElement,i)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(i){deprecated("removeStream","removeTrack"),this.getSenders().forEach(a=>{a.track&&i.getTracks().includes(a.track)&&this.removeTrack(a)})})}function shimRTCDataChannel(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function shimAddTransceiver(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const t=n.RTCPeerConnection.prototype.addTransceiver;t&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const a=arguments[1],o=a&&"sendEncodings"in a;o&&a.sendEncodings.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const u=t.apply(this,arguments);if(o){const{sender:l}=u,m=l.getParameters();(!("encodings"in m)||m.encodings.length===1&&Object.keys(m.encodings[0]).length===0)&&(m.encodings=a.sendEncodings,l.sendEncodings=a.sendEncodings,this.setParametersPromises.push(l.setParameters(m).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return u})}function shimGetParameters(n){if(!(typeof n=="object"&&n.RTCRtpSender))return;const t=n.RTCRtpSender.prototype.getParameters;t&&(n.RTCRtpSender.prototype.getParameters=function(){const a=t.apply(this,arguments);return"encodings"in a||(a.encodings=[].concat(this.sendEncodings||[{}])),a})}function shimCreateOffer(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const t=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function shimCreateAnswer(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const t=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var firefoxShim=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack,shimPeerConnection,shimSenderGetStats,shimReceiverGetStats,shimRemoveStream,shimRTCDataChannel,shimAddTransceiver,shimGetParameters,shimCreateOffer,shimCreateAnswer,shimGetUserMedia:shimGetUserMedia$1,shimGetDisplayMedia},Symbol.toStringTag,{value:"Module"}));function shimLocalStreamsAPI(n){if(!(typeof n!="object"||!n.RTCPeerConnection)){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const t=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(a){this._localStreams||(this._localStreams=[]),this._localStreams.includes(a)||this._localStreams.push(a),a.getAudioTracks().forEach(o=>t.call(this,o,a)),a.getVideoTracks().forEach(o=>t.call(this,o,a))},n.RTCPeerConnection.prototype.addTrack=function(a,...o){return o&&o.forEach(u=>{this._localStreams?this._localStreams.includes(u)||this._localStreams.push(u):this._localStreams=[u]}),t.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(i){this._localStreams||(this._localStreams=[]);const a=this._localStreams.indexOf(i);if(a===-1)return;this._localStreams.splice(a,1);const o=i.getTracks();this.getSenders().forEach(u=>{o.includes(u.track)&&this.removeTrack(u)})})}}function shimRemoteStreamsAPI(n){if(!(typeof n!="object"||!n.RTCPeerConnection)&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(i){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=i),this.addEventListener("track",this._onaddstreampoly=a=>{a.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const u=new Event("addstream");u.stream=o,this.dispatchEvent(u)})})}});const t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const a=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(u=>{if(a._remoteStreams||(a._remoteStreams=[]),a._remoteStreams.indexOf(u)>=0)return;a._remoteStreams.push(u);const l=new Event("addstream");l.stream=u,a.dispatchEvent(l)})}),t.apply(a,arguments)}}}function shimCallbacksAPI(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const t=n.RTCPeerConnection.prototype,i=t.createOffer,a=t.createAnswer,o=t.setLocalDescription,u=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(f,g){const b=arguments.length>=2?arguments[2]:arguments[0],v=i.apply(this,[b]);return g?(v.then(f,g),Promise.resolve()):v},t.createAnswer=function(f,g){const b=arguments.length>=2?arguments[2]:arguments[0],v=a.apply(this,[b]);return g?(v.then(f,g),Promise.resolve()):v};let m=function(c,f,g){const b=o.apply(this,[c]);return g?(b.then(f,g),Promise.resolve()):b};t.setLocalDescription=m,m=function(c,f,g){const b=u.apply(this,[c]);return g?(b.then(f,g),Promise.resolve()):b},t.setRemoteDescription=m,m=function(c,f,g){const b=l.apply(this,[c]);return g?(b.then(f,g),Promise.resolve()):b},t.addIceCandidate=m}function shimGetUserMedia(n){const t=n&&n.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const i=t.mediaDevices,a=i.getUserMedia.bind(i);t.mediaDevices.getUserMedia=o=>a(shimConstraints(o))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(a,o,u){t.mediaDevices.getUserMedia(a).then(o,u)}.bind(t))}function shimConstraints(n){return n&&n.video!==void 0?Object.assign({},n,{video:compactObject(n.video)}):n}function shimRTCIceServerUrls(n){if(!n.RTCPeerConnection)return;const t=n.RTCPeerConnection;n.RTCPeerConnection=function(a,o){if(a&&a.iceServers){const u=[];for(let l=0;l<a.iceServers.length;l++){let m=a.iceServers[l];!m.hasOwnProperty("urls")&&m.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),m=JSON.parse(JSON.stringify(m)),m.urls=m.url,delete m.url,u.push(m)):u.push(a.iceServers[l])}a.iceServers=u}return new t(a,o)},n.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function shimTrackEventTransceiver(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(n){const t=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(a){if(a){typeof a.offerToReceiveAudio!="undefined"&&(a.offerToReceiveAudio=!!a.offerToReceiveAudio);const o=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");a.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):a.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio"),typeof a.offerToReceiveVideo!="undefined"&&(a.offerToReceiveVideo=!!a.offerToReceiveVideo);const u=this.getTransceivers().find(l=>l.receiver.track.kind==="video");a.offerToReceiveVideo===!1&&u?u.direction==="sendrecv"?u.setDirection?u.setDirection("sendonly"):u.direction="sendonly":u.direction==="recvonly"&&(u.setDirection?u.setDirection("inactive"):u.direction="inactive"):a.offerToReceiveVideo===!0&&!u&&this.addTransceiver("video")}return t.apply(this,arguments)}}function shimAudioContext(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}var safariShim=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI,shimRemoteStreamsAPI,shimCallbacksAPI,shimGetUserMedia,shimConstraints,shimRTCIceServerUrls,shimTrackEventTransceiver,shimCreateOfferLegacy,shimAudioContext},Symbol.toStringTag,{value:"Module"}));function shimRTCIceCandidate(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const t=n.RTCIceCandidate;n.RTCIceCandidate=function(a){if(typeof a=="object"&&a.candidate&&a.candidate.indexOf("a=")===0&&(a=JSON.parse(JSON.stringify(a)),a.candidate=a.candidate.substr(2)),a.candidate&&a.candidate.length){const o=new t(a),u=SDPUtils$1.parseCandidate(a.candidate),l=Object.assign(o,u);return l.toJSON=function(){return{candidate:l.candidate,sdpMid:l.sdpMid,sdpMLineIndex:l.sdpMLineIndex,usernameFragment:l.usernameFragment}},l}return new t(a)},n.RTCIceCandidate.prototype=t.prototype,wrapPeerConnectionEvent(n,"icecandidate",i=>(i.candidate&&Object.defineProperty(i,"candidate",{value:new n.RTCIceCandidate(i.candidate),writable:"false"}),i))}function shimMaxMessageSize(n,t){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp=="undefined"?null:this._sctp}});const i=function(m){if(!m||!m.sdp)return!1;const c=SDPUtils$1.splitSections(m.sdp);return c.shift(),c.some(f=>{const g=SDPUtils$1.parseMLine(f);return g&&g.kind==="application"&&g.protocol.indexOf("SCTP")!==-1})},a=function(m){const c=m.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const f=parseInt(c[1],10);return f!==f?-1:f},o=function(m){let c=65536;return t.browser==="firefox"&&(t.version<57?m===-1?c=16384:c=2147483637:t.version<60?c=t.version===57?65535:65536:c=2147483637),c},u=function(m,c){let f=65536;t.browser==="firefox"&&t.version===57&&(f=65535);const g=SDPUtils$1.matchPrefix(m.sdp,"a=max-message-size:");return g.length>0?f=parseInt(g[0].substr(19),10):t.browser==="firefox"&&c!==-1&&(f=2147483637),f},l=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp=="undefined"?null:this._sctp},enumerable:!0,configurable:!0})}if(i(arguments[0])){const c=a(arguments[0]),f=o(c),g=u(arguments[0],c);let b;f===0&&g===0?b=Number.POSITIVE_INFINITY:f===0||g===0?b=Math.max(f,g):b=Math.min(f,g);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return b}}),this._sctp=v}return l.apply(this,arguments)}}function shimSendThrowTypeError(n){if(!(n.RTCPeerConnection&&"createDataChannel"in n.RTCPeerConnection.prototype))return;function t(a,o){const u=a.send;a.send=function(){const m=arguments[0],c=m.length||m.size||m.byteLength;if(a.readyState==="open"&&o.sctp&&c>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return u.apply(a,arguments)}}const i=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const o=i.apply(this,arguments);return t(o,this),o},wrapPeerConnectionEvent(n,"datachannel",a=>(t(a.channel,a.target),a))}function shimConnectionState(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const t=n.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(i){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),i&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=i)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(i=>{const a=t[i];t[i]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const u=o.target;if(u._lastConnectionState!==u.connectionState){u._lastConnectionState=u.connectionState;const l=new Event("connectionstatechange",o);u.dispatchEvent(l)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),a.apply(this,arguments)}})}function removeExtmapAllowMixed(n,t){if(!n.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const i=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const u=o.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&o instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:o.type,sdp:u}):o.sdp=u}return i.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(n,t){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const i=n.RTCPeerConnection.prototype.addIceCandidate;!i||i.length===0||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var commonShim=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate,shimMaxMessageSize,shimSendThrowTypeError,shimConnectionState,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty},Symbol.toStringTag,{value:"Module"}));function adapterFactory({window:n}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const i=log$1,a=detectBrowser(n),o={browserDetails:a,commonShim,extractVersion,disableLog,disableWarnings};switch(a.browser){case"chrome":if(!chromeShim||!shimPeerConnection$2||!t.shimChrome)return i("Chrome shim is not included in this adapter release."),o;if(a.version===null)return i("Chrome shim can not determine version, not shimming."),o;i("adapter.js shimming chrome."),o.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(n,a),shimGetUserMedia$3(n,a),shimMediaStream(n),shimPeerConnection$2(n,a),shimOnTrack$1(n),shimAddTrackRemoveTrack(n,a),shimGetSendersWithDtmf(n),shimGetStats(n),shimSenderReceiverGetStats(n),fixNegotiationNeeded(n,a),shimRTCIceCandidate(n),shimConnectionState(n),shimMaxMessageSize(n,a),shimSendThrowTypeError(n),removeExtmapAllowMixed(n,a);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!t.shimFirefox)return i("Firefox shim is not included in this adapter release."),o;i("adapter.js shimming firefox."),o.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(n,a),shimGetUserMedia$1(n,a),shimPeerConnection(n,a),shimOnTrack(n),shimRemoveStream(n),shimSenderGetStats(n),shimReceiverGetStats(n),shimRTCDataChannel(n),shimAddTransceiver(n),shimGetParameters(n),shimCreateOffer(n),shimCreateAnswer(n),shimRTCIceCandidate(n),shimConnectionState(n),shimMaxMessageSize(n,a),shimSendThrowTypeError(n);break;case"edge":if(!edgeShim||!shimPeerConnection$1||!t.shimEdge)return i("MS edge shim is not included in this adapter release."),o;i("adapter.js shimming edge."),o.browserShim=edgeShim,shimGetUserMedia$2(n),shimGetDisplayMedia$1(n),shimPeerConnection$1(n,a),shimReplaceTrack(n),shimMaxMessageSize(n,a),shimSendThrowTypeError(n);break;case"safari":if(!safariShim||!t.shimSafari)return i("Safari shim is not included in this adapter release."),o;i("adapter.js shimming safari."),o.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(n,a),shimRTCIceServerUrls(n),shimCreateOfferLegacy(n),shimCallbacksAPI(n),shimLocalStreamsAPI(n),shimRemoteStreamsAPI(n),shimTrackEventTransceiver(n),shimGetUserMedia(n),shimAudioContext(n),shimRTCIceCandidate(n),shimMaxMessageSize(n,a),shimSendThrowTypeError(n),removeExtmapAllowMixed(n,a);break;default:i("Unsupported browser!");break}return o}adapterFactory({window:typeof window=="undefined"?void 0:window});var version={};Object.defineProperty(version,"__esModule",{value:!0});version.protocolVersion=version.version=void 0;version.version="0.12.2";version.protocolVersion=3;var __awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(n,t,i,a){function o(u){return u instanceof i?u:new i(function(l){l(u)})}return new(i||(i=Promise))(function(u,l){function m(g){try{f(a.next(g))}catch(b){l(b)}}function c(g){try{f(a.throw(g))}catch(b){l(b)}}function f(g){g.done?u(g.value):o(g.value).then(m,c)}f((a=a.apply(n,t||[])).next())})},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(SignalClient,"__esModule",{value:!0});SignalClient.WSSignalClient=void 0;const loglevel_1=__importDefault(loglevel.exports),livekit_rtc_1=livekit_rtc,errors_1=errors,version_1=version;class WSSignalClient{constructor(t=!1){this.isConnected=!1,this.useJSON=t}join(t,i,a){return __awaiter(this,void 0,void 0,function*(){return yield this.connect(t,i,{autoSubscribe:a==null?void 0:a.autoSubscribe})})}reconnect(t,i){return __awaiter(this,void 0,void 0,function*(){yield this.connect(t,i,{reconnect:!0})})}connect(t,i,a){t=t.replace(/\/$/,""),t+="/rtc";let o=`?access_token=${i}&protocol=${version_1.protocolVersion}&sdk=js&version=${version_1.version}`;return a.reconnect&&(o+="&reconnect=1"),a.autoSubscribe!==void 0&&(o+=`&auto_subscribe=${a.autoSubscribe?"1":"0"}`),new Promise((u,l)=>{loglevel_1.default.debug("connecting to",t+o),this.ws=void 0;const m=new WebSocket(t+o);m.binaryType="arraybuffer",m.onerror=c=>__awaiter(this,void 0,void 0,function*(){if(!this.ws){try{const f=yield fetch(`http${t.substr(2)}/validate${o}`);if(f.ok)l(new errors_1.ConnectionError("Internal error"));else{const g=yield f.text();l(new errors_1.ConnectionError(g))}}catch{l(new errors_1.ConnectionError("server was not reachable"))}return}this.handleWSError(c)}),m.onopen=()=>{this.ws=m,a.reconnect&&(this.isConnected=!0,u())},m.onmessage=c=>{let f;if(typeof c.data=="string"){const g=JSON.parse(c.data);f=livekit_rtc_1.SignalResponse.fromJSON(g)}else if(c.data instanceof ArrayBuffer)f=livekit_rtc_1.SignalResponse.decode(new Uint8Array(c.data));else{loglevel_1.default.error("could not decode websocket message",typeof c.data);return}if(!this.isConnected){f.join?(this.isConnected=!0,u(f.join)):l(new errors_1.ConnectionError("did not receive join response"));return}this.handleSignalResponse(f)},m.onclose=c=>{!this.isConnected||(loglevel_1.default.debug("websocket connection closed",c.reason),this.isConnected=!1,this.onClose&&this.onClose(c.reason))}})}close(){var t;this.isConnected=!1,this.ws&&(this.ws.onclose=null),(t=this.ws)===null||t===void 0||t.close()}sendOffer(t){loglevel_1.default.debug("sending offer",t),this.sendRequest({offer:toProtoSessionDescription(t)})}sendAnswer(t){loglevel_1.default.debug("sending answer"),this.sendRequest({answer:toProtoSessionDescription(t)})}sendIceCandidate(t,i){loglevel_1.default.debug("sending ice candidate",t),this.sendRequest({trickle:{candidateInit:JSON.stringify(t),target:i}})}sendMuteTrack(t,i){this.sendRequest({mute:{sid:t,muted:i}})}sendAddTrack(t){this.sendRequest({addTrack:livekit_rtc_1.AddTrackRequest.fromPartial(t)})}sendUpdateTrackSettings(t){this.sendRequest({trackSetting:t})}sendUpdateSubscription(t){this.sendRequest({subscription:t})}sendSetSimulcastLayers(t,i){this.sendRequest({simulcast:{trackSid:t,layers:i}})}sendLeave(){this.sendRequest(livekit_rtc_1.SignalRequest.fromPartial({leave:{}}))}sendRequest(t){if(!this.ws)throw new errors_1.ConnectionError("cannot send signal request before connected");this.useJSON?this.ws.send(JSON.stringify(livekit_rtc_1.SignalRequest.toJSON(t))):this.ws.send(livekit_rtc_1.SignalRequest.encode(t).finish())}handleSignalResponse(t){if(t.answer){const i=fromProtoSessionDescription(t.answer);this.onAnswer&&this.onAnswer(i)}else if(t.offer){const i=fromProtoSessionDescription(t.offer);this.onOffer&&this.onOffer(i)}else if(t.trickle){const i=JSON.parse(t.trickle.candidateInit);this.onTrickle&&this.onTrickle(i,t.trickle.target)}else t.update?this.onParticipantUpdate&&this.onParticipantUpdate(t.update.participants):t.trackPublished?this.onLocalTrackPublished&&this.onLocalTrackPublished(t.trackPublished):t.speakersChanged?this.onSpeakersChanged&&this.onSpeakersChanged(t.speakersChanged.speakers):t.leave?this.onLeave&&this.onLeave():t.mute?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(t.mute.sid,t.mute.muted):loglevel_1.default.warn("unsupported message",t)}handleWSError(t){loglevel_1.default.error("websocket error",t)}}SignalClient.WSSignalClient=WSSignalClient;function fromProtoSessionDescription(n){const t={type:"offer",sdp:n.sdp};switch(n.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=n.type;break}return t}function toProtoSessionDescription(n){return{sdp:n.sdp,type:n.type}}var options={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.LogLevel=void 0,function(t){t.trace="trace",t.debug="debug",t.info="info",t.warn="warn",t.error="error",t.silent="silent"}(n.LogLevel||(n.LogLevel={}))})(options);(function(n){var t=commonjsGlobal&&commonjsGlobal.__awaiter||function(T,$,B,G){function H(X){return X instanceof B?X:new B(function(h){h(X)})}return new(B||(B=Promise))(function(X,h){function s(S){try{k(G.next(S))}catch(E){h(E)}}function y(S){try{k(G.throw(S))}catch(E){h(E)}}function k(S){S.done?X(S.value):H(S.value).then(s,y)}k((G=G.apply(T,$||[])).next())})},i=commonjsGlobal&&commonjsGlobal.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(n,"__esModule",{value:!0}),n.createLocalTracks=n.createLocalScreenTracks=n.createLocalAudioTrack=n.createLocalVideoTrack=n.connect=n.version=void 0;const a=i(loglevel.exports),o=SignalClient,u=options,l=errors,m=i(Room),c=i(LocalAudioTrack$1),f=i(LocalTrack$1),g=i(LocalVideoTrack$1),b=options$1,v=Track;var _=version;Object.defineProperty(n,"version",{enumerable:!0,get:function(){return _.version}});function x(T,$,B){var G;return t(this,void 0,void 0,function*(){B||(B={}),B.logLevel||(B.logLevel=u.LogLevel.info),B.audio===void 0&&(B.audio=!1),B.video===void 0&&(B.video=!1),a.default.setLevel(B.logLevel);const H=(G=B.rtcConfig)!==null&&G!==void 0?G:{};B.iceServers&&(H.iceServers=B.iceServers);const X=new o.WSSignalClient,h=new m.default(X,H);yield h.connect(T,$,{autoSubscribe:B==null?void 0:B.autoSubscribe});let{tracks:s}=B;if(s||(B.audio||B.video)&&(s=yield M({audio:B.audio,video:B.video})),s)for(let y=0;y<s.length;y+=1){const k=s[y],S={};k.kind===v.Track.Kind.Video.toString()||k.kind===v.Track.Kind.Video?(S.videoCodec=B==null?void 0:B.videoCodec,S.videoEncoding=B==null?void 0:B.videoEncoding,S.simulcast=B==null?void 0:B.simulcast):(k.kind===v.Track.Kind.Audio.toString()||k.kind===v.Track.Kind.Audio)&&(S.audioBitrate=B.audioBitrate),yield h.localParticipant.publishTrack(k,S)}return h})}n.connect=x;function C(T){return t(this,void 0,void 0,function*(){return(yield M({audio:!1,video:T}))[0]})}n.createLocalVideoTrack=C;function I(T){return t(this,void 0,void 0,function*(){return(yield M({audio:T,video:!1}))[0]})}n.createLocalAudioTrack=I;function U(T){var $;return t(this,void 0,void 0,function*(){T===void 0&&(T={}),T.name===void 0&&(T.name="screen"),T.resolution===void 0&&(T.resolution=b.VideoPresets.fhd.resolution);const B=yield navigator.mediaDevices.getDisplayMedia({audio:($=T.audio)!==null&&$!==void 0?$:!1,video:{width:T.resolution.width,height:T.resolution.height}}),G=B.getVideoTracks();if(G.length===0)throw new l.TrackInvalidError("no video track found");const H=[new g.default(G[0],T.name)];return B.getAudioTracks().length>0&&H.push(new c.default(B.getAudioTracks()[0],T.name)),H})}n.createLocalScreenTracks=U;function M(T){return t(this,void 0,void 0,function*(){T||(T={}),T.audio===void 0&&(T.audio={});const $=f.default.constraintsForOptions(T);return(yield navigator.mediaDevices.getUserMedia($)).getTracks().map(G=>{const H=G.kind==="audio";let X=H?T.audio:T.video;(typeof X=="boolean"||!X)&&(X={});let h;const s=H?$.audio:$.video;return typeof s!="boolean"&&(h=s),V(G,X==null?void 0:X.name,h)})})}n.createLocalTracks=M;function V(T,$,B){switch(T.kind){case"audio":return new c.default(T,$,B);case"video":return new g.default(T,$,B);default:throw new l.TrackInvalidError(`unsupported track type: ${T.kind}`)}}})(livekit);var types={};Object.defineProperty(types,"__esModule",{value:!0});(function(n){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(T,$,B,G){G===void 0&&(G=B),Object.defineProperty(T,G,{enumerable:!0,get:function(){return $[B]}})}:function(T,$,B,G){G===void 0&&(G=B),T[G]=$[B]}),i=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(T,$){Object.defineProperty(T,"default",{enumerable:!0,value:$})}:function(T,$){T.default=$}),a=commonjsGlobal&&commonjsGlobal.__importStar||function(T){if(T&&T.__esModule)return T;var $={};if(T!=null)for(var B in T)B!=="default"&&Object.prototype.hasOwnProperty.call(T,B)&&t($,T,B);return i($,T),$},o=commonjsGlobal&&commonjsGlobal.__exportStar||function(T,$){for(var B in T)B!=="default"&&!Object.prototype.hasOwnProperty.call($,B)&&t($,T,B)},u=commonjsGlobal&&commonjsGlobal.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(n,"__esModule",{value:!0}),n.VideoQuality=n.TrackPublication=n.RemoteTrackPublication=n.RemoteVideoTrack=n.RemoteAudioTrack=n.LocalTrackPublication=n.LocalTrack=n.LocalVideoTrack=n.LocalAudioTrack=n.LocalParticipant=n.RemoteParticipant=n.Participant=n.DataPacket_Kind=n.RoomState=n.Room=void 0;const l=livekit_models;Object.defineProperty(n,"DataPacket_Kind",{enumerable:!0,get:function(){return l.DataPacket_Kind}});const m=livekit_rtc;Object.defineProperty(n,"VideoQuality",{enumerable:!0,get:function(){return m.VideoQuality}});const c=u(LocalParticipant$1);n.LocalParticipant=c.default;const f=u(Participant$1);n.Participant=f.default;const g=u(RemoteParticipant$1);n.RemoteParticipant=g.default;const b=a(Room);n.Room=b.default,Object.defineProperty(n,"RoomState",{enumerable:!0,get:function(){return b.RoomState}});const v=u(LocalAudioTrack$1);n.LocalAudioTrack=v.default;const _=u(LocalTrack$1);n.LocalTrack=_.default;const x=u(LocalTrackPublication$1);n.LocalTrackPublication=x.default;const C=u(LocalVideoTrack$1);n.LocalVideoTrack=C.default;const I=u(RemoteAudioTrack$1);n.RemoteAudioTrack=I.default;const U=u(RemoteTrackPublication$1);n.RemoteTrackPublication=U.default;const M=u(RemoteVideoTrack$1);n.RemoteVideoTrack=M.default;const V=u(TrackPublication$1);n.TrackPublication=V.default,o(livekit,n),o(options,n),o(errors,n),o(events$1,n),o(options$1,n),o(Track,n),o(types,n),o(version,n)})(dist);/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var faCheckCircle={prefix:"fas",iconName:"check-circle",icon:[512,512,[],"f058","M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"]},faChevronDown={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"]},faChevronUp={prefix:"fas",iconName:"chevron-up",icon:[448,512,[],"f077","M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"]},faCommentAlt={prefix:"fas",iconName:"comment-alt",icon:[512,512,[],"f27a","M448 0H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v84c0 9.8 11.2 15.5 19.1 9.7L304 416h144c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64z"]},faCompressAlt={prefix:"fas",iconName:"compress-alt",icon:[448,512,[],"f422","M4.686 427.314L104 328l-32.922-31.029C55.958 281.851 66.666 256 88.048 256h112C213.303 256 224 266.745 224 280v112c0 21.382-25.803 32.09-40.922 16.971L152 376l-99.314 99.314c-6.248 6.248-16.379 6.248-22.627 0L4.686 449.941c-6.248-6.248-6.248-16.379 0-22.627zM443.314 84.686L344 184l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C234.697 256 224 245.255 224 232V120c0-21.382 25.803-32.09 40.922-16.971L296 136l99.314-99.314c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.248 6.248 6.248 16.379 0 22.627z"]},faDesktop={prefix:"fas",iconName:"desktop",icon:[576,512,[],"f108","M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"]},faExpandAlt={prefix:"fas",iconName:"expand-alt",icon:[448,512,[],"f424","M212.686 315.314L120 408l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C10.697 480 0 469.255 0 456V344c0-21.382 25.803-32.09 40.922-16.971L72 360l92.686-92.686c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.249 6.248 6.249 16.378 0 22.627zm22.628-118.628L328 104l-32.922-31.029C279.958 57.851 290.666 32 312.048 32h112C437.303 32 448 42.745 448 56v112c0 21.382-25.803 32.09-40.922 16.971L376 152l-92.686 92.686c-6.248 6.248-16.379 6.248-22.627 0l-25.373-25.373c-6.249-6.248-6.249-16.378 0-22.627z"]},faMicrophone={prefix:"fas",iconName:"microphone",icon:[352,512,[],"f130","M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"]},faMicrophoneSlash={prefix:"fas",iconName:"microphone-slash",icon:[640,512,[],"f131","M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"]},faPaperPlane={prefix:"fas",iconName:"paper-plane",icon:[512,512,[],"f1d8","M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"]},faPhoneSlash={prefix:"fas",iconName:"phone-slash",icon:[640,512,[],"f3dd","M268.2 381.4l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48c-10.7 4.6-16.5 16.1-13.9 27.5l24 104c2.5 10.8 12.1 18.6 23.4 18.6 100.7 0 193.7-32.4 269.7-86.9l-80-61.8c-10.9 6.5-22.1 12.7-33.6 18.1zm365.6 76.7L475.1 335.5C537.9 256.4 576 156.9 576 48c0-11.2-7.7-20.9-18.6-23.4l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-12.2 26.1-27.9 50.3-46 72.8L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3z"]},faQuestion={prefix:"fas",iconName:"question",icon:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"]},faSync={prefix:"fas",iconName:"sync",icon:[512,512,[],"f021","M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"]},faTh={prefix:"fas",iconName:"th",icon:[512,512,[],"f00a","M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"]},faThLarge={prefix:"fas",iconName:"th-large",icon:[512,512,[],"f009","M296 32h192c13.255 0 24 10.745 24 24v160c0 13.255-10.745 24-24 24H296c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24zm-80 0H24C10.745 32 0 42.745 0 56v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zM0 296v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm296 184h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H296c-13.255 0-24 10.745-24 24v160c0 13.255 10.745 24 24 24z"]},faTimes={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]},faUserFriends={prefix:"fas",iconName:"user-friends",icon:[640,512,[],"f500","M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"]},faVideo={prefix:"fas",iconName:"video",icon:[576,512,[],"f03d","M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"]},faVideoSlash={prefix:"fas",iconName:"video-slash",icon:[640,512,[],"f4e2","M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"]},faVolumeUp={prefix:"fas",iconName:"volume-up",icon:[576,512,[],"f028","M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"]};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var faCircle={prefix:"far",iconName:"circle",icon:[512,512,[],"f111","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"]};/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function ownKeys$2(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,a)}return i}function _objectSpread2$2(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$2(Object(i),!0).forEach(function(a){_defineProperty$2(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys$2(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}function _typeof$2(n){return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(n)}function _classCallCheck$1(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(n,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}function _createClass$1(n,t,i){return t&&_defineProperties$1(n.prototype,t),i&&_defineProperties$1(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function _defineProperty$2(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function _slicedToArray(n,t){return _arrayWithHoles(n)||_iterableToArrayLimit(n,t)||_unsupportedIterableToArray$1(n,t)||_nonIterableRest()}function _toConsumableArray$1(n){return _arrayWithoutHoles$1(n)||_iterableToArray$1(n)||_unsupportedIterableToArray$1(n)||_nonIterableSpread$1()}function _arrayWithoutHoles$1(n){if(Array.isArray(n))return _arrayLikeToArray$1(n)}function _arrayWithHoles(n){if(Array.isArray(n))return n}function _iterableToArray$1(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _iterableToArrayLimit(n,t){var i=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var a=[],o=!0,u=!1,l,m;try{for(i=i.call(n);!(o=(l=i.next()).done)&&(a.push(l.value),!(t&&a.length===t));o=!0);}catch(c){u=!0,m=c}finally{try{!o&&i.return!=null&&i.return()}finally{if(u)throw m}}return a}}function _unsupportedIterableToArray$1(n,t){if(!!n){if(typeof n=="string")return _arrayLikeToArray$1(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray$1(n,t)}}function _arrayLikeToArray$1(n,t){(t==null||t>n.length)&&(t=n.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=n[i];return a}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var noop=function n(){},_WINDOW={},_DOCUMENT={},_MUTATION_OBSERVER=null,_PERFORMANCE={mark:noop,measure:noop};try{typeof window!="undefined"&&(_WINDOW=window),typeof document!="undefined"&&(_DOCUMENT=document),typeof MutationObserver!="undefined"&&(_MUTATION_OBSERVER=MutationObserver),typeof performance!="undefined"&&(_PERFORMANCE=performance)}catch(n){}var _ref=_WINDOW.navigator||{},_ref$userAgent=_ref.userAgent,userAgent=_ref$userAgent===void 0?"":_ref$userAgent,WINDOW=_WINDOW,DOCUMENT=_DOCUMENT,MUTATION_OBSERVER=_MUTATION_OBSERVER,PERFORMANCE=_PERFORMANCE;WINDOW.document;var IS_DOM=!!DOCUMENT.documentElement&&!!DOCUMENT.head&&typeof DOCUMENT.addEventListener=="function"&&typeof DOCUMENT.createElement=="function",IS_IE=~userAgent.indexOf("MSIE")||~userAgent.indexOf("Trident/"),NAMESPACE_IDENTIFIER="___FONT_AWESOME___",UNITS_IN_GRID=16,DEFAULT_FAMILY_PREFIX="fa",DEFAULT_REPLACEMENT_CLASS="svg-inline--fa",DATA_FA_I2SVG="data-fa-i2svg",DATA_FA_PSEUDO_ELEMENT="data-fa-pseudo-element",DATA_FA_PSEUDO_ELEMENT_PENDING="data-fa-pseudo-element-pending",DATA_PREFIX="data-prefix",DATA_ICON="data-icon",HTML_CLASS_I2SVG_BASE_CLASS="fontawesome-i2svg",MUTATION_APPROACH_ASYNC="async",TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS=["HTML","HEAD","STYLE","SCRIPT"],PRODUCTION$1=function(){try{return!0}catch{return!1}}(),PREFIX_TO_STYLE={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},STYLE_TO_PREFIX={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},PREFIX_TO_LONG_STYLE={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},LONG_STYLE_TO_PREFIX={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},ICON_SELECTION_SYNTAX_PATTERN=/fa[srltdbk\-\ ]/,LAYERS_TEXT_CLASSNAME="fa-layers-text",FONT_FAMILY_PATTERN=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,FONT_WEIGHT_TO_PREFIX={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},oneToTen=[1,2,3,4,5,6,7,8,9,10],oneToTwenty=oneToTen.concat([11,12,13,14,15,16,17,18,19,20]),ATTRIBUTES_WATCHED_FOR_MUTATION=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],DUOTONE_CLASSES={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},RESERVED_CLASSES=[].concat(_toConsumableArray$1(Object.keys(STYLE_TO_PREFIX)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",DUOTONE_CLASSES.GROUP,DUOTONE_CLASSES.SWAP_OPACITY,DUOTONE_CLASSES.PRIMARY,DUOTONE_CLASSES.SECONDARY]).concat(oneToTen.map(function(n){return"".concat(n,"x")})).concat(oneToTwenty.map(function(n){return"w-".concat(n)})),initial=WINDOW.FontAwesomeConfig||{};function getAttrConfig(n){var t=DOCUMENT.querySelector("script["+n+"]");if(t)return t.getAttribute(n)}function coerce(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}if(DOCUMENT&&typeof DOCUMENT.querySelector=="function"){var attrs=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];attrs.forEach(function(n){var t=_slicedToArray(n,2),i=t[0],a=t[1],o=coerce(getAttrConfig(i));o!=null&&(initial[a]=o)})}var _default={familyPrefix:DEFAULT_FAMILY_PREFIX,styleDefault:"solid",replacementClass:DEFAULT_REPLACEMENT_CLASS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},_config=_objectSpread2$2(_objectSpread2$2({},_default),initial);_config.autoReplaceSvg||(_config.observeMutations=!1);var config={};Object.keys(_config).forEach(function(n){Object.defineProperty(config,n,{enumerable:!0,set:function(i){_config[n]=i,_onChangeCb.forEach(function(a){return a(config)})},get:function(){return _config[n]}})});WINDOW.FontAwesomeConfig=config;var _onChangeCb=[];function onChange(n){return _onChangeCb.push(n),function(){_onChangeCb.splice(_onChangeCb.indexOf(n),1)}}var d=UNITS_IN_GRID,meaninglessTransform={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function insertCss(n){if(!(!n||!IS_DOM)){var t=DOCUMENT.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=n;for(var i=DOCUMENT.head.childNodes,a=null,o=i.length-1;o>-1;o--){var u=i[o],l=(u.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(l)>-1&&(a=u)}return DOCUMENT.head.insertBefore(t,a),n}}var idPool="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function nextUniqueId(){for(var n=12,t="";n-- >0;)t+=idPool[Math.random()*62|0];return t}function toArray(n){for(var t=[],i=(n||[]).length>>>0;i--;)t[i]=n[i];return t}function classArray(n){return n.classList?toArray(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(t){return t})}function htmlEscape(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinAttributes(n){return Object.keys(n||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(htmlEscape(n[i]),'" ')},"").trim()}function joinStyles(n){return Object.keys(n||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(n[i].trim(),";")},"")}function transformIsMeaningful(n){return n.size!==meaninglessTransform.size||n.x!==meaninglessTransform.x||n.y!==meaninglessTransform.y||n.rotate!==meaninglessTransform.rotate||n.flipX||n.flipY}function transformForSvg(n){var t=n.transform,i=n.containerWidth,a=n.iconWidth,o={transform:"translate(".concat(i/2," 256)")},u="translate(".concat(t.x*32,", ").concat(t.y*32,") "),l="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),m="rotate(".concat(t.rotate," 0 0)"),c={transform:"".concat(u," ").concat(l," ").concat(m)},f={transform:"translate(".concat(a/2*-1," -256)")};return{outer:o,inner:c,path:f}}function transformForCss(n){var t=n.transform,i=n.width,a=i===void 0?UNITS_IN_GRID:i,o=n.height,u=o===void 0?UNITS_IN_GRID:o,l=n.startCentered,m=l===void 0?!1:l,c="";return m&&IS_IE?c+="translate(".concat(t.x/d-a/2,"em, ").concat(t.y/d-u/2,"em) "):m?c+="translate(calc(-50% + ".concat(t.x/d,"em), calc(-50% + ").concat(t.y/d,"em)) "):c+="translate(".concat(t.x/d,"em, ").concat(t.y/d,"em) "),c+="scale(".concat(t.size/d*(t.flipX?-1:1),", ").concat(t.size/d*(t.flipY?-1:1),") "),c+="rotate(".concat(t.rotate,"deg) "),c}var baseStyles=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function css(){var n=DEFAULT_FAMILY_PREFIX,t=DEFAULT_REPLACEMENT_CLASS,i=config.familyPrefix,a=config.replacementClass,o=baseStyles;if(i!==n||a!==t){var u=new RegExp("\\.".concat(n,"\\-"),"g"),l=new RegExp("\\--".concat(n,"\\-"),"g"),m=new RegExp("\\.".concat(t),"g");o=o.replace(u,".".concat(i,"-")).replace(l,"--".concat(i,"-")).replace(m,".".concat(a))}return o}var _cssInserted=!1;function ensureCss(){config.autoAddCss&&!_cssInserted&&(insertCss(css()),_cssInserted=!0)}var InjectCSS={mixout:function n(){return{dom:{css,insertCss:ensureCss}}},hooks:function n(){return{beforeDOMElementCreation:function(){ensureCss()},beforeI2svg:function(){ensureCss()}}}},w=WINDOW||{};w[NAMESPACE_IDENTIFIER]||(w[NAMESPACE_IDENTIFIER]={});w[NAMESPACE_IDENTIFIER].styles||(w[NAMESPACE_IDENTIFIER].styles={});w[NAMESPACE_IDENTIFIER].hooks||(w[NAMESPACE_IDENTIFIER].hooks={});w[NAMESPACE_IDENTIFIER].shims||(w[NAMESPACE_IDENTIFIER].shims=[]);var namespace=w[NAMESPACE_IDENTIFIER],functions=[],listener=function n(){DOCUMENT.removeEventListener("DOMContentLoaded",n),loaded=1,functions.map(function(t){return t()})},loaded=!1;IS_DOM&&(loaded=(DOCUMENT.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DOCUMENT.readyState),loaded||DOCUMENT.addEventListener("DOMContentLoaded",listener));function domready(n){!IS_DOM||(loaded?setTimeout(n,0):functions.push(n))}function toHtml(n){var t=n.tag,i=n.attributes,a=i===void 0?{}:i,o=n.children,u=o===void 0?[]:o;return typeof n=="string"?htmlEscape(n):"<".concat(t," ").concat(joinAttributes(a),">").concat(u.map(toHtml).join(""),"</").concat(t,">")}function iconFromMapping(n,t,i){if(n&&n[t]&&n[t][i])return{prefix:t,iconName:i,icon:n[t][i]}}var bindInternal4=function n(t,i){return function(a,o,u,l){return t.call(i,a,o,u,l)}},reduce=function n(t,i,a,o){var u=Object.keys(t),l=u.length,m=o!==void 0?bindInternal4(i,o):i,c,f,g;for(a===void 0?(c=1,g=t[u[0]]):(c=0,g=a);c<l;c++)f=u[c],g=m(g,t[f],f,t);return g};function ucs2decode(n){for(var t=[],i=0,a=n.length;i<a;){var o=n.charCodeAt(i++);if(o>=55296&&o<=56319&&i<a){var u=n.charCodeAt(i++);(u&64512)==56320?t.push(((o&1023)<<10)+(u&1023)+65536):(t.push(o),i--)}else t.push(o)}return t}function toHex(n){var t=ucs2decode(n);return t.length===1?t[0].toString(16):null}function codePointAt(n,t){var i=n.length,a=n.charCodeAt(t),o;return a>=55296&&a<=56319&&i>t+1&&(o=n.charCodeAt(t+1),o>=56320&&o<=57343)?(a-55296)*1024+o-56320+65536:a}function normalizeIcons(n){return Object.keys(n).reduce(function(t,i){var a=n[i],o=!!a.icon;return o?t[a.iconName]=a.icon:t[i]=a,t},{})}function defineIcons(n,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,o=a===void 0?!1:a,u=normalizeIcons(t);typeof namespace.hooks.addPack=="function"&&!o?namespace.hooks.addPack(n,normalizeIcons(t)):namespace.styles[n]=_objectSpread2$2(_objectSpread2$2({},namespace.styles[n]||{}),u),n==="fas"&&defineIcons("fa",t)}var styles=namespace.styles,shims=namespace.shims,LONG_STYLE=Object.values(PREFIX_TO_LONG_STYLE),_defaultUsablePrefix=null,_byUnicode={},_byLigature={},_byOldName={},_byOldUnicode={},_byAlias={},PREFIXES=Object.keys(PREFIX_TO_STYLE);function isReserved(n){return~RESERVED_CLASSES.indexOf(n)}function getIconName(n,t){var i=t.split("-"),a=i[0],o=i.slice(1).join("-");return a===n&&o!==""&&!isReserved(o)?o:null}var build=function n(){var t=function(u){return reduce(styles,function(l,m,c){return l[c]=reduce(m,u,{}),l},{})};_byUnicode=t(function(o,u,l){if(u[3]&&(o[u[3]]=l),u[2]){var m=u[2].filter(function(c){return typeof c=="number"});m.forEach(function(c){o[c.toString(16)]=l})}return o}),_byLigature=t(function(o,u,l){if(o[l]=l,u[2]){var m=u[2].filter(function(c){return typeof c=="string"});m.forEach(function(c){o[c]=l})}return o}),_byAlias=t(function(o,u,l){var m=u[2];return o[l]=l,m.forEach(function(c){o[c]=l}),o});var i="far"in styles||config.autoFetchSvg,a=reduce(shims,function(o,u){var l=u[0],m=u[1],c=u[2];return m==="far"&&!i&&(m="fas"),typeof l=="string"&&(o.names[l]={prefix:m,iconName:c}),typeof l=="number"&&(o.unicodes[l.toString(16)]={prefix:m,iconName:c}),o},{names:{},unicodes:{}});_byOldName=a.names,_byOldUnicode=a.unicodes,_defaultUsablePrefix=getCanonicalPrefix(config.styleDefault)};onChange(function(n){_defaultUsablePrefix=getCanonicalPrefix(n.styleDefault)});build();function byUnicode(n,t){return(_byUnicode[n]||{})[t]}function byLigature(n,t){return(_byLigature[n]||{})[t]}function byAlias(n,t){return(_byAlias[n]||{})[t]}function byOldName(n){return _byOldName[n]||{prefix:null,iconName:null}}function byOldUnicode(n){var t=_byOldUnicode[n],i=byUnicode("fas",n);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function getDefaultUsablePrefix(){return _defaultUsablePrefix}var emptyCanonicalIcon=function n(){return{prefix:null,iconName:null,rest:[]}};function getCanonicalPrefix(n){var t=PREFIX_TO_STYLE[n],i=STYLE_TO_PREFIX[n]||STYLE_TO_PREFIX[t],a=n in namespace.styles?n:null;return i||a||null}function getCanonicalIcon(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.skipLookups,a=i===void 0?!1:i,o=null,u=n.reduce(function(l,m){var c=getIconName(config.familyPrefix,m);if(styles[m]?(m=LONG_STYLE.includes(m)?LONG_STYLE_TO_PREFIX[m]:m,o=m,l.prefix=m):PREFIXES.indexOf(m)>-1?(o=m,l.prefix=getCanonicalPrefix(m)):c?l.iconName=c:m!==config.replacementClass&&l.rest.push(m),!a&&l.prefix&&l.iconName){var f=o==="fa"?byOldName(l.iconName):{},g=byAlias(l.prefix,l.iconName);f.prefix&&(o=null),l.iconName=f.iconName||g||l.iconName,l.prefix=f.prefix||l.prefix,l.prefix==="far"&&!styles.far&&styles.fas&&!config.autoFetchSvg&&(l.prefix="fas")}return l},emptyCanonicalIcon());return(u.prefix==="fa"||o==="fa")&&(u.prefix=getDefaultUsablePrefix()||"fas"),u}var Library=function(){function n(){_classCallCheck$1(this,n),this.definitions={}}return _createClass$1(n,[{key:"add",value:function(){for(var i=this,a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];var l=o.reduce(this._pullDefinitions,{});Object.keys(l).forEach(function(m){i.definitions[m]=_objectSpread2$2(_objectSpread2$2({},i.definitions[m]||{}),l[m]),defineIcons(m,l[m]);var c=PREFIX_TO_LONG_STYLE[m];c&&defineIcons(c,l[m]),build()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var o=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(o).map(function(u){var l=o[u],m=l.prefix,c=l.iconName,f=l.icon,g=f[2];i[m]||(i[m]={}),g.length>0&&g.forEach(function(b){typeof b=="string"&&(i[m][b]=f)}),i[m][c]=f}),i}}]),n}(),_plugins=[],_hooks={},providers={},defaultProviderKeys=Object.keys(providers);function registerPlugins(n,t){var i=t.mixoutsTo;return _plugins=n,_hooks={},Object.keys(providers).forEach(function(a){defaultProviderKeys.indexOf(a)===-1&&delete providers[a]}),_plugins.forEach(function(a){var o=a.mixout?a.mixout():{};if(Object.keys(o).forEach(function(l){typeof o[l]=="function"&&(i[l]=o[l]),_typeof$2(o[l])==="object"&&Object.keys(o[l]).forEach(function(m){i[l]||(i[l]={}),i[l][m]=o[l][m]})}),a.hooks){var u=a.hooks();Object.keys(u).forEach(function(l){_hooks[l]||(_hooks[l]=[]),_hooks[l].push(u[l])})}a.provides&&a.provides(providers)}),i}function chainHooks(n,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];var u=_hooks[n]||[];return u.forEach(function(l){t=l.apply(null,[t].concat(a))}),t}function callHooks(n){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var o=_hooks[n]||[];o.forEach(function(u){u.apply(null,i)})}function callProvided(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);return providers[n]?providers[n].apply(null,t):void 0}function findIconDefinition(n){n.prefix==="fa"&&(n.prefix="fas");var t=n.iconName,i=n.prefix||getDefaultUsablePrefix();if(!!t)return t=byAlias(i,t)||t,iconFromMapping(library.definitions,i,t)||iconFromMapping(namespace.styles,i,t)}var library=new Library,noAuto=function n(){config.autoReplaceSvg=!1,config.observeMutations=!1,callHooks("noAuto")},dom={i2svg:function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return IS_DOM?(callHooks("beforeI2svg",t),callProvided("pseudoElements2svg",t),callProvided("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;config.autoReplaceSvg===!1&&(config.autoReplaceSvg=!0),config.observeMutations=!0,domready(function(){autoReplace({autoReplaceSvgRoot:i}),callHooks("watch",t)})}},parse={icon:function n(t){if(t===null)return null;if(_typeof$2(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:byAlias(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=getCanonicalPrefix(t[0]);return{prefix:a,iconName:byAlias(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(config.familyPrefix,"-"))>-1||t.match(ICON_SELECTION_SYNTAX_PATTERN))){var o=getCanonicalIcon(t.split(" "),{skipLookups:!0});return{prefix:o.prefix||getDefaultUsablePrefix(),iconName:byAlias(o.prefix,o.iconName)||o.iconName}}if(typeof t=="string"){var u=getDefaultUsablePrefix();return{prefix:u,iconName:byAlias(u,t)||t}}}},api={noAuto,config,dom,parse,library,findIconDefinition,toHtml},autoReplace=function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?DOCUMENT:i;(Object.keys(namespace.styles).length>0||config.autoFetchSvg)&&IS_DOM&&config.autoReplaceSvg&&api.dom.i2svg({node:a})};function domVariants(n,t){return Object.defineProperty(n,"abstract",{get:t}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(a){return toHtml(a)})}}),Object.defineProperty(n,"node",{get:function(){if(!!IS_DOM){var a=DOCUMENT.createElement("div");return a.innerHTML=n.html,a.children}}}),n}function asIcon(n){var t=n.children,i=n.main,a=n.mask,o=n.attributes,u=n.styles,l=n.transform;if(transformIsMeaningful(l)&&i.found&&!a.found){var m=i.width,c=i.height,f={x:m/c/2,y:.5};o.style=joinStyles(_objectSpread2$2(_objectSpread2$2({},u),{},{"transform-origin":"".concat(f.x+l.x/16,"em ").concat(f.y+l.y/16,"em")}))}return[{tag:"svg",attributes:o,children:t}]}function asSymbol(n){var t=n.prefix,i=n.iconName,a=n.children,o=n.attributes,u=n.symbol,l=u===!0?"".concat(t,"-").concat(config.familyPrefix,"-").concat(i):u;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread2$2(_objectSpread2$2({},o),{},{id:l}),children:a}]}]}function makeInlineSvgAbstract(n){var t=n.icons,i=t.main,a=t.mask,o=n.prefix,u=n.iconName,l=n.transform,m=n.symbol,c=n.title,f=n.maskId,g=n.titleId,b=n.extra,v=n.watchable,_=v===void 0?!1:v,x=a.found?a:i,C=x.width,I=x.height,U=o==="fak",M=[config.replacementClass,u?"".concat(config.familyPrefix,"-").concat(u):""].filter(function(X){return b.classes.indexOf(X)===-1}).filter(function(X){return X!==""||!!X}).concat(b.classes).join(" "),V={children:[],attributes:_objectSpread2$2(_objectSpread2$2({},b.attributes),{},{"data-prefix":o,"data-icon":u,class:M,role:b.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(C," ").concat(I)})},T=U&&!~b.classes.indexOf("fa-fw")?{width:"".concat(C/I*16*.0625,"em")}:{};_&&(V.attributes[DATA_FA_I2SVG]=""),c&&(V.children.push({tag:"title",attributes:{id:V.attributes["aria-labelledby"]||"title-".concat(g||nextUniqueId())},children:[c]}),delete V.attributes.title);var $=_objectSpread2$2(_objectSpread2$2({},V),{},{prefix:o,iconName:u,main:i,mask:a,maskId:f,transform:l,symbol:m,styles:_objectSpread2$2(_objectSpread2$2({},T),b.styles)}),B=a.found&&i.found?callProvided("generateAbstractMask",$)||{children:[],attributes:{}}:callProvided("generateAbstractIcon",$)||{children:[],attributes:{}},G=B.children,H=B.attributes;return $.children=G,$.attributes=H,m?asSymbol($):asIcon($)}function makeLayersTextAbstract(n){var t=n.content,i=n.width,a=n.height,o=n.transform,u=n.title,l=n.extra,m=n.watchable,c=m===void 0?!1:m,f=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},l.attributes),u?{title:u}:{}),{},{class:l.classes.join(" ")});c&&(f[DATA_FA_I2SVG]="");var g=_objectSpread2$2({},l.styles);transformIsMeaningful(o)&&(g.transform=transformForCss({transform:o,startCentered:!0,width:i,height:a}),g["-webkit-transform"]=g.transform);var b=joinStyles(g);b.length>0&&(f.style=b);var v=[];return v.push({tag:"span",attributes:f,children:[t]}),u&&v.push({tag:"span",attributes:{class:"sr-only"},children:[u]}),v}function makeLayersCounterAbstract(n){var t=n.content,i=n.title,a=n.extra,o=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),u=joinStyles(a.styles);u.length>0&&(o.style=u);var l=[];return l.push({tag:"span",attributes:o,children:[t]}),i&&l.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),l}var styles$1=namespace.styles;function asFoundIcon(n){var t=n[0],i=n[1],a=n.slice(4),o=_slicedToArray(a,1),u=o[0],l=null;return Array.isArray(u)?l={tag:"g",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.GROUP)},children:[{tag:"path",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.SECONDARY),fill:"currentColor",d:u[0]}},{tag:"path",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.PRIMARY),fill:"currentColor",d:u[1]}}]}:l={tag:"path",attributes:{fill:"currentColor",d:u}},{found:!0,width:t,height:i,icon:l}}var missingIconResolutionMixin={found:!1,width:512,height:512};function maybeNotifyMissing(n,t){!PRODUCTION$1&&!config.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(t,'" is missing.'))}function findIcon(n,t){var i=t;return t==="fa"&&config.styleDefault!==null&&(t=getDefaultUsablePrefix()),new Promise(function(a,o){if(callProvided("missingIconAbstract"),i==="fa"){var u=byOldName(n)||{};n=u.iconName||n,t=u.prefix||t}if(n&&t&&styles$1[t]&&styles$1[t][n]){var l=styles$1[t][n];return a(asFoundIcon(l))}maybeNotifyMissing(n,t),a(_objectSpread2$2(_objectSpread2$2({},missingIconResolutionMixin),{},{icon:config.showMissingIcons&&n?callProvided("missingIconAbstract")||{}:{}}))})}var noop$1=function n(){},p=config.measurePerformance&&PERFORMANCE&&PERFORMANCE.mark&&PERFORMANCE.measure?PERFORMANCE:{mark:noop$1,measure:noop$1},preamble='FA "6.0.0"',begin=function n(t){return p.mark("".concat(preamble," ").concat(t," begins")),function(){return end(t)}},end=function n(t){p.mark("".concat(preamble," ").concat(t," ends")),p.measure("".concat(preamble," ").concat(t),"".concat(preamble," ").concat(t," begins"),"".concat(preamble," ").concat(t," ends"))},perf={begin,end},noop$2=function n(){};function isWatched(n){var t=n.getAttribute?n.getAttribute(DATA_FA_I2SVG):null;return typeof t=="string"}function hasPrefixAndIcon(n){var t=n.getAttribute?n.getAttribute(DATA_PREFIX):null,i=n.getAttribute?n.getAttribute(DATA_ICON):null;return t&&i}function hasBeenReplaced(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(config.replacementClass)}function getMutator(){if(config.autoReplaceSvg===!0)return mutators.replace;var n=mutators[config.autoReplaceSvg];return n||mutators.replace}function createElementNS(n){return DOCUMENT.createElementNS("http://www.w3.org/2000/svg",n)}function createElement(n){return DOCUMENT.createElement(n)}function convertSVG(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?n.tag==="svg"?createElementNS:createElement:i;if(typeof n=="string")return DOCUMENT.createTextNode(n);var o=a(n.tag);Object.keys(n.attributes||[]).forEach(function(l){o.setAttribute(l,n.attributes[l])});var u=n.children||[];return u.forEach(function(l){o.appendChild(convertSVG(l,{ceFn:a}))}),o}function nodeAsComment(n){var t=" ".concat(n.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var mutators={replace:function n(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(o){i.parentNode.insertBefore(convertSVG(o),i)}),i.getAttribute(DATA_FA_I2SVG)===null&&config.keepOriginalSource){var a=DOCUMENT.createComment(nodeAsComment(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function n(t){var i=t[0],a=t[1];if(~classArray(i).indexOf(config.replacementClass))return mutators.replace(t);var o=new RegExp("".concat(config.familyPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var u=a[0].attributes.class.split(" ").reduce(function(m,c){return c===config.replacementClass||c.match(o)?m.toSvg.push(c):m.toNode.push(c),m},{toNode:[],toSvg:[]});a[0].attributes.class=u.toSvg.join(" "),u.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",u.toNode.join(" "))}var l=a.map(function(m){return toHtml(m)}).join(`
`);i.setAttribute(DATA_FA_I2SVG,""),i.innerHTML=l}};function performOperationSync(n){n()}function perform(n,t){var i=typeof t=="function"?t:noop$2;if(n.length===0)i();else{var a=performOperationSync;config.mutateApproach===MUTATION_APPROACH_ASYNC&&(a=WINDOW.requestAnimationFrame||performOperationSync),a(function(){var o=getMutator(),u=perf.begin("mutate");n.map(o),u(),i()})}}var disabled=!1;function disableObservation(){disabled=!0}function enableObservation(){disabled=!1}var mo=null;function observe$1(n){if(!!MUTATION_OBSERVER&&!!config.observeMutations){var t=n.treeCallback,i=t===void 0?noop$2:t,a=n.nodeCallback,o=a===void 0?noop$2:a,u=n.pseudoElementsCallback,l=u===void 0?noop$2:u,m=n.observeMutationsRoot,c=m===void 0?DOCUMENT:m;mo=new MUTATION_OBSERVER(function(f){if(!disabled){var g=getDefaultUsablePrefix();toArray(f).forEach(function(b){if(b.type==="childList"&&b.addedNodes.length>0&&!isWatched(b.addedNodes[0])&&(config.searchPseudoElements&&l(b.target),i(b.target)),b.type==="attributes"&&b.target.parentNode&&config.searchPseudoElements&&l(b.target.parentNode),b.type==="attributes"&&isWatched(b.target)&&~ATTRIBUTES_WATCHED_FOR_MUTATION.indexOf(b.attributeName))if(b.attributeName==="class"&&hasPrefixAndIcon(b.target)){var v=getCanonicalIcon(classArray(b.target)),_=v.prefix,x=v.iconName;b.target.setAttribute(DATA_PREFIX,_||g),x&&b.target.setAttribute(DATA_ICON,x)}else hasBeenReplaced(b.target)&&o(b.target)})}}),IS_DOM&&mo.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function disconnect(){!mo||mo.disconnect()}function styleParser(n){var t=n.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,o){var u=o.split(":"),l=u[0],m=u.slice(1);return l&&m.length>0&&(a[l]=m.join(":").trim()),a},{})),i}function classParser(n){var t=n.getAttribute("data-prefix"),i=n.getAttribute("data-icon"),a=n.innerText!==void 0?n.innerText.trim():"",o=getCanonicalIcon(classArray(n));return o.prefix||(o.prefix=getDefaultUsablePrefix()),t&&i&&(o.prefix=t,o.iconName=i),o.iconName&&o.prefix||o.prefix&&a.length>0&&(o.iconName=byLigature(o.prefix,n.innerText)||byUnicode(o.prefix,toHex(n.innerText))),o}function attributesParser(n){var t=toArray(n.attributes).reduce(function(o,u){return o.name!=="class"&&o.name!=="style"&&(o[u.name]=u.value),o},{}),i=n.getAttribute("title"),a=n.getAttribute("data-fa-title-id");return config.autoA11y&&(i?t["aria-labelledby"]="".concat(config.replacementClass,"-title-").concat(a||nextUniqueId()):(t["aria-hidden"]="true",t.focusable="false")),t}function blankMeta(){return{iconName:null,title:null,titleId:null,prefix:null,transform:meaninglessTransform,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function parseMeta(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=classParser(n),a=i.iconName,o=i.prefix,u=i.rest,l=attributesParser(n),m=chainHooks("parseNodeAttributes",{},n),c=t.styleParser?styleParser(n):[];return _objectSpread2$2({iconName:a,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:o,transform:meaninglessTransform,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:u,styles:c,attributes:l}},m)}var styles$2=namespace.styles;function generateMutation(n){var t=config.autoReplaceSvg==="nest"?parseMeta(n,{styleParser:!1}):parseMeta(n);return~t.extra.classes.indexOf(LAYERS_TEXT_CLASSNAME)?callProvided("generateLayersText",n,t):callProvided("generateSvgReplacementMutation",n,t)}function onTree(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!IS_DOM)return Promise.resolve();var i=DOCUMENT.documentElement.classList,a=function(b){return i.add("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(b))},o=function(b){return i.remove("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(b))},u=config.autoFetchSvg?Object.keys(PREFIX_TO_STYLE):Object.keys(styles$2),l=[".".concat(LAYERS_TEXT_CLASSNAME,":not([").concat(DATA_FA_I2SVG,"])")].concat(u.map(function(g){return".".concat(g,":not([").concat(DATA_FA_I2SVG,"])")})).join(", ");if(l.length===0)return Promise.resolve();var m=[];try{m=toArray(n.querySelectorAll(l))}catch{}if(m.length>0)a("pending"),o("complete");else return Promise.resolve();var c=perf.begin("onTree"),f=m.reduce(function(g,b){try{var v=generateMutation(b);v&&g.push(v)}catch(_){PRODUCTION$1||_.name==="MissingIcon"&&console.error(_)}return g},[]);return new Promise(function(g,b){Promise.all(f).then(function(v){perform(v,function(){a("active"),a("complete"),o("pending"),typeof t=="function"&&t(),c(),g()})}).catch(function(v){c(),b(v)})})}function onNode(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;generateMutation(n).then(function(i){i&&perform([i],t)})}function resolveIcons(n){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:findIconDefinition(t||{}),o=i.mask;return o&&(o=(o||{}).icon?o:findIconDefinition(o||{})),n(a,_objectSpread2$2(_objectSpread2$2({},i),{},{mask:o}))}}var render$1=function n(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,o=a===void 0?meaninglessTransform:a,u=i.symbol,l=u===void 0?!1:u,m=i.mask,c=m===void 0?null:m,f=i.maskId,g=f===void 0?null:f,b=i.title,v=b===void 0?null:b,_=i.titleId,x=_===void 0?null:_,C=i.classes,I=C===void 0?[]:C,U=i.attributes,M=U===void 0?{}:U,V=i.styles,T=V===void 0?{}:V;if(!!t){var $=t.prefix,B=t.iconName,G=t.icon;return domVariants(_objectSpread2$2({type:"icon"},t),function(){return callHooks("beforeDOMElementCreation",{iconDefinition:t,params:i}),config.autoA11y&&(v?M["aria-labelledby"]="".concat(config.replacementClass,"-title-").concat(x||nextUniqueId()):(M["aria-hidden"]="true",M.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(G),mask:c?asFoundIcon(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:$,iconName:B,transform:_objectSpread2$2(_objectSpread2$2({},meaninglessTransform),o),symbol:l,title:v,maskId:g,titleId:x,extra:{attributes:M,styles:T,classes:I}})})}},ReplaceElements={mixout:function n(){return{icon:resolveIcons(render$1)}},hooks:function n(){return{mutationObserverCallbacks:function(i){return i.treeCallback=onTree,i.nodeCallback=onNode,i}}},provides:function n(t){t.i2svg=function(i){var a=i.node,o=a===void 0?DOCUMENT:a,u=i.callback,l=u===void 0?function(){}:u;return onTree(o,l)},t.generateSvgReplacementMutation=function(i,a){var o=a.iconName,u=a.title,l=a.titleId,m=a.prefix,c=a.transform,f=a.symbol,g=a.mask,b=a.maskId,v=a.extra;return new Promise(function(_,x){Promise.all([findIcon(o,m),g.iconName?findIcon(g.iconName,g.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(C){var I=_slicedToArray(C,2),U=I[0],M=I[1];_([i,makeInlineSvgAbstract({icons:{main:U,mask:M},prefix:m,iconName:o,transform:c,symbol:f,maskId:b,title:u,titleId:l,extra:v,watchable:!0})])}).catch(x)})},t.generateAbstractIcon=function(i){var a=i.children,o=i.attributes,u=i.main,l=i.transform,m=i.styles,c=joinStyles(m);c.length>0&&(o.style=c);var f;return transformIsMeaningful(l)&&(f=callProvided("generateAbstractTransformGrouping",{main:u,transform:l,containerWidth:u.width,iconWidth:u.width})),a.push(f||u.icon),{children:a,attributes:o}}}},Layers={mixout:function n(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.classes,u=o===void 0?[]:o;return domVariants({type:"layer"},function(){callHooks("beforeDOMElementCreation",{assembler:i,params:a});var l=[];return i(function(m){Array.isArray(m)?m.map(function(c){l=l.concat(c.abstract)}):l=l.concat(m.abstract)}),[{tag:"span",attributes:{class:["".concat(config.familyPrefix,"-layers")].concat(_toConsumableArray$1(u)).join(" ")},children:l}]})}}}},LayersCounter={mixout:function n(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.title,u=o===void 0?null:o,l=a.classes,m=l===void 0?[]:l,c=a.attributes,f=c===void 0?{}:c,g=a.styles,b=g===void 0?{}:g;return domVariants({type:"counter",content:i},function(){return callHooks("beforeDOMElementCreation",{content:i,params:a}),makeLayersCounterAbstract({content:i.toString(),title:u,extra:{attributes:f,styles:b,classes:["".concat(config.familyPrefix,"-layers-counter")].concat(_toConsumableArray$1(m))}})})}}}},LayersText={mixout:function n(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.transform,u=o===void 0?meaninglessTransform:o,l=a.title,m=l===void 0?null:l,c=a.classes,f=c===void 0?[]:c,g=a.attributes,b=g===void 0?{}:g,v=a.styles,_=v===void 0?{}:v;return domVariants({type:"text",content:i},function(){return callHooks("beforeDOMElementCreation",{content:i,params:a}),makeLayersTextAbstract({content:i,transform:_objectSpread2$2(_objectSpread2$2({},meaninglessTransform),u),title:m,extra:{attributes:b,styles:_,classes:["".concat(config.familyPrefix,"-layers-text")].concat(_toConsumableArray$1(f))}})})}}},provides:function n(t){t.generateLayersText=function(i,a){var o=a.title,u=a.transform,l=a.extra,m=null,c=null;if(IS_IE){var f=parseInt(getComputedStyle(i).fontSize,10),g=i.getBoundingClientRect();m=g.width/f,c=g.height/f}return config.autoA11y&&!o&&(l.attributes["aria-hidden"]="true"),Promise.resolve([i,makeLayersTextAbstract({content:i.innerHTML,width:m,height:c,transform:u,title:o,extra:l,watchable:!0})])}}},CLEAN_CONTENT_PATTERN=new RegExp('"',"ug"),SECONDARY_UNICODE_RANGE=[1105920,1112319];function hexValueFromContent(n){var t=n.replace(CLEAN_CONTENT_PATTERN,""),i=codePointAt(t,0),a=i>=SECONDARY_UNICODE_RANGE[0]&&i<=SECONDARY_UNICODE_RANGE[1],o=t.length===2?t[0]===t[1]:!1;return{value:toHex(o?t[0]:t),isSecondary:a||o}}function replaceForPosition(n,t){var i="".concat(DATA_FA_PSEUDO_ELEMENT_PENDING).concat(t.replace(":","-"));return new Promise(function(a,o){if(n.getAttribute(i)!==null)return a();var u=toArray(n.children),l=u.filter(function(B){return B.getAttribute(DATA_FA_PSEUDO_ELEMENT)===t})[0],m=WINDOW.getComputedStyle(n,t),c=m.getPropertyValue("font-family").match(FONT_FAMILY_PATTERN),f=m.getPropertyValue("font-weight"),g=m.getPropertyValue("content");if(l&&!c)return n.removeChild(l),a();if(c&&g!=="none"&&g!==""){var b=m.getPropertyValue("content"),v=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?STYLE_TO_PREFIX[c[2].toLowerCase()]:FONT_WEIGHT_TO_PREFIX[f],_=hexValueFromContent(b),x=_.value,C=_.isSecondary,I=c[0].startsWith("FontAwesome"),U=byUnicode(v,x),M=U;if(I){var V=byOldUnicode(x);V.iconName&&V.prefix&&(U=V.iconName,v=V.prefix)}if(U&&!C&&(!l||l.getAttribute(DATA_PREFIX)!==v||l.getAttribute(DATA_ICON)!==M)){n.setAttribute(i,M),l&&n.removeChild(l);var T=blankMeta(),$=T.extra;$.attributes[DATA_FA_PSEUDO_ELEMENT]=t,findIcon(U,v).then(function(B){var G=makeInlineSvgAbstract(_objectSpread2$2(_objectSpread2$2({},T),{},{icons:{main:B,mask:emptyCanonicalIcon()},prefix:v,iconName:M,extra:$,watchable:!0})),H=DOCUMENT.createElement("svg");t==="::before"?n.insertBefore(H,n.firstChild):n.appendChild(H),H.outerHTML=G.map(function(X){return toHtml(X)}).join(`
`),n.removeAttribute(i),a()}).catch(o)}else a()}else a()})}function replace(n){return Promise.all([replaceForPosition(n,"::before"),replaceForPosition(n,"::after")])}function processable(n){return n.parentNode!==document.head&&!~TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS.indexOf(n.tagName.toUpperCase())&&!n.getAttribute(DATA_FA_PSEUDO_ELEMENT)&&(!n.parentNode||n.parentNode.tagName!=="svg")}function searchPseudoElements(n){if(!!IS_DOM)return new Promise(function(t,i){var a=toArray(n.querySelectorAll("*")).filter(processable).map(replace),o=perf.begin("searchPseudoElements");disableObservation(),Promise.all(a).then(function(){o(),enableObservation(),t()}).catch(function(){o(),enableObservation(),i()})})}var PseudoElements={hooks:function n(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=searchPseudoElements,i}}},provides:function n(t){t.pseudoElements2svg=function(i){var a=i.node,o=a===void 0?DOCUMENT:a;config.searchPseudoElements&&searchPseudoElements(o)}}},_unwatched=!1,MutationObserver$1={mixout:function n(){return{dom:{unwatch:function(){disableObservation(),_unwatched=!0}}}},hooks:function n(){return{bootstrap:function(){observe$1(chainHooks("mutationObserverCallbacks",{}))},noAuto:function(){disconnect()},watch:function(i){var a=i.observeMutationsRoot;_unwatched?enableObservation():observe$1(chainHooks("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},parseTransformString=function n(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,o){var u=o.toLowerCase().split("-"),l=u[0],m=u.slice(1).join("-");if(l&&m==="h")return a.flipX=!0,a;if(l&&m==="v")return a.flipY=!0,a;if(m=parseFloat(m),isNaN(m))return a;switch(l){case"grow":a.size=a.size+m;break;case"shrink":a.size=a.size-m;break;case"left":a.x=a.x-m;break;case"right":a.x=a.x+m;break;case"up":a.y=a.y-m;break;case"down":a.y=a.y+m;break;case"rotate":a.rotate=a.rotate+m;break}return a},i)},PowerTransforms={mixout:function n(){return{parse:{transform:function(i){return parseTransformString(i)}}}},hooks:function n(){return{parseNodeAttributes:function(i,a){var o=a.getAttribute("data-fa-transform");return o&&(i.transform=parseTransformString(o)),i}}},provides:function n(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,o=i.transform,u=i.containerWidth,l=i.iconWidth,m={transform:"translate(".concat(u/2," 256)")},c="translate(".concat(o.x*32,", ").concat(o.y*32,") "),f="scale(".concat(o.size/16*(o.flipX?-1:1),", ").concat(o.size/16*(o.flipY?-1:1),") "),g="rotate(".concat(o.rotate," 0 0)"),b={transform:"".concat(c," ").concat(f," ").concat(g)},v={transform:"translate(".concat(l/2*-1," -256)")},_={outer:m,inner:b,path:v};return{tag:"g",attributes:_objectSpread2$2({},_.outer),children:[{tag:"g",attributes:_objectSpread2$2({},_.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:_objectSpread2$2(_objectSpread2$2({},a.icon.attributes),_.path)}]}]}}}},ALL_SPACE={x:0,y:0,width:"100%",height:"100%"};function fillBlack(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||t)&&(n.attributes.fill="black"),n}function deGroup(n){return n.tag==="g"?n.children:[n]}var Masks={hooks:function n(){return{parseNodeAttributes:function(i,a){var o=a.getAttribute("data-fa-mask"),u=o?getCanonicalIcon(o.split(" ").map(function(l){return l.trim()})):emptyCanonicalIcon();return u.prefix||(u.prefix=getDefaultUsablePrefix()),i.mask=u,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function n(t){t.generateAbstractMask=function(i){var a=i.children,o=i.attributes,u=i.main,l=i.mask,m=i.maskId,c=i.transform,f=u.width,g=u.icon,b=l.width,v=l.icon,_=transformForSvg({transform:c,containerWidth:b,iconWidth:f}),x={tag:"rect",attributes:_objectSpread2$2(_objectSpread2$2({},ALL_SPACE),{},{fill:"white"})},C=g.children?{children:g.children.map(fillBlack)}:{},I={tag:"g",attributes:_objectSpread2$2({},_.inner),children:[fillBlack(_objectSpread2$2({tag:g.tag,attributes:_objectSpread2$2(_objectSpread2$2({},g.attributes),_.path)},C))]},U={tag:"g",attributes:_objectSpread2$2({},_.outer),children:[I]},M="mask-".concat(m||nextUniqueId()),V="clip-".concat(m||nextUniqueId()),T={tag:"mask",attributes:_objectSpread2$2(_objectSpread2$2({},ALL_SPACE),{},{id:M,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[x,U]},$={tag:"defs",children:[{tag:"clipPath",attributes:{id:V},children:deGroup(v)},T]};return a.push($,{tag:"rect",attributes:_objectSpread2$2({fill:"currentColor","clip-path":"url(#".concat(V,")"),mask:"url(#".concat(M,")")},ALL_SPACE)}),{children:a,attributes:o}}}},MissingIconIndicator={provides:function n(t){var i=!1;WINDOW.matchMedia&&(i=WINDOW.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],o={fill:"currentColor"},u={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},o),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var l=_objectSpread2$2(_objectSpread2$2({},u),{},{attributeName:"opacity"}),m={tag:"circle",attributes:_objectSpread2$2(_objectSpread2$2({},o),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||m.children.push({tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},u),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},l),{},{values:"1;0;1;1;0;1;"})}),a.push(m),a.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},o),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},l),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},o),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},l),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},SvgSymbols={hooks:function n(){return{parseNodeAttributes:function(i,a){var o=a.getAttribute("data-fa-symbol"),u=o===null?!1:o===""?!0:o;return i.symbol=u,i}}}},plugins=[InjectCSS,ReplaceElements,Layers,LayersCounter,LayersText,PseudoElements,MutationObserver$1,PowerTransforms,Masks,MissingIconIndicator,SvgSymbols];registerPlugins(plugins,{mixoutsTo:api});api.noAuto;api.config;api.library;api.dom;var parse$1=api.parse;api.findIconDefinition;api.toHtml;var icon=api.icon;api.layer;api.text;api.counter;function ownKeys$1(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,a)}return i}function _objectSpread2$1(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$1(Object(i),!0).forEach(function(a){_defineProperty$1(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys$1(Object(i)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}function _typeof$1(n){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(n)}function _defineProperty$1(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function _objectWithoutPropertiesLoose$2(n,t){if(n==null)return{};var i={},a=Object.keys(n),o,u;for(u=0;u<a.length;u++)o=a[u],!(t.indexOf(o)>=0)&&(i[o]=n[o]);return i}function _objectWithoutProperties$1(n,t){if(n==null)return{};var i=_objectWithoutPropertiesLoose$2(n,t),a,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(o=0;o<u.length;o++)a=u[o],!(t.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,a)||(i[a]=n[a]))}return i}function _toConsumableArray(n){return _arrayWithoutHoles(n)||_iterableToArray(n)||_unsupportedIterableToArray(n)||_nonIterableSpread()}function _arrayWithoutHoles(n){if(Array.isArray(n))return _arrayLikeToArray(n)}function _iterableToArray(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _unsupportedIterableToArray(n,t){if(!!n){if(typeof n=="string")return _arrayLikeToArray(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(n,t)}}function _arrayLikeToArray(n,t){(t==null||t>n.length)&&(t=n.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=n[i];return a}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function classList(n){var t,i=n.beat,a=n.fade,o=n.beatFade,u=n.bounce,l=n.shake,m=n.flash,c=n.spin,f=n.spinPulse,g=n.spinReverse,b=n.pulse,v=n.fixedWidth,_=n.inverse,x=n.border,C=n.listItem,I=n.flip,U=n.size,M=n.rotation,V=n.pull,T=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":o,"fa-bounce":u,"fa-shake":l,"fa-flash":m,"fa-spin":c,"fa-spin-reverse":g,"fa-spin-pulse":f,"fa-pulse":b,"fa-fw":v,"fa-inverse":_,"fa-border":x,"fa-li":C,"fa-flip-horizontal":I==="horizontal"||I==="both","fa-flip-vertical":I==="vertical"||I==="both"},_defineProperty$1(t,"fa-".concat(U),typeof U!="undefined"&&U!==null),_defineProperty$1(t,"fa-rotate-".concat(M),typeof M!="undefined"&&M!==null&&M!==0),_defineProperty$1(t,"fa-pull-".concat(V),typeof V!="undefined"&&V!==null),_defineProperty$1(t,"fa-swap-opacity",n.swapOpacity),t);return Object.keys(T).map(function($){return T[$]?$:null}).filter(function($){return $})}function _isNumerical(n){return n=n-0,n===n}function camelize(n){return _isNumerical(n)?n:(n=n.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),n.substr(0,1).toLowerCase()+n.substr(1))}var _excluded$1=["style"];function capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)}function styleToObject(n){return n.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),o=camelize(i.slice(0,a)),u=i.slice(a+1).trim();return o.startsWith("webkit")?t[capitalize(o)]=u:t[o]=u,t},{})}function convert(n,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(c){return convert(n,c)}),o=Object.keys(t.attributes||{}).reduce(function(c,f){var g=t.attributes[f];switch(f){case"class":c.attrs.className=g,delete t.attributes.class;break;case"style":c.attrs.style=styleToObject(g);break;default:f.indexOf("aria-")===0||f.indexOf("data-")===0?c.attrs[f.toLowerCase()]=g:c.attrs[camelize(f)]=g}return c},{attrs:{}}),u=i.style,l=u===void 0?{}:u,m=_objectWithoutProperties$1(i,_excluded$1);return o.attrs.style=_objectSpread2$1(_objectSpread2$1({},o.attrs.style),l),n.apply(void 0,[t.tag,_objectSpread2$1(_objectSpread2$1({},o.attrs),m)].concat(_toConsumableArray(a)))}var PRODUCTION=!1;try{PRODUCTION=!0}catch(n){}function log(){if(!PRODUCTION&&console&&typeof console.error=="function"){var n;(n=console).error.apply(n,arguments)}}function normalizeIconArgs(n){if(n&&_typeof$1(n)==="object"&&n.prefix&&n.iconName&&n.icon)return n;if(parse$1.icon)return parse$1.icon(n);if(n===null)return null;if(n&&_typeof$1(n)==="object"&&n.prefix&&n.iconName)return n;if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="string")return{prefix:"fas",iconName:n}}function objectWithKey(n,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?_defineProperty$1({},n,t):{}}var _excluded=["forwardedRef"];function FontAwesomeIcon(n){var t=n.forwardedRef,i=_objectWithoutProperties$1(n,_excluded),a=i.icon,o=i.mask,u=i.symbol,l=i.className,m=i.title,c=i.titleId,f=i.maskId,g=normalizeIconArgs(a),b=objectWithKey("classes",[].concat(_toConsumableArray(classList(i)),_toConsumableArray(l.split(" ")))),v=objectWithKey("transform",typeof i.transform=="string"?parse$1.transform(i.transform):i.transform),_=objectWithKey("mask",normalizeIconArgs(o)),x=icon(g,_objectSpread2$1(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},b),v),_),{},{symbol:u,title:m,titleId:c,maskId:f}));if(!x)return log("Could not find icon",g),null;var C=x.abstract,I={ref:t};return Object.keys(i).forEach(function(U){FontAwesomeIcon.defaultProps.hasOwnProperty(U)||(I[U]=i[U])}),convertCurry(C[0],I)}FontAwesomeIcon.displayName="FontAwesomeIcon";FontAwesomeIcon.propTypes={beat:PropTypes.bool,border:PropTypes.bool,bounce:PropTypes.bool,className:PropTypes.string,fade:PropTypes.bool,flash:PropTypes.bool,mask:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),maskId:PropTypes.string,fixedWidth:PropTypes.bool,inverse:PropTypes.bool,flip:PropTypes.oneOf(["horizontal","vertical","both"]),icon:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),listItem:PropTypes.bool,pull:PropTypes.oneOf(["right","left"]),pulse:PropTypes.bool,rotation:PropTypes.oneOf([0,90,180,270]),shake:PropTypes.bool,size:PropTypes.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:PropTypes.bool,spinPulse:PropTypes.bool,spinReverse:PropTypes.bool,symbol:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),title:PropTypes.string,titleId:PropTypes.string,transform:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),swapOpacity:PropTypes.bool};FontAwesomeIcon.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var convertCurry=convert.bind(null,e.createElement),BOX_CLASS="tippy-box",CONTENT_CLASS="tippy-content",BACKDROP_CLASS="tippy-backdrop",ARROW_CLASS="tippy-arrow",SVG_ARROW_CLASS="tippy-svg-arrow",TOUCH_OPTIONS={passive:!0,capture:!0},TIPPY_DEFAULT_APPEND_TO=function n(){return document.body};function getValueAtIndexOrReturn(n,t,i){if(Array.isArray(n)){var a=n[t];return a==null?Array.isArray(i)?i[t]:i:a}return n}function isType(n,t){var i={}.toString.call(n);return i.indexOf("[object")===0&&i.indexOf(t+"]")>-1}function invokeWithArgsOrReturn(n,t){return typeof n=="function"?n.apply(void 0,t):n}function debounce(n,t){if(t===0)return n;var i;return function(a){clearTimeout(i),i=setTimeout(function(){n(a)},t)}}function splitBySpaces(n){return n.split(/\s+/).filter(Boolean)}function normalizeToArray(n){return[].concat(n)}function pushIfUnique(n,t){n.indexOf(t)===-1&&n.push(t)}function unique(n){return n.filter(function(t,i){return n.indexOf(t)===i})}function getBasePlacement(n){return n.split("-")[0]}function arrayFrom(n){return[].slice.call(n)}function removeUndefinedProps(n){return Object.keys(n).reduce(function(t,i){return n[i]!==void 0&&(t[i]=n[i]),t},{})}function div(){return document.createElement("div")}function isElement(n){return["Element","Fragment"].some(function(t){return isType(n,t)})}function isNodeList(n){return isType(n,"NodeList")}function isMouseEvent(n){return isType(n,"MouseEvent")}function isReferenceElement(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function getArrayOfElements(n){return isElement(n)?[n]:isNodeList(n)?arrayFrom(n):Array.isArray(n)?n:arrayFrom(document.querySelectorAll(n))}function setTransitionDuration(n,t){n.forEach(function(i){i&&(i.style.transitionDuration=t+"ms")})}function setVisibilityState(n,t){n.forEach(function(i){i&&i.setAttribute("data-state",t)})}function getOwnerDocument(n){var t,i=normalizeToArray(n),a=i[0];return a!=null&&(t=a.ownerDocument)!=null&&t.body?a.ownerDocument:document}function isCursorOutsideInteractiveBorder(n,t){var i=t.clientX,a=t.clientY;return n.every(function(o){var u=o.popperRect,l=o.popperState,m=o.props,c=m.interactiveBorder,f=getBasePlacement(l.placement),g=l.modifiersData.offset;if(!g)return!0;var b=f==="bottom"?g.top.y:0,v=f==="top"?g.bottom.y:0,_=f==="right"?g.left.x:0,x=f==="left"?g.right.x:0,C=u.top-a+b>c,I=a-u.bottom-v>c,U=u.left-i+_>c,M=i-u.right-x>c;return C||I||U||M})}function updateTransitionEndListener(n,t,i){var a=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){n[a](o,i)})}function actualContains(n,t){for(var i=t;i;){var a;if(n.contains(i))return!0;i=i.getRootNode==null||(a=i.getRootNode())==null?void 0:a.host}return!1}var currentInput={isTouch:!1},lastMouseMoveTime=0;function onDocumentTouchStart(){currentInput.isTouch||(currentInput.isTouch=!0,window.performance&&document.addEventListener("mousemove",onDocumentMouseMove))}function onDocumentMouseMove(){var n=performance.now();n-lastMouseMoveTime<20&&(currentInput.isTouch=!1,document.removeEventListener("mousemove",onDocumentMouseMove)),lastMouseMoveTime=n}function onWindowBlur(){var n=document.activeElement;if(isReferenceElement(n)){var t=n._tippy;n.blur&&!t.state.isVisible&&n.blur()}}function bindGlobalEventListeners(){document.addEventListener("touchstart",onDocumentTouchStart,TOUCH_OPTIONS),window.addEventListener("blur",onWindowBlur)}var isBrowser$2=typeof window!="undefined"&&typeof document!="undefined",isIE11=isBrowser$2?!!window.msCrypto:!1,pluginProps={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},renderProps={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function n(){},onBeforeUpdate:function n(){},onCreate:function n(){},onDestroy:function n(){},onHidden:function n(){},onHide:function n(){},onMount:function n(){},onShow:function n(){},onShown:function n(){},onTrigger:function n(){},onUntrigger:function n(){},onClickOutside:function n(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pluginProps,renderProps),defaultKeys=Object.keys(defaultProps),setDefaultProps=function n(t){var i=Object.keys(t);i.forEach(function(a){defaultProps[a]=t[a]})};function getExtendedPassedProps(n){var t=n.plugins||[],i=t.reduce(function(a,o){var u=o.name,l=o.defaultValue;if(u){var m;a[u]=n[u]!==void 0?n[u]:(m=defaultProps[u])!=null?m:l}return a},{});return Object.assign({},n,i)}function getDataAttributeProps(n,t){var i=t?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:t}))):defaultKeys,a=i.reduce(function(o,u){var l=(n.getAttribute("data-tippy-"+u)||"").trim();if(!l)return o;if(u==="content")o[u]=l;else try{o[u]=JSON.parse(l)}catch{o[u]=l}return o},{});return a}function evaluateProps(n,t){var i=Object.assign({},t,{content:invokeWithArgsOrReturn(t.content,[n])},t.ignoreAttributes?{}:getDataAttributeProps(n,t.plugins));return i.aria=Object.assign({},defaultProps.aria,i.aria),i.aria={expanded:i.aria.expanded==="auto"?t.interactive:i.aria.expanded,content:i.aria.content==="auto"?t.interactive?null:"describedby":i.aria.content},i}var innerHTML=function n(){return"innerHTML"};function dangerouslySetInnerHTML(n,t){n[innerHTML()]=t}function createArrowElement(n){var t=div();return n===!0?t.className=ARROW_CLASS:(t.className=SVG_ARROW_CLASS,isElement(n)?t.appendChild(n):dangerouslySetInnerHTML(t,n)),t}function setContent(n,t){isElement(t.content)?(dangerouslySetInnerHTML(n,""),n.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?dangerouslySetInnerHTML(n,t.content):n.textContent=t.content)}function getChildren(n){var t=n.firstElementChild,i=arrayFrom(t.children);return{box:t,content:i.find(function(a){return a.classList.contains(CONTENT_CLASS)}),arrow:i.find(function(a){return a.classList.contains(ARROW_CLASS)||a.classList.contains(SVG_ARROW_CLASS)}),backdrop:i.find(function(a){return a.classList.contains(BACKDROP_CLASS)})}}function render(n){var t=div(),i=div();i.className=BOX_CLASS,i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var a=div();a.className=CONTENT_CLASS,a.setAttribute("data-state","hidden"),setContent(a,n.props),t.appendChild(i),i.appendChild(a),o(n.props,n.props);function o(u,l){var m=getChildren(t),c=m.box,f=m.content,g=m.arrow;l.theme?c.setAttribute("data-theme",l.theme):c.removeAttribute("data-theme"),typeof l.animation=="string"?c.setAttribute("data-animation",l.animation):c.removeAttribute("data-animation"),l.inertia?c.setAttribute("data-inertia",""):c.removeAttribute("data-inertia"),c.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?c.setAttribute("role",l.role):c.removeAttribute("role"),(u.content!==l.content||u.allowHTML!==l.allowHTML)&&setContent(f,n.props),l.arrow?g?u.arrow!==l.arrow&&(c.removeChild(g),c.appendChild(createArrowElement(l.arrow))):c.appendChild(createArrowElement(l.arrow)):g&&c.removeChild(g)}return{popper:t,onUpdate:o}}render.$$tippy=!0;var idCounter=1,mouseMoveListeners=[],mountedInstances=[];function createTippy(n,t){var i=evaluateProps(n,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(t)))),a,o,u,l=!1,m=!1,c=!1,f=!1,g,b,v,_=[],x=debounce(oe,i.interactiveDebounce),C,I=idCounter++,U=null,M=unique(i.plugins),V={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},T={id:I,reference:n,popper:div(),popperInstance:U,props:i,state:V,plugins:M,clearDelayTimeouts:ue,setProps:J,setContent:Q,show:ce,hide:pe,hideWithInteractivity:he,enable:Se,disable:Te,unmount:le,destroy:Pe};if(!i.render)return T;var $=i.render(T),B=$.popper,G=$.onUpdate;B.setAttribute("data-tippy-root",""),B.id="tippy-"+T.id,T.popper=B,n._tippy=T,B._tippy=T;var H=M.map(function(ae){return ae.fn(T)}),X=n.hasAttribute("aria-expanded");return P(),q(),te(),W("onCreate",[T]),i.showOnCreate&&be(),B.addEventListener("mouseenter",function(){T.props.interactive&&T.state.isVisible&&T.clearDelayTimeouts()}),B.addEventListener("mouseleave",function(){T.props.interactive&&T.props.trigger.indexOf("mouseenter")>=0&&S().addEventListener("mousemove",x)}),T;function h(){var ae=T.props.touch;return Array.isArray(ae)?ae:[ae,0]}function s(){return h()[0]==="hold"}function y(){var ae;return!!((ae=T.props.render)!=null&&ae.$$tippy)}function k(){return C||n}function S(){var ae=k().parentNode;return ae?getOwnerDocument(ae):document}function E(){return getChildren(B)}function z(ae){return T.state.isMounted&&!T.state.isVisible||currentInput.isTouch||g&&g.type==="focus"?0:getValueAtIndexOrReturn(T.props.delay,ae?0:1,defaultProps.delay)}function te(ae){ae===void 0&&(ae=!1),B.style.pointerEvents=T.props.interactive&&!ae?"":"none",B.style.zIndex=""+T.props.zIndex}function W(ae,ve,Ce){if(Ce===void 0&&(Ce=!0),H.forEach(function(Re){Re[ae]&&Re[ae].apply(Re,ve)}),Ce){var Le;(Le=T.props)[ae].apply(Le,ve)}}function Y(){var ae=T.props.aria;if(!!ae.content){var ve="aria-"+ae.content,Ce=B.id,Le=normalizeToArray(T.props.triggerTarget||n);Le.forEach(function(Re){var Me=Re.getAttribute(ve);if(T.state.isVisible)Re.setAttribute(ve,Me?Me+" "+Ce:Ce);else{var Ne=Me&&Me.replace(Ce,"").trim();Ne?Re.setAttribute(ve,Ne):Re.removeAttribute(ve)}})}}function q(){if(!(X||!T.props.aria.expanded)){var ae=normalizeToArray(T.props.triggerTarget||n);ae.forEach(function(ve){T.props.interactive?ve.setAttribute("aria-expanded",T.state.isVisible&&ve===k()?"true":"false"):ve.removeAttribute("aria-expanded")})}}function ee(){S().removeEventListener("mousemove",x),mouseMoveListeners=mouseMoveListeners.filter(function(ae){return ae!==x})}function re(ae){if(!(currentInput.isTouch&&(c||ae.type==="mousedown"))){var ve=ae.composedPath&&ae.composedPath()[0]||ae.target;if(!(T.props.interactive&&actualContains(B,ve))){if(normalizeToArray(T.props.triggerTarget||n).some(function(Ce){return actualContains(Ce,ve)})){if(currentInput.isTouch||T.state.isVisible&&T.props.trigger.indexOf("click")>=0)return}else W("onClickOutside",[T,ae]);T.props.hideOnClick===!0&&(T.clearDelayTimeouts(),T.hide(),m=!0,setTimeout(function(){m=!1}),T.state.isMounted||A())}}}function F(){c=!0}function N(){c=!1}function Z(){var ae=S();ae.addEventListener("mousedown",re,!0),ae.addEventListener("touchend",re,TOUCH_OPTIONS),ae.addEventListener("touchstart",N,TOUCH_OPTIONS),ae.addEventListener("touchmove",F,TOUCH_OPTIONS)}function A(){var ae=S();ae.removeEventListener("mousedown",re,!0),ae.removeEventListener("touchend",re,TOUCH_OPTIONS),ae.removeEventListener("touchstart",N,TOUCH_OPTIONS),ae.removeEventListener("touchmove",F,TOUCH_OPTIONS)}function O(ae,ve){ne(ae,function(){!T.state.isVisible&&B.parentNode&&B.parentNode.contains(B)&&ve()})}function D(ae,ve){ne(ae,ve)}function ne(ae,ve){var Ce=E().box;function Le(Re){Re.target===Ce&&(updateTransitionEndListener(Ce,"remove",Le),ve())}if(ae===0)return ve();updateTransitionEndListener(Ce,"remove",b),updateTransitionEndListener(Ce,"add",Le),b=Le}function K(ae,ve,Ce){Ce===void 0&&(Ce=!1);var Le=normalizeToArray(T.props.triggerTarget||n);Le.forEach(function(Re){Re.addEventListener(ae,ve,Ce),_.push({node:Re,eventType:ae,handler:ve,options:Ce})})}function P(){s()&&(K("touchstart",L,{passive:!0}),K("touchend",ie,{passive:!0})),splitBySpaces(T.props.trigger).forEach(function(ae){if(ae!=="manual")switch(K(ae,L),ae){case"mouseenter":K("mouseleave",ie);break;case"focus":K(isIE11?"focusout":"blur",se);break;case"focusin":K("focusout",se);break}})}function j(){_.forEach(function(ae){var ve=ae.node,Ce=ae.eventType,Le=ae.handler,Re=ae.options;ve.removeEventListener(Ce,Le,Re)}),_=[]}function L(ae){var ve,Ce=!1;if(!(!T.state.isEnabled||ye(ae)||m)){var Le=((ve=g)==null?void 0:ve.type)==="focus";g=ae,C=ae.currentTarget,q(),!T.state.isVisible&&isMouseEvent(ae)&&mouseMoveListeners.forEach(function(Re){return Re(ae)}),ae.type==="click"&&(T.props.trigger.indexOf("mouseenter")<0||l)&&T.props.hideOnClick!==!1&&T.state.isVisible?Ce=!0:be(ae),ae.type==="click"&&(l=!Ce),Ce&&!Le&&xe(ae)}}function oe(ae){var ve=ae.target,Ce=k().contains(ve)||B.contains(ve);if(!(ae.type==="mousemove"&&Ce)){var Le=Ee().concat(B).map(function(Re){var Me,Ne=Re._tippy,$e=(Me=Ne.popperInstance)==null?void 0:Me.state;return $e?{popperRect:Re.getBoundingClientRect(),popperState:$e,props:i}:null}).filter(Boolean);isCursorOutsideInteractiveBorder(Le,ae)&&(ee(),xe(ae))}}function ie(ae){var ve=ye(ae)||T.props.trigger.indexOf("click")>=0&&l;if(!ve){if(T.props.interactive){T.hideWithInteractivity(ae);return}xe(ae)}}function se(ae){T.props.trigger.indexOf("focusin")<0&&ae.target!==k()||T.props.interactive&&ae.relatedTarget&&B.contains(ae.relatedTarget)||xe(ae)}function ye(ae){return currentInput.isTouch?s()!==ae.type.indexOf("touch")>=0:!1}function fe(){_e();var ae=T.props,ve=ae.popperOptions,Ce=ae.placement,Le=ae.offset,Re=ae.getReferenceClientRect,Me=ae.moveTransition,Ne=y()?getChildren(B).arrow:null,$e=Re?{getBoundingClientRect:Re,contextElement:Re.contextElement||k()}:n,Xe={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ge){var de=ge.state;if(y()){var Oe=E(),Ae=Oe.box;["placement","reference-hidden","escaped"].forEach(function(De){De==="placement"?Ae.setAttribute("data-placement",de.placement):de.attributes.popper["data-popper-"+De]?Ae.setAttribute("data-"+De,""):Ae.removeAttribute("data-"+De)}),de.attributes.popper={}}}},we=[{name:"offset",options:{offset:Le}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Me}},Xe];y()&&Ne&&we.push({name:"arrow",options:{element:Ne,padding:3}}),we.push.apply(we,(ve==null?void 0:ve.modifiers)||[]),T.popperInstance=createPopper($e,B,Object.assign({},ve,{placement:Ce,onFirstUpdate:v,modifiers:we}))}function _e(){T.popperInstance&&(T.popperInstance.destroy(),T.popperInstance=null)}function ke(){var ae=T.props.appendTo,ve,Ce=k();T.props.interactive&&ae===TIPPY_DEFAULT_APPEND_TO||ae==="parent"?ve=Ce.parentNode:ve=invokeWithArgsOrReturn(ae,[Ce]),ve.contains(B)||ve.appendChild(B),T.state.isMounted=!0,fe()}function Ee(){return arrayFrom(B.querySelectorAll("[data-tippy-root]"))}function be(ae){T.clearDelayTimeouts(),ae&&W("onTrigger",[T,ae]),Z();var ve=z(!0),Ce=h(),Le=Ce[0],Re=Ce[1];currentInput.isTouch&&Le==="hold"&&Re&&(ve=Re),ve?a=setTimeout(function(){T.show()},ve):T.show()}function xe(ae){if(T.clearDelayTimeouts(),W("onUntrigger",[T,ae]),!T.state.isVisible){A();return}if(!(T.props.trigger.indexOf("mouseenter")>=0&&T.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(ae.type)>=0&&l)){var ve=z(!1);ve?o=setTimeout(function(){T.state.isVisible&&T.hide()},ve):u=requestAnimationFrame(function(){T.hide()})}}function Se(){T.state.isEnabled=!0}function Te(){T.hide(),T.state.isEnabled=!1}function ue(){clearTimeout(a),clearTimeout(o),cancelAnimationFrame(u)}function J(ae){if(!T.state.isDestroyed){W("onBeforeUpdate",[T,ae]),j();var ve=T.props,Ce=evaluateProps(n,Object.assign({},ve,removeUndefinedProps(ae),{ignoreAttributes:!0}));T.props=Ce,P(),ve.interactiveDebounce!==Ce.interactiveDebounce&&(ee(),x=debounce(oe,Ce.interactiveDebounce)),ve.triggerTarget&&!Ce.triggerTarget?normalizeToArray(ve.triggerTarget).forEach(function(Le){Le.removeAttribute("aria-expanded")}):Ce.triggerTarget&&n.removeAttribute("aria-expanded"),q(),te(),G&&G(ve,Ce),T.popperInstance&&(fe(),Ee().forEach(function(Le){requestAnimationFrame(Le._tippy.popperInstance.forceUpdate)})),W("onAfterUpdate",[T,ae])}}function Q(ae){T.setProps({content:ae})}function ce(){var ae=T.state.isVisible,ve=T.state.isDestroyed,Ce=!T.state.isEnabled,Le=currentInput.isTouch&&!T.props.touch,Re=getValueAtIndexOrReturn(T.props.duration,0,defaultProps.duration);if(!(ae||ve||Ce||Le)&&!k().hasAttribute("disabled")&&(W("onShow",[T],!1),T.props.onShow(T)!==!1)){if(T.state.isVisible=!0,y()&&(B.style.visibility="visible"),te(),Z(),T.state.isMounted||(B.style.transition="none"),y()){var Me=E(),Ne=Me.box,$e=Me.content;setTransitionDuration([Ne,$e],0)}v=function(){var we;if(!(!T.state.isVisible||f)){if(f=!0,B.offsetHeight,B.style.transition=T.props.moveTransition,y()&&T.props.animation){var me=E(),ge=me.box,de=me.content;setTransitionDuration([ge,de],Re),setVisibilityState([ge,de],"visible")}Y(),q(),pushIfUnique(mountedInstances,T),(we=T.popperInstance)==null||we.forceUpdate(),W("onMount",[T]),T.props.animation&&y()&&D(Re,function(){T.state.isShown=!0,W("onShown",[T])})}},ke()}}function pe(){var ae=!T.state.isVisible,ve=T.state.isDestroyed,Ce=!T.state.isEnabled,Le=getValueAtIndexOrReturn(T.props.duration,1,defaultProps.duration);if(!(ae||ve||Ce)&&(W("onHide",[T],!1),T.props.onHide(T)!==!1)){if(T.state.isVisible=!1,T.state.isShown=!1,f=!1,l=!1,y()&&(B.style.visibility="hidden"),ee(),A(),te(!0),y()){var Re=E(),Me=Re.box,Ne=Re.content;T.props.animation&&(setTransitionDuration([Me,Ne],Le),setVisibilityState([Me,Ne],"hidden"))}Y(),q(),T.props.animation?y()&&O(Le,T.unmount):T.unmount()}}function he(ae){S().addEventListener("mousemove",x),pushIfUnique(mouseMoveListeners,x),x(ae)}function le(){T.state.isVisible&&T.hide(),T.state.isMounted&&(_e(),Ee().forEach(function(ae){ae._tippy.unmount()}),B.parentNode&&B.parentNode.removeChild(B),mountedInstances=mountedInstances.filter(function(ae){return ae!==T}),T.state.isMounted=!1,W("onHidden",[T]))}function Pe(){T.state.isDestroyed||(T.clearDelayTimeouts(),T.unmount(),j(),delete n._tippy,T.state.isDestroyed=!0,W("onDestroy",[T]))}}function tippy$1(n,t){t===void 0&&(t={});var i=defaultProps.plugins.concat(t.plugins||[]);bindGlobalEventListeners();var a=Object.assign({},t,{plugins:i}),o=getArrayOfElements(n),u=o.reduce(function(l,m){var c=m&&createTippy(m,a);return c&&l.push(c),l},[]);return isElement(n)?u[0]:u}tippy$1.defaultProps=defaultProps;tippy$1.setDefaultProps=setDefaultProps;tippy$1.currentInput=currentInput;Object.assign({},applyStyles,{effect:function n(t){var i=t.state,a={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(i.elements.popper.style,a.popper),i.styles=a,i.elements.arrow&&Object.assign(i.elements.arrow.style,a.arrow)}});tippy$1.setDefaultProps({render});function _objectWithoutPropertiesLoose$1(n,t){if(n==null)return{};var i={},a=Object.keys(n),o,u;for(u=0;u<a.length;u++)o=a[u],!(t.indexOf(o)>=0)&&(i[o]=n[o]);return i}var isBrowser$1=typeof window!="undefined"&&typeof document!="undefined";function preserveRef(n,t){n&&(typeof n=="function"&&n(t),{}.hasOwnProperty.call(n,"current")&&(n.current=t))}function ssrSafeCreateDiv(){return isBrowser$1&&document.createElement("div")}function toDataAttributes(n){var t={"data-placement":n.placement};return n.referenceHidden&&(t["data-reference-hidden"]=""),n.escaped&&(t["data-escaped"]=""),t}function deepEqual(n,t){if(n===t)return!0;if(typeof n=="object"&&n!=null&&typeof t=="object"&&t!=null){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(var i in n)if(t.hasOwnProperty(i)){if(!deepEqual(n[i],t[i]))return!1}else return!1;return!0}else return!1}function uniqueByShape(n){var t=[];return n.forEach(function(i){t.find(function(a){return deepEqual(i,a)})||t.push(i)}),t}function deepPreserveProps(n,t){var i,a;return Object.assign({},t,{popperOptions:Object.assign({},n.popperOptions,t.popperOptions,{modifiers:uniqueByShape([].concat(((i=n.popperOptions)==null?void 0:i.modifiers)||[],((a=t.popperOptions)==null?void 0:a.modifiers)||[]))})})}var useIsomorphicLayoutEffect=isBrowser$1?react.exports.useLayoutEffect:react.exports.useEffect;function useMutableBox(n){var t=react.exports.useRef();return t.current||(t.current=typeof n=="function"?n():n),t.current}function updateClassName(n,t,i){i.split(/\s+/).forEach(function(a){a&&n.classList[t](a)})}var classNamePlugin={name:"className",defaultValue:"",fn:function n(t){var i=t.popper.firstElementChild,a=function(){var m;return!!((m=t.props.render)!=null&&m.$$tippy)};function o(){t.props.className&&!a()||updateClassName(i,"add",t.props.className)}function u(){a()&&updateClassName(i,"remove",t.props.className)}return{onCreate:o,onBeforeUpdate:u,onAfterUpdate:o}}};function TippyGenerator(n){function t(i){var a=i.children,o=i.content,u=i.visible,l=i.singleton,m=i.render,c=i.reference,f=i.disabled,g=f===void 0?!1:f,b=i.ignoreAttributes,v=b===void 0?!0:b;i.__source,i.__self;var _=_objectWithoutPropertiesLoose$1(i,["children","content","visible","singleton","render","reference","disabled","ignoreAttributes","__source","__self"]),x=u!==void 0,C=l!==void 0,I=react.exports.useState(!1),U=I[0],M=I[1],V=react.exports.useState({}),T=V[0],$=V[1],B=react.exports.useState(),G=B[0],H=B[1],X=useMutableBox(function(){return{container:ssrSafeCreateDiv(),renders:1}}),h=Object.assign({ignoreAttributes:v},_,{content:X.container});x&&(h.trigger="manual",h.hideOnClick=!1),C&&(g=!0);var s=h,y=h.plugins||[];m&&(s=Object.assign({},h,{plugins:C&&l.data!=null?[].concat(y,[{fn:function(){return{onTrigger:function(z,te){var W=l.data.children.find(function(Y){var q=Y.instance;return q.reference===te.currentTarget});z.state.$$activeSingletonInstance=W.instance,H(W.content)}}}}]):y,render:function(){return{popper:X.container}}}));var k=[c].concat(a?[a.type]:[]);return useIsomorphicLayoutEffect(function(){var S=c;c&&c.hasOwnProperty("current")&&(S=c.current);var E=n(S||X.ref||ssrSafeCreateDiv(),Object.assign({},s,{plugins:[classNamePlugin].concat(h.plugins||[])}));return X.instance=E,g&&E.disable(),u&&E.show(),C&&l.hook({instance:E,content:o,props:s,setSingletonContent:H}),M(!0),function(){E.destroy(),l==null||l.cleanup(E)}},k),useIsomorphicLayoutEffect(function(){var S;if(X.renders===1){X.renders++;return}var E=X.instance;E.setProps(deepPreserveProps(E.props,s)),(S=E.popperInstance)==null||S.forceUpdate(),g?E.disable():E.enable(),x&&(u?E.show():E.hide()),C&&l.hook({instance:E,content:o,props:s,setSingletonContent:H})}),useIsomorphicLayoutEffect(function(){var S;if(!!m){var E=X.instance;E.setProps({popperOptions:Object.assign({},E.props.popperOptions,{modifiers:[].concat((((S=E.props.popperOptions)==null?void 0:S.modifiers)||[]).filter(function(z){var te=z.name;return te!=="$$tippyReact"}),[{name:"$$tippyReact",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(te){var W,Y=te.state,q=(W=Y.modifiersData)==null?void 0:W.hide;(T.placement!==Y.placement||T.referenceHidden!==(q==null?void 0:q.isReferenceHidden)||T.escaped!==(q==null?void 0:q.hasPopperEscaped))&&$({placement:Y.placement,referenceHidden:q==null?void 0:q.isReferenceHidden,escaped:q==null?void 0:q.hasPopperEscaped}),Y.attributes.popper={}}}])})})}},[T.placement,T.referenceHidden,T.escaped].concat(k)),jsxs(Fragment,{children:[a?react.exports.cloneElement(a,{ref:function(E){X.ref=E,preserveRef(a.ref,E)}}):null,U&&reactDom.exports.createPortal(m?m(toDataAttributes(T),G,X.instance):o,X.container)]})}return t}var forwardRef=function(n,t){return react.exports.forwardRef(function(a,o){var u=a.children,l=_objectWithoutPropertiesLoose$1(a,["children"]);return jsx(n,wt(pt({},Object.assign({},t,l)),{children:u?react.exports.cloneElement(u,{ref:function(c){preserveRef(o,c),preserveRef(u.ref,c)}}):null}))})},index$1=forwardRef(TippyGenerator(tippy$1)),Tippy=index$1,tippy="",main={},uaParser_min={exports:{}};(function(n,t){(function(i,a){var o="0.7.31",u="",l="?",m="function",c="undefined",f="object",g="string",b="major",v="model",_="name",x="type",C="vendor",I="version",U="architecture",M="console",V="mobile",T="tablet",$="smarttv",B="wearable",G="embedded",H=255,X="Amazon",h="Apple",s="ASUS",y="BlackBerry",k="Browser",S="Chrome",E="Edge",z="Firefox",te="Google",W="Huawei",Y="LG",q="Microsoft",ee="Motorola",re="Opera",F="Samsung",N="Sony",Z="Xiaomi",A="Zebra",O="Facebook",D=function(be,xe){var Se={};for(var Te in be)xe[Te]&&xe[Te].length%2===0?Se[Te]=xe[Te].concat(be[Te]):Se[Te]=be[Te];return Se},ne=function(be){for(var xe={},Se=0;Se<be.length;Se++)xe[be[Se].toUpperCase()]=be[Se];return xe},K=function(be,xe){return typeof be===g?P(xe).indexOf(P(be))!==-1:!1},P=function(be){return be.toLowerCase()},j=function(be){return typeof be===g?be.replace(/[^\d\.]/g,u).split(".")[0]:a},L=function(be,xe){if(typeof be===g)return be=be.replace(/^\s\s*/,u).replace(/\s\s*$/,u),typeof xe===c?be:be.substring(0,H)},oe=function(be,xe){for(var Se=0,Te,ue,J,Q,ce,pe;Se<xe.length&&!ce;){var he=xe[Se],le=xe[Se+1];for(Te=ue=0;Te<he.length&&!ce;)if(ce=he[Te++].exec(be),ce)for(J=0;J<le.length;J++)pe=ce[++ue],Q=le[J],typeof Q===f&&Q.length>0?Q.length===2?typeof Q[1]==m?this[Q[0]]=Q[1].call(this,pe):this[Q[0]]=Q[1]:Q.length===3?typeof Q[1]===m&&!(Q[1].exec&&Q[1].test)?this[Q[0]]=pe?Q[1].call(this,pe,Q[2]):a:this[Q[0]]=pe?pe.replace(Q[1],Q[2]):a:Q.length===4&&(this[Q[0]]=pe?Q[3].call(this,pe.replace(Q[1],Q[2])):a):this[Q]=pe||a;Se+=2}},ie=function(be,xe){for(var Se in xe)if(typeof xe[Se]===f&&xe[Se].length>0){for(var Te=0;Te<xe[Se].length;Te++)if(K(xe[Se][Te],be))return Se===l?a:Se}else if(K(xe[Se],be))return Se===l?a:Se;return be},se={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ye={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},fe={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[I,[_,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[I,[_,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[_,I],[/opios[\/ ]+([\w\.]+)/i],[I,[_,re+" Mini"]],[/\bopr\/([\w\.]+)/i],[I,[_,re]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[_,I],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[I,[_,"UC"+k]],[/\bqbcore\/([\w\.]+)/i],[I,[_,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[I,[_,"WeChat"]],[/konqueror\/([\w\.]+)/i],[I,[_,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[I,[_,"IE"]],[/yabrowser\/([\w\.]+)/i],[I,[_,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[_,/(.+)/,"$1 Secure "+k],I],[/\bfocus\/([\w\.]+)/i],[I,[_,z+" Focus"]],[/\bopt\/([\w\.]+)/i],[I,[_,re+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[I,[_,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[I,[_,"Dolphin"]],[/coast\/([\w\.]+)/i],[I,[_,re+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[I,[_,"MIUI "+k]],[/fxios\/([-\w\.]+)/i],[I,[_,z]],[/\bqihu|(qi?ho?o?|360)browser/i],[[_,"360 "+k]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[_,/(.+)/,"$1 "+k],I],[/(comodo_dragon)\/([\w\.]+)/i],[[_,/_/g," "],I],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[_,I],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[_],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[_,O],I],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[_,I],[/\bgsa\/([\w\.]+) .*safari\//i],[I,[_,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[I,[_,S+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[_,S+" WebView"],I],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[I,[_,"Android "+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[_,I],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[I,[_,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[I,_],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[_,[I,ie,se]],[/(webkit|khtml)\/([\w\.]+)/i],[_,I],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[_,"Netscape"],I],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[I,[_,z+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[_,I]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[U,"amd64"]],[/(ia32(?=;))/i],[[U,P]],[/((?:i[346]|x)86)[;\)]/i],[[U,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[U,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[U,"armhf"]],[/windows (ce|mobile); ppc;/i],[[U,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[U,/ower/,u,P]],[/(sun4\w)[;\)]/i],[[U,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[U,P]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[C,F],[x,T]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[v,[C,F],[x,V]],[/\((ip(?:hone|od)[\w ]*);/i],[v,[C,h],[x,V]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[C,h],[x,T]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[v,[C,W],[x,T]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[v,[C,W],[x,V]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[v,/_/g," "],[C,Z],[x,V]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[v,/_/g," "],[C,Z],[x,T]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[C,"OPPO"],[x,V]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[C,"Vivo"],[x,V]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[v,[C,"Realme"],[x,V]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[C,ee],[x,V]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[C,ee],[x,T]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[C,Y],[x,T]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[C,Y],[x,V]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[v,[C,"Lenovo"],[x,T]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[v,/_/g," "],[C,"Nokia"],[x,V]],[/(pixel c)\b/i],[v,[C,te],[x,T]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[C,te],[x,V]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[C,N],[x,V]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[C,N],[x,T]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[C,"OnePlus"],[x,V]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[C,X],[x,T]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[C,X],[x,V]],[/(playbook);[-\w\),; ]+(rim)/i],[v,C,[x,T]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[C,y],[x,V]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[C,s],[x,T]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[C,s],[x,V]],[/(nexus 9)/i],[v,[C,"HTC"],[x,T]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[C,[v,/_/g," "],[x,V]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[C,"Acer"],[x,T]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[C,"Meizu"],[x,V]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[C,"Sharp"],[x,V]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[C,v,[x,V]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[C,v,[x,T]],[/(surface duo)/i],[v,[C,q],[x,T]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[C,"Fairphone"],[x,V]],[/(u304aa)/i],[v,[C,"AT&T"],[x,V]],[/\bsie-(\w*)/i],[v,[C,"Siemens"],[x,V]],[/\b(rct\w+) b/i],[v,[C,"RCA"],[x,T]],[/\b(venue[\d ]{2,7}) b/i],[v,[C,"Dell"],[x,T]],[/\b(q(?:mv|ta)\w+) b/i],[v,[C,"Verizon"],[x,T]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[v,[C,"Barnes & Noble"],[x,T]],[/\b(tm\d{3}\w+) b/i],[v,[C,"NuVision"],[x,T]],[/\b(k88) b/i],[v,[C,"ZTE"],[x,T]],[/\b(nx\d{3}j) b/i],[v,[C,"ZTE"],[x,V]],[/\b(gen\d{3}) b.+49h/i],[v,[C,"Swiss"],[x,V]],[/\b(zur\d{3}) b/i],[v,[C,"Swiss"],[x,T]],[/\b((zeki)?tb.*\b) b/i],[v,[C,"Zeki"],[x,T]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[C,"Dragon Touch"],v,[x,T]],[/\b(ns-?\w{0,9}) b/i],[v,[C,"Insignia"],[x,T]],[/\b((nxa|next)-?\w{0,9}) b/i],[v,[C,"NextBook"],[x,T]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[C,"Voice"],v,[x,V]],[/\b(lvtel\-)?(v1[12]) b/i],[[C,"LvTel"],v,[x,V]],[/\b(ph-1) /i],[v,[C,"Essential"],[x,V]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[v,[C,"Envizen"],[x,T]],[/\b(trio[-\w\. ]+) b/i],[v,[C,"MachSpeed"],[x,T]],[/\btu_(1491) b/i],[v,[C,"Rotor"],[x,T]],[/(shield[\w ]+) b/i],[v,[C,"Nvidia"],[x,T]],[/(sprint) (\w+)/i],[C,v,[x,V]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[C,q],[x,V]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[C,A],[x,T]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[C,A],[x,V]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[C,v,[x,M]],[/droid.+; (shield) bui/i],[v,[C,"Nvidia"],[x,M]],[/(playstation [345portablevi]+)/i],[v,[C,N],[x,M]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[C,q],[x,M]],[/smart-tv.+(samsung)/i],[C,[x,$]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[C,F],[x,$]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[C,Y],[x,$]],[/(apple) ?tv/i],[C,[v,h+" TV"],[x,$]],[/crkey/i],[[v,S+"cast"],[C,te],[x,$]],[/droid.+aft(\w)( bui|\))/i],[v,[C,X],[x,$]],[/\(dtv[\);].+(aquos)/i],[v,[C,"Sharp"],[x,$]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[C,L],[v,L],[x,$]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[x,$]],[/((pebble))app/i],[C,v,[x,B]],[/droid.+; (glass) \d/i],[v,[C,te],[x,B]],[/droid.+; (wt63?0{2,3})\)/i],[v,[C,A],[x,B]],[/(quest( 2)?)/i],[v,[C,O],[x,B]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[C,[x,G]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[v,[x,V]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[v,[x,T]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[x,T]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[x,V]],[/(android[-\w\. ]{0,9});.+buil/i],[v,[C,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[I,[_,E+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[I,[_,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[_,I],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[I,_]],os:[[/microsoft (windows) (vista|xp)/i],[_,I],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[_,[I,ie,ye]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[_,"Windows"],[I,ie,ye]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[I,/_/g,"."],[_,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[_,"Mac OS"],[I,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[I,_],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[_,I],[/\(bb(10);/i],[I,[_,y]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[I,[_,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[I,[_,z+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[I,[_,"webOS"]],[/crkey\/([\d\.]+)/i],[I,[_,S+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[_,"Chromium OS"],I],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[_,I],[/(sunos) ?([\w\.\d]*)/i],[[_,"Solaris"],I],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[_,I]]},_e=function(be,xe){if(typeof be===f&&(xe=be,be=a),!(this instanceof _e))return new _e(be,xe).getResult();var Se=be||(typeof i!==c&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:u),Te=xe?D(fe,xe):fe;return this.getBrowser=function(){var ue={};return ue[_]=a,ue[I]=a,oe.call(ue,Se,Te.browser),ue.major=j(ue.version),ue},this.getCPU=function(){var ue={};return ue[U]=a,oe.call(ue,Se,Te.cpu),ue},this.getDevice=function(){var ue={};return ue[C]=a,ue[v]=a,ue[x]=a,oe.call(ue,Se,Te.device),ue},this.getEngine=function(){var ue={};return ue[_]=a,ue[I]=a,oe.call(ue,Se,Te.engine),ue},this.getOS=function(){var ue={};return ue[_]=a,ue[I]=a,oe.call(ue,Se,Te.os),ue},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Se},this.setUA=function(ue){return Se=typeof ue===g&&ue.length>H?L(ue,H):ue,this},this.setUA(Se),this};_e.VERSION=o,_e.BROWSER=ne([_,I,b]),_e.CPU=ne([U]),_e.DEVICE=ne([v,C,x,M,V,$,T,B,G]),_e.ENGINE=_e.OS=ne([_,I]),n.exports&&(t=n.exports=_e),t.UAParser=_e;var ke=typeof i!==c&&(i.jQuery||i.Zepto);if(ke&&!ke.ua){var Ee=new _e;ke.ua=Ee.getResult(),ke.ua.get=function(){return Ee.getUA()},ke.ua.set=function(be){Ee.setUA(be);var xe=Ee.getResult();for(var Se in xe)ke.ua[Se]=xe[Se]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser_min,uaParser_min.exports);Object.defineProperty(main,"__esModule",{value:!0});function _interopDefault(n){return n&&typeof n=="object"&&"default"in n?n.default:n}var React=react.exports,React__default=_interopDefault(React),UAParser=uaParser_min.exports,UA=new UAParser,browser=UA.getBrowser();UA.getCPU();var device=UA.getDevice(),engine=UA.getEngine(),os=UA.getOS(),ua=UA.getUA(),setDefaults=function n(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return t||i},getNavigatorInstance=function n(){return typeof window!="undefined"&&(window.navigator||navigator)?window.navigator||navigator:!1},isIOS13Check=function n(t){var i=getNavigatorInstance();return i&&i.platform&&(i.platform.indexOf(t)!==-1||i.platform==="MacIntel"&&i.maxTouchPoints>1&&!window.MSStream)};function _typeof(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(t){return typeof t}:_typeof=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(n)}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}function _createClass(n,t,i){return t&&_defineProperties(n.prototype,t),i&&_defineProperties(n,i),n}function _defineProperty(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function _extends(){return _extends=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},_extends.apply(this,arguments)}function ownKeys(n,t){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,a)}return i}function _objectSpread2(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(i,!0).forEach(function(a){_defineProperty(n,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ownKeys(i).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(i,a))})}return n}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&_setPrototypeOf(n,t)}function _getPrototypeOf(n){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},_getPrototypeOf(n)}function _setPrototypeOf(n,t){return _setPrototypeOf=Object.setPrototypeOf||function(a,o){return a.__proto__=o,a},_setPrototypeOf(n,t)}function _objectWithoutPropertiesLoose(n,t){if(n==null)return{};var i={},a=Object.keys(n),o,u;for(u=0;u<a.length;u++)o=a[u],!(t.indexOf(o)>=0)&&(i[o]=n[o]);return i}function _objectWithoutProperties(n,t){if(n==null)return{};var i=_objectWithoutPropertiesLoose(n,t),a,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);for(o=0;o<u.length;o++)a=u[o],!(t.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,a)||(i[a]=n[a]))}return i}function _assertThisInitialized(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _possibleConstructorReturn(n,t){return t&&(typeof t=="object"||typeof t=="function")?t:_assertThisInitialized(n)}var DeviceTypes={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Browser:void 0},BrowserTypes={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},OsTypes={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},initialData={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},checkType=function n(t){switch(t){case DeviceTypes.Mobile:return{isMobile:!0};case DeviceTypes.Tablet:return{isTablet:!0};case DeviceTypes.SmartTv:return{isSmartTV:!0};case DeviceTypes.Console:return{isConsole:!0};case DeviceTypes.Wearable:return{isWearable:!0};case DeviceTypes.Browser:return{isBrowser:!0};default:return initialData}},broPayload=function n(t,i,a,o,u){return{isBrowser:t,browserMajorVersion:setDefaults(i.major),browserFullVersion:setDefaults(i.version),browserName:setDefaults(i.name),engineName:setDefaults(a.name),engineVersion:setDefaults(a.version),osName:setDefaults(o.name),osVersion:setDefaults(o.version),userAgent:setDefaults(u)}},mobilePayload=function n(t,i,a,o){return _objectSpread2({},t,{vendor:setDefaults(i.vendor),model:setDefaults(i.model),os:setDefaults(a.name),osVersion:setDefaults(a.version),ua:setDefaults(o)})},stvPayload=function n(t,i,a,o){return{isSmartTV:t,engineName:setDefaults(i.name),engineVersion:setDefaults(i.version),osName:setDefaults(a.name),osVersion:setDefaults(a.version),userAgent:setDefaults(o)}},consolePayload=function n(t,i,a,o){return{isConsole:t,engineName:setDefaults(i.name),engineVersion:setDefaults(i.version),osName:setDefaults(a.name),osVersion:setDefaults(a.version),userAgent:setDefaults(o)}},wearPayload=function n(t,i,a,o){return{isWearable:t,engineName:setDefaults(i.name),engineVersion:setDefaults(i.version),osName:setDefaults(a.name),osVersion:setDefaults(a.version),userAgent:setDefaults(o)}},type=checkType(device.type);function deviceDetect(){var n=type.isBrowser,t=type.isMobile,i=type.isTablet,a=type.isSmartTV,o=type.isConsole,u=type.isWearable;if(n)return broPayload(n,browser,engine,os,ua);if(a)return stvPayload(a,engine,os,ua);if(o)return consolePayload(o,engine,os,ua);if(t||i)return mobilePayload(type,device,os,ua);if(u)return wearPayload(u,engine,os,ua)}var isMobileType=function n(){return device.type===DeviceTypes.Mobile},isTabletType=function n(){return device.type===DeviceTypes.Tablet},isMobileAndTabletType=function n(){switch(device.type){case DeviceTypes.Mobile:case DeviceTypes.Tablet:return!0;default:return!1}},isEdgeChromiumType=function n(){return typeof ua=="string"&&ua.indexOf("Edg/")!==-1},isSmartTVType=function n(){return device.type===DeviceTypes.SmartTv},isBrowserType=function n(){return device.type===DeviceTypes.Browser},isWearableType=function n(){return device.type===DeviceTypes.Wearable},isConsoleType=function n(){return device.type===DeviceTypes.Console},isAndroidType=function n(){return os.name===OsTypes.Android},isWindowsType=function n(){return os.name===OsTypes.Windows},isMacOsType=function n(){return os.name===OsTypes.MAC_OS},isWinPhoneType=function n(){return os.name===OsTypes.WindowsPhone},isIOSType=function n(){return os.name===OsTypes.IOS},isChromeType=function n(){return browser.name===BrowserTypes.Chrome},isFirefoxType=function n(){return browser.name===BrowserTypes.Firefox},isChromiumType=function n(){return browser.name===BrowserTypes.Chromium},isEdgeType=function n(){return browser.name===BrowserTypes.Edge},isYandexType=function n(){return browser.name===BrowserTypes.Yandex},isSafariType=function n(){return browser.name===BrowserTypes.Safari||browser.name===BrowserTypes.MobileSafari},isMobileSafariType=function n(){return browser.name===BrowserTypes.MobileSafari},isOperaType=function n(){return browser.name===BrowserTypes.Opera},isIEType=function n(){return browser.name===BrowserTypes.InternetExplorer||browser.name===BrowserTypes.Ie},isMIUIType=function n(){return browser.name===BrowserTypes.MIUI},isSamsungBrowserType=function n(){return browser.name===BrowserTypes.SamsungBrowser},isElectronType=function n(){var t=getNavigatorInstance(),i=t&&t.userAgent&&t.userAgent.toLowerCase();return typeof i=="string"?/electron/.test(i):!1},getIOS13=function n(){var t=getNavigatorInstance();return t&&(/iPad|iPhone|iPod/.test(t.platform)||t.platform==="MacIntel"&&t.maxTouchPoints>1)&&!window.MSStream},getIPad13=function n(){return isIOS13Check("iPad")},getIphone13=function n(){return isIOS13Check("iPhone")},getIPod13=function n(){return isIOS13Check("iPod")},getBrowserFullVersion=function n(){return setDefaults(browser.version)},getBrowserVersion=function n(){return setDefaults(browser.major)},getOsVersion=function n(){return setDefaults(os.version)},getOsName=function n(){return setDefaults(os.name)},getBrowserName=function n(){return setDefaults(browser.name)},getMobileVendor=function n(){return setDefaults(device.vendor)},getMobileModel=function n(){return setDefaults(device.model)},getEngineName=function n(){return setDefaults(engine.name)},getEngineVersion=function n(){return setDefaults(engine.version)},getUseragent=function n(){return setDefaults(ua)},getDeviceType=function n(){return setDefaults(device.type,"browser")},isSmartTV=isSmartTVType(),isConsole=isConsoleType(),isWearable=isWearableType(),isMobileSafari=isMobileSafariType()||getIPad13(),isChromium=isChromiumType(),isMobile=isMobileAndTabletType()||getIPad13(),isMobileOnly=isMobileType(),isTablet=isTabletType()||getIPad13(),isBrowser=isBrowserType(),isDesktop=isBrowserType(),isAndroid=isAndroidType(),isWinPhone=isWinPhoneType(),isIOS=isIOSType()||getIPad13(),isChrome=isChromeType(),isFirefox=isFirefoxType(),isSafari=isSafariType(),isOpera=isOperaType(),isIE=isIEType(),osVersion=getOsVersion(),osName=getOsName(),fullBrowserVersion=getBrowserFullVersion(),browserVersion=getBrowserVersion(),browserName=getBrowserName(),mobileVendor=getMobileVendor(),mobileModel=getMobileModel(),engineName=getEngineName(),engineVersion=getEngineVersion(),getUA=getUseragent(),isEdge=isEdgeType()||isEdgeChromiumType(),isYandex=isYandexType(),deviceType=getDeviceType(),isIOS13=getIOS13(),isIPad13=getIPad13(),isIPhone13=getIphone13(),isIPod13=getIPod13(),isElectron=isElectronType(),isEdgeChromium=isEdgeChromiumType(),isLegacyEdge=isEdgeType()&&!isEdgeChromiumType(),isWindows=isWindowsType(),isMacOs=isMacOsType(),isMIUI=isMIUIType(),isSamsungBrowser=isSamsungBrowserType(),AndroidView=function n(t){var i=t.renderWithFragment,a=t.children,o=t.viewClassName,u=t.style,l=_objectWithoutProperties(t,["renderWithFragment","children","viewClassName","style"]);return isAndroid?i?React__default.createElement(React.Fragment,null,a):React__default.createElement("div",_extends({className:o,style:u},l),a):null},BrowserView=function n(t){var i=t.renderWithFragment,a=t.children,o=t.viewClassName,u=t.style,l=_objectWithoutProperties(t,["renderWithFragment","children","viewClassName","style"]);return isBrowser?i?React__default.createElement(React.Fragment,null,a):React__default.createElement("div",_extends({className:o,style:u},l),a):null},IEView=function n(t){var i=t.renderWithFragment,a=t.children,o=t.viewClassName,u=t.style,l=_objectWithoutProperties(t,["renderWithFragment","children","viewClassName","style"]);return isIE?i?React__default.createElement(React.Fragment,null,a):React__default.createElement("div",_extends({className:o,style:u},l),a):null},IOSView=function n(t){var i=t.renderWithFragment,a=t.children,o=t.viewClassName,u=t.style,l=_objectWithoutProperties(t,["renderWithFragment","children","viewClassName","style"]);return isIOS?i?React__default.createElement(React.Fragment,null,a):React__default.createElement("div",_extends({className:o,style:u},l),a):null},MobileView=function n(t){var i=t.renderWithFragment,a=t.children,o=t.viewClassName,u=t.style,l=_objectWithoutProperties(t,["renderWithFragment","children","viewClassName","style"]);return isMobile?i?React__default.createElement(React.Fragment,null,a):React__default.createElement("div",_extends({className:o,style:u},l),a):null},TabletView=function n(t){var i=t.renderWithFragment,a=t.children,o=t.viewClassName,u=t.style,l=_objectWithoutProperties(t,["renderWithFragment","children","viewClassName","style"]);return isTablet?i?React__default.createElement(React.Fragment,null,a):React__default.createElement("div",_extends({className:o,style:u},l),a):null},WinPhoneView=function n(t){var i=t.renderWithFragment,a=t.children,o=t.viewClassName,u=t.style,l=_objectWithoutProperties(t,["renderWithFragment","children","viewClassName","style"]);return isWinPhone?i?React__default.createElement(React.Fragment,null,a):React__default.createElement("div",_extends({className:o,style:u},l),a):null},MobileOnlyView=function n(t){var i=t.renderWithFragment,a=t.children,o=t.viewClassName,u=t.style,l=_objectWithoutProperties(t,["renderWithFragment","children","viewClassName","style"]);return isMobileOnly?i?React__default.createElement(React.Fragment,null,a):React__default.createElement("div",_extends({className:o,style:u},l),a):null},SmartTVView=function n(t){var i=t.renderWithFragment,a=t.children,o=t.viewClassName,u=t.style,l=_objectWithoutProperties(t,["renderWithFragment","children","viewClassName","style"]);return isSmartTV?i?React__default.createElement(React.Fragment,null,a):React__default.createElement("div",_extends({className:o,style:u},l),a):null},ConsoleView=function n(t){var i=t.renderWithFragment,a=t.children,o=t.viewClassName,u=t.style,l=_objectWithoutProperties(t,["renderWithFragment","children","viewClassName","style"]);return isConsole?i?React__default.createElement(React.Fragment,null,a):React__default.createElement("div",_extends({className:o,style:u},l),a):null},WearableView=function n(t){var i=t.renderWithFragment,a=t.children,o=t.viewClassName,u=t.style,l=_objectWithoutProperties(t,["renderWithFragment","children","viewClassName","style"]);return isWearable?i?React__default.createElement(React.Fragment,null,a):React__default.createElement("div",_extends({className:o,style:u},l),a):null},CustomView=function n(t){var i=t.renderWithFragment,a=t.children,o=t.viewClassName,u=t.style,l=t.condition,m=_objectWithoutProperties(t,["renderWithFragment","children","viewClassName","style","condition"]);return l?i?React__default.createElement(React.Fragment,null,a):React__default.createElement("div",_extends({className:o,style:u},m),a):null};function withOrientationChange(n){return function(t){_inherits(i,t);function i(a){var o;return _classCallCheck(this,i),o=_possibleConstructorReturn(this,_getPrototypeOf(i).call(this,a)),o.isEventListenerAdded=!1,o.handleOrientationChange=o.handleOrientationChange.bind(_assertThisInitialized(o)),o.onOrientationChange=o.onOrientationChange.bind(_assertThisInitialized(o)),o.onPageLoad=o.onPageLoad.bind(_assertThisInitialized(o)),o.state={isLandscape:!1,isPortrait:!1},o}return _createClass(i,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var o=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:o===0,isLandscape:o===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window=="undefined"?"undefined":_typeof(window))!==void 0&&isMobile&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return React__default.createElement(n,_extends({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),i}(React__default.Component)}main.AndroidView=AndroidView;main.BrowserTypes=BrowserTypes;main.BrowserView=BrowserView;main.ConsoleView=ConsoleView;main.CustomView=CustomView;main.IEView=IEView;main.IOSView=IOSView;main.MobileOnlyView=MobileOnlyView;main.MobileView=MobileView;main.OsTypes=OsTypes;main.SmartTVView=SmartTVView;main.TabletView=TabletView;main.WearableView=WearableView;main.WinPhoneView=WinPhoneView;main.browserName=browserName;main.browserVersion=browserVersion;main.deviceDetect=deviceDetect;main.deviceType=deviceType;main.engineName=engineName;main.engineVersion=engineVersion;main.fullBrowserVersion=fullBrowserVersion;main.getUA=getUA;main.isAndroid=isAndroid;main.isBrowser=isBrowser;main.isChrome=isChrome;main.isChromium=isChromium;main.isConsole=isConsole;main.isDesktop=isDesktop;main.isEdge=isEdge;main.isEdgeChromium=isEdgeChromium;main.isElectron=isElectron;main.isFirefox=isFirefox;main.isIE=isIE;main.isIOS=isIOS;main.isIOS13=isIOS13;main.isIPad13=isIPad13;main.isIPhone13=isIPhone13;main.isIPod13=isIPod13;main.isLegacyEdge=isLegacyEdge;main.isMIUI=isMIUI;main.isMacOs=isMacOs;var isMobile_1=main.isMobile=isMobile;main.isMobileOnly=isMobileOnly;main.isMobileSafari=isMobileSafari;main.isOpera=isOpera;main.isSafari=isSafari;main.isSamsungBrowser=isSamsungBrowser;main.isSmartTV=isSmartTV;main.isTablet=isTablet;main.isWearable=isWearable;main.isWinPhone=isWinPhone;main.isWindows=isWindows;main.isYandex=isYandex;main.mobileModel=mobileModel;main.mobileVendor=mobileVendor;main.osName=osName;main.osVersion=osVersion;main.withOrientationChange=withOrientationChange;var key={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},webkit=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],moz=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],ms=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],document$1=typeof window!="undefined"&&typeof window.document!="undefined"?window.document:{},vendor="fullscreenEnabled"in document$1&&Object.keys(key)||webkit[0]in document$1&&webkit||moz[0]in document$1&&moz||ms[0]in document$1&&ms||[],fscreen={requestFullscreen:function(n){return n[vendor[key.requestFullscreen]]()},requestFullscreenFunction:function(n){return n[vendor[key.requestFullscreen]]},get exitFullscreen(){return document$1[vendor[key.exitFullscreen]].bind(document$1)},get fullscreenPseudoClass(){return":"+vendor[key.fullscreen]},addEventListener:function(n,t,i){return document$1.addEventListener(vendor[key[n]],t,i)},removeEventListener:function(n,t,i){return document$1.removeEventListener(vendor[key[n]],t,i)},get fullscreenEnabled(){return Boolean(document$1[vendor[key.fullscreenEnabled]])},set fullscreenEnabled(n){},get fullscreenElement(){return document$1[vendor[key.fullscreenElement]]},set fullscreenElement(n){},get onfullscreenchange(){return document$1[("on"+vendor[key.fullscreenchange]).toLowerCase()]},set onfullscreenchange(n){return document$1[("on"+vendor[key.fullscreenchange]).toLowerCase()]=n},get onfullscreenerror(){return document$1[("on"+vendor[key.fullscreenerror]).toLowerCase()]},set onfullscreenerror(n){return document$1[("on"+vendor[key.fullscreenerror]).toLowerCase()]=n}},fscreen$1=fscreen;function useFullScreenHandle(){var n=react.exports.useState(!1),t=n[0],i=n[1],a=react.exports.useRef(null);react.exports.useEffect(function(){var l=function(){i(fscreen$1.fullscreenElement===a.current)};return fscreen$1.addEventListener("fullscreenchange",l),function(){return fscreen$1.removeEventListener("fullscreenchange",l)}},[]);var o=react.exports.useCallback(function(){if(fscreen$1.fullscreenElement)return fscreen$1.exitFullscreen().then(function(){return fscreen$1.requestFullscreen(a.current)});if(a.current)return fscreen$1.requestFullscreen(a.current)},[]),u=react.exports.useCallback(function(){return fscreen$1.fullscreenElement===a.current?fscreen$1.exitFullscreen():Promise.resolve()},[]);return react.exports.useMemo(function(){return{active:t,enter:o,exit:u,node:a}},[t,o,u])}var FullScreen=function n(t){var i=t.handle,a=t.onChange,o=t.children,u=t.className,l=[];return u&&l.push(u),l.push("fullscreen"),i.active&&l.push("fullscreen-enabled"),react.exports.useEffect(function(){a&&a(i.active,i)},[i.active]),jsx("div",{className:l.join(" "),ref:i.node,style:i.active?{height:"100%",width:"100%"}:void 0,children:o})},observerMap=new Map,RootIds=new WeakMap,rootId=0,unsupportedValue=void 0;function getRootId(n){return n?(RootIds.has(n)||(rootId+=1,RootIds.set(n,rootId.toString())),RootIds.get(n)):"0"}function optionsToId(n){return Object.keys(n).sort().filter(function(t){return n[t]!==void 0}).map(function(t){return t+"_"+(t==="root"?getRootId(n.root):n[t])}).toString()}function createObserver(n){var t=optionsToId(n),i=observerMap.get(t);if(!i){var a=new Map,o,u=new IntersectionObserver(function(l){l.forEach(function(m){var c,f=m.isIntersecting&&o.some(function(g){return m.intersectionRatio>=g});n.trackVisibility&&typeof m.isVisible=="undefined"&&(m.isVisible=f),(c=a.get(m.target))==null||c.forEach(function(g){g(f,m)})})},n);o=u.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),i={id:t,observer:u,elements:a},observerMap.set(t,i)}return i}function observe(n,t,i,a){if(i===void 0&&(i={}),a===void 0&&(a=unsupportedValue),typeof window.IntersectionObserver=="undefined"&&a!==void 0){var o=n.getBoundingClientRect();return t(a,{isIntersecting:a,target:n,intersectionRatio:typeof i.threshold=="number"?i.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),function(){}}var u=createObserver(i),l=u.id,m=u.observer,c=u.elements,f=c.get(n)||[];return c.has(n)||c.set(n,f),f.push(t),m.observe(n),function(){f.splice(f.indexOf(t),1),f.length===0&&(c.delete(n),m.unobserve(n)),c.size===0&&(m.disconnect(),observerMap.delete(l))}}function useInView(n){var t=n===void 0?{}:n,i=t.threshold,a=t.delay,o=t.trackVisibility,u=t.rootMargin,l=t.root,m=t.triggerOnce,c=t.skip,f=t.initialInView,g=t.fallbackInView,b=react.exports.useRef(),v=react.exports.useState({inView:!!f}),_=v[0],x=v[1],C=react.exports.useCallback(function(U){b.current!==void 0&&(b.current(),b.current=void 0),!c&&U&&(b.current=observe(U,function(M,V){x({inView:M,entry:V}),V.isIntersecting&&m&&b.current&&(b.current(),b.current=void 0)},{root:l,rootMargin:u,threshold:i,trackVisibility:o,delay:a},g))},[Array.isArray(i)?i.toString():i,l,u,m,c,o,g,a]);react.exports.useEffect(function(){!b.current&&_.entry&&!m&&!c&&x({inView:!!f})});var I=[C,_.inView,_.entry];return I.ref=I[0],I.inView=I[1],I.entry=I[2],I}var vectorly_filters={exports:{}};(function(n,t){(function(i,a){n.exports=a()})(self,function(){return function(){var i={553:function(l){var m=function(c){var f,g=Object.prototype,b=g.hasOwnProperty,v=typeof Symbol=="function"?Symbol:{},_=v.iterator||"@@iterator",x=v.asyncIterator||"@@asyncIterator",C=v.toStringTag||"@@toStringTag";function I(F,N,Z){return Object.defineProperty(F,N,{value:Z,enumerable:!0,configurable:!0,writable:!0}),F[N]}try{I({},"")}catch{I=function(N,Z,A){return N[Z]=A}}function U(F,N,Z,A){var O=N&&N.prototype instanceof H?N:H,D=Object.create(O.prototype),ne=new q(A||[]);return D._invoke=function(K,P,j){var L=V;return function(oe,ie){if(L===$)throw new Error("Generator is already running");if(L===B){if(oe==="throw")throw ie;return re()}for(j.method=oe,j.arg=ie;;){var se=j.delegate;if(se){var ye=te(se,j);if(ye){if(ye===G)continue;return ye}}if(j.method==="next")j.sent=j._sent=j.arg;else if(j.method==="throw"){if(L===V)throw L=B,j.arg;j.dispatchException(j.arg)}else j.method==="return"&&j.abrupt("return",j.arg);L=$;var fe=M(K,P,j);if(fe.type==="normal"){if(L=j.done?B:T,fe.arg===G)continue;return{value:fe.arg,done:j.done}}fe.type==="throw"&&(L=B,j.method="throw",j.arg=fe.arg)}}}(F,Z,ne),D}function M(F,N,Z){try{return{type:"normal",arg:F.call(N,Z)}}catch(A){return{type:"throw",arg:A}}}c.wrap=U;var V="suspendedStart",T="suspendedYield",$="executing",B="completed",G={};function H(){}function X(){}function h(){}var s={};I(s,_,function(){return this});var y=Object.getPrototypeOf,k=y&&y(y(ee([])));k&&k!==g&&b.call(k,_)&&(s=k);var S=h.prototype=H.prototype=Object.create(s);function E(F){["next","throw","return"].forEach(function(N){I(F,N,function(Z){return this._invoke(N,Z)})})}function z(F,N){function Z(O,D,ne,K){var P=M(F[O],F,D);if(P.type!=="throw"){var j=P.arg,L=j.value;return L&&typeof L=="object"&&b.call(L,"__await")?N.resolve(L.__await).then(function(oe){Z("next",oe,ne,K)},function(oe){Z("throw",oe,ne,K)}):N.resolve(L).then(function(oe){j.value=oe,ne(j)},function(oe){return Z("throw",oe,ne,K)})}K(P.arg)}var A;this._invoke=function(O,D){function ne(){return new N(function(K,P){Z(O,D,K,P)})}return A=A?A.then(ne,ne):ne()}}function te(F,N){var Z=F.iterator[N.method];if(Z===f){if(N.delegate=null,N.method==="throw"){if(F.iterator.return&&(N.method="return",N.arg=f,te(F,N),N.method==="throw"))return G;N.method="throw",N.arg=new TypeError("The iterator does not provide a 'throw' method")}return G}var A=M(Z,F.iterator,N.arg);if(A.type==="throw")return N.method="throw",N.arg=A.arg,N.delegate=null,G;var O=A.arg;return O?O.done?(N[F.resultName]=O.value,N.next=F.nextLoc,N.method!=="return"&&(N.method="next",N.arg=f),N.delegate=null,G):O:(N.method="throw",N.arg=new TypeError("iterator result is not an object"),N.delegate=null,G)}function W(F){var N={tryLoc:F[0]};1 in F&&(N.catchLoc=F[1]),2 in F&&(N.finallyLoc=F[2],N.afterLoc=F[3]),this.tryEntries.push(N)}function Y(F){var N=F.completion||{};N.type="normal",delete N.arg,F.completion=N}function q(F){this.tryEntries=[{tryLoc:"root"}],F.forEach(W,this),this.reset(!0)}function ee(F){if(F){var N=F[_];if(N)return N.call(F);if(typeof F.next=="function")return F;if(!isNaN(F.length)){var Z=-1,A=function O(){for(;++Z<F.length;)if(b.call(F,Z))return O.value=F[Z],O.done=!1,O;return O.value=f,O.done=!0,O};return A.next=A}}return{next:re}}function re(){return{value:f,done:!0}}return X.prototype=h,I(S,"constructor",h),I(h,"constructor",X),X.displayName=I(h,C,"GeneratorFunction"),c.isGeneratorFunction=function(F){var N=typeof F=="function"&&F.constructor;return!!N&&(N===X||(N.displayName||N.name)==="GeneratorFunction")},c.mark=function(F){return Object.setPrototypeOf?Object.setPrototypeOf(F,h):(F.__proto__=h,I(F,C,"GeneratorFunction")),F.prototype=Object.create(S),F},c.awrap=function(F){return{__await:F}},E(z.prototype),I(z.prototype,x,function(){return this}),c.AsyncIterator=z,c.async=function(F,N,Z,A,O){O===void 0&&(O=Promise);var D=new z(U(F,N,Z,A),O);return c.isGeneratorFunction(N)?D:D.next().then(function(ne){return ne.done?ne.value:D.next()})},E(S),I(S,C,"Generator"),I(S,_,function(){return this}),I(S,"toString",function(){return"[object Generator]"}),c.keys=function(F){var N=[];for(var Z in F)N.push(Z);return N.reverse(),function A(){for(;N.length;){var O=N.pop();if(O in F)return A.value=O,A.done=!1,A}return A.done=!0,A}},c.values=ee,q.prototype={constructor:q,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(Y),!F)for(var N in this)N.charAt(0)==="t"&&b.call(this,N)&&!isNaN(+N.slice(1))&&(this[N]=f)},stop:function(){this.done=!0;var F=this.tryEntries[0].completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var N=this;function Z(P,j){return D.type="throw",D.arg=F,N.next=P,j&&(N.method="next",N.arg=f),!!j}for(var A=this.tryEntries.length-1;A>=0;--A){var O=this.tryEntries[A],D=O.completion;if(O.tryLoc==="root")return Z("end");if(O.tryLoc<=this.prev){var ne=b.call(O,"catchLoc"),K=b.call(O,"finallyLoc");if(ne&&K){if(this.prev<O.catchLoc)return Z(O.catchLoc,!0);if(this.prev<O.finallyLoc)return Z(O.finallyLoc)}else if(ne){if(this.prev<O.catchLoc)return Z(O.catchLoc,!0)}else{if(!K)throw new Error("try statement without catch or finally");if(this.prev<O.finallyLoc)return Z(O.finallyLoc)}}}},abrupt:function(F,N){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var A=this.tryEntries[Z];if(A.tryLoc<=this.prev&&b.call(A,"finallyLoc")&&this.prev<A.finallyLoc){var O=A;break}}O&&(F==="break"||F==="continue")&&O.tryLoc<=N&&N<=O.finallyLoc&&(O=null);var D=O?O.completion:{};return D.type=F,D.arg=N,O?(this.method="next",this.next=O.finallyLoc,G):this.complete(D)},complete:function(F,N){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&N&&(this.next=N),G},finish:function(F){for(var N=this.tryEntries.length-1;N>=0;--N){var Z=this.tryEntries[N];if(Z.finallyLoc===F)return this.complete(Z.completion,Z.afterLoc),Y(Z),G}},catch:function(F){for(var N=this.tryEntries.length-1;N>=0;--N){var Z=this.tryEntries[N];if(Z.tryLoc===F){var A=Z.completion;if(A.type==="throw"){var O=A.arg;Y(Z)}return O}}throw new Error("illegal catch attempt")},delegateYield:function(F,N,Z){return this.delegate={iterator:ee(F),resultName:N,nextLoc:Z},this.method==="next"&&(this.arg=f),G}},c}(l.exports);try{regeneratorRuntime=m}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=m:Function("r","regeneratorRuntime = r")(m)}},757:function(l,m,c){l.exports=c(553)},706:function(l,m,c){function f(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function g(){return f()?(self.isWorker=!0,self):(window.isWorker=!1,window)}function b(P){return f()?P instanceof OffscreenCanvasRenderingContext2D:P instanceof CanvasRenderingContext2D}c.d(m,{uL:function(){return x},Th:function(){return _},yb:function(){return v},Hy:function(){return ne},ZS:function(){return K}});var v=function(P,j){let L;typeof P=="string"&&(P=document.getElementById(P));let oe=1;if(j.use_webgl1==="true"?L=P.getContext("webgl",{antialias:!1,premultipliedAlpha:!1}):(L=P.getContext("webgl2",{antialias:!1,premultipliedAlpha:!1}),oe=2,L||(oe=1,L=P.getContext("webgl",{antialias:!1,premultipliedAlpha:!1}))),L.getExtension("WEBGL_draw_buffers")?L.disable_multi_draw=j.disable_multi_draw||!1:L.disable_multi_draw=!0,L.extensions={},L.getVersion=function(){return oe},L.getVersion()===1){if(j.float_type==="float32"){if(L.extensions.EXT_FLOAT=L.getExtension("OES_texture_float"),!L.extensions.EXT_FLOAT)throw new Error("Extension not found: OES_texture_float");L.extensions.EXT_FLOAT_LINEAR=L.getExtension("OES_texture_float_linear"),L.extensions.EXT_FLOAT_LINEAR,L.texture_format=L.RGBA,L.texture_type=L.FLOAT}else{if(L.extensions.EXT_FLOAT=L.getExtension("OES_texture_half_float"),!L.extensions.EXT_FLOAT)throw new Error("Extension not found: OES_texture_half_float");L.extensions.EXT_FLOAT_LINEAR=L.getExtension("OES_texture_half_float_linear"),L.extensions.EXT_FLOAT_LINEAR,L.texture_format=L.RGBA,L.texture_type=L.extensions.EXT_FLOAT.HALF_FLOAT_OES}if(!L.disable_multi_draw&&(L.extensions.WEBGL_draw_buffers=L.getExtension("WEBGL_draw_buffers"),!L.extensions.WEBGL_draw_buffers))throw new Error("Extension not found: WEBGL_draw_buffers")}else{if(L.extensions.EXT_FLOAT=L.getExtension("EXT_color_buffer_float"),!L.extensions.EXT_FLOAT)throw new Error("Extension not found: EXT_color_buffer_float");j.float_type==="float32"?(L.extensions.EXT_FLOAT_LINEAR=L.getExtension("OES_texture_float_linear"),L.texture_format=L.RGBA32F,L.texture_type=L.FLOAT):(L.extensions.EXT_FLOAT_LINEAR=L.getExtension("OES_texture_half_float_linear"),L.texture_format=L.RGBA16F,L.texture_type=L.FLOAT)}return L.getVersion()===1?(L.getCOLOR_ATTACHMENT=function(ie=0){return L.disable_multi_draw?L.COLOR_ATTACHMENT0:L.extensions.WEBGL_draw_buffers.COLOR_ATTACHMENT0_WEBGL+ie},L.getDrawBuffers=function(ie=[L.getCOLOR_ATTACHMENT(0)]){L.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(ie)}):(L.getCOLOR_ATTACHMENT=function(ie=0){return L.COLOR_ATTACHMENT0+ie},L.getDrawBuffers=function(ie=[L.getCOLOR_ATTACHMENT(0)]){L.drawBuffers(ie)}),g().gl=L,L.canvas.w=L.canvas.width,L.canvas.h=L.canvas.height,L.clearCanvas=function(){L.clearColor(0,0,0,1),L.viewport(0,0,L.drawingBufferWidth,L.drawingBufferHeight),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)},L.input={h:j.h,w:j.w},L.render_scale={h:1,w:1},L.viewport(0,0,P.width,P.height),L.createAndCompileShader=function(ie,se){let ye=L.createShader(ie);if(L.shaderSource(ye,se),L.compileShader(ye),!L.getShaderParameter(ye,L.COMPILE_STATUS))throw new Error(L.getShaderInfoLog(ye));return ye},L.createAndLinkProgram=function(ie,se){let ye=L.createProgram();if(L.attachShader(ye,ie),L.attachShader(ye,se),L.linkProgram(ye),!L.getProgramParameter(ye,L.LINK_STATUS))throw new Error(L.getProgramInfoLog(ye));return ye},L.resizeCanvasToDisplaySize=function(ie,se){return(P.width!==ie||P.height!==se)&&(P.width=ie,P.height=se,!0)},L.resizeRenderSize=function(ie,se,ye){let fe=ye*L.input.w,_e=ye*L.input.h;fe=ie>fe?ie:fe,_e=se>_e?se:_e,L.render_scale={w:ie/fe,h:se/_e},L.resizeCanvasToDisplaySize(fe,_e)},L.log=function(ie){},L},_=class{constructor(P,j,L,oe){this.gl=P,this.network=j,this.frameBuffer=L,this.renderSize={w:oe.w,h:oe.h},this.metrics={"Render Size":this.renderSize,"Original Size":P.input,"Upscale Factor":j.upscaleFactor,FPS:0},this.setProperties(oe)}setProperties(P={w:1278,h:720,disableVideoToCanvas:!1}){const j=this;P.disableVideoToCanvas!==!0&&this.frameBuffer.setInputFrameCanvas(),P.w===void 0&&(P.w=this.network.upscaleFactor*this.gl.input.w),P.h===void 0&&(P.h=this.network.upscaleFactor*this.gl.input.h),this.renderSize=P,this.gl.resizeRenderSize(P.w,P.h,this.network.upscaleFactor),this.frameBuffer.inputTex!==null&&setTimeout(()=>{j.network.renderRGB(j.gl.render_scale)}),j.metrics["Render Size"]=P}setInputSize(P={w:426,h:240},j=null){this.gl.input={w:P.w,h:P.h},this.network.resetTextureBuffers(),this.setProperties(j||this.renderSize)}async resetNetwork(P){this.frameBuffer.clearall(),this.network=await async function(j={name:"",version:"",tag:"",token:""},L,oe){let ie=null,se=null;try{se=await K(j.name,j.tag,j.version,j.token)}catch(ye){throw console.error("%cParameter load failed:","background:black; color: yellow"),new Error(ye)}if(!se)throw console.error("%cParameter load failed:","background:black; color: yellow"),new Error("");try{ie=await ne(j.name,j.token),ie=new ie(L,oe,se)}catch(ye){throw console.error("%cNetwork load failed:","background:black; color: yellow"),new Error(ye)}return ie}({name:P.name,version:P.version,tag:P.tag},this.gl,this.network.frameBuffer),this.frameBuffer=this.network.frameBuffer,this.gl=this.network.gl,this.setProperties(this.renderSize)}changeNetwork(P){this.network=P,this.frameBuffer=this.network.frameBuffer,this.gl=this.network.gl}async loadBitmap(P){const j=this.frameBuffer;this.network,j.setInputImage(P),await this.render()}loadImage(P){const j=new Image;j.src=P;const L=this.frameBuffer,oe=this,ie=this.network;j.onload=async function(){L.setInputImage(j),await oe.render(),ie.getImageBytes()}}async render(P){const j=this.gl,L=this.network;j.clearColor(0,0,0,1),j.viewport(0,0,j.drawingBufferWidth,j.drawingBufferHeight),L.initialized&&await L.initialized,await L.feedForward(j.render_scale,P),j.flush()}},x=class{constructor(P){this.gl=P,this.iterations=0,this.textures=[{},{}],this.frame_buffers=[{},{}],this.inputTex=null,this.inputCanvas=null,this.frame_difference=0}drawToCanvas(){const P=this.gl;P.bindFramebuffer(P.FRAMEBUFFER,null)}setBuffer(P){const j=this.gl,L=this.iterations%2*this.frame_difference;j.bindFramebuffer(j.FRAMEBUFFER,this.frame_buffers[L][P])}setInputFrameCanvas(){g(),b(this.inputCanvas)||(this.inputCanvas=function(P,j){if(f())return new OffscreenCanvas(P,j);{const L=document.createElement("canvas");return L.width=P,L.height=j,L}}(this.gl.input.w,this.gl.input.h).getContext("2d")),this.inputCanvas.canvas.width=this.gl.input.w,this.inputCanvas.canvas.height=this.gl.input.h}videoToCanvas(P){return this.inputCanvas.drawImage(P,0,0,this.gl.input.w,this.gl.input.h),this.inputCanvas.canvas}getInputTexture(){const P=this.gl;if(this.inputTex===null){let j=P.createTexture();this.inputTex=this._setTextureSize(j,P.input.w,P.input.h)}return this.inputTex}setInputImage(P){this.input=P;const j=this.gl;b(this.inputCanvas)&&j.getVersion()===1&&(P=this.videoToCanvas(P));let L=this.getInputTexture();j.bindTexture(j.TEXTURE_2D,L),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.NEAREST),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,j.NEAREST),j.texImage2D(j.TEXTURE_2D,0,j.texture_format,j.RGBA,j.texture_type,P);for(let oe=0;oe<=this.frame_difference;oe++)this.textures[oe].INPUT=[L]}setImageAsTexture(P,j){const L=this.gl;let oe=L.createTexture();L.bindTexture(L.TEXTURE_2D,oe),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.NEAREST),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.NEAREST),L.texImage2D(L.TEXTURE_2D,0,L.texture_format,L.RGBA,L.texture_type,P);for(let ie=0;ie<=this.frame_difference;ie++)this.textures[ie][j]=[oe]}createBufferWithTextures(P,j,L=1,oe=null){const ie=this.gl;for(let se=0;se<=this.frame_difference;se++){const ye=ie.createFramebuffer();this.frame_buffers[se][P]=ye,ie.bindFramebuffer(ie.FRAMEBUFFER,ye);const fe=[];this.textures[se][P]=null;for(let _e=0;_e<j;++_e){let ke=this.createAndSetupTexture(oe);ke=this._setTextureSize(ke,ie.input.w*L,ie.input.h*L),fe.push(ke),ie.bindTexture(ie.TEXTURE_2D,ke),ie.texImage2D(ie.TEXTURE_2D,0,ie.texture_format,ie.input.w*L,ie.input.h*L,0,ie.RGBA,ie.texture_type,null),ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.getCOLOR_ATTACHMENT(_e),ie.TEXTURE_2D,ke,0)}this.textures[se][P]=fe}}createBufferWithTextures2(P,j,L,oe,ie={}){const se=this.gl;if(L<=0||oe<=0)throw new Error("Texture width and height must be greater than 0");let ye=ie.format||se.RGBA,fe=ie.minFilter||se.NEAREST,_e=ie.magFilter||se.NEAREST,ke=ie.type||se.texture_type||se.UNSIGNED_BYTE,Ee=ie.internalFormat||se.texture_format||se.RGBA;for(let be=0;be<=this.frame_difference;be++){const xe=se.createFramebuffer();this.frame_buffers[be][P]=xe,se.bindFramebuffer(se.FRAMEBUFFER,xe);const Se=[];this.textures[be][P]=null;for(let Te=0;Te<j;++Te){let ue;se.getVersion()===1?ue=this.createTexture_webgl1(Ee,L,oe,ye,ke,fe,_e):(Ee===se.RGBA&&(Ee=se.RGBA8),ue=this.createTexture_webgl2(Ee,L,oe,fe,_e)),se.framebufferTexture2D(se.FRAMEBUFFER,se.getCOLOR_ATTACHMENT(Te),se.TEXTURE_2D,ue,0),Se.push(ue)}this.textures[be][P]=Se}}getTextureSize(P,j=0,L=0){if(!this.textures[j][P][L])throw new Error(`Failed to get resolution of textures for layer: ${P} at index: ${index}`);return this.textures[j][P][L].size}createTexture_webgl2(P,j,L,oe,ie){oe=oe||gl.NEAREST,ie=ie||gl.NEAREST,P=P||gl.texture_format||gl.RGBA;let se=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,se),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,oe),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,ie),gl.texStorage2D(gl.TEXTURE_2D,1,P,j,L),se=this._setTextureSize(se,j,L),se}createTexture_webgl1(P,j,L,oe,ie,se,ye){oe=oe||gl.RGBA,se=se||gl.NEAREST,ye=ye||gl.NEAREST,ie=ie||gl.texture_type||gl.UNSIGNED_BYTE,P=P||gl.texture_format||gl.RGBA;let fe=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,fe),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,se),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,ye),gl.texImage2D(gl.TEXTURE_2D,0,P,j,L,0,oe,ie,null),fe=this._setTextureSize(fe,j,L),fe}createFloatTextureFromArrayBuffer(P,j,L,oe,ie,se,ye,fe){se=se||gl.RGBA,ye=ye||gl.NEAREST,fe=fe||gl.NEAREST,ie=ie||gl.texture_type||gl.UNSIGNED_BYTE,j=j||gl.texture_format||gl.RGBA;const _e=new Float32Array(P);let ke=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,ke),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,ye),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,fe),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA32F,L,oe,0,gl.RGBA,gl.FLOAT,_e),ke=this._setTextureSize(ke,L,oe),ke}_setTextureSize(P,j,L){return j>0&&L>0&&(P.size={},P.size.width=j,P.size.height=L),P}setBufferForLayer(P,j){for(let L=0;L<=this.frame_difference;L++){const oe=gl.createFramebuffer();this.frame_buffers[L][P]=oe,gl.bindFramebuffer(gl.FRAMEBUFFER,oe);for(let ie=0;ie<j.length;ie++)gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.getCOLOR_ATTACHMENT(ie),gl.TEXTURE_2D,j[ie],0);this.textures[L][P]=j}}getTexture(P){const j=this.iterations%2*this.frame_difference;return this.textures[j][P]}getLastFrameTexture(P){const j=1-this.iterations%2;return this.textures[j][P]}clearall(){Object.keys(this.textures[0]).forEach(P=>{for(let j=0;j<=this.frame_difference;j++){this.gl.deleteFramebuffer(this.frame_buffers[j][P]),this.frame_buffers[j][P]=null;for(let L=0;L<this.textures[j][P].length;++L)this.gl.deleteTexture(this.textures[j][P][L]),this.textures[j][P][L]=null}}),this.gl.deleteTexture(this.inputTex),this.inputTex=null,this.inputCanvas=null,this.frame_buffers=[{},{}],this.textures=[{},{}],this.gl.clearCanvas()}createAndSetupTexture(P=null){const j=this.gl;j.extensions.EXT_FLOAT_LINEAR||(P=null),P===null&&(P=j.NEAREST);const L=j.createTexture();return j.bindTexture(j.TEXTURE_2D,L),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.NEAREST),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,j.NEAREST),L}};c(435);var C=c(618),I=c(443),U=c.n(I),M=c(595),V=c.n(M),T=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||T!==void 0&&T,$="URLSearchParams"in T,B="Symbol"in T&&"iterator"in Symbol,G="FileReader"in T&&"Blob"in T&&function(){try{return new Blob,!0}catch{return!1}}(),H="FormData"in T,X="ArrayBuffer"in T;if(X)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(P){return P&&h.indexOf(Object.prototype.toString.call(P))>-1};function y(P){if(typeof P!="string"&&(P=String(P)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(P)||P==="")throw new TypeError('Invalid character in header field name: "'+P+'"');return P.toLowerCase()}function k(P){return typeof P!="string"&&(P=String(P)),P}function S(P){var j={next:function(){var L=P.shift();return{done:L===void 0,value:L}}};return B&&(j[Symbol.iterator]=function(){return j}),j}function E(P){this.map={},P instanceof E?P.forEach(function(j,L){this.append(L,j)},this):Array.isArray(P)?P.forEach(function(j){this.append(j[0],j[1])},this):P&&Object.getOwnPropertyNames(P).forEach(function(j){this.append(j,P[j])},this)}function z(P){if(P.bodyUsed)return Promise.reject(new TypeError("Already read"));P.bodyUsed=!0}function te(P){return new Promise(function(j,L){P.onload=function(){j(P.result)},P.onerror=function(){L(P.error)}})}function W(P){var j=new FileReader,L=te(j);return j.readAsArrayBuffer(P),L}function Y(P){if(P.slice)return P.slice(0);var j=new Uint8Array(P.byteLength);return j.set(new Uint8Array(P)),j.buffer}function q(){return this.bodyUsed=!1,this._initBody=function(P){var j;this.bodyUsed=this.bodyUsed,this._bodyInit=P,P?typeof P=="string"?this._bodyText=P:G&&Blob.prototype.isPrototypeOf(P)?this._bodyBlob=P:H&&FormData.prototype.isPrototypeOf(P)?this._bodyFormData=P:$&&URLSearchParams.prototype.isPrototypeOf(P)?this._bodyText=P.toString():X&&G&&(j=P)&&DataView.prototype.isPrototypeOf(j)?(this._bodyArrayBuffer=Y(P.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):X&&(ArrayBuffer.prototype.isPrototypeOf(P)||s(P))?this._bodyArrayBuffer=Y(P):this._bodyText=P=Object.prototype.toString.call(P):this._bodyText="",this.headers.get("content-type")||(typeof P=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):$&&URLSearchParams.prototype.isPrototypeOf(P)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},G&&(this.blob=function(){var P=z(this);if(P)return P;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?z(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(W)}),this.text=function(){var P,j,L,oe=z(this);if(oe)return oe;if(this._bodyBlob)return P=this._bodyBlob,L=te(j=new FileReader),j.readAsText(P),L;if(this._bodyArrayBuffer)return Promise.resolve(function(ie){for(var se=new Uint8Array(ie),ye=new Array(se.length),fe=0;fe<se.length;fe++)ye[fe]=String.fromCharCode(se[fe]);return ye.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},H&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}E.prototype.append=function(P,j){P=y(P),j=k(j);var L=this.map[P];this.map[P]=L?L+", "+j:j},E.prototype.delete=function(P){delete this.map[y(P)]},E.prototype.get=function(P){return P=y(P),this.has(P)?this.map[P]:null},E.prototype.has=function(P){return this.map.hasOwnProperty(y(P))},E.prototype.set=function(P,j){this.map[y(P)]=k(j)},E.prototype.forEach=function(P,j){for(var L in this.map)this.map.hasOwnProperty(L)&&P.call(j,this.map[L],L,this)},E.prototype.keys=function(){var P=[];return this.forEach(function(j,L){P.push(L)}),S(P)},E.prototype.values=function(){var P=[];return this.forEach(function(j){P.push(j)}),S(P)},E.prototype.entries=function(){var P=[];return this.forEach(function(j,L){P.push([L,j])}),S(P)},B&&(E.prototype[Symbol.iterator]=E.prototype.entries);var ee=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function re(P,j){if(!(this instanceof re))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var L,oe,ie=(j=j||{}).body;if(P instanceof re){if(P.bodyUsed)throw new TypeError("Already read");this.url=P.url,this.credentials=P.credentials,j.headers||(this.headers=new E(P.headers)),this.method=P.method,this.mode=P.mode,this.signal=P.signal,ie||P._bodyInit==null||(ie=P._bodyInit,P.bodyUsed=!0)}else this.url=String(P);if(this.credentials=j.credentials||this.credentials||"same-origin",!j.headers&&this.headers||(this.headers=new E(j.headers)),this.method=(oe=(L=j.method||this.method||"GET").toUpperCase(),ee.indexOf(oe)>-1?oe:L),this.mode=j.mode||this.mode||null,this.signal=j.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ie)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(ie),!(this.method!=="GET"&&this.method!=="HEAD"||j.cache!=="no-store"&&j.cache!=="no-cache")){var se=/([?&])_=[^&]*/;se.test(this.url)?this.url=this.url.replace(se,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function F(P){var j=new FormData;return P.trim().split("&").forEach(function(L){if(L){var oe=L.split("="),ie=oe.shift().replace(/\+/g," "),se=oe.join("=").replace(/\+/g," ");j.append(decodeURIComponent(ie),decodeURIComponent(se))}}),j}function N(P,j){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');j||(j={}),this.type="default",this.status=j.status===void 0?200:j.status,this.ok=this.status>=200&&this.status<300,this.statusText=j.statusText===void 0?"":""+j.statusText,this.headers=new E(j.headers),this.url=j.url||"",this._initBody(P)}re.prototype.clone=function(){return new re(this,{body:this._bodyInit})},q.call(re.prototype),q.call(N.prototype),N.prototype.clone=function(){return new N(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},N.error=function(){var P=new N(null,{status:0,statusText:""});return P.type="error",P};var Z=[301,302,303,307,308];N.redirect=function(P,j){if(Z.indexOf(j)===-1)throw new RangeError("Invalid status code");return new N(null,{status:j,headers:{location:P}})};var A=T.DOMException;try{new A}catch{(A=function(j,L){this.message=j,this.name=L;var oe=Error(j);this.stack=oe.stack}).prototype=Object.create(Error.prototype),A.prototype.constructor=A}function O(P,j){return new Promise(function(L,oe){var ie=new re(P,j);if(ie.signal&&ie.signal.aborted)return oe(new A("Aborted","AbortError"));var se=new XMLHttpRequest;function ye(){se.abort()}se.onload=function(){var fe,_e,ke={status:se.status,statusText:se.statusText,headers:(fe=se.getAllResponseHeaders()||"",_e=new E,fe.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(be){return be.indexOf(`
`)===0?be.substr(1,be.length):be}).forEach(function(be){var xe=be.split(":"),Se=xe.shift().trim();if(Se){var Te=xe.join(":").trim();_e.append(Se,Te)}}),_e)};ke.url="responseURL"in se?se.responseURL:ke.headers.get("X-Request-URL");var Ee="response"in se?se.response:se.responseText;setTimeout(function(){L(new N(Ee,ke))},0)},se.onerror=function(){setTimeout(function(){oe(new TypeError("Network request failed"))},0)},se.ontimeout=function(){setTimeout(function(){oe(new TypeError("Network request failed"))},0)},se.onabort=function(){setTimeout(function(){oe(new A("Aborted","AbortError"))},0)},se.open(ie.method,function(fe){try{return fe===""&&T.location.href?T.location.href:fe}catch{return fe}}(ie.url),!0),ie.credentials==="include"?se.withCredentials=!0:ie.credentials==="omit"&&(se.withCredentials=!1),"responseType"in se&&(G?se.responseType="blob":X&&ie.headers.get("Content-Type")&&ie.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(se.responseType="arraybuffer")),!j||typeof j.headers!="object"||j.headers instanceof E?ie.headers.forEach(function(fe,_e){se.setRequestHeader(_e,fe)}):Object.getOwnPropertyNames(j.headers).forEach(function(fe){se.setRequestHeader(fe,k(j.headers[fe]))}),ie.signal&&(ie.signal.addEventListener("abort",ye),se.onreadystatechange=function(){se.readyState===4&&ie.signal.removeEventListener("abort",ye)}),se.send(ie._bodyInit===void 0?null:ie._bodyInit)})}O.polyfill=!0,T.fetch||(T.fetch=O,T.Headers=E,T.Request=re,T.Response=N);const D=g();let ne=async(P,j={})=>{let L,oe=((j=j||{}).path||c.p)+`models/${P}.js`;var ie;return j.token&&(oe=oe+"?"+j.token),D.vectorlyBasePath=j.path||c.p,P==="background_selfie"&&(L=(async()=>{let se;if(D.tflite)se=D.tflite;else{let ye=D.vectorlyBasePath||"";try{if(C.feature.simd!==!0)throw new Error("SIMD feature check is false");se=await U()({basePath:ye})}catch{se=await V()({basePath:ye})}}return se})()),D.isWorker?importScripts(oe):await(ie=oe,new Promise((se,ye)=>{const fe="$importModule$"+Math.random().toString(32).slice(2),_e=document.createElement("script"),ke=()=>{delete window[fe],_e.onerror=null,_e.onload=null,_e.remove(),URL.revokeObjectURL(_e.src),_e.src=""};_e.defer="defer",_e.type="module",_e.onerror=()=>{ye(new Error(`Failed to import: ${ie}`)),ke()},_e.onload=()=>{se(window[fe]),ke()};const Ee=function(xe){const Se=document.createElement("a");return Se.setAttribute("href",xe),Se.cloneNode(!1).href}(ie),be=new Blob([`import * as m from "${Ee}"; window.${fe} = m;`],{type:"text/javascript"});_e.src=URL.createObjectURL(be),document.head.appendChild(_e)})),P==="background_selfie"&&(D.tflite=await L),D.vectorly.models[P]},K=async(P,j,L,oe)=>{if(oe=oe||{},P==="background_selfie"){let ie=(oe.path||c.p)+`./data/${P}/${j}_v${L}.tflite`;oe.token&&(ie=ie+"?"+oe.token);const se=await fetch(ie);if(!se.ok)throw Error(`Response fetching "${ie}": ${se.statusText}`);return{model:await se.arrayBuffer()}}if(P==="background_webgl2"||P==="background_webgl"||P==="background_webgl_unet"){let ie=(oe.path||c.p)+`./data/${P}/${j}_v${L}.json`,se=(oe.path||c.p)+`./data/${P}/${j}_v${L}.weights`;oe.token&&(ie+="?"+oe.token,se+="?"+oe.token);const[ye,fe]=await Promise.all([fetch(ie),fetch(se)]),[_e,ke]=await Promise.all([ye.json(),fe.arrayBuffer()]),Ee=JSON.parse(JSON.stringify(_e)),be=new Float32Array(ke),xe=Object.keys(_e),Se=["weights","biases"];_e[xe[0]].debugImage&&Se.push("debugImage");for(let Te of xe)for(let ue of Se){let[J,Q]=_e[Te][ue];Ee[Te][ue]=be.slice(Q,Q+J)}return Ee}{let ie=(oe.path||c.p)+`./data/${P}/${j}_v${L}.json`;return oe.token&&(ie=ie+"?"+oe.token),await(await fetch(ie)).json()}}},435:function(l){l.exports=["cnn_demo","residual_3k_3x","residual_4k_2x","residual_5k_2x","residual_5k_3x","denoise_10k_1x","background_selfie","background_webgl_unet","background_webgl","background_webgl2","upscaler_4krgb_2x"]},443:function(l){var m,c=(m=(m=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(f){var g,b,v=(f=f||{})!==void 0?f:{};v.ready=new Promise(function(J,Q){g=J,b=Q});var _,x={};for(_ in v)v.hasOwnProperty(_)&&(x[_]=v[_]);var C,I,U,M="./this.program",V=function(J,Q){throw Q};C=typeof window=="object",I=typeof importScripts=="function",U=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";var T,$,B="";(C||I)&&(I?B=self.location.href:typeof document!="undefined"&&document.currentScript&&(B=document.currentScript.src),m&&(B=m),B=B.indexOf("blob:")!==0?B.substr(0,B.lastIndexOf("/")+1):"",I&&($=function(J){var Q=new XMLHttpRequest;return Q.open("GET",J,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}),T=function(J,Q,ce){var pe=new XMLHttpRequest;pe.open("GET",J,!0),pe.responseType="arraybuffer",pe.onload=function(){pe.status==200||pe.status==0&&pe.response?Q(pe.response):ce()},pe.onerror=ce,pe.send(null)});var G,H=v.print||console.log.bind(console),X=v.printErr||console.warn.bind(console);for(_ in x)x.hasOwnProperty(_)&&(v[_]=x[_]);x=null,v.arguments&&v.arguments,v.thisProgram&&(M=v.thisProgram),v.quit&&(V=v.quit),v.wasmBinary&&(G=v.wasmBinary);var h,s=v.noExitRuntime||!0;typeof WebAssembly!="object"&&O("no native wasm support detected");var y,k,S,E,z=!1,te=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function W(J,Q,ce){for(var pe=Q+ce,he=Q;J[he]&&!(he>=pe);)++he;if(he-Q>16&&J.subarray&&te)return te.decode(J.subarray(Q,he));for(var le="";Q<he;){var Pe=J[Q++];if(128&Pe){var ae=63&J[Q++];if((224&Pe)!=192){var ve=63&J[Q++];if((Pe=(240&Pe)==224?(15&Pe)<<12|ae<<6|ve:(7&Pe)<<18|ae<<12|ve<<6|63&J[Q++])<65536)le+=String.fromCharCode(Pe);else{var Ce=Pe-65536;le+=String.fromCharCode(55296|Ce>>10,56320|1023&Ce)}}else le+=String.fromCharCode((31&Pe)<<6|ae)}else le+=String.fromCharCode(Pe)}return le}function Y(J){y=J,v.HEAP8=k=new Int8Array(J),v.HEAP16=new Int16Array(J),v.HEAP32=E=new Int32Array(J),v.HEAPU8=S=new Uint8Array(J),v.HEAPU16=new Uint16Array(J),v.HEAPU32=new Uint32Array(J),v.HEAPF32=new Float32Array(J),v.HEAPF64=new Float64Array(J)}v.INITIAL_MEMORY;var q,ee=[],re=[],F=[],N=[];re.push({func:function(){xe()}});var Z=0,A=null;function O(J){v.onAbort&&v.onAbort(J),X(J+=""),z=!0,J="abort("+J+"). Build with -s ASSERTIONS=1 for more info.";var Q=new WebAssembly.RuntimeError(J);throw b(Q),Q}function D(J,Q){return String.prototype.startsWith?J.startsWith(Q):J.indexOf(Q)===0}function ne(J){return D(J,"data:application/octet-stream;base64,")}function K(J){return D(J,"file://")}v.preloadedImages={},v.preloadedAudios={};var P,j,L="./tflite/tflite-simd.wasm";function oe(J){try{if(J==L&&G)return new Uint8Array(G);if($)return $(J);throw"both async and sync fetching of the wasm failed"}catch(Q){O(Q)}}function ie(J){for(;J.length>0;){var Q=J.shift();if(typeof Q!="function"){var ce=Q.func;typeof ce=="number"?Q.arg===void 0?q.get(ce)():q.get(ce)(Q.arg):ce(Q.arg===void 0?null:Q.arg)}else Q(v)}}function se(J){return E[Se()>>2]=J,J}function ye(J){try{return h.grow(J-y.byteLength+65535>>>16),Y(h.buffer),1}catch{}}ne(L)||(P=L,L=v.locateFile?v.locateFile(P,B):(B=v.basePath||B)+P),j=U?function(){var J=process.hrtime();return 1e3*J[0]+J[1]/1e6}:typeof dateNow!="undefined"?dateNow:function(){return performance.now()};var fe={};function _e(){if(!_e.strings){var J={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:M||"./this.program"};for(var Q in fe)J[Q]=fe[Q];var ce=[];for(var Q in J)ce.push(Q+"="+J[Q]);_e.strings=ce}return _e.strings}var ke,Ee={mappings:{},buffers:[null,[],[]],printChar:function(J,Q){var ce=Ee.buffers[J];Q===0||Q===10?((J===1?H:X)(W(ce,0)),ce.length=0):ce.push(Q)},varargs:void 0,get:function(){return Ee.varargs+=4,E[Ee.varargs-4>>2]},getStr:function(J){var Q=function(ce,pe){return ce?W(S,ce,void 0):""}(J);return Q},get64:function(J,Q){return J}},be={a:function(){O()},n:function(J,Q){var ce;if(J===0)ce=Date.now();else{if(J!==1&&J!==4)return se(28),-1;ce=j()}return E[Q>>2]=ce/1e3|0,E[Q+4>>2]=ce%1e3*1e3*1e3|0,0},i:function(J,Q){O("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},e:function(J,Q){O("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(J,Q,ce){S.copyWithin(J,Q,Q+ce)},m:function(J){var Q,ce=S.length,pe=2147483648;if(J>pe)return!1;for(var he=1;he<=4;he*=2){var le=ce*(1+.2/he);if(le=Math.min(le,J+100663296),ye(Math.min(pe,((Q=Math.max(J,le))%65536>0&&(Q+=65536-Q%65536),Q))))return!0}return!1},o:function(J){for(var Q=j();j()-Q<J;);},p:function(J,Q){var ce=0;return _e().forEach(function(pe,he){var le=Q+ce;E[J+4*he>>2]=le,function(Pe,ae,ve){for(var Ce=0;Ce<Pe.length;++Ce)k[ae++>>0]=Pe.charCodeAt(Ce);k[ae>>0]=0}(pe,le),ce+=pe.length+1}),0},g:function(J,Q){var ce=_e();E[J>>2]=ce.length;var pe=0;return ce.forEach(function(he){pe+=he.length+1}),E[Q>>2]=pe,0},j:function(J){(function(Q,ce){s||(v.onExit&&v.onExit(Q),z=!0),V(Q,new Te(Q))})(J)},h:function(J){return 0},k:function(J,Q,ce,pe,he){},c:function(J,Q,ce,pe){for(var he=0,le=0;le<ce;le++){for(var Pe=E[Q+8*le>>2],ae=E[Q+(8*le+4)>>2],ve=0;ve<ae;ve++)Ee.printChar(J,S[Pe+ve]);he+=ae}return E[pe>>2]=he,0},d:function(){return 6},f:function(){return 28},b:function(J){switch(J){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return typeof navigator=="object"&&navigator.hardwareConcurrency||1}return se(28),-1}},xe=(function(){var J={a:be};function Q(he,le){var Pe=he.exports;v.asm=Pe,Y((h=v.asm.q).buffer),q=v.asm.D,function(ae){if(Z--,v.monitorRunDependencies&&v.monitorRunDependencies(Z),Z==0&&A){var ve=A;A=null,ve()}}()}function ce(he){Q(he.instance)}function pe(he){return function(){if(!G&&(C||I)){if(typeof fetch=="function"&&!K(L))return fetch(L,{credentials:"same-origin"}).then(function(le){if(!le.ok)throw"failed to load wasm binary file at '"+L+"'";return le.arrayBuffer()}).catch(function(){return oe(L)});if(T)return new Promise(function(le,Pe){T(L,function(ae){le(new Uint8Array(ae))},Pe)})}return Promise.resolve().then(function(){return oe(L)})}().then(function(le){return WebAssembly.instantiate(le,J)}).then(he,function(le){X("failed to asynchronously prepare wasm: "+le),O(le)})}if(Z++,v.monitorRunDependencies&&v.monitorRunDependencies(Z),v.instantiateWasm)try{return v.instantiateWasm(J,Q)}catch(he){return X("Module.instantiateWasm callback failed with error: "+he),!1}(G||typeof WebAssembly.instantiateStreaming!="function"||ne(L)||K(L)||typeof fetch!="function"?pe(ce):fetch(L,{credentials:"same-origin"}).then(function(he){return WebAssembly.instantiateStreaming(he,J).then(ce,function(le){return X("wasm streaming compile failed: "+le),X("falling back to ArrayBuffer instantiation"),pe(ce)})})).catch(b)}(),v.___wasm_call_ctors=function(){return(xe=v.___wasm_call_ctors=v.asm.r).apply(null,arguments)}),Se=(v._getModelBufferMemoryOffset=function(){return(v._getModelBufferMemoryOffset=v.asm.s).apply(null,arguments)},v._getInputMemoryOffset=function(){return(v._getInputMemoryOffset=v.asm.t).apply(null,arguments)},v._getInputHeight=function(){return(v._getInputHeight=v.asm.u).apply(null,arguments)},v._getInputWidth=function(){return(v._getInputWidth=v.asm.v).apply(null,arguments)},v._getInputChannelCount=function(){return(v._getInputChannelCount=v.asm.w).apply(null,arguments)},v._getOutputMemoryOffset=function(){return(v._getOutputMemoryOffset=v.asm.x).apply(null,arguments)},v._getOutputHeight=function(){return(v._getOutputHeight=v.asm.y).apply(null,arguments)},v._getOutputWidth=function(){return(v._getOutputWidth=v.asm.z).apply(null,arguments)},v._getOutputChannelCount=function(){return(v._getOutputChannelCount=v.asm.A).apply(null,arguments)},v._loadModel=function(){return(v._loadModel=v.asm.B).apply(null,arguments)},v._runInference=function(){return(v._runInference=v.asm.C).apply(null,arguments)},v.___errno_location=function(){return(Se=v.___errno_location=v.asm.E).apply(null,arguments)});function Te(J){this.name="ExitStatus",this.message="Program terminated with exit("+J+")",this.status=J}function ue(J){function Q(){ke||(ke=!0,v.calledRun=!0,z||(ie(re),ie(F),g(v),v.onRuntimeInitialized&&v.onRuntimeInitialized(),function(){if(v.postRun)for(typeof v.postRun=="function"&&(v.postRun=[v.postRun]);v.postRun.length;)ce=v.postRun.shift(),N.unshift(ce);var ce;ie(N)}()))}Z>0||(function(){if(v.preRun)for(typeof v.preRun=="function"&&(v.preRun=[v.preRun]);v.preRun.length;)ce=v.preRun.shift(),ee.unshift(ce);var ce;ie(ee)}(),Z>0||(v.setStatus?(v.setStatus("Running..."),setTimeout(function(){setTimeout(function(){v.setStatus("")},1),Q()},1)):Q()))}if(A=function J(){ke||ue(),ke||(A=J)},v.run=ue,v.preInit)for(typeof v.preInit=="function"&&(v.preInit=[v.preInit]);v.preInit.length>0;)v.preInit.pop()();return ue(),f.ready});l.exports=c},595:function(l){var m,c=(m=(m=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(f){var g,b,v=(f=f||{})!==void 0?f:{};v.ready=new Promise(function(J,Q){g=J,b=Q});var _,x={};for(_ in v)v.hasOwnProperty(_)&&(x[_]=v[_]);var C,I,U,M="./this.program",V=function(J,Q){throw Q};C=typeof window=="object",I=typeof importScripts=="function",U=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";var T,$,B="";(C||I)&&(I?B=self.location.href:typeof document!="undefined"&&document.currentScript&&(B=document.currentScript.src),m&&(B=m),B=B.indexOf("blob:")!==0?B.substr(0,B.lastIndexOf("/")+1):"",I&&($=function(J){var Q=new XMLHttpRequest;return Q.open("GET",J,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}),T=function(J,Q,ce){var pe=new XMLHttpRequest;pe.open("GET",J,!0),pe.responseType="arraybuffer",pe.onload=function(){pe.status==200||pe.status==0&&pe.response?Q(pe.response):ce()},pe.onerror=ce,pe.send(null)});var G,H=v.print||console.log.bind(console),X=v.printErr||console.warn.bind(console);for(_ in x)x.hasOwnProperty(_)&&(v[_]=x[_]);x=null,v.arguments&&v.arguments,v.thisProgram&&(M=v.thisProgram),v.quit&&(V=v.quit),v.wasmBinary&&(G=v.wasmBinary);var h,s=v.noExitRuntime||!0;typeof WebAssembly!="object"&&O("no native wasm support detected");var y,k,S,E,z=!1,te=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function W(J,Q,ce){for(var pe=Q+ce,he=Q;J[he]&&!(he>=pe);)++he;if(he-Q>16&&J.subarray&&te)return te.decode(J.subarray(Q,he));for(var le="";Q<he;){var Pe=J[Q++];if(128&Pe){var ae=63&J[Q++];if((224&Pe)!=192){var ve=63&J[Q++];if((Pe=(240&Pe)==224?(15&Pe)<<12|ae<<6|ve:(7&Pe)<<18|ae<<12|ve<<6|63&J[Q++])<65536)le+=String.fromCharCode(Pe);else{var Ce=Pe-65536;le+=String.fromCharCode(55296|Ce>>10,56320|1023&Ce)}}else le+=String.fromCharCode((31&Pe)<<6|ae)}else le+=String.fromCharCode(Pe)}return le}function Y(J){y=J,v.HEAP8=k=new Int8Array(J),v.HEAP16=new Int16Array(J),v.HEAP32=E=new Int32Array(J),v.HEAPU8=S=new Uint8Array(J),v.HEAPU16=new Uint16Array(J),v.HEAPU32=new Uint32Array(J),v.HEAPF32=new Float32Array(J),v.HEAPF64=new Float64Array(J)}v.INITIAL_MEMORY;var q,ee=[],re=[],F=[],N=[];re.push({func:function(){xe()}});var Z=0,A=null;function O(J){v.onAbort&&v.onAbort(J),X(J+=""),z=!0,J="abort("+J+"). Build with -s ASSERTIONS=1 for more info.";var Q=new WebAssembly.RuntimeError(J);throw b(Q),Q}function D(J,Q){return String.prototype.startsWith?J.startsWith(Q):J.indexOf(Q)===0}function ne(J){return D(J,"data:application/octet-stream;base64,")}function K(J){return D(J,"file://")}v.preloadedImages={},v.preloadedAudios={};var P,j,L="./tflite/tflite.wasm";function oe(J){try{if(J==L&&G)return new Uint8Array(G);if($)return $(J);throw"both async and sync fetching of the wasm failed"}catch(Q){O(Q)}}function ie(J){for(;J.length>0;){var Q=J.shift();if(typeof Q!="function"){var ce=Q.func;typeof ce=="number"?Q.arg===void 0?q.get(ce)():q.get(ce)(Q.arg):ce(Q.arg===void 0?null:Q.arg)}else Q(v)}}function se(J){return E[Se()>>2]=J,J}function ye(J){try{return h.grow(J-y.byteLength+65535>>>16),Y(h.buffer),1}catch{}}ne(L)||(P=L,L=v.locateFile?v.locateFile(P,B):(B=v.basePath||B)+P),j=U?function(){var J=process.hrtime();return 1e3*J[0]+J[1]/1e6}:typeof dateNow!="undefined"?dateNow:function(){return performance.now()};var fe={};function _e(){if(!_e.strings){var J={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:M||"./this.program"};for(var Q in fe)J[Q]=fe[Q];var ce=[];for(var Q in J)ce.push(Q+"="+J[Q]);_e.strings=ce}return _e.strings}var ke,Ee={mappings:{},buffers:[null,[],[]],printChar:function(J,Q){var ce=Ee.buffers[J];Q===0||Q===10?((J===1?H:X)(W(ce,0)),ce.length=0):ce.push(Q)},varargs:void 0,get:function(){return Ee.varargs+=4,E[Ee.varargs-4>>2]},getStr:function(J){var Q=function(ce,pe){return ce?W(S,ce,void 0):""}(J);return Q},get64:function(J,Q){return J}},be={a:function(){O()},n:function(J,Q){var ce;if(J===0)ce=Date.now();else{if(J!==1&&J!==4)return se(28),-1;ce=j()}return E[Q>>2]=ce/1e3|0,E[Q+4>>2]=ce%1e3*1e3*1e3|0,0},i:function(J,Q){O("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},e:function(J,Q){O("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(J,Q,ce){S.copyWithin(J,Q,Q+ce)},m:function(J){var Q,ce=S.length,pe=2147483648;if(J>pe)return!1;for(var he=1;he<=4;he*=2){var le=ce*(1+.2/he);if(le=Math.min(le,J+100663296),ye(Math.min(pe,((Q=Math.max(J,le))%65536>0&&(Q+=65536-Q%65536),Q))))return!0}return!1},o:function(J){for(var Q=j();j()-Q<J;);},p:function(J,Q){var ce=0;return _e().forEach(function(pe,he){var le=Q+ce;E[J+4*he>>2]=le,function(Pe,ae,ve){for(var Ce=0;Ce<Pe.length;++Ce)k[ae++>>0]=Pe.charCodeAt(Ce);k[ae>>0]=0}(pe,le),ce+=pe.length+1}),0},g:function(J,Q){var ce=_e();E[J>>2]=ce.length;var pe=0;return ce.forEach(function(he){pe+=he.length+1}),E[Q>>2]=pe,0},j:function(J){(function(Q,ce){s||(v.onExit&&v.onExit(Q),z=!0),V(Q,new Te(Q))})(J)},h:function(J){return 0},k:function(J,Q,ce,pe,he){},c:function(J,Q,ce,pe){for(var he=0,le=0;le<ce;le++){for(var Pe=E[Q+8*le>>2],ae=E[Q+(8*le+4)>>2],ve=0;ve<ae;ve++)Ee.printChar(J,S[Pe+ve]);he+=ae}return E[pe>>2]=he,0},d:function(){return 6},f:function(){return 28},b:function(J){switch(J){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return typeof navigator=="object"&&navigator.hardwareConcurrency||1}return se(28),-1}},xe=(function(){var J={a:be};function Q(he,le){var Pe=he.exports;v.asm=Pe,Y((h=v.asm.q).buffer),q=v.asm.D,function(ae){if(Z--,v.monitorRunDependencies&&v.monitorRunDependencies(Z),Z==0&&A){var ve=A;A=null,ve()}}()}function ce(he){Q(he.instance)}function pe(he){return function(){if(!G&&(C||I)){if(typeof fetch=="function"&&!K(L))return fetch(L,{credentials:"same-origin"}).then(function(le){if(!le.ok)throw"failed to load wasm binary file at '"+L+"'";return le.arrayBuffer()}).catch(function(){return oe(L)});if(T)return new Promise(function(le,Pe){T(L,function(ae){le(new Uint8Array(ae))},Pe)})}return Promise.resolve().then(function(){return oe(L)})}().then(function(le){return WebAssembly.instantiate(le,J)}).then(he,function(le){X("failed to asynchronously prepare wasm: "+le),O(le)})}if(Z++,v.monitorRunDependencies&&v.monitorRunDependencies(Z),v.instantiateWasm)try{return v.instantiateWasm(J,Q)}catch(he){return X("Module.instantiateWasm callback failed with error: "+he),!1}(G||typeof WebAssembly.instantiateStreaming!="function"||ne(L)||K(L)||typeof fetch!="function"?pe(ce):fetch(L,{credentials:"same-origin"}).then(function(he){return WebAssembly.instantiateStreaming(he,J).then(ce,function(le){return X("wasm streaming compile failed: "+le),X("falling back to ArrayBuffer instantiation"),pe(ce)})})).catch(b)}(),v.___wasm_call_ctors=function(){return(xe=v.___wasm_call_ctors=v.asm.r).apply(null,arguments)}),Se=(v._getModelBufferMemoryOffset=function(){return(v._getModelBufferMemoryOffset=v.asm.s).apply(null,arguments)},v._getInputMemoryOffset=function(){return(v._getInputMemoryOffset=v.asm.t).apply(null,arguments)},v._getInputHeight=function(){return(v._getInputHeight=v.asm.u).apply(null,arguments)},v._getInputWidth=function(){return(v._getInputWidth=v.asm.v).apply(null,arguments)},v._getInputChannelCount=function(){return(v._getInputChannelCount=v.asm.w).apply(null,arguments)},v._getOutputMemoryOffset=function(){return(v._getOutputMemoryOffset=v.asm.x).apply(null,arguments)},v._getOutputHeight=function(){return(v._getOutputHeight=v.asm.y).apply(null,arguments)},v._getOutputWidth=function(){return(v._getOutputWidth=v.asm.z).apply(null,arguments)},v._getOutputChannelCount=function(){return(v._getOutputChannelCount=v.asm.A).apply(null,arguments)},v._loadModel=function(){return(v._loadModel=v.asm.B).apply(null,arguments)},v._runInference=function(){return(v._runInference=v.asm.C).apply(null,arguments)},v.___errno_location=function(){return(Se=v.___errno_location=v.asm.E).apply(null,arguments)});function Te(J){this.name="ExitStatus",this.message="Program terminated with exit("+J+")",this.status=J}function ue(J){function Q(){ke||(ke=!0,v.calledRun=!0,z||(ie(re),ie(F),g(v),v.onRuntimeInitialized&&v.onRuntimeInitialized(),function(){if(v.postRun)for(typeof v.postRun=="function"&&(v.postRun=[v.postRun]);v.postRun.length;)ce=v.postRun.shift(),N.unshift(ce);var ce;ie(N)}()))}Z>0||(function(){if(v.preRun)for(typeof v.preRun=="function"&&(v.preRun=[v.preRun]);v.preRun.length;)ce=v.preRun.shift(),ee.unshift(ce);var ce;ie(ee)}(),Z>0||(v.setStatus?(v.setStatus("Running..."),setTimeout(function(){setTimeout(function(){v.setStatus("")},1),Q()},1)):Q()))}if(A=function J(){ke||ue(),ke||(A=J)},v.run=ue,v.preInit)for(typeof v.preInit=="function"&&(v.preInit=[v.preInit]);v.preInit.length>0;)v.preInit.pop()();return ue(),f.ready});l.exports=c},423:function(l,m,c){function f(s){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},f(s)}c.d(m,{default:function(){return h}});var g=c(861),b=c(671),v=c(144),_=c(942),x=c(757),C=c.n(x),I=c(877),U=c(147),M=c(55),V=c(245),T=c(618),$=c(190),B=c.n($);function G(s,y){var k=Object.keys(s);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(s);y&&(S=S.filter(function(E){return Object.getOwnPropertyDescriptor(s,E).enumerable})),k.push.apply(k,S)}return k}var H=function(s){for(var y=1;y<arguments.length;y++){var k=arguments[y]!=null?arguments[y]:{};y%2?G(Object(k),!0).forEach(function(S){(0,_.Z)(s,S,k[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(k)):G(Object(k)).forEach(function(S){Object.defineProperty(s,S,Object.getOwnPropertyDescriptor(k,S))})}return s}({},T.feature);(0,M.ok)()&&console.log(H),(0,M.ok)()&&console.log("SIMD",T.feature.simd);var X=function(){function s(A,O){(0,b.Z)(this,s),this.times={ref:Date.now()},this.times.init=Date.now()-this.times.ref,this.type="background",this.params=O||{},this.model=O.model||"selfie",this.model_version=O.version,this.enableOffscreen=this.checkSupport(O.offscreen),this.debug=this.params.debug||(0,M.ok)(),this.id=O.id||(0,I.v4)(),this.version=U.i8,this.serverType=this.params.serverType||"",this.defaults={},this.defaults.frameRate=30,this.defaults.segmentationFrameRate=15,this.frameRate=O.frameRate||this.defaults.frameRate,this.segmentationFrameRate=O.segmentationFrameRate||this.defaults.segmentationFrameRate,this.passthrough=O.passthrough||!1,this.serverType!=="production"&&this.serverType!==""||(0,V.EK)(A,O),this.defaultBackground="https://files.vectorly.io/demo/background-filter/images/virtual-background-1.jpg",this.defaultBlurRadius=5,this.background=this.params.background||this.defaultBackground,this.blurRadius=this.params.blurRadius||this.defaultBlurRadius,this.error=null,this.loadP=this.loadCore(this.enableOffscreen);try{this.input=this._getInput(A),this.inputClone=this.input?this.input.clone():null,this.registerInputListeners(),this.log("Input to BackgroundFilter is",this.input),this.video=this.video||this._initVideo(),this.video.id="vid-"+this.id,this.processorP=this._initializeCoreNetwork(),this.outputP=this._createNewStream()}catch(D){throw this.error=D,D}}var y,k,S,E,z,te,W,Y,q,ee,re,F,N,Z;return(0,v.Z)(s,[{key:"loadCore",value:(Z=(0,g.Z)(C().mark(function A(O){return C().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return this.times.load_core_start=Date.now()-this.times.ref,D.next=3,(0,V.Zq)(O);case 3:return this.vectorlyCore=D.sent,D.abrupt("return",!0);case 5:case"end":return D.stop()}},A,this)})),function(A){return Z.apply(this,arguments)})},{key:"checkSupport",value:function(A){var O=Boolean(HTMLCanvasElement.prototype.transferControlToOffscreen);return A==null?O:A===!0||A==="true"?(O||console.warn("transferControlToOffscreen is not supported but params.offscreen is set to ".concat(A,"; Set params.offscreen to null to default to offscreen if supported")),!0):(this.log("params.offscreen is ".concat(A,"; running on main thread")),!1)}},{key:"registerInputListeners",value:function(){var A,O=this,D=this.input,ne=this.originalInput;if(D instanceof MediaStream){ne instanceof MediaStream?A=ne.getVideoTracks():ne instanceof MediaStreamTrack&&(A=[ne]);var K=[];this.log("Input tracks in registerInputListeners",A,ne);for(var P=0;P<A.length;P++){var j=A[P];this.log(P,"tracks",j.id),K.push(j.id),j.addEventListener("ended",function(){O.log("In listener",O.stop),O.stop()})}var L=this;MediaStreamTrack.prototype._stop=MediaStreamTrack.prototype._stop||MediaStreamTrack.prototype.stop,MediaStreamTrack.prototype._iter=(MediaStreamTrack.prototype._iter||-1)+1;var oe=MediaStreamTrack.prototype._stop,ie=MediaStreamTrack.prototype._inputFilterMap||{};K.forEach(function(se){ie[se]=ie[se]||[],ie[se].push(L)}),MediaStreamTrack.prototype._inputFilterMap=ie,MediaStreamTrack.prototype._iter===0&&(MediaStreamTrack.prototype.stop=function(){var se=arguments;L.log("in proto",se,this,L,K),oe.call(this);var ye=MediaStreamTrack.prototype._inputFilterMap[this.id];ye&&ye.forEach(function(fe){fe.stop()})})}}},{key:"_getInput",value:function(A){if(this.log("_getInput",A),A instanceof MediaStream){this.originalInput=A;var O=this.originalInput.getVideoTracks()[0];this.frameRate=(this.params.frameRate?Math.min(this.params.frameRate,O.getSettings().frameRate):O.getSettings().frameRate)||this.defaults.frameRate,this.segmentationFrameRate=Math.min(this.frameRate,this.params.segmentationFrameRate||this.defaults.segmentationFrameRate);var D=Math.ceil(this.frameRate/this.segmentationFrameRate);return this.segmentationFrameRate=this.frameRate/D,this.log("_getInput ======= Original input fps is",O.getSettings().frameRate,O.getSettings()),A.clone()}if(A instanceof MediaStreamTrack){if(A.kind==="video"){this.originalInput=A;var ne=this.originalInput;this.frameRate=(this.params.frameRate?Math.min(this.params.frameRate,ne.getSettings().frameRate):ne.getSettings().frameRate)||this.defaults.frameRate,this.segmentationFrameRate=Math.min(this.frameRate,this.params.segmentationFrameRate||this.defaults.segmentationFrameRate);var K=Math.ceil(this.frameRate/this.segmentationFrameRate);return this.segmentationFrameRate=this.frameRate/K,this.log("_getInput ======= Original input fps is",ne.getSettings().frameRate,ne.getSettings()),new MediaStream([A.clone()])}var P="Input to BackgroundFilter is: ".concat(A,"; Expected input.kind to be video but it is ").concat(A.kind);throw console.error(P),new Error(P)}if(A instanceof HTMLMediaElement)return A.captureStream?A.captureStream():A.mozCaptureStream?A.mozCaptureStream():(this.video=A,null);var j;try{j=A.constructor.name}catch{j=f(A)}var L="In _getInput; input is of invalid type: type ".concat(j," - ").concat(A);throw console.error(L),new Error(L)}},{key:"_initializeCoreNetwork",value:(N=(0,g.Z)(C().mark(function A(){var O,D,ne;return C().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return this.times.init_core_start=Date.now()-this.times.ref,K.next=3,(0,M.uF)(this.video);case 3:return O=K.sent,K.next=6,this.loadP;case 6:return this.times.load_core_done=Date.now()-this.times.ref,K.next=9,(0,V.$A)(this.model);case 9:if(K.sent){K.next=12;break}throw new Error("model ".concat(this.model," is not supported"));case 12:return K.t0=this.vectorlyCore,K.t1=this.video,K.t2=this.input,K.t3=this.params.token,K.t4=this.id,K.t5=(0,V.PD)(this.model),K.t6=Math.ceil(this.frameRate/this.segmentationFrameRate),K.next=21,this._getBackground(this.background);case 21:return K.t7=K.sent,K.t8={passthrough:!1,skipFactor:K.t6,background:K.t7},K.t9={w:O.width,h:O.height},K.t10=this.debug,K.t11=this.frameRate,K.t12=this.serverType,K.t13={stream:K.t2,token:K.t3,id:K.t4,networkParams:K.t5,networkOptions:K.t8,renderSize:K.t9,debug:K.t10,framerate:K.t11,debugRender:!1,container:"disable",serverType:K.t12,analyticsEnabled:!1},D=new K.t0(K.t1,K.t13),this.log(D,D.initialized),K.next=32,D.initialized;case 32:if(ne=K.sent,this.log("In _initializeCoreNetwork",ne,D),this.times.init_core_end=Date.now()-this.times.ref,ne!==!1){K.next=38;break}throw this.log("Initialized is",this.initialized,D.error),new Error(D.error);case 38:return D.canvas.style.visibility="hidden",K.abrupt("return",{canvas:D.renderCanvas||D.canvas,processor:D});case 40:case"end":return K.stop()}},A,this)})),function(){return N.apply(this,arguments)})},{key:"_getBackground",value:(F=(0,g.Z)(C().mark(function A(O){var D,ne,K,P,j;return C().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(O!=="blur"){L.next=4;break}return L.abrupt("return",{type:"blur",radius:this.blurRadius});case 4:if(O!=="binary"&&O!=="transparent"){L.next=8;break}return L.abrupt("return",{type:O});case 8:if(O&&typeof O!="string"){L.next=18;break}return O?(ne=O,B()(ne)&&(ne=document.URL.substr(0,document.URL.lastIndexOf("/"))+"/"+ne)):(ne=this.defaultBackground,console.warn("in background is not given; Setting to defaultBackground",this.defaultBackground)),L.next=12,(0,V.po)(ne);case 12:return K=L.sent,L.next=15,createImageBitmap(K);case 15:D=L.sent,L.next=31;break;case 18:if(!(O instanceof HTMLImageElement)){L.next=27;break}return L.next=21,(0,V.po)(O);case 21:return L.next=23,createImageBitmap(O);case 23:return P=L.sent,L.abrupt("return",{type:"virtual",image:P});case 27:return L.next=29,createImageBitmap(O);case 29:return j=L.sent,L.abrupt("return",{type:"virtual",image:j});case 31:return L.abrupt("return",{type:"virtual",image:D});case 32:case"end":return L.stop()}},A,this)})),function(A){return F.apply(this,arguments)})},{key:"_getBlurRadius",value:function(A){return(!A||A<1)&&(console.warn("in blurRadius:",A,"should be greater than equal to 1; Setting to defaultBlurRadius",this.defaultBlurRadius),A=this.defaultBlurRadius),{type:"blur",radius:A}}},{key:"changeBackground",value:(re=(0,g.Z)(C().mark(function A(O){var D,ne,K;return C().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return this.log("Change background to",O,"from",this.background),P.prev=1,P.next=4,this.processorP;case 4:return D=P.sent,ne=D.processor,P.next=8,this._getBackground(O);case 8:return K=P.sent,P.next=11,ne.updateNetworkOptions({background:K});case 11:this.background=O,P.next=18;break;case 14:throw P.prev=14,P.t0=P.catch(1),console.error(P.t0),P.t0;case 18:case"end":return P.stop()}},A,this,[[1,14]])})),function(A){return re.apply(this,arguments)})},{key:"requestFrameRate",value:(ee=(0,g.Z)(C().mark(function A(O){var D,ne,K,P,j,L;return C().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return D=O.frameRate,ne=O.segmentationFrameRate,this.log("Change frameRate to",D,"from",this.frameRate),oe.prev=2,oe.next=5,this.processorP;case 5:return K=oe.sent,P=K.processor,this.frameRate=D||this.frameRate||this.defaults.frameRate,this.segmentationFrameRate=Math.min(this.frameRate,ne||this.segmentationFrameRate||this.defaults.segmentationFrameRate),j=Math.ceil(this.frameRate/this.segmentationFrameRate),this.segmentationFrameRate=this.frameRate/j,oe.next=13,P.updateNetworkOptions({framerate:this.frameRate,skipFactor:j});case 13:if(!P.glHandle||P.glHandle.framerate===this.frameRate){oe.next=20;break}return this.log(P.glHandle.framerate,this.frameRate),this.frameRate=P.glHandle.framerate,L=Math.ceil(this.frameRate/this.segmentationFrameRate),this.segmentationFrameRate=this.frameRate/L,oe.next=20,P.updateNetworkOptions({framerate:this.frameRate,skipFactor:L});case 20:return oe.abrupt("return",{frameRate:this.frameRate,segmentationFrameRate:this.segmentationFrameRate});case 23:throw oe.prev=23,oe.t0=oe.catch(2),console.error(oe.t0),oe.t0;case 27:case"end":return oe.stop()}},A,this,[[2,23]])})),function(A){return ee.apply(this,arguments)})},{key:"changeBlurRadius",value:(q=(0,g.Z)(C().mark(function A(O){var D,ne;return C().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.prev=0,K.next=3,this.processorP;case 3:return D=K.sent,ne=D.processor,this.log("Change blur radius to",O,"from",this.blurRadius),K.next=8,ne.updateNetworkOptions({background:this._getBlurRadius(O)});case 8:this.blurRadius=O,K.next=15;break;case 11:throw K.prev=11,K.t0=K.catch(0),console.error(K.t0),K.t0;case 15:case"end":return K.stop()}},A,this,[[0,11]])})),function(A){return q.apply(this,arguments)})},{key:"_createNewStream",value:(Y=(0,g.Z)(C().mark(function A(){var O,D,ne;return C().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.prev=0,K.next=3,this.processorP;case 3:return O=K.sent,D=O.canvas,ne=O.processor,this.canvas=D,this.processor=ne,this.processOutput=D.captureStream(),this.output=this.processOutput,K.abrupt("return",this.output);case 13:throw K.prev=13,K.t0=K.catch(0),console.error("ERROR in createNewStream",K.t0),K.t0;case 17:case"end":return K.stop()}},A,this,[[0,13]])})),function(){return Y.apply(this,arguments)})},{key:"_getOrCreateOutput",value:(W=(0,g.Z)(C().mark(function A(){var O;return C().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.outputP;case 2:if((O=D.sent).getVideoTracks()[0].readyState!=="ended"){D.next=9;break}return this.outputP=this._createNewStream(),D.next=8,this.outputP;case 8:O=D.sent;case 9:return D.abrupt("return",O);case 10:case"end":return D.stop()}},A,this)})),function(){return W.apply(this,arguments)})},{key:"getOutput",value:(te=(0,g.Z)(C().mark(function A(){var O;return C().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,this._getOrCreateOutput();case 3:return O=D.sent,D.abrupt("return",O);case 7:throw D.prev=7,D.t0=D.catch(0),console.error(this.error),D.t0;case 11:case"end":return D.stop()}},A,this,[[0,7]])})),function(){return te.apply(this,arguments)})},{key:"getOutputTrack",value:(z=(0,g.Z)(C().mark(function A(){var O;return C().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,this._getOrCreateOutput();case 3:return O=D.sent,D.abrupt("return",O.getVideoTracks()[0]);case 7:throw D.prev=7,D.t0=D.catch(0),console.error(this.error),D.t0;case 11:case"end":return D.stop()}},A,this,[[0,7]])})),function(){return z.apply(this,arguments)})},{key:"disable",value:(E=(0,g.Z)(C().mark(function A(){return C().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.processorP;case 2:if(!this.passthrough||!this.input.active){O.next=7;break}return O.next=5,this.processor.updateNetworkOptions({passthrough:!0});case 5:O.next=9;break;case 7:this.processor.disable(),this.output=this.inputClone;case 9:return this.video.style.visibility="hidden",O.abrupt("return",this.output);case 11:case"end":return O.stop()}},A,this)})),function(){return E.apply(this,arguments)})},{key:"enable",value:(S=(0,g.Z)(C().mark(function A(){return C().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.processorP;case 2:if(!this.passthrough||!this.input.active){O.next=7;break}return O.next=5,this.processor.updateNetworkOptions({passthrough:!1});case 5:O.next=8;break;case 7:this.processor.enable();case 8:return this.output=this.processOutput,this.canvas.style.visibility="hidden",O.abrupt("return",this.output);case 11:case"end":return O.stop()}},A,this)})),function(){return S.apply(this,arguments)})},{key:"_initVideo",value:function(){var A=document.createElement("video");return A.style.visibility="hidden",A.style.display="none",A.id="vid-"+this.id,A.setAttribute("playsinline",null),A.setAttribute("autoplay",null),A.srcObject=this.input,document.body.appendChild(A),(0,M.yA)(A)||A.play(),A}},{key:"_getVideoTrack",value:function(A){return A instanceof MediaStream?A.getVideoTracks()[0]:A instanceof MediaStreamTrack?A.kind==="video"?A:void console.warn("Error in _getVideoTrack; input.kind expected to be video but is",A.kind):void 0}},{key:"_isSameTrack",value:function(A,O){var D=this._getVideoTrack(A),ne=this._getVideoTrack(O);return D&&ne&&D.id===ne.id}},{key:"changeInput",value:(k=(0,g.Z)(C().mark(function A(O){var D,ne,K=arguments;return C().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(D=K.length>1&&K[1]!==void 0&&K[1],!this._isSameTrack(O,this.originalInput)){P.next=4;break}return console.warn("changeInput called with same input as the one current filter is using; returning without changing"),P.abrupt("return");case 4:return D&&this.stop(),this.input=this._getInput(O),P.next=8,this.processorP;case 8:return this.input&&(this.inputClone=this.input?this.input.clone():null,this.video.srcObject=this.input,this.processor.updateStream&&this.processor.updateStream(this.input)),this.registerInputListeners(),P.next=12,(0,M.uF)(this.video);case 12:ne=P.sent,this.processor.setRenderSize({w:ne.width,h:ne.height});case 14:case"end":return P.stop()}},A,this)})),function(A){return k.apply(this,arguments)})},{key:"stop",value:function(){var A=this.input.getVideoTracks();this.log("Stopping input tracks",this.input,A);for(var O=0;O<A.length;++O)A[O]._stop();if(this.originalInput){if(this.log("Original Input",this.originalInput),this.originalInput instanceof MediaStreamTrack)this.originalInput._stop();else if(this.originalInput instanceof MediaStream){A=this.originalInput.getTracks(),this.log("Stopping originalInput",this.originalInput,A);for(var D=0;D<A.length;++D)A[D]._stop()}}A=this.inputClone.getVideoTracks(),this.log("Stopping",this.inputClone,A,this.inputClone.getTracks());for(var ne=0;ne<A.length;++ne)A[ne]._stop()}},{key:"destroy",value:(y=(0,g.Z)(C().mark(function A(){var O,D,ne,K;return C().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,this.processorP;case 2:O=P.sent,(D=O.processor).glHandle&&D.glHandle.destroy(),(ne=document.getElementById("canv-"+D.id))&&ne.remove(),(K=document.getElementById("vid-"+this.id))&&K.remove();case 9:case"end":return P.stop()}},A,this)})),function(){return y.apply(this,arguments)})},{key:"log",value:function(){this.debug&&console.log.apply(null,arguments)}}]),s}();X.isSupported=(0,g.Z)(C().mark(function s(){var y;return C().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,V.Gb)();case 2:return y=k.sent,k.abrupt("return",y);case 4:case"end":return k.stop()}},s)})),X.isModelSupported=function(){var s=(0,g.Z)(C().mark(function y(k){var S;return C().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,V.$A)(k);case 2:return S=E.sent,E.abrupt("return",S);case 4:case"end":return E.stop()}},y)}));return function(y){return s.apply(this,arguments)}}(),X.checkPerformance=V.$_;var h=X},720:function(l,m,c){c.d(m,{default:function(){return y}});var f=c(861),g=c(671),b=c(144),v=c(757),_=c.n(v),x=c(877),C=c(147),I=c(55),U=c(245),M=c(190),V=c.n(M),T=c(907),$=c(181);function B(k){return function(S){if(Array.isArray(S))return(0,T.Z)(S)}(k)||function(S){if(typeof Symbol!="undefined"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}(k)||(0,$.Z)(k)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var G=c(942),H=c(885);function X(k,S){var E=Object.keys(k);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(k);S&&(z=z.filter(function(te){return Object.getOwnPropertyDescriptor(k,te).enumerable})),E.push.apply(E,z)}return E}function h(k){for(var S=1;S<arguments.length;S++){var E=arguments[S]!=null?arguments[S]:{};S%2?X(Object(E),!0).forEach(function(z){(0,G.Z)(k,z,E[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(E)):X(Object(E)).forEach(function(z){Object.defineProperty(k,z,Object.getOwnPropertyDescriptor(E,z))})}return k}(function(){var k,S,E,z=["_imageBitmapOptions","resizeWidth","resizeHeight","resizeQuality","imageOrientation"],te=["_Blob","_ImageData","_SVGBlob","_SVGImageElement"],W=["resizeWidth","resizeHeight","resizeQuality","imageOrientation","premultiplyAlpha","colorSpaceConversion"],Y={ResizeQuality:["pixelated","low","medium","high"],ImageOrientation:["none","flipY"]},q={COMMON_HEADER:"Failed to execute 'createImageBitmap': ",INVALID_STATE_IMAGE:"Provided image was in an invalid state.",ARGUMENT_COUNT_1:"At least one argument is required.",ARGUMENT_COUNT_N:"%s is not a valid argument count for any overload",CROP_RECT_ZERO:"The crop rect width passed to createImageBitmap must be nonzero",ALLOCATION_FAILED:"The ImageBitmap could not be allocated.",INVALID_SOURCE:"Argument 1 could not be converted to any of: HTMLImageElement, SVGImageElement, HTMLCanvasElement, HTMLVideoElement, ImageBitmap, Blob, CanvasRenderingContext2D, ImageData.",ENUM:"'%v' is not a valid value for enumeration %e",ALLOCATION:"The ImageBitmap couldn't be allocated."},ee=["HTMLImageElement","SVGImageElement","HTMLVideoElement","HTMLCanvasElement","OffscreenCanvas","ImageBitmap"],re="http://www.w3.org/2000/svg",F="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function N(we){try{return we.slice(0,0),!1}catch{return!0}}var Z=new Int32Array(1);function A(we){return Number.isFinite(we)?(Z[0]=we,Z[0]):NaN}function O(we){var me=A(we);if(isNaN(me))throw new TypeError("Invalid long value");return me}function D(we,me){var ge=Object.assign(document.createElement("canvas"),{width:we,height:me}).getContext("2d");if(we&&me&&!function(de){if(de.isContextLost)return de.translate(0,0),!de.isContextLost();var Oe=!1;try{de.fillRect(0,0,1,1),Oe=de.getImageData(0,0,1,1).data[3]!==0}finally{return de.clearRect(0,0,1,1),Oe}}(ge))throw new DOMException(q.ALLOCATION,"InvalidStateError");return ge}function ne(we){return function(me){var ge=globalThis[me];return ge&&we instanceof ge}}var K=globalThis.createImageBitmap,P=!!K&&function(){for(var we=arguments.length,me=new Array(we),ge=0;ge<we;ge++)me[ge]=arguments[ge];return K.call.apply(K,[globalThis].concat(me))};function j(we){var me=new Image;return me.src=we,new Promise(function(ge,de){me.onload=function(Oe){Te(me),ge(me)},me.onerror=function(Oe){var Ae=new DOMException(q.INVALID_STATE_IMAGE,"InvalidStateError");de(Ae)}})}function L(we){return j(we.getAttribute("href")||we.getAttributeNS("http://www.w3.org/1999/xlink","href"))}var oe=q.COMMON_HEADER;function ie(we,me,ge){var de=Y[ge],Oe=we[me];if(Oe!==void 0&&!de.includes(Oe)){var Ae=q.ENUM.replace("%v",Oe).replace("%e",ge);throw new TypeError(Ae)}}function se(we){for(var me=arguments.length,ge=new Array(me>1?me-1:0),de=1;de<me;de++)ge[de-1]=arguments[de];var Oe,Ae=ge.map(A),De=(0,H.Z)(Ae,4),Ue=De[0],Fe=De[1],ze=De[2],Be=De[3],Ie=(ge.length===1?ge[0]:ge[4])||{},Ge="resizeWidth"in Ie&&O(Ie.resizeWidth),Ve="resizeHeight"in Ie&&O(Ie.resizeHeight);ie(Ie,"resizeQuality","ResizeQuality"),ie(Ie,"imageOrientation","ImageOrientation");var je=arguments.length;if(!je)throw new TypeError(oe+q.ARGUMENT_COUNT_1);if(je>2&&je<5)throw q.ARGUMENT_COUNT_N.replace("%s",je),new TypeError(oe+err_count_msg);if(je>=5){if(!ze||!Be)throw new RangeError(oe+q.CROP_RECT_ZERO);Oe={sx:Ue=Ue||0,sy:Fe=Fe||0,sw:ze,sh:Be}}if(Ge===0||Ve===0){var Je=oe+q.ALLOCATION_FAILED;throw new DOMException(Je,"InvalidStateError")}return h({cropRect:Oe},Ie)}function ye(we){for(var me=arguments.length,ge=new Array(me>1?me-1:0),de=1;de<me;de++)ge[de-1]=arguments[de];var Oe=ge.length;return we.has("_imageBitmapOptions")&&[2,6].includes(Oe)?ge.slice(0,Oe-1):ge}function fe(we){var me=ne(we);return me("HTMLImageElement")?{width:we.naturalWidth,height:we.naturalHeight}:me("HTMLVideoElement")?{width:we.videoWidth,height:we.videoHeight}:me("SVGImageElement")?{width:NaN,height:NaN}:me("HTMLCanvasElement")||me("OffscreenCanvas")||me("ImageBitmap")||me("ImageData")?we:{width:NaN,height:NaN}}function _e(we,me){var ge=function(Je,He){var We=fe(Je),Ze=We.width,qe=We.height,Ye=He.resizeWidth,kt=He.resizeHeight,st=He.cropRect||{sx:0,sy:0,sw:Ze,sh:qe},ct={dx:0,dy:0,dw:Ye||Math.abs(st.sw),dh:kt||Math.abs(st.sh)},et=function(Tt,St,at,ot){var tt=at.sx,rt=at.sy,Ke=at.sw,Qe=at.sh,ut=ot.dx,lt=ot.dy,nt=ot.dw,it=ot.dh;Ke<0&&(tt+=Ke,Ke=Math.abs(Ke)),Qe<0&&(rt+=Qe,Qe=Math.abs(Qe)),nt<0&&(ut+=nt,nt=Math.abs(nt)),it<0&&(lt+=it,it=Math.abs(it));var dt=Math.max(tt,0),ht=Math.min(tt+Ke,Tt),ft=Math.max(rt,0),mt=Math.min(rt+Qe,St),gt=nt/Ke,vt=it/Qe;return{sx:dt,sy:ft,sw:ht-dt,sh:mt-ft,dx:tt<0?ut-tt*gt:ut,dy:rt<0?lt-rt*vt:lt,dw:(ht-dt)*gt,dh:(mt-ft)*vt}}(Ze,qe,st,ct);return et.resizeQuality=He.resizeQuality,et.flipY=He.imageOrientation==="flipY",et.width=ct.dw,et.height=ct.dh,et}(we,me),de=(fe(we).height,ge.sx),Oe=ge.sy,Ae=ge.sw,De=ge.sh,Ue=ge.dx,Fe=ge.dy,ze=ge.dw,Be=ge.dh,Ie=ge.flipY,Ge=ge.resizeQuality,Ve=D(ge.width,ge.height),je=Ve.canvas;return Ge==="pixelated"?Ve.imageSmoothingEnabled=!1:Ge&&(Ve.imageSmoothingQuality=Ge),Ve.drawImage(we,de,Oe,Ae,De,Ue,Fe,ze,Be),Ie&&(Ve.globalCompositeOperation="copy",Ve.setTransform(1,0,0,-1,0,je.height),Ve.drawImage(je,0,0)),je}function ke(we,me){return Ee.apply(this,arguments)}function Ee(){return Ee=(0,f.Z)(_().mark(function we(me,ge){var de,Oe;return _().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return de=globalThis.URL.createObjectURL(me),Ae.next=3,j(de);case 3:return Oe=Ae.sent,Ae.abrupt("return",(globalThis.URL.revokeObjectURL(me),_e(Oe,ge)));case 5:case"end":return Ae.stop()}},we)})),Ee.apply(this,arguments)}function be(we,me){return xe.apply(this,arguments)}function xe(){return xe=(0,f.Z)(_().mark(function we(me,ge){var de,Oe,Ae,De,Ue,Fe,ze,Be,Ie,Ge,Ve,je,Je,He,We,Ze,qe;return _().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return de=ge.resizeWidth,Oe=ge.resizeHeight,Ae=ge.resizeQuality,De=ge.imageOrientation,Ue=ge.cropRect||{},Fe=Ue.sx||0,ze=Ue.sy||0,Be=Ue.sw||me.width,Ie=Ue.sh||me.height,Ge=Be<0?-1*Be-Fe:-Fe,Ve=Ie<0?-1*Ie-ze:-ze,(je=D(Math.abs(Be),Math.abs(Ie))).putImageData(me,Ge,Ve,Fe,ze,Be,Ie),Je=De==="flipY",He=de||Je,de?(We=D(de,Oe),Ae==="pixelated"?We.imageSmoothingEnabled=!1:We.imageSmoothingQuality=Ae):(We=je,je.globalCompositeOperation="copy"),Ze=je.canvas,qe=We.canvas,Ye.abrupt("return",(Je&&We.setTransform(1,0,0,-1,0,qe.height),He&&We.drawImage(Ze,0,0,Ze.width,Ze.height,0,0,qe.width,qe.height),qe));case 6:case"end":return Ye.stop()}},we)})),xe.apply(this,arguments)}function Se(){var we=q.COMMON_HEADER+q.INVALID_STATE_IMAGE;throw new DOMException(we,"InvalidStateError")}function Te(we){var me=ne(we);if(me("HTMLCanvasElement")||me("OffscreenCanvas")||me("ImageBitmap"))we.width!==0&&we.height!==0||Se();else if(me("HTMLImageElement")||me("HTMLVideoElement")||me("SVGImageElement")){var ge=fe(we),de=ge.width,Oe=ge.height;de!==0&&Oe!==0||Se();var Ae=!1;try{Ae=!D(0,0).createPattern(we,"no-repeat")}catch{return"maybe"}Ae&&Se()}return!0}var ue=!1,J=function(){if(!P){var we=z.concat(te);return new Set(we)}var me=[ce()],ge=new Set(me.flat()),de=z.filter(function(Oe){return!ge.has(Oe)});return new Set(de)}(),Q=(0,f.Z)(_().mark(function we(){var me,ge,de;return _().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(P){Oe.next=2;break}return Oe.abrupt("return",(ue=!0,J));case 2:return me=[pe(),le(),ae(),Ce()],Oe.next=5,Promise.all(me);case 5:return ge=Oe.sent,de=new Set(ge.flat()),Oe.abrupt("return",(te.filter(function(Ae){return!de.has(Ae)}).forEach(function(Ae){return J.add(Ae)}),ue=!0,J));case 8:case"end":return Oe.stop()}},we)}))();function ce(){var we=[],me={};return W.forEach(function(ge){Object.defineProperty(me,ge,{get:function(){we.push(ge)}})}),P(new ImageData(1,1),me).then(function(ge){return ge.close()}).catch(function(){}),we.length&&we.push("_imageBitmapOptions"),we}function pe(){return he.apply(this,arguments)}function he(){return he=(0,f.Z)(_().mark(function we(){var me,ge;return _().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return me=[],de.next=3,fetch(F).then(function(Oe){return Oe.ok&&Oe.blob()});case 3:return ge=de.sent,de.prev=4,de.next=7,P(ge);case 7:if(de.t0=de.sent.width,de.t1=de.t0===1,!de.t1){de.next=11;break}me.push("_Blob");case 11:de.next=16;break;case 13:de.prev=13,de.t2=de.catch(4),console.log(de.t2);case 16:return de.abrupt("return",me);case 17:case"end":return de.stop()}},we,null,[[4,13]])})),he.apply(this,arguments)}function le(){return Pe.apply(this,arguments)}function Pe(){return Pe=(0,f.Z)(_().mark(function we(){var me,ge;return _().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return me=[],ge=function(Oe,Ae){try{return new ImageData(1,1)}catch{return create2dContext(0,0).createImageData(1,1)}}(),de.prev=1,de.next=4,P(ge);case 4:if(de.t0=de.sent.width,de.t1=de.t0===1,!de.t1){de.next=8;break}me.push("_ImageData");case 8:de.next=12;break;case 10:de.prev=10,de.t2=de.catch(1);case 12:return de.abrupt("return",me);case 13:case"end":return de.stop()}},we,null,[[1,10]])})),Pe.apply(this,arguments)}function ae(){return ve.apply(this,arguments)}function ve(){return ve=(0,f.Z)(_().mark(function we(){var me,ge;return _().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return me=[],ge=new Blob(['<svg width="1" height="1" xmlns="'.concat(re,`">
      <rect width="1" height="1"/>
    </svg>`)],{type:"image/svg+xml"}),de.prev=1,de.next=4,P(ge);case 4:if(de.t0=de.sent.width,de.t1=de.t0===1,!de.t1){de.next=8;break}me.push("_SVGBlob");case 8:de.next=12;break;case 10:de.prev=10,de.t2=de.catch(1);case 12:return de.abrupt("return",me);case 13:case"end":return de.stop()}},we,null,[[1,10]])})),ve.apply(this,arguments)}function Ce(){return Le.apply(this,arguments)}function Le(){return Le=(0,f.Z)(_().mark(function we(){var me,ge,de,Oe,Ae;return _().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(me=[],"SVGImageElement"in globalThis){De.next=3;break}return De.abrupt("return",me);case 3:ge=function(Ue){return new Promise(function(Fe){return setTimeout(Fe,Ue)})},(de=document.createElementNS(re,"image")).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",F),Oe=function(){try{return Te(de),!1}catch{return!0}},Ae=0;case 7:return De.next=9,ge(10);case 9:if(Oe()&&++Ae<300){De.next=7;break}case 10:return De.prev=10,De.next=13,P(de);case 13:me.push("_SVGImageElement"),De.next=19;break;case 16:De.prev=16,De.t0=De.catch(10),console.error(De.t0);case 19:return De.abrupt("return",me);case 20:case"end":return De.stop()}},we,null,[[10,16]])})),Le.apply(this,arguments)}function Re(we,me,ge){var de=ne(ge);return de("Blob")&&(we.has("_Blob")||(ge!=null&&ge.type,we.has("_SVGBlob")))?!0:!(!de("ImageData")||!we.has("_ImageData"))||!(!de("SVGImageElement")||!we.has("_SVGImageElement"))||!!Object.keys(me).some(function(Oe){return we.has(Oe)})}function Me(we,me){if(ue)return!1;var ge=ne(we);return["Blob","ImageData","SVGImageElement"].some(ge)}var Ne=function(we){return Object.getOwnPropertyDescriptor(HTMLCanvasElement.prototype,we)};function $e(){throw new TypeError("Illegal Constructor")}function Xe(we){return we instanceof globalThis.ImageBitmap?we:P?P(we):function(me){return me instanceof HTMLCanvasElement||(me=_e(me)),Object.setPrototypeOf(me,$e.prototype),me}(we)}$e.prototype=Object.create((S={close:function(){Ne("width").set.call(this,0),Ne("height").set.call(this,0)},get width(){return Ne("width").get.call(this)},get height(){return Ne("height").get.call(this)}},(E={})[k=Symbol.toStringTag]=E[k]||{},E[k].get=function(){return"ImageBitmap"},function(we,me){for(var ge in me)(Ae=me[ge]).configurable=Ae.enumerable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(we,ge,Ae);if(Object.getOwnPropertySymbols)for(var de=Object.getOwnPropertySymbols(me),Oe=0;Oe<de.length;Oe++){var Ae,De=de[Oe];(Ae=me[De]).configurable=Ae.enumerable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(we,De,Ae)}}(S,E),S)),P||(globalThis.ImageBitmap=$e),globalThis.createImageBitmap=function(){var we=(0,f.Z)(_().mark(function me(ge){var de,Oe,Ae,De,Ue,Fe,ze,Be=arguments;return _().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:for(de=Be.length,Oe=new Array(de>1?de-1:0),Ae=1;Ae<de;Ae++)Oe[Ae-1]=Be[Ae];if(De=se.apply(void 0,Be),!Me(ge)){Ie.next=8;break}return Ie.next=5,Q;case 5:Ie.t0=Ie.sent,Ie.next=9;break;case 8:Ie.t0=J;case 9:if((Ue=Ie.t0).size!==0){Ie.next=12;break}return Ie.abrupt("return",P.apply(void 0,Be));case 12:if(!P||Re(Ue,De,ge)){Ie.next=14;break}return Ie.abrupt("return",P.apply(void 0,B(ye.apply(void 0,[Ue].concat(Array.prototype.slice.call(Be))))));case 14:if(Fe=ne(ge),!ee.some(Fe)){Ie.next=26;break}if(Te(ge),Ie.t1=Fe("SVGImageElement"),!Ie.t1){Ie.next=22;break}return Ie.next=21,L(ge);case 21:ge=Ie.sent;case 22:Fe("HTMLImageElement")&&(ge.naturalWidth||ge.naturalHeight||De.resizeWidth&&De.resizeHeight||Se()),ze=_e(ge,De),Ie.next=38;break;case 26:if(!Fe("Blob")){Ie.next=32;break}return Ie.next=29,ke(ge,De);case 29:ze=Ie.sent,Ie.next=38;break;case 32:if(Ie.t2=Fe("ImageData"),!Ie.t2){Ie.next=38;break}return N(ge.data.buffer)&&Se(),Ie.next=37,be(ge,De);case 37:ze=Ie.sent;case 38:if(ze){Ie.next=40;break}throw new TypeError(q.INVALID_SOURCE);case 40:return Ie.next=42,Xe(ze);case 42:return Ie.abrupt("return",Ie.sent);case 43:case"end":return Ie.stop()}},me)}));return function(me){return we.apply(this,arguments)}}(),globalThis.createImageBitmap._original=P})();var s=function(){function k(){(0,g.Z)(this,k)}var S,E,z,te,W,Y,q,ee,re,F,N,Z;return(0,b.Z)(k,[{key:"load",value:(Z=(0,f.Z)(_().mark(function A(O){return _().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return console.log("Loading params",O),this.params=O||{},this.model=O.model||"selfie",this.model_version=O.version,this.debug=this.params.debug||(0,I.ok)(),this.id=O.id||(0,x.v4)(),this.version=C.i8,this.serverType=this.params.serverType||"",this.defaults={},this.defaults.frameRate=30,this.defaults.segmentationFrameRate=15,this.frameRate=O.frameRate||this.defaults.frameRate,this.segmentationFrameRate=O.segmentationFrameRate||this.defaults.segmentationFrameRate,this.passthrough=O.passthrough||!1,this.serverType!=="production"&&this.serverType!==""||(0,U.EK)(null,O),this.defaultBackground="https://files.vectorly.io/demo/background-filter/images/virtual-background-1.jpg",this.defaultBlurRadius=5,this.background=this.params.background||this.defaultBackground,this.blurRadius=this.params.blurRadius||this.defaultBlurRadius,this.error=null,this.loadP=this.loadCoreModule(),this.inputSize=O.inputSize||{w:100,h:100},parseInt(this.inputSize.w)&&parseInt(this.inputSize.h)||console.warn("INVALID inputSize parameter set as",O.inputSize,"; Defaulting to {w: 100, h: 100}"),this.canvas=O.canvas||this._initCanvas(),D.prev=24,this.processorP=this._initializeCoreNetwork(),D.abrupt("return",this.processorP);case 29:throw D.prev=29,D.t0=D.catch(24),this.error=D.t0,D.t0;case 33:case"end":return D.stop()}},A,this,[[24,29]])})),function(A){return Z.apply(this,arguments)})},{key:"loadCoreModule",value:(N=(0,f.Z)(_().mark(function A(){return _().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,U.Zq)(!1,!0);case 2:return this.vectorlyCore=O.sent,console.log("VectorlyCore",this.vectorlyCore),O.abrupt("return",!0);case 5:case"end":return O.stop()}},A,this)})),function(){return N.apply(this,arguments)})},{key:"_initVideo",value:function(){var A=document.createElement("video");return A.style.visibility="hidden",A.style.display="none",A.id="vid-"+this.id,A.setAttribute("playsinline",null),A.setAttribute("autoplay",null),this.input&&(A.srcObject=this.input),document.body.appendChild(A),(0,I.yA)(A)||A.play(),A}},{key:"_initializeCoreNetwork",value:(F=(0,f.Z)(_().mark(function A(){var O,D,ne;return _().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,this.loadP;case 2:return O=new this.vectorlyCore,K.t0=O,K.t1=this.params.token,K.t2=this.inputSize.w,K.t3=this.inputSize.h,K.t4=this.id,K.t5=(0,U.PD)(this.model),K.t6=Math.ceil(this.frameRate/this.segmentationFrameRate),K.next=12,this._getBackground(this.background);case 12:return K.t7=K.sent,K.t8={passthrough:!1,skipFactor:K.t6,background:K.t7},K.t9=this.inputSize,K.t10=this.debug,K.t11=this.canvas,K.t12=this.serverType,K.t13={token:K.t1,w:K.t2,h:K.t3,id:K.t4,networkParams:K.t5,networkOptions:K.t8,renderSize:K.t9,debug:K.t10,canvas:K.t11,serverType:K.t12,analyticsEnabled:!1},D=K.t0.load.call(K.t0,K.t13),console.log(O,D),K.next=23,D;case 23:if(ne=K.sent,this.processor=O,console.log("In _initializeCoreNetwork",ne,O),ne!==!1){K.next=29;break}throw console.log("Initialized is",this.initialized,O.error),new Error(O.error);case 29:return K.abrupt("return",{canvas:this.canvas,processor:O});case 30:case"end":return K.stop()}},A,this)})),function(){return F.apply(this,arguments)})},{key:"_initCanvas",value:function(){var A=document.createElement("canvas");return A.id="canv-"+this.id,A.style.display="none",A}},{key:"setInputSize",value:(re=(0,f.Z)(_().mark(function A(O){return _().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.processorP;case 2:return D.next=4,this.processor.updateInputResolution(O);case 4:return D.next=6,this.processor.updateRenderResolution(O);case 6:case"end":return D.stop()}},A,this)})),function(A){return re.apply(this,arguments)})},{key:"setInput",value:(ee=(0,f.Z)(_().mark(function A(O){return _().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.processorP;case 2:return D.next=4,this.processor.setInput(O);case 4:case"end":return D.stop()}},A,this)})),function(A){return ee.apply(this,arguments)})},{key:"render",value:(q=(0,f.Z)(_().mark(function A(){return _().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.processorP;case 2:return O.next=4,this.processor.render();case 4:case"end":return O.stop()}},A,this)})),function(){return q.apply(this,arguments)})},{key:"getOutputBitmap",value:(Y=(0,f.Z)(_().mark(function A(){var O;return _().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,createImageBitmap(this.canvas);case 2:return O=D.sent,D.abrupt("return",O);case 4:case"end":return D.stop()}},A,this)})),function(){return Y.apply(this,arguments)})},{key:"getOutput",value:(W=(0,f.Z)(_().mark(function A(){var O;return _().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this._getOrCreateOutput();case 2:return O=D.sent,D.abrupt("return",O);case 4:case"end":return D.stop()}},A,this)})),function(){return W.apply(this,arguments)})},{key:"_getOrCreateOutput",value:(te=(0,f.Z)(_().mark(function A(){var O;return _().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.processorP;case 2:if(this.output&&(O=this.output.getVideoTracks()[0]),this.output&&(!O||O.readyState!=="ended")){D.next=8;break}return this.outputP=this._createNewStream(),D.next=7,this.outputP;case 7:this.output=D.sent;case 8:return D.abrupt("return",this.output);case 9:case"end":return D.stop()}},A,this)})),function(){return te.apply(this,arguments)})},{key:"_createNewStream",value:(z=(0,f.Z)(_().mark(function A(){var O;return _().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,D.next=3,this.processorP;case 3:return this.processOutput=this.canvas.captureStream(),O=this.processOutput,D.abrupt("return",O);case 8:throw D.prev=8,D.t0=D.catch(0),console.error("ERROR in createNewStream",D.t0),D.t0;case 12:case"end":return D.stop()}},A,this,[[0,8]])})),function(){return z.apply(this,arguments)})},{key:"_getBackground",value:(E=(0,f.Z)(_().mark(function A(O){var D;return _().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(O!=="blur"){ne.next=4;break}return ne.abrupt("return",{type:"blur",radius:this.blurRadius});case 4:if(O!=="binary"&&O!=="transparent"){ne.next=8;break}return ne.abrupt("return",{type:O});case 8:if(O){ne.next=13;break}D=this.defaultBackground,console.warn("in background is not given; Setting to defaultBackground",this.defaultBackground),ne.next=29;break;case 13:if(typeof O!="string"){ne.next=18;break}D=O,V()(O)&&(D=document.URL.substr(0,document.URL.lastIndexOf("/"))+"/"+O),ne.next=29;break;case 18:if(!(O instanceof HTMLImageElement)){ne.next=26;break}return ne.next=21,(0,U.po)(O);case 21:return ne.next=23,createImageBitmap(O);case 23:D=ne.sent,ne.next=29;break;case 26:return ne.next=28,createImageBitmap(O);case 28:D=ne.sent;case 29:return ne.abrupt("return",{type:"virtual",image:D});case 30:case"end":return ne.stop()}},A,this)})),function(A){return E.apply(this,arguments)})},{key:"changeBackground",value:(S=(0,f.Z)(_().mark(function A(O){return _().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return console.log("Change background to",O,"from",this.background),D.prev=1,D.next=4,this.processorP;case 4:return D.t0=this.processor,D.next=7,this._getBackground(O);case 7:return D.t1=D.sent,D.t2={background:D.t1},D.next=11,D.t0.updateNetworkOptions.call(D.t0,D.t2);case 11:this.background=O,D.next=18;break;case 14:throw D.prev=14,D.t3=D.catch(1),console.error(D.t3),D.t3;case 18:case"end":return D.stop()}},A,this,[[1,14]])})),function(A){return S.apply(this,arguments)})}]),k}(),y=s},245:function(l,m,c){c.d(m,{$A:function(){return k},$_:function(){return te},PD:function(){return y},EK:function(){return Y},Gb:function(){return h},Zq:function(){return H},po:function(){return E}});var f=c(861),g=c(757),b=c.n(g),v=c(877);function _(q,ee,re,F){return new(re||(re=Promise))(function(N,Z){function A(ne){try{D(F.next(ne))}catch(K){Z(K)}}function O(ne){try{D(F.throw(ne))}catch(K){Z(K)}}function D(ne){var K;ne.done?N(ne.value):(K=ne.value,K instanceof re?K:new re(function(P){P(K)})).then(A,O)}D((F=F.apply(q,ee||[])).next())})}const x=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","radeon r9 200","sgx 543","sgx543"],C=q=>q.toLowerCase().replace(/^angle ?\((.+)\)*$/,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,""),I=typeof window=="undefined",U=(()=>{if(I)return;const{userAgent:q,platform:ee,maxTouchPoints:re}=window.navigator,F=/(iphone|ipod|ipad)/i.test(q),N=ee==="iPad"||ee==="MacIntel"&&re>0&&!window.MSStream;return{isIpad:N,isMobile:/android/i.test(q)||F||N,isSafari12:/Version\/12.+Safari/.test(q)}})(),M=[],V=[],T=(q,ee)=>{if(q===ee)return 0;const re=q;q.length>ee.length&&(q=ee,ee=re);let F=q.length,N=ee.length;for(;F>0&&q.charCodeAt(~-F)===ee.charCodeAt(~-N);)F--,N--;let Z,A=0;for(;A<F&&q.charCodeAt(A)===ee.charCodeAt(A);)A++;if(F-=A,N-=A,F===0)return N;let O,D,ne=0,K=0,P=0;for(;K<F;)V[K]=q.charCodeAt(A+K),M[K]=++K;for(;P<N;)for(Z=ee.charCodeAt(A+P),O=P++,ne=P,K=0;K<F;K++)D=Z===V[K]?O:O+1,O=M[K],ne=M[K]=O>ne?D>ne?ne+1:D:D>O?O+1:D;return ne},$=({mobileTiers:q=[0,15,30,60],desktopTiers:ee=[0,15,30,60],override:re={},glContext:F,failIfMajorPerformanceCaveat:N=!1,benchmarksURL:Z="https://unpkg.com/detect-gpu@3.1.27/dist/benchmarks"}={})=>_(void 0,void 0,void 0,function*(){const A={};if(I)return{tier:0,type:"SSR"};const{isIpad:O=!!(U!=null&&U.isIpad),isMobile:D=!!(U!=null&&U.isMobile),screenSize:ne=window.screen,loadBenchmarks:K=Ee=>_(void 0,void 0,void 0,function*(){const be=yield fetch(`${Z}/${Ee}`).then(xe=>xe.json());return be.shift(),be})}=re;let{renderer:P}=re;const j=(Ee,be,xe,Se,Te)=>({device:Te,fps:Se,gpu:xe,isMobile:D,tier:Ee,type:be});let L,oe="";if(P)P=C(P),L=[P];else{const Ee=F||((xe,Se=!1)=>{const Te={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:Se,powerPreference:"high-performance",stencil:!1};xe&&delete Te.powerPreference;const ue=window.document.createElement("canvas"),J=ue.getContext("webgl",Te)||ue.getContext("experimental-webgl",Te);return J!=null?J:void 0})(U==null?void 0:U.isSafari12,N);if(!Ee)return j(0,"WEBGL_UNSUPPORTED");const be=Ee.getExtension("WEBGL_debug_renderer_info");if(be&&(P=Ee.getParameter(be.UNMASKED_RENDERER_WEBGL)),!P)return j(1,"FALLBACK");oe=P,P=C(P),L=((xe,Se,Te)=>Se==="apple gpu"?((ue,J,Q)=>{let ce=[J];if(Q){const pe=`
      precision highp float;
      attribute vec3 aPosition;
      varying float vvv;
      void main() {
        vvv = 0.31622776601683794;
        gl_Position = vec4(aPosition, 1.0);
      }
    `,he=`
      precision highp float;
      varying float vvv;
      void main() {
        vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
        enc = fract(enc);
        enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
        gl_FragColor = enc;
      }
    `,le=ue.createShader(35633),Pe=ue.createShader(35632),ae=ue.createProgram();if(Pe&&le&&ae){ue.shaderSource(le,pe),ue.shaderSource(Pe,he),ue.compileShader(le),ue.compileShader(Pe),ue.attachShader(ae,le),ue.attachShader(ae,Pe),ue.linkProgram(ae),ue.detachShader(ae,le),ue.detachShader(ae,Pe),ue.deleteShader(le),ue.deleteShader(Pe),ue.useProgram(ae);const ve=ue.createBuffer();ue.bindBuffer(34962,ve),ue.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const Ce=ue.getAttribLocation(ae,"aPosition");ue.vertexAttribPointer(Ce,3,5126,!1,0,0),ue.enableVertexAttribArray(Ce),ue.clearColor(1,1,1,1),ue.clear(16384),ue.viewport(0,0,1,1),ue.drawArrays(4,0,3);const Le=new Uint8Array(4);ue.readPixels(0,0,1,1,6408,5121,Le),ue.deleteProgram(ae),ue.deleteBuffer(ve),ce={801621810:U!=null&&U.isIpad?["apple a12x gpu"]:["apple a11 gpu","apple a12 gpu","apple a13 gpu","apple a14 gpu"],8016218135:U!=null&&U.isIpad?["apple a9x gpu","apple a10 gpu","apple a10x gpu"]:["apple a9 gpu","apple a10 gpu"]}[Le.join("")]||ce}}return ce})(xe,Se,Te):[Se])(Ee,P,D)}const ie=(yield Promise.all(L.map(Ee=>_(void 0,void 0,void 0,function*(){const be=(Re=>{const Me=D?["adreno","apple","mali-t","mali","nvidia","powervr"]:["intel","amd","radeon","nvidia","geforce"];for(const Ne of Me)if(Re.includes(Ne))return Ne})(Ee);if(!be)return;const xe=`${D?"m":"d"}-${be}.json`,Se=A[xe]=A[xe]||K(xe);let Te;try{Te=yield Se}catch{return}const ue=(Re=>{var Me;const Ne=(Re=Re.replace(/\([^)]+\)/,"")).match(/\d+/)||Re.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(Me=Ne==null?void 0:Ne.join("").replace(/\W|amd/g,""))!==null&&Me!==void 0?Me:""})(Ee),J=be==="apple";let Q=Te.filter(([,Re])=>Re===ue);Q.length||(Q=Te.filter(([Re])=>Re.includes(Ee)));const ce=Q.length;if(ce===0)return;let pe,[he,,,le]=ce>1?Q.map(Re=>[Re,T(Ee,Re[0])]).sort(([,Re],[,Me])=>Re-Me)[0][0]:Q[0],Pe=Number.MAX_VALUE;const{devicePixelRatio:ae}=window,ve=ne.width*ae*(ne.height*ae);J&&D&&(le=le.filter(([,,,Re])=>{var Me;return((Me=Re==null?void 0:Re.indexOf(O?"ipad":"iphone"))!==null&&Me!==void 0?Me:-1)>-1}));for(const Re of le){const[Me,Ne]=Re,$e=Me*Ne,Xe=Math.abs(ve-$e);Xe<Pe&&(Pe=Xe,pe=Re)}if(!pe)return;const[,,Ce,Le]=pe;return[Pe,Ce,he,Le]})))).filter(Ee=>!!Ee);if(!ie.length){const Ee=x.find(be=>P.includes(be));return Ee?j(0,"BLOCKLISTED",Ee):j(1,"FALLBACK",`${P} (${oe})`)}const[,se,ye,fe]=ie.sort(([Ee=Number.MAX_VALUE],[be=Number.MAX_VALUE])=>Ee-be)[0];if(se===-1)return j(0,"BLOCKLISTED",ye,se,fe);const _e=D?q:ee;let ke=0;for(let Ee=0;Ee<_e.length;Ee++)se>=_e[Ee]&&(ke=Ee);return j(ke,"BENCHMARK",ye,se,fe)});var B=c(618),G=c(161);function H(q){return X.apply(this,arguments)}function X(){return X=(0,f.Z)(b().mark(function q(ee){var re,F=arguments;return b().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if((F.length>1&&F[1]!==void 0&&F[1])!==!0){N.next=6;break}return N.next=4,Promise.resolve().then(c.bind(c,841));case 4:return re=N.sent,N.abrupt("return",re.default.core);case 6:if(ee!==!0){N.next=13;break}return N.next=9,Promise.resolve().then(c.bind(c,886));case 9:case 15:return re=N.sent,N.abrupt("return",re.default);case 13:return N.next=15,Promise.resolve().then(c.bind(c,296));case 17:case"end":return N.stop()}},q)})),X.apply(this,arguments)}function h(){return s.apply(this,arguments)}function s(){return(s=(0,f.Z)(b().mark(function q(){var ee;return b().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return(ee={}).wasm=B.support(),ee.simd=B.feature.simd,ee.webgl=(0,G.HR)(),ee.webgl2=(0,G.W8)(),ee.offscreen=Boolean(HTMLCanvasElement.prototype.transferControlToOffscreen),re.next=8,$();case 8:if(ee.gpu=re.sent,ee.gpu.hwaccel=ee.gpu.tier>0,ee.wasm&&ee.webgl){re.next=14;break}return re.abrupt("return",!1);case 14:return re.abrupt("return",ee);case 15:case"end":return re.stop()}},q)}))).apply(this,arguments)}function y(q){if(q==="selfie")return{name:"background_selfie",tag:"general",version:"0"};if(q==="selfie_v2")return{name:"background_selfie",tag:"general",version:"1"};if(q==="webgl_unet")return{name:"background_webgl_unet",tag:"general",version:"2"};if(q==="webgl")return{name:"background_webgl",tag:"general",version:"1"};if(q==="webgl_v2")return{name:"background_webgl2",tag:"general",version:"1"};throw new Error("params.model passed is invalid",q)}function k(q){return S.apply(this,arguments)}function S(){return(S=(0,f.Z)(b().mark(function q(ee){var re,F,N;return b().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,h();case 2:if(re=Z.sent,ee!=="selfie"&&ee!=="selfie_v2"){Z.next=8;break}return F=re.wasm&&(re.webgl||re.webgl2),Z.abrupt("return",F);case 8:if(ee!=="webgl_unet"&&ee!=="webgl"&&ee!=="webgl_v2"){Z.next=13;break}return N=re.webgl2,Z.abrupt("return",N);case 13:throw new Error("params.model passed is invalid",ee);case 14:case"end":return Z.stop()}},q)}))).apply(this,arguments)}function E(q){return z.apply(this,arguments)}function z(){return z=(0,f.Z)(b().mark(function q(ee){var re;return b().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return re=function(N,Z,A){if(typeof A=="string"){var O=document.createElement("img");return O.crossOrigin="anonymous",O.addEventListener("load",function(){N(O)}),O.src&&O.complete?O.complete&&N(O):O.src=A,{img:O,src:A}}if(A instanceof HTMLImageElement){var D=A,ne=A.src;return D.addEventListener("load",function(){N(D)}),D.complete?D.naturalWidth===0?Z("Image is empty"):N(D):D.src=A,{img:D,src:ne}}},F.abrupt("return",new Promise(function(N,Z){re(N,Z,ee)}));case 2:case"end":return F.stop()}},q)})),z.apply(this,arguments)}function te(q){return W.apply(this,arguments)}function W(){return W=(0,f.Z)(b().mark(function q(ee){return b().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.abrupt("return",new Promise(function(F,N){function Z(D,ne){return A.apply(this,arguments)}function A(){return A=(0,f.Z)(b().mark(function D(ne,K){return b().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return ne=ne||720,K=K||"https://cdn.vectorly.io/public-demos/videocall-720p.jpg",P.abrupt("return",new Promise(function(j){var L=document.createElement("img");L.display="none",L.crossOrigin="anonymous",L.onload=function(){var oe=ne*L.naturalWidth/L.naturalHeight;createImageBitmap(L,{resizeWidth:oe,resizeHeight:ne,resizeQuality:"high"}).then(function(ie){j({img:L,imgBmp:ie})}).catch(function(ie){console.warn(ie),createImageBitmap(L).then(function(se){j({img:L,imgBmp:se})})})},L.src=K}));case 3:case"end":return P.stop()}},D)})),A.apply(this,arguments)}function O(){return O=(0,f.Z)(b().mark(function D(){var ne,K,P,j,L,oe,ie,se,ye,fe,_e;return b().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ne=Number(ee.timeout)||2e3,K=Number(ee.height)||720,P=h(),j=P&&P.offscreen,ke.next=6,H(j);case 6:return L=ke.sent,ke.next=9,Z(K);case 9:return oe=ke.sent,ie=oe.img,se=oe.imgBmp,ye=new L(ie,{stream:se,token:ee.token,id:(0,v.v4)(),networkParams:y(ee.model||"selfie"),networkOptions:{background:{type:"blur",radius:5}},renderSize:{w:se.width,h:se.height},debug:!1,debugRender:!1,container:"disable",serverType:ee.serverType,enabled:!1,reqHandle:{useRAF:!0}}),ke.next=15,ye.initialized;case 15:if(ke.sent){ke.next=20;break}return console.log("Error in initialization"),N(ye.error),ke.abrupt("return");case 20:ye.canvas.style.visibility="hidden",console.log("processor is initialized"),ye.on("start",function(){fe=Date.now()}),ye.on("stop",function(){_e=Date.now(),console.log("Metrics",ye.metrics),console.log("time diff",fe,_e,_e-fe),F({inputSize:"".concat(se.width,"x").concat(se.height),frameCount:ye.metrics.frameCount,time:_e-fe,fps:ye.metrics.frameCount/(_e-fe)*1e3})}),ye.on("error",function(Ee){console.error("error",Ee),N(Ee)}),ye.enable(),setTimeout(function(){ye.disable(),ie.style.visibility="hidden"},ne);case 27:case"end":return ke.stop()}},D)})),O.apply(this,arguments)}ee=ee||{};try{(function(){O.apply(this,arguments)})()}catch(D){console.log("HIGH LEVEL ERROR",D),N(D)}}));case 1:case"end":return re.stop()}},q)})),W.apply(this,arguments)}function Y(q,ee){if(!h())throw new Error("Browser not supported");if(q&&!(q instanceof MediaStream||q instanceof MediaStreamTrack||q instanceof HTMLVideoElement))throw new TypeError("Input is not a MediaStream, MediaStreamTrack or HTML5 Video Element. See https://cdn.vectorly.io/ai-filters/docs/latest/BackgroundFilter.html for proper setup instructions");if(!ee.token)throw new Error("Vectorly token not defined. Please check https://cdn.vectorly.io/ai-filters/docs/latest/BackgroundFilter.html for proper setup instructions");if(typeof ee.token!="string")throw new Error("Token parameter is not a string. Please check https://cdn.vectorly.io/ai-filters/docs/latest/BackgroundFilter.html for proper setup instructions");if(ee.background!==void 0&&typeof ee.background!="string"&&![HTMLImageElement,HTMLVideoElement,ImageBitmap,ImageData,HTMLCanvasElement].some(function(re){return ee.background instanceof re}))throw new TypeError("Background is not a valid type (Image / Video / Bitmap / Canvas etc...) See https://cdn.vectorly.io/ai-filters/docs/latest/BackgroundFilter.html for proper setup instructions")}},886:function(l,m,c){c.r(m),c.d(m,{default:function(){return k}});var f=c(861),g=c(942),b=c(671),v=c(144),_=c(757),x=c.n(_),C=c(885),I=c(877),U=c(55),M=c(477),V=c.n(M);function T(){return V()('!function(){var e={553:function(e){var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new I(n||[]);return o._invoke=function(e,t,r){var n=l;return function(a,o){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===a)throw o;return P()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var s=A(i,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=f(e,t,r);if("normal"===u.type){if(n=r.done?d:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}(e,r,i),o}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",h="suspendedYield",p="executing",d="completed",g={};function m(){}function y(){}function _(){}var w={};u(w,o,(function(){return this}));var E=Object.getPrototypeOf,T=E&&E(E(S([])));T&&T!==r&&n.call(T,o)&&(w=T);var b=_.prototype=m.prototype=Object.create(w);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,o,i,s){var u=f(e[a],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,s)}))}s(u.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(o,o):o()}}function A(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return g}var a=f(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function S(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:P}}function P(){return{value:t,done:!0}}return y.prototype=_,u(b,"constructor",_),u(_,"constructor",y),y.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(x.prototype),u(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new x(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},757:function(e,t,r){r(553)},435:function(e){e.exports=["cnn_demo","residual_3k_3x","residual_4k_2x","residual_5k_2x","residual_5k_3x","denoise_10k_1x","background_selfie","background_webgl_unet","background_webgl","background_webgl2","upscaler_4krgb_2x"]},443:function(e){var t,r=(t=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var r,n,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,t){r=e,n=t}));var o,i={};for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);var s,u,c,f=[],l="./this.program",h=function(e,t){throw t};s="object"==typeof window,u="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;var p,d,g="";(s||u)&&(u?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),t&&(g=t),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",u&&(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var m,y=a.print||console.log.bind(console),_=a.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);i=null,a.arguments&&(f=a.arguments),a.thisProgram&&(l=a.thisProgram),a.quit&&(h=a.quit),a.wasmBinary&&(m=a.wasmBinary);var w,E=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&D("no native wasm support detected");var T,b,v,x,A=!1,R="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(e,t,r){for(var n=t+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.subarray&&R)return R.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var u=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|u:(7&i)<<18|s<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var c=i-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o}function I(e){T=e,a.HEAP8=b=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=x=new Int32Array(e),a.HEAPU8=v=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var S,P=[],k=[],B=[],L=[];k.push({func:function(){Z()}});var U=0,C=null,F=null;function D(e){a.onAbort&&a.onAbort(e),_(e+=""),A=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function M(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}function N(e){return M(e,"data:application/octet-stream;base64,")}function X(e){return M(e,"file://")}a.preloadedImages={},a.preloadedAudios={};var G,W,j="./tflite/tflite-simd.wasm";function H(e){try{if(e==j&&m)return new Uint8Array(m);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}catch(e){D(e)}}function z(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?S.get(r)():S.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(a)}}function $(e){return x[ee()>>2]=e,e}function q(e){try{return w.grow(e-T.byteLength+65535>>>16),I(w.buffer),1}catch(e){}}N(j)||(G=j,j=a.locateFile?a.locateFile(G,g):(g=a.basePath||g)+G),W=c?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var V={};function Y(){if(!Y.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(var t in V)e[t]=V[t];var r=[];for(var t in e)r.push(t+"="+e[t]);Y.strings=r}return Y.strings}var J,K={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var r=K.buffers[e];0===t||10===t?((1===e?y:_)(O(r,0)),r.length=0):r.push(t)},varargs:void 0,get:function(){return K.varargs+=4,x[K.varargs-4>>2]},getStr:function(e){var t=function(e,t){return e?O(v,e,void 0):""}(e);return t},get64:function(e,t){return e}},Q={a:function(){D()},n:function(e,t){var r;if(0===e)r=Date.now();else{if(1!==e&&4!==e)return $(28),-1;r=W()}return x[t>>2]=r/1e3|0,x[t+4>>2]=r%1e3*1e3*1e3|0,0},i:function(e,t){D("To use dlopen, you need to use Emscripten\'s linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},e:function(e,t){D("To use dlopen, you need to use Emscripten\'s linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(e,t,r){v.copyWithin(e,t,t+r)},m:function(e){var t,r=v.length,n=2147483648;if(e>n)return!1;for(var a=1;a<=4;a*=2){var o=r*(1+.2/a);if(o=Math.min(o,e+100663296),q(Math.min(n,((t=Math.max(e,o))%65536>0&&(t+=65536-t%65536),t))))return!0}return!1},o:function(e){for(var t=W();W()-t<e;);},p:function(e,t){var r=0;return Y().forEach((function(n,a){var o=t+r;x[e+4*a>>2]=o,function(e,t,r){for(var n=0;n<e.length;++n)b[t++>>0]=e.charCodeAt(n);b[t>>0]=0}(n,o),r+=n.length+1})),0},g:function(e,t){var r=Y();x[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),x[t>>2]=n,0},j:function(e){!function(e,t){E||(a.onExit&&a.onExit(e),A=!0),h(e,new te(e))}(e)},h:function(e){return 0},k:function(e,t,r,n,a){},c:function(e,t,r,n){for(var a=0,o=0;o<r;o++){for(var i=x[t+8*o>>2],s=x[t+(8*o+4)>>2],u=0;u<s;u++)K.printChar(e,v[i+u]);a+=s}return x[n>>2]=a,0},d:function(){return 6},f:function(){return 28},b:function(e){switch(e){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return $(28),-1}},Z=(function(){var e={a:Q};function t(e,t){var r=e.exports;a.asm=r,I((w=a.asm.q).buffer),S=a.asm.D,function(e){if(U--,a.monitorRunDependencies&&a.monitorRunDependencies(U),0==U&&(null!==C&&(clearInterval(C),C=null),F)){var t=F;F=null,t()}}()}function r(e){t(e.instance)}function o(t){return function(){if(!m&&(s||u)){if("function"==typeof fetch&&!X(j))return fetch(j,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at \'"+j+"\'";return e.arrayBuffer()})).catch((function(){return H(j)}));if(p)return new Promise((function(e,t){p(j,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return H(j)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){_("failed to asynchronously prepare wasm: "+e),D(e)}))}if(U++,a.monitorRunDependencies&&a.monitorRunDependencies(U),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}(m||"function"!=typeof WebAssembly.instantiateStreaming||N(j)||X(j)||"function"!=typeof fetch?o(r):fetch(j,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),o(r)}))}))).catch(n)}(),a.___wasm_call_ctors=function(){return(Z=a.___wasm_call_ctors=a.asm.r).apply(null,arguments)}),ee=(a._getModelBufferMemoryOffset=function(){return(a._getModelBufferMemoryOffset=a.asm.s).apply(null,arguments)},a._getInputMemoryOffset=function(){return(a._getInputMemoryOffset=a.asm.t).apply(null,arguments)},a._getInputHeight=function(){return(a._getInputHeight=a.asm.u).apply(null,arguments)},a._getInputWidth=function(){return(a._getInputWidth=a.asm.v).apply(null,arguments)},a._getInputChannelCount=function(){return(a._getInputChannelCount=a.asm.w).apply(null,arguments)},a._getOutputMemoryOffset=function(){return(a._getOutputMemoryOffset=a.asm.x).apply(null,arguments)},a._getOutputHeight=function(){return(a._getOutputHeight=a.asm.y).apply(null,arguments)},a._getOutputWidth=function(){return(a._getOutputWidth=a.asm.z).apply(null,arguments)},a._getOutputChannelCount=function(){return(a._getOutputChannelCount=a.asm.A).apply(null,arguments)},a._loadModel=function(){return(a._loadModel=a.asm.B).apply(null,arguments)},a._runInference=function(){return(a._runInference=a.asm.C).apply(null,arguments)},a.___errno_location=function(){return(ee=a.___errno_location=a.asm.E).apply(null,arguments)});function te(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function re(e){function t(){J||(J=!0,a.calledRun=!0,A||(z(k),z(B),r(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),L.unshift(e);var e;z(L)}()))}e=e||f,U>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),P.unshift(e);var e;z(P)}(),U>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t()))}if(F=function e(){J||re(),J||(F=e)},a.run=re,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return re(),e.ready});e.exports=r},595:function(e){var t,r=(t=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var r,n,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,t){r=e,n=t}));var o,i={};for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);var s,u,c,f=[],l="./this.program",h=function(e,t){throw t};s="object"==typeof window,u="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;var p,d,g="";(s||u)&&(u?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),t&&(g=t),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",u&&(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var m,y=a.print||console.log.bind(console),_=a.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);i=null,a.arguments&&(f=a.arguments),a.thisProgram&&(l=a.thisProgram),a.quit&&(h=a.quit),a.wasmBinary&&(m=a.wasmBinary);var w,E=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&D("no native wasm support detected");var T,b,v,x,A=!1,R="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(e,t,r){for(var n=t+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.subarray&&R)return R.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var u=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|u:(7&i)<<18|s<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var c=i-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o}function I(e){T=e,a.HEAP8=b=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=x=new Int32Array(e),a.HEAPU8=v=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var S,P=[],k=[],B=[],L=[];k.push({func:function(){Z()}});var U=0,C=null,F=null;function D(e){a.onAbort&&a.onAbort(e),_(e+=""),A=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function M(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}function N(e){return M(e,"data:application/octet-stream;base64,")}function X(e){return M(e,"file://")}a.preloadedImages={},a.preloadedAudios={};var G,W,j="./tflite/tflite.wasm";function H(e){try{if(e==j&&m)return new Uint8Array(m);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}catch(e){D(e)}}function z(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?S.get(r)():S.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(a)}}function $(e){return x[ee()>>2]=e,e}function q(e){try{return w.grow(e-T.byteLength+65535>>>16),I(w.buffer),1}catch(e){}}N(j)||(G=j,j=a.locateFile?a.locateFile(G,g):(g=a.basePath||g)+G),W=c?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var V={};function Y(){if(!Y.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(var t in V)e[t]=V[t];var r=[];for(var t in e)r.push(t+"="+e[t]);Y.strings=r}return Y.strings}var J,K={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var r=K.buffers[e];0===t||10===t?((1===e?y:_)(O(r,0)),r.length=0):r.push(t)},varargs:void 0,get:function(){return K.varargs+=4,x[K.varargs-4>>2]},getStr:function(e){var t=function(e,t){return e?O(v,e,void 0):""}(e);return t},get64:function(e,t){return e}},Q={a:function(){D()},n:function(e,t){var r;if(0===e)r=Date.now();else{if(1!==e&&4!==e)return $(28),-1;r=W()}return x[t>>2]=r/1e3|0,x[t+4>>2]=r%1e3*1e3*1e3|0,0},i:function(e,t){D("To use dlopen, you need to use Emscripten\'s linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},e:function(e,t){D("To use dlopen, you need to use Emscripten\'s linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(e,t,r){v.copyWithin(e,t,t+r)},m:function(e){var t,r=v.length,n=2147483648;if(e>n)return!1;for(var a=1;a<=4;a*=2){var o=r*(1+.2/a);if(o=Math.min(o,e+100663296),q(Math.min(n,((t=Math.max(e,o))%65536>0&&(t+=65536-t%65536),t))))return!0}return!1},o:function(e){for(var t=W();W()-t<e;);},p:function(e,t){var r=0;return Y().forEach((function(n,a){var o=t+r;x[e+4*a>>2]=o,function(e,t,r){for(var n=0;n<e.length;++n)b[t++>>0]=e.charCodeAt(n);b[t>>0]=0}(n,o),r+=n.length+1})),0},g:function(e,t){var r=Y();x[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),x[t>>2]=n,0},j:function(e){!function(e,t){E||(a.onExit&&a.onExit(e),A=!0),h(e,new te(e))}(e)},h:function(e){return 0},k:function(e,t,r,n,a){},c:function(e,t,r,n){for(var a=0,o=0;o<r;o++){for(var i=x[t+8*o>>2],s=x[t+(8*o+4)>>2],u=0;u<s;u++)K.printChar(e,v[i+u]);a+=s}return x[n>>2]=a,0},d:function(){return 6},f:function(){return 28},b:function(e){switch(e){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return $(28),-1}},Z=(function(){var e={a:Q};function t(e,t){var r=e.exports;a.asm=r,I((w=a.asm.q).buffer),S=a.asm.D,function(e){if(U--,a.monitorRunDependencies&&a.monitorRunDependencies(U),0==U&&(null!==C&&(clearInterval(C),C=null),F)){var t=F;F=null,t()}}()}function r(e){t(e.instance)}function o(t){return function(){if(!m&&(s||u)){if("function"==typeof fetch&&!X(j))return fetch(j,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at \'"+j+"\'";return e.arrayBuffer()})).catch((function(){return H(j)}));if(p)return new Promise((function(e,t){p(j,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return H(j)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){_("failed to asynchronously prepare wasm: "+e),D(e)}))}if(U++,a.monitorRunDependencies&&a.monitorRunDependencies(U),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}(m||"function"!=typeof WebAssembly.instantiateStreaming||N(j)||X(j)||"function"!=typeof fetch?o(r):fetch(j,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),o(r)}))}))).catch(n)}(),a.___wasm_call_ctors=function(){return(Z=a.___wasm_call_ctors=a.asm.r).apply(null,arguments)}),ee=(a._getModelBufferMemoryOffset=function(){return(a._getModelBufferMemoryOffset=a.asm.s).apply(null,arguments)},a._getInputMemoryOffset=function(){return(a._getInputMemoryOffset=a.asm.t).apply(null,arguments)},a._getInputHeight=function(){return(a._getInputHeight=a.asm.u).apply(null,arguments)},a._getInputWidth=function(){return(a._getInputWidth=a.asm.v).apply(null,arguments)},a._getInputChannelCount=function(){return(a._getInputChannelCount=a.asm.w).apply(null,arguments)},a._getOutputMemoryOffset=function(){return(a._getOutputMemoryOffset=a.asm.x).apply(null,arguments)},a._getOutputHeight=function(){return(a._getOutputHeight=a.asm.y).apply(null,arguments)},a._getOutputWidth=function(){return(a._getOutputWidth=a.asm.z).apply(null,arguments)},a._getOutputChannelCount=function(){return(a._getOutputChannelCount=a.asm.A).apply(null,arguments)},a._loadModel=function(){return(a._loadModel=a.asm.B).apply(null,arguments)},a._runInference=function(){return(a._runInference=a.asm.C).apply(null,arguments)},a.___errno_location=function(){return(ee=a.___errno_location=a.asm.E).apply(null,arguments)});function te(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function re(e){function t(){J||(J=!0,a.calledRun=!0,A||(z(k),z(B),r(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),L.unshift(e);var e;z(L)}()))}e=e||f,U>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),P.unshift(e);var e;z(P)}(),U>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t()))}if(F=function e(){J||re(),J||(F=e)},a.run=re,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return re(),e.ready});e.exports=r},618:function(e){"use strict";function t(e,t){if(!c)return!1;const n=e.buffer;let a=l.get(n);if(null==a){if((a=r.validate(n))&&t)try{new r.Instance(new r.Module(n)).exports[0]()}catch(e){a=!1}l.set(n,a)}return a}const r=WebAssembly,n=(...e)=>Uint8Array.of(0,97,115,109,1,0,0,0,...e),a=(...e)=>Uint32Array.of(1836278016,1,...e),o=(...e)=>a(1610679297,33751040,...e,40239360,259),i=(...e)=>n(1,4,1,96,0,0,3,2,1,0,...e,11,0,10,4,110,97,109,101,2,3,1,0,0),s=(...e)=>Uint16Array.of(24832,28019,1,0,1025,24577,0,515,1,...e),u=(...e)=>s(...e,2842,4096,28164,28001,357,260,256,560,259,0),c="object"==typeof r,f=e=>c&&"function"==typeof e,l=new WeakMap,h=a(1610679553,58589440,117440770,805372165,101318656,1107297281,268438272,1835101700,17039717,36700416,259),p=s(773,1,2561,269,11,65,65,65,3068,2816,2560,28164,28001,613,259,0),d=a(1610679297,33751040,134873089,100664833,185276736),g=n(2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1,0,8,4,110,97,109,101,2,1,0),m=Uint16Array.of(24832,28019,1,0,1537,24577,512,32639,515,1,2058,1537,16640,16640,2816,2560,28164,28001,613,259,0),y=u(3082,2561,17152,0,0,252),_=u(2058,1537,16640,49152),w=o(101318657,301990913,268438272,1835101700,17039717),E=i(5,4,1,3,1,1,10,7,1,5,0,254,3,0),T=o(84344833,6357249,17369600,4259847,186257917,1845758464),b=i(10,7,1,5,0,208,112,26);e.exports={support:(e=1)=>c&&t(Uint32Array.of(1836278016,e)),get supportStreaming(){return f(r.instantiateStreaming)},feature:{get bigInt(){return t(h,!0)},get bulk(){return t(p)},get exceptions(){return t(d)},get mutableGlobal(){return t(g)},get multiValue(){return t(m)},get saturateConversions(){return t(y)},get signExtensions(){return t(_)},get tailCall(){return t(w)},get threads(){return t(E)},get simd(){return t(T)},get references(){return t(b)},get typeReflection(){return f(r.Memory.type)},get funcReferences(){return f(r.Function)}}}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",function(){"use strict";function e(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function t(){return e()?(self.isWorker=!0,self):(window.isWorker=!1,window)}function n(t){return e()?t instanceof OffscreenCanvasRenderingContext2D:t instanceof CanvasRenderingContext2D}var a=function(e,r){let n;"string"==typeof e&&(e=document.getElementById(e));let a=1;if("true"===r.use_webgl1?n=e.getContext("webgl",{antialias:!1,premultipliedAlpha:!1}):(n=e.getContext("webgl2",{antialias:!1,premultipliedAlpha:!1}),a=2,n||(a=1,n=e.getContext("webgl",{antialias:!1,premultipliedAlpha:!1}))),n.getExtension("WEBGL_draw_buffers")?n.disable_multi_draw=r.disable_multi_draw||!1:n.disable_multi_draw=!0,n.extensions={},n.getVersion=function(){return a},1===n.getVersion()){if("float32"===r.float_type){if(n.extensions.EXT_FLOAT=n.getExtension("OES_texture_float"),!n.extensions.EXT_FLOAT)throw new Error("Extension not found: OES_texture_float");n.extensions.EXT_FLOAT_LINEAR=n.getExtension("OES_texture_float_linear"),n.extensions.EXT_FLOAT_LINEAR,n.texture_format=n.RGBA,n.texture_type=n.FLOAT}else{if(n.extensions.EXT_FLOAT=n.getExtension("OES_texture_half_float"),!n.extensions.EXT_FLOAT)throw new Error("Extension not found: OES_texture_half_float");n.extensions.EXT_FLOAT_LINEAR=n.getExtension("OES_texture_half_float_linear"),n.extensions.EXT_FLOAT_LINEAR,n.texture_format=n.RGBA,n.texture_type=n.extensions.EXT_FLOAT.HALF_FLOAT_OES}if(!n.disable_multi_draw&&(n.extensions.WEBGL_draw_buffers=n.getExtension("WEBGL_draw_buffers"),!n.extensions.WEBGL_draw_buffers))throw new Error("Extension not found: WEBGL_draw_buffers")}else{if(n.extensions.EXT_FLOAT=n.getExtension("EXT_color_buffer_float"),!n.extensions.EXT_FLOAT)throw new Error("Extension not found: EXT_color_buffer_float");"float32"===r.float_type?(n.extensions.EXT_FLOAT_LINEAR=n.getExtension("OES_texture_float_linear"),n.texture_format=n.RGBA32F,n.texture_type=n.FLOAT):(n.extensions.EXT_FLOAT_LINEAR=n.getExtension("OES_texture_half_float_linear"),n.texture_format=n.RGBA16F,n.texture_type=n.FLOAT)}return 1===n.getVersion()?(n.getCOLOR_ATTACHMENT=function(e=0){return n.disable_multi_draw?n.COLOR_ATTACHMENT0:n.extensions.WEBGL_draw_buffers.COLOR_ATTACHMENT0_WEBGL+e},n.getDrawBuffers=function(e=[n.getCOLOR_ATTACHMENT(0)]){n.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(e)}):(n.getCOLOR_ATTACHMENT=function(e=0){return n.COLOR_ATTACHMENT0+e},n.getDrawBuffers=function(e=[n.getCOLOR_ATTACHMENT(0)]){n.drawBuffers(e)}),t().gl=n,n.canvas.w=n.canvas.width,n.canvas.h=n.canvas.height,n.clearCanvas=function(){n.clearColor(0,0,0,1),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT)},n.input={h:r.h,w:r.w},n.render_scale={h:1,w:1},n.viewport(0,0,e.width,e.height),n.createAndCompileShader=function(e,t){let r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS))throw new Error(n.getShaderInfoLog(r));return r},n.createAndLinkProgram=function(e,t){let r=n.createProgram();if(n.attachShader(r,e),n.attachShader(r,t),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw new Error(n.getProgramInfoLog(r));return r},n.resizeCanvasToDisplaySize=function(t,r){return(e.width!==t||e.height!==r)&&(e.width=t,e.height=r,!0)},n.resizeRenderSize=function(e,t,r){let a=r*n.input.w,o=r*n.input.h;a=e>a?e:a,o=t>o?t:o,n.render_scale={w:e/a,h:t/o},n.resizeCanvasToDisplaySize(a,o)},n.log=function(e){},n};r(435);var o=r(618),i=r(443),s=r.n(i),u=r(595),c=r.n(u),f="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==f&&f,l="URLSearchParams"in f,h="Symbol"in f&&"iterator"in Symbol,p="FileReader"in f&&"Blob"in f&&function(){try{return new Blob,!0}catch(e){return!1}}(),d="FormData"in f,g="ArrayBuffer"in f;if(g)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=ArrayBuffer.isView||function(e){return e&&m.indexOf(Object.prototype.toString.call(e))>-1};function _(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\\-#$%&\'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError(\'Invalid character in header field name: "\'+e+\'"\');return e.toLowerCase()}function w(e){return"string"!=typeof e&&(e=String(e)),e}function E(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return h&&(t[Symbol.iterator]=function(){return t}),t}function T(e){this.map={},e instanceof T?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function b(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function x(e){var t=new FileReader,r=v(t);return t.readAsArrayBuffer(e),r}function A(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:p&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:d&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:l&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():g&&p&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=A(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):g&&(ArrayBuffer.prototype.isPrototypeOf(e)||y(e))?this._bodyArrayBuffer=A(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p&&(this.blob=function(){var e=b(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(x)}),this.text=function(){var e,t,r,n=b(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=v(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}T.prototype.append=function(e,t){e=_(e),t=w(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},T.prototype.delete=function(e){delete this.map[_(e)]},T.prototype.get=function(e){return e=_(e),this.has(e)?this.map[e]:null},T.prototype.has=function(e){return this.map.hasOwnProperty(_(e))},T.prototype.set=function(e,t){this.map[_(e)]=w(t)},T.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},T.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),E(e)},T.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),E(e)},T.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),E(e)},h&&(T.prototype[Symbol.iterator]=T.prototype.entries);var O=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function I(e,t){if(!(this instanceof I))throw new TypeError(\'Please use the "new" operator, this DOM object constructor cannot be called as a function.\');var r,n,a=(t=t||{}).body;if(e instanceof I){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new T(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new T(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),O.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(a),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function S(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\\+/g," "),a=r.join("=").replace(/\\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(a))}})),t}function P(e,t){if(!(this instanceof P))throw new TypeError(\'Please use the "new" operator, this DOM object constructor cannot be called as a function.\');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new T(t.headers),this.url=t.url||"",this._initBody(e)}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})},R.call(I.prototype),R.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new T(this.headers),url:this.url})},P.error=function(){var e=new P(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];P.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new P(null,{status:t,headers:{location:e}})};var B=f.DOMException;try{new B}catch(e){(B=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),B.prototype.constructor=B}function L(e,t){return new Promise((function(r,n){var a=new I(e,t);if(a.signal&&a.signal.aborted)return n(new B("Aborted","AbortError"));var o=new XMLHttpRequest;function i(){o.abort()}o.onload=function(){var e,t,n={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new T,e.replace(/\\r?\\n[\\t ]+/g," ").split("\\r").map((function(e){return 0===e.indexOf("\\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var a=r.join(":").trim();t.append(n,a)}})),t)};n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var a="response"in o?o.response:o.responseText;setTimeout((function(){r(new P(a,n))}),0)},o.onerror=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},o.onabort=function(){setTimeout((function(){n(new B("Aborted","AbortError"))}),0)},o.open(a.method,function(e){try{return""===e&&f.location.href?f.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?o.withCredentials=!0:"omit"===a.credentials&&(o.withCredentials=!1),"responseType"in o&&(p?o.responseType="blob":g&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(o.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof T?a.headers.forEach((function(e,t){o.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){o.setRequestHeader(e,w(t.headers[e]))})),a.signal&&(a.signal.addEventListener("abort",i),o.onreadystatechange=function(){4===o.readyState&&a.signal.removeEventListener("abort",i)}),o.send(void 0===a._bodyInit?null:a._bodyInit)}))}L.polyfill=!0,f.fetch||(f.fetch=L,f.Headers=T,f.Request=I,f.Response=P);const U=t();let C=async(e,t={})=>{let n,a=((t=t||{}).path||r.p)+`models/${e}.js`;var i;return t.token&&(a=a+"?"+t.token),U.vectorlyBasePath=t.path||r.p,"background_selfie"===e&&(n=(async()=>{let e;if(U.tflite)e=U.tflite;else{let t=U.vectorlyBasePath||"";try{if(!0!==o.feature.simd)throw new Error("SIMD feature check is false");e=await s()({basePath:t})}catch(r){e=await c()({basePath:t})}}return e})()),U.isWorker?importScripts(a):await(i=a,new Promise(((e,t)=>{const r="$importModule$"+Math.random().toString(32).slice(2),n=document.createElement("script"),a=()=>{delete window[r],n.onerror=null,n.onload=null,n.remove(),URL.revokeObjectURL(n.src),n.src=""};n.defer="defer",n.type="module",n.onerror=()=>{t(new Error(`Failed to import: ${i}`)),a()},n.onload=()=>{e(window[r]),a()};const o=function(e){const t=document.createElement("a");return t.setAttribute("href",e),t.cloneNode(!1).href}(i),s=new Blob([`import * as m from "${o}"; window.${r} = m;`],{type:"text/javascript"});n.src=URL.createObjectURL(s),document.head.appendChild(n)}))),"background_selfie"===e&&(U.tflite=await n),U.vectorly.models[e]},F=async(e,t,n,a)=>{if(a=a||{},"background_selfie"===e){let o=(a.path||r.p)+`./data/${e}/${t}_v${n}.tflite`;a.token&&(o=o+"?"+a.token);const i=await fetch(o);if(!i.ok)throw Error(`Response fetching "${o}": ${i.statusText}`);return{model:await i.arrayBuffer()}}if("background_webgl2"===e||"background_webgl"===e||"background_webgl_unet"===e){let o=(a.path||r.p)+`./data/${e}/${t}_v${n}.json`,i=(a.path||r.p)+`./data/${e}/${t}_v${n}.weights`;a.token&&(o+="?"+a.token,i+="?"+a.token);const[s,u]=await Promise.all([fetch(o),fetch(i)]),[c,f]=await Promise.all([s.json(),u.arrayBuffer()]),l=JSON.parse(JSON.stringify(c)),h=new Float32Array(f),p=Object.keys(c),d=["weights","biases"];c[p[0]].debugImage&&d.push("debugImage");for(let e of p)for(let t of d){let[r,n]=c[e][t];l[e][t]=h.slice(n,n+r)}return l}{let o=(a.path||r.p)+`./data/${e}/${t}_v${n}.json`;a.token&&(o=o+"?"+a.token);const i=await fetch(o);return await i.json()}};function D(e,t){const{cmd:r,msgId:n}=e,a="w-"+r;"render"===r?(self.postMessage({cmd:a,msgId:n,ret:t},[t.bitmap]),t.bitmap.close()):self.postMessage({cmd:a,msgId:n,ret:t})}r(757),self.glWorker=new class{constructor(){}async preloadBackground(e){if("string"==typeof e.background)try{let t=await fetch(e.background);return self.preloadedBackground=await t.blob(),!0}catch(t){return console.warn(`Vectorly: unable to load ${e.background} as a background image`),!1}else if(e.background instanceof ImageBitmap)return self.preloadedBackground=e.background,!0}async getNetwork(e){const{name:t,token:r}=e;this.NetworkClass=await C(t,r)}async getParameters(e){const{name:t,tag:r,version:n,token:a}=e;this.networkParams={name:t,tag:r,version:n},this.networkParameters=await F(t,r,n,a)}async initWebGLContext(e){const{canvas:t,options:r}=e;return this.gl=new a(t,r),!0}async render(e){const{inputImage:t}=e;return this.frameBuffer&&this.frameBuffer.setInputImage(t),this.renderer&&await this.renderer.render(),t.close(),{bitmap:await createImageBitmap(this.gl.canvas)}}async instantiateNetwork(r){if(this.networkOptions=r.networkOptions,this.gl)return this.frameBuffer=new class{constructor(e){this.gl=e,this.iterations=0,this.textures=[{},{}],this.frame_buffers=[{},{}],this.inputTex=null,this.inputCanvas=null,this.frame_difference=0}drawToCanvas(){const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)}setBuffer(e){const t=this.gl,r=this.iterations%2*this.frame_difference;t.bindFramebuffer(t.FRAMEBUFFER,this.frame_buffers[r][e])}setInputFrameCanvas(){t(),n(this.inputCanvas)||(this.inputCanvas=function(t,r){if(e())return new OffscreenCanvas(t,r);{const e=document.createElement("canvas");return e.width=t,e.height=r,e}}(this.gl.input.w,this.gl.input.h).getContext("2d")),this.inputCanvas.canvas.width=this.gl.input.w,this.inputCanvas.canvas.height=this.gl.input.h}videoToCanvas(e){return this.inputCanvas.drawImage(e,0,0,this.gl.input.w,this.gl.input.h),this.inputCanvas.canvas}getInputTexture(){const e=this.gl;if(null===this.inputTex){let t=e.createTexture();this.inputTex=this._setTextureSize(t,e.input.w,e.input.h)}return this.inputTex}setInputImage(e){this.input=e;const t=this.gl;n(this.inputCanvas)&&1===t.getVersion()&&(e=this.videoToCanvas(e));let r=this.getInputTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.texture_format,t.RGBA,t.texture_type,e);for(let e=0;e<=this.frame_difference;e++)this.textures[e].INPUT=[r]}setImageAsTexture(e,t){const r=this.gl;let n=r.createTexture();r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.texture_format,r.RGBA,r.texture_type,e);for(let e=0;e<=this.frame_difference;e++)this.textures[e][t]=[n]}createBufferWithTextures(e,t,r=1,n=null){const a=this.gl;for(let o=0;o<=this.frame_difference;o++){const i=a.createFramebuffer();this.frame_buffers[o][e]=i,a.bindFramebuffer(a.FRAMEBUFFER,i);const s=[];this.textures[o][e]=null;for(let e=0;e<t;++e){let t=this.createAndSetupTexture(n);t=this._setTextureSize(t,a.input.w*r,a.input.h*r),s.push(t),a.bindTexture(a.TEXTURE_2D,t),a.texImage2D(a.TEXTURE_2D,0,a.texture_format,a.input.w*r,a.input.h*r,0,a.RGBA,a.texture_type,null),a.framebufferTexture2D(a.FRAMEBUFFER,a.getCOLOR_ATTACHMENT(e),a.TEXTURE_2D,t,0)}this.textures[o][e]=s}}createBufferWithTextures2(e,t,r,n,a={}){const o=this.gl;if(r<=0||n<=0)throw new Error("Texture width and height must be greater than 0");let i=a.format||o.RGBA,s=a.minFilter||o.NEAREST,u=a.magFilter||o.NEAREST,c=a.type||o.texture_type||o.UNSIGNED_BYTE,f=a.internalFormat||o.texture_format||o.RGBA;for(let a=0;a<=this.frame_difference;a++){const l=o.createFramebuffer();this.frame_buffers[a][e]=l,o.bindFramebuffer(o.FRAMEBUFFER,l);const h=[];this.textures[a][e]=null;for(let e=0;e<t;++e){let t;1===o.getVersion()?t=this.createTexture_webgl1(f,r,n,i,c,s,u):(f===o.RGBA&&(f=o.RGBA8),t=this.createTexture_webgl2(f,r,n,s,u)),o.framebufferTexture2D(o.FRAMEBUFFER,o.getCOLOR_ATTACHMENT(e),o.TEXTURE_2D,t,0),h.push(t)}this.textures[a][e]=h}}getTextureSize(e,t=0,r=0){if(!this.textures[t][e][r])throw new Error(`Failed to get resolution of textures for layer: ${e} at index: ${index}`);return this.textures[t][e][r].size}createTexture_webgl2(e,t,r,n,a){n=n||gl.NEAREST,a=a||gl.NEAREST,e=e||gl.texture_format||gl.RGBA;let o=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,o),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,n),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,a),gl.texStorage2D(gl.TEXTURE_2D,1,e,t,r),o=this._setTextureSize(o,t,r),o}createTexture_webgl1(e,t,r,n,a,o,i){n=n||gl.RGBA,o=o||gl.NEAREST,i=i||gl.NEAREST,a=a||gl.texture_type||gl.UNSIGNED_BYTE,e=e||gl.texture_format||gl.RGBA;let s=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,s),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,o),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,i),gl.texImage2D(gl.TEXTURE_2D,0,e,t,r,0,n,a,null),s=this._setTextureSize(s,t,r),s}createFloatTextureFromArrayBuffer(e,t,r,n,a,o,i,s){o=o||gl.RGBA,i=i||gl.NEAREST,s=s||gl.NEAREST,a=a||gl.texture_type||gl.UNSIGNED_BYTE,t=t||gl.texture_format||gl.RGBA;const u=new Float32Array(e);let c=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,c),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,i),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,s),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA32F,r,n,0,gl.RGBA,gl.FLOAT,u),c=this._setTextureSize(c,r,n),c}_setTextureSize(e,t,r){return t>0&&r>0&&(e.size={},e.size.width=t,e.size.height=r),e}setBufferForLayer(e,t){for(let r=0;r<=this.frame_difference;r++){const n=gl.createFramebuffer();this.frame_buffers[r][e]=n,gl.bindFramebuffer(gl.FRAMEBUFFER,n);for(let e=0;e<t.length;e++)gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.getCOLOR_ATTACHMENT(e),gl.TEXTURE_2D,t[e],0);this.textures[r][e]=t}}getTexture(e){const t=this.iterations%2*this.frame_difference;return this.textures[t][e]}getLastFrameTexture(e){const t=1-this.iterations%2;return this.textures[t][e]}clearall(){Object.keys(this.textures[0]).forEach((e=>{for(let t=0;t<=this.frame_difference;t++){this.gl.deleteFramebuffer(this.frame_buffers[t][e]),this.frame_buffers[t][e]=null;for(let r=0;r<this.textures[t][e].length;++r)this.gl.deleteTexture(this.textures[t][e][r]),this.textures[t][e][r]=null}})),this.gl.deleteTexture(this.inputTex),this.inputTex=null,this.inputCanvas=null,this.frame_buffers=[{},{}],this.textures=[{},{}],this.gl.clearCanvas()}createAndSetupTexture(e=null){const t=this.gl;t.extensions.EXT_FLOAT_LINEAR||(e=null),null===e&&(e=t.NEAREST);const r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),r}}(this.gl),this.networkOptions.networkParams=this.networkParams,this.networkInstance=new this.NetworkClass(this.gl,this.frameBuffer,this.networkParameters,this.networkOptions),this.initialized=this.networkInstance.initialized,await this.initialized,!0;throw Error(`this.gl is ${this.gl}: maybe called instantiateNetwork without calling initWebGLContext?`)}async initRenderer(e){return this.renderInputSize=e.renderInputSize,this.renderer=new class{constructor(e,t,r,n){this.gl=e,this.network=t,this.frameBuffer=r,this.renderSize={w:n.w,h:n.h},this.metrics={"Render Size":this.renderSize,"Original Size":e.input,"Upscale Factor":t.upscaleFactor,FPS:0},this.setProperties(n)}setProperties(e={w:1278,h:720,disableVideoToCanvas:!1}){const t=this;!0!==e.disableVideoToCanvas&&this.frameBuffer.setInputFrameCanvas(),void 0===e.w&&(e.w=this.network.upscaleFactor*this.gl.input.w),void 0===e.h&&(e.h=this.network.upscaleFactor*this.gl.input.h),this.renderSize=e,this.gl.resizeRenderSize(e.w,e.h,this.network.upscaleFactor),null!==this.frameBuffer.inputTex&&setTimeout((()=>{t.network.renderRGB(t.gl.render_scale)})),t.metrics["Render Size"]=e}setInputSize(e={w:426,h:240},t=null){this.gl.input={w:e.w,h:e.h},this.network.resetTextureBuffers(),this.setProperties(t||this.renderSize)}async resetNetwork(e){this.frameBuffer.clearall(),this.network=await async function(e={name:"",version:"",tag:"",token:""},t,r){let n=null,a=null;try{a=await F(e.name,e.tag,e.version,e.token)}catch(e){throw console.error("%cParameter load failed:","background:black; color: yellow"),new Error(e)}if(!a)throw console.error("%cParameter load failed:","background:black; color: yellow"),new Error("");try{const o=C(e.name,e.token);n=await o,n=new n(t,r,a)}catch(e){throw console.error("%cNetwork load failed:","background:black; color: yellow"),new Error(e)}return n}({name:e.name,version:e.version,tag:e.tag},this.gl,this.network.frameBuffer),this.frameBuffer=this.network.frameBuffer,this.gl=this.network.gl,this.setProperties(this.renderSize)}changeNetwork(e){this.network=e,this.frameBuffer=this.network.frameBuffer,this.gl=this.network.gl}async loadBitmap(e){const t=this.frameBuffer;this.network,t.setInputImage(e),await this.render()}loadImage(e){const t=new Image;t.src=e;const r=this.frameBuffer,n=this,a=this.network;t.onload=async function(){r.setInputImage(t),await n.render(),a.getImageBytes()}}async render(e){const t=this.gl,r=this.network;t.clearColor(0,0,0,1),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),r.initialized&&await r.initialized,await r.feedForward(t.render_scale,e),t.flush()}}(this.gl,this.networkInstance,this.frameBuffer,this.renderInputSize),!0}async setRenderSize(e){this.renderInputSize=e.renderInputSize,this.renderer&&this.renderer.setProperties(this.renderInputSize)}async setInputSize(e){this.inputSize=e.inputSize,this.renderer&&this.renderer.setInputSize(this.inputSize)}async changeNetwork(e){this.networkOptions=e.networkOptions,this.gl&&(this.frameBuffer&&this.frameBuffer.clearall(),this.networkOptions.networkParams=this.networkParams,this.networkInstance=new this.NetworkClass(this.gl,this.frameBuffer,this.networkParameters,this.networkOptions),this.renderer.changeNetwork(this.networkInstance))}async updateOptions(e){const{update:t}=e;await this.networkInstance.updateOptions(t)}},self.onmessage=async function(e){const{cmd:t,params:r}=e.data;if(self.glWorker[t]&&"function"==typeof self.glWorker[t])try{const n=await self.glWorker[t](r);D(e.data,n)}catch(t){console.error("Caught error",t),D(e.data,{error:t.toString()})}else console.error(`No function ${t} for glWorker`),D(e.data,{error:`No function ${t} for glWorker`})}}()}();',"Worker",void 0,void 0)}var $=function(){function S(W){(0,b.Z)(this,S),this.worker=new T,this.id=W.id||(0,I.v4)(),this.framerate=W.framerate}var E,z,te;return(0,v.Z)(S,[{key:"destroy",value:function(){this.worker&&this.worker.terminate()}},{key:"preloadBackground",value:(te=(0,f.Z)(x().mark(function W(Y){var q;return x().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(Y){ee.next=2;break}return ee.abrupt("return",!1);case 2:return typeof Y=="string"?q=this.sendMessageToWorker("preloadBackground",{background:Y}).retValP:(this.preloaded=Y,q=this.sendMessageToWorker("preloadBackground",{background:Y},[Y]).retValP),ee.abrupt("return",q);case 4:case"end":return ee.stop()}},W,this)})),function(W){return te.apply(this,arguments)})},{key:"getParameters",value:function(W,Y,q,ee){return this.sendMessageToWorker("getParameters",{name:W,tag:Y,version:q,token:ee}).retValP}},{key:"getNetwork",value:function(W,Y){return this.sendMessageToWorker("getNetwork",{name:W,token:Y}).retValP}},{key:"initWebGLContext",value:function(W,Y){return this.sendMessageToWorker("initWebGLContext",{canvas:W,options:Y},[W]).retValP}},{key:"initRenderer",value:function(W){return this.sendMessageToWorker("initRenderer",{renderInputSize:W}).retValP}},{key:"setRenderSize",value:function(W){return this.sendMessageToWorker("setRenderSize",{renderInputSize:W}).retValP}},{key:"setInputSize",value:function(W){return this.sendMessageToWorker("setInputSize",{inputSize:W}).retValP}},{key:"instantiateNetwork",value:function(W){return typeof W.background.image!="string"&&delete W.background.image,this.sendMessageToWorker("instantiateNetwork",{networkOptions:W}).retValP}},{key:"changeNetwork",value:function(W){return this.sendMessageToWorker("changeNetwork",{networkOptions:W}).retValP}},{key:"updateOptions",value:function(W){return W.framerate&&(this.framerate=Math.min(W.framerate||24,this.trackFrameRate)),W.background&&W.background.image instanceof ImageBitmap?this.sendMessageToWorker("updateOptions",{update:W},[W.background.image]):this.sendMessageToWorker("updateOptions",{update:W})}},{key:"_getImageCapture",value:function(W){var Y;if(W instanceof MediaStream)Y=W;else{if(!(W instanceof HTMLVideoElement))throw new Error("input in _getImageCapture is neither MediaStream nor HTMLVideoElement: ".concat(W));Y=W.captureStream()}var q=Y.getVideoTracks(),ee=(0,C.Z)(q,1)[0];(0,U.ok)()&&console.log("In _getImageCapture",ee);var re=document.createElement("video");return re.width=ee.getSettings().width,re.height=ee.getSettings().height,re.srcObject=Y,re.play(),this.video=re,this.trackFrameRate=ee.getSettings().frameRate,this.framerate=Math.min(this.framerate||24,this.trackFrameRate),this.lastRenderTime=Date.now(),re}},{key:"_setInput",value:function(W){(0,U.ok)()&&console.log("imageCapInstance",this.imageCapInstance),W instanceof ImageBitmap?this.imageBitmap=W:this.imageCapInstance=this._getImageCapture(W)}},{key:"render",value:(z=(0,f.Z)(x().mark(function W(Y){var q,ee,re,F;return x().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!this.imageCapInstance&&!this.imageBitmap){N.next=27;break}if(N.prev=1,N.t0=this.imageBitmap,N.t0){N.next=7;break}return N.next=6,createImageBitmap(this.video);case 6:N.t0=N.sent;case 7:if(q=N.t0,(0,U.ok)()&&console.log("grabFrame.then",this,q),!((ee=Math.round(1e3/this.framerate)-(Date.now()-this.lastRenderTime))>0)){N.next=13;break}return N.next=13,new Promise(function(Z){setTimeout(Z,ee)});case 13:if(this.lastRenderTime=Date.now(),!Y.passthrough){N.next=16;break}return N.abrupt("return",new Promise(function(Z){Z({bitmap:q})}));case 16:return re=this.sendMessageToWorker("render",{inputImage:q},[q]),F=re.retValP,q.close(),N.abrupt("return",F);case 21:return N.prev=21,N.t1=N.catch(1),(0,U.ok)()&&console.error("in render",N.t1),N.abrupt("return",!1);case 25:N.next=29;break;case 27:return(0,U.ok)()&&console.error("this.imageCapInstance",this.imageCapInstance),N.abrupt("return",!1);case 29:case"end":return N.stop()}},W,this,[[1,21]])})),function(W){return z.apply(this,arguments)})},{key:"sendMessageToWorker",value:function(W,Y){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];(0,U.ok)()&&W!=="render"&&console.log("sendMessageToWorker",W,Y,q);var ee=(0,I.v4)(),re=this.getWorkerMessage(W,ee);return this.worker.postMessage({cmd:W,msgId:ee,params:Y},q),{msgId:ee,retValP:re}}},{key:"getWorkerMessage",value:(E=(0,f.Z)(x().mark(function W(Y,q){var ee;return x().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return ee=this.worker,re.abrupt("return",new Promise(function(F,N){var Z="w-"+Y,A=new AbortController;ee.addEventListener("message",function(O){if((0,U.ok)()&&Y!=="render"&&console.log("Message event",O),O.data.cmd===Z&&O.data.msgId===q){if((0,U.ok)()&&Y!=="render"&&console.log("Aborting",O.data),O.data.ret&&O.data.ret.error)N(O.data.ret.error);else{var D=O.data.ret===void 0||O.data.ret;(0,U.ok)()&&Y!=="render"&&console.log("resolving",O.data,D),F(D)}A.abort()}},{signal:A.signal})}));case 2:case"end":return re.stop()}},W,this)})),function(W,Y){return E.apply(this,arguments)})}]),S}(),B=$,G=c(33),H=c(820);function X(S,E){(E==null||E>S.length)&&(E=S.length);for(var z=0,te=new Array(E);z<E;z++)te[z]=S[z];return te}function h(S,E){var z=Object.keys(S);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(S);E&&(te=te.filter(function(W){return Object.getOwnPropertyDescriptor(S,W).enumerable})),z.push.apply(z,te)}return z}function s(S){for(var E=1;E<arguments.length;E++){var z=arguments[E]!=null?arguments[E]:{};E%2?h(Object(z),!0).forEach(function(te){(0,g.Z)(S,te,z[te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(z)):h(Object(z)).forEach(function(te){Object.defineProperty(S,te,Object.getOwnPropertyDescriptor(z,te))})}return S}var y=function(){function S(F,N){(0,b.Z)(this,S),(0,U.ok)()&&console.log("Initialized upscaler with",F);var Z=N;this.video=F,this.stream=Z.stream,this.id=Z.id||(0,I.v4)(),this.videoParent=F.parentNode,this.token=Z.token,this.serverType=Z.serverType,this.webgl,this.framerate=Z.framerate,this.fixaspectratio=Z.fixaspectratio||!0,this.passthrough=!1,this.inputChangePreHook=Z.inputChangePreHook||function(){return!0},this.renderSize=Z.renderSize,Z.container==="disable"?this.container=null:this.container=Z.container||F.parentNode,(0,U.ok)()&&console.log("Container is",this.container),this.container&&(this.container.style.background="black",this.container.style.resize="both",this.container.style.overflow="hidden",this.ro=this.getResizeObserver(this.setRenderSize.bind(this)),this.ro.observe(this.container)),this.margin={top:0,left:0},this.use_webgl1=Z.use_webgl1||"false",this.float_type=Z.float_type||"float16",this.scale=Z.scale||3,Z.networkParams=Z.networkParams||{},this.networkParams={name:"residual_3k_3x",tag:"general",version:"2.1"},this.networkParams=Object.assign(this.networkParams,Z.networkParams),this.networkOptions=Z.networkOptions||{},(Z.network||Z.tag||Z.version)&&(this.networkParams.name=Z.network||this.networkParams.name,this.networkParams.tag=Z.tag||this.networkParams.tag,this.networkParams.name==="residual_3k_3x"?this.networkParams.version=Z.version||Z.networkParams.version||"2.1":this.networkParams.version=Z.version||Z.networkParams.version||"0"),Z.network==="residual_3k"?this.networkParams={name:"residual_3k_3x",tag:"general",version:"2.1"}:Z.network==="residual_5k"&&(this.networkParams={name:"residual_5k_3x",tag:"general",version:"0"}),(0,U.ok)()&&console.log("Loading Upscaling network ".concat(this.networkParams.name," - tag - ").concat(this.networkParams.tag,"  - version ").concat(this.networkParams.version)),this.glHandle=new B({id:this.id,framerate:this.framerate});var A=this.initCanvas(),O=A.canvas,D=A.offscreen;this.canvas=O,this.offscreen=D,this.instantiateP=this.instantiateNetwork(),this.setupMetrics(),this.initEvents(),this.reqHandle={noDelay:!1,useRAF:!("requestVideoFrameCallback"in HTMLVideoElement.prototype)},this.reqHandle.noDelay=!0,Z.reqHandle=Z.reqHandle||{},this.reqHandle=s(s({},this.reqHandle),Z.reqHandle),this.enabled=Z.enabled===void 0||Boolean(Z.enabled),this.enabled?this.enable():this.disable(),this.isPlaying=!1,this.playerInitTime=Date.now(),this.initialized=this.initializeNetwork(F),this.error=null,this.analyticsEnabled=!1,this.updateInterval=Z.updateInterval||5e3,this.debug=Z.debug===!0,this.debugRender=Z.debugRender===!0,this.initAnalytics()}var E,z,te,W,Y,q,ee,re;return(0,v.Z)(S,[{key:"initAnalytics",value:(re=(0,f.Z)(x().mark(function F(){return x().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:case"end":return N.stop()}},F)})),function(){return re.apply(this,arguments)})},{key:"trackEventListener",value:function(F){var N=this;return function(){N.debug&&console.log("TrackEventListener",F),N.trackAnalytics(F+" Event",{upscale:N.enabled,type:N.events[F].type,currentTime:N.video.currentTime})}}},{key:"trackAnalytics",value:function(F,N){this.debug&&console.log("Tracking",F,N)}},{key:"updateStream",value:function(F){this.stream=F,this.glHandle._setInput(this.stream)}},{key:"setupMetrics",value:function(){this.prv=performance.now(),this.frames={rendered:{sinceTimestamp:0,total:0},video:{total:0}},this.metrics={renderSize:{w:1278,h:720},originalSize:{w:this.video.videoWidth,h:this.video.videoHeight},upscaleFactor:this.scale,droppedFrames:0,fps:0,upscaledFrames:0,videoFrames:0}}},{key:"changeNetwork",value:(ee=(0,f.Z)(x().mark(function F(N){var Z,A;return x().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return this.debug&&console.log("Changing network from",this.networkParams,"to",N),this.networkParams.name=N.name||this.networkParams.name,this.networkParams.tag=N.tag||this.networkParams.tag,this.networkParams.version=N.version||this.networkParams.version,O.next=6,(0,U.re)(this.networkParams,this.token,this.serverType);case 6:return Z=O.sent,O.prev=7,A=this.glHandle.getParameters(this.networkParams.name,this.networkParams.tag,this.networkParams.version,Z),O.next=11,this.glHandle.getNetwork(this.networkParams.name,Z);case 11:return this.NetworkClass=O.sent,O.next=14,A;case 14:return this.networkParameters=O.sent,O.next=17,this.glHandle.changeNetwork(this.networkOptions);case 17:this.renderSize&&this.setRenderSize(this.renderSize),this.render(),O.next=26;break;case 21:O.prev=21,O.t0=O.catch(7),console.error("Error fetching network parameters and model or changing model",O.t0),document.dispatchEvent(this.events.error),this.disable();case 26:case"end":return O.stop()}},F,this,[[7,21]])})),function(F){return ee.apply(this,arguments)})},{key:"instantiateNetwork",value:(q=(0,f.Z)(x().mark(function F(){var N,Z,A;return x().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,U.re)(this.networkParams,this.token,this.serverType);case 2:return N=O.sent,O.prev=3,Z=this.glHandle.preloadBackground(this.networkOptions.background.image),A=this.glHandle.getParameters(this.networkParams.name,this.networkParams.tag,this.networkParams.version,N),O.next=8,this.glHandle.getNetwork(this.networkParams.name,N);case 8:return this.NetworkClass=O.sent,O.next=11,A;case 11:return this.networkParameters=O.sent,O.next=14,Z;case 14:O.sent||this.networkOptions.background.type!=="virtual"||console.warn("Unable to load ".concat(this.networkOptions.background.image," as background image")),this.container?this.container.insertBefore(this.canvas,this.video.nextSibling):document.body.appendChild(this.canvas),O.next=27;break;case 19:throw O.prev=19,O.t0=O.catch(3),console.error("Error in instantiateNetwork",O.t0),document.dispatchEvent(this.events.error),this.initialized=!1,this.error=O.t0,this.disable(),O.t0;case 27:case"end":return O.stop()}},F,this,[[3,19]])})),function(){return q.apply(this,arguments)})},{key:"disable",value:function(){var F=this.video;F.style.height="100%",F.style.width="100%",this.canvas.style.visibility="hidden",F.style.visibility="visible",this.enabled=!1,this.trackAnalytics("Disabled",{upscale:this.enabled})}},{key:"enable",value:function(){this.video.style.visibility="hidden",this.canvas.style.visibility="hidden",this.enabled=!0,this.debug&&console.log("isPlaying",(0,U.yA)(this.video)),this.metrics.frameCount=0,(0,U.yA)(this.video)&&this.render(),this.trackAnalytics("Enabled",{upscale:this.enabled})}},{key:"initEvents",value:function(){var F={};this.eventList=["load","error","stop","start"],this.eventList.forEach(function(N){F[N]=new Event("vectorly-upscaler-"+N)}),this.events=F}},{key:"on",value:function(F,N){return document.addEventListener("vectorly-upscaler-"+F,N),this}},{key:"getResizeObserver",value:function(F){return new G.Z(function(N){var Z,A=function(K,P){var j=typeof Symbol!="undefined"&&K[Symbol.iterator]||K["@@iterator"];if(!j){if(Array.isArray(K)||(j=function(fe,_e){if(fe){if(typeof fe=="string")return X(fe,_e);var ke=Object.prototype.toString.call(fe).slice(8,-1);return ke==="Object"&&fe.constructor&&(ke=fe.constructor.name),ke==="Map"||ke==="Set"?Array.from(fe):ke==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ke)?X(fe,_e):void 0}}(K))||P&&K&&typeof K.length=="number"){j&&(K=j);var L=0,oe=function(){};return{s:oe,n:function(){return L>=K.length?{done:!0}:{done:!1,value:K[L++]}},e:function(fe){throw fe},f:oe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie,se=!0,ye=!1;return{s:function(){j=j.call(K)},n:function(){var fe=j.next();return se=fe.done,fe},e:function(fe){ye=!0,ie=fe},f:function(){try{se||j.return==null||j.return()}finally{if(ye)throw ie}}}}(N);try{for(A.s();!(Z=A.n()).done;){var O=Z.value.contentRect,D=O.width,ne=O.height;F({w:D,h:ne})}}catch(K){A.e(K)}finally{A.f()}})}},{key:"setRenderSize",value:function(F){var N=this.renderSize;this.debug&&console.log("Setting renderSize","w",F.w,"h",F.h),this.renderSize=F;var Z=this.canvas;if(this.videoSize&&this.fixaspectratio){this.debug&&console.log("video",this.videoSize,"size",F);var A=this.videoSize.width/this.videoSize.height,O={},D={top:0,left:0,w:F.w,h:F.h};O.w=Math.round(F.h*A),O.h=Math.round(F.w/A),this.debug&&console.log("Expected w h",{w:O.w,h:F.h},{w:F.w,h:O.h}),O.w>F.w?(D.w=F.w,D.h=O.h,D.top=(F.h-D.h)/2):O.h>F.h&&(D.w=O.w,D.h=F.h,D.left=(F.w-D.w)/2),this.margin={left:Math.round(D.left),top:Math.round(D.top)},this.renderInputSize={w:D.w,h:D.h},this.metrics.renderSize=this.renderInputSize,this.debug&&console.log("this.margin",this.margin)}else this.renderInputSize=this.renderSize;this.debug&&console.log("===== IN setRenderSize",this.renderInputSize,this.renderSize,this.renderer),this.renderCanvas&&(this.renderCanvas.width=this.renderInputSize.w,this.renderCanvas.height=this.renderInputSize.h),this.renderer&&(this.glHandle.setRenderSize(this.renderInputSize),Z.style.left="".concat(this.margin.left,"px"),Z.style.top="".concat(this.margin.top,"px"),this.initialRender(),this.initRenderLoop(),this.trackAnalytics("Render Resize",{renderSize:this.metrics.renderSize,previousRenderSize:N}))}},{key:"setVideoSize",value:function(F){this.debug&&console.log("Setting videoSize to",F,"from",this.videoSize);var N=!1;if(this.videoSize){var Z={currentSrc:this.video.currentSrc!==this.videoSrc.currentSrc,srcObject:this.video.srcObject!==this.videoSrc.srcObject};Z.currentSrc||Z.srcObject?(this.videoSrc={currentSrc:this.video.currentSrc,srcObject:this.video.srcObject},this.reqHandle=this.reqHandle||{},this.reqHandle.useRAF=!0,N=!0):N=F.width!==this.videoSize.width||F.height!==this.videoSize.height}else this.videoSrc={currentSrc:this.video.currentSrc,srcObject:this.video.srcObject},N=!0;if(N){var A=this.inputChangePreHook({before:this.videoSize,after:F},this);this.videoSize=F,this.trackAnalytics("Video Resize",{videoSize:F,previousVideoSize:this.videoSize,resizedProcessed:A}),A?(this.inputSize={w:F.width,h:F.height},this.renderer&&this.glHandle.setInputSize(this.inputSize),this.renderSize&&this.setRenderSize(this.renderSize)):(this.debug&&console.log("not changing as Prehook for inputChange returned",A),this.disable())}}},{key:"initializeNetwork",value:(Y=(0,f.Z)(x().mark(function F(N){var Z,A,O,D=this;return x().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.prev=0,this.debug&&console.log("Waiting for",this.canvas.id),Z=(0,U.br)("canvas#"+this.canvas.id),A=(0,U.uF)(N),ne.next=6,Promise.all([Z,A,this.instantiateP]);case 6:return this.debug&&console.log("Found canvas ",this.canvas.id),ne.next=9,A;case 9:return O=ne.sent,this.setVideoSize(O),N.addEventListener("resize",function(){D.setVideoSize({width:N.videoWidth,height:N.videoHeight}),D.metrics.originalSize={w:N.videoWidth,h:N.videoHeight},N.requestVideoFrameCallback&&N.requestVideoFrameCallback(function(){this.renderAFrame()}.bind(D))}),this.renderSize=this.renderSize||{w:1278,h:720},this.setRenderSize(this.renderSize),ne.next=16,this.initializeWebGL();case 16:return ne.abrupt("return",!0);case 19:return ne.prev=19,ne.t0=ne.catch(0),this.error=ne.t0,ne.abrupt("return",!1);case 23:case"end":return ne.stop()}},F,this,[[0,19]])})),function(F){return Y.apply(this,arguments)})},{key:"renderAFrame",value:(W=(0,f.Z)(x().mark(function F(N){var Z;return x().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return this.debugRender&&(this.lastTime=this.lastTime||Date.now(),this.currentTime=Date.now(),console.log("renderAFrame",N,this.currentTime-this.lastTime),this.lastTime=this.currentTime),A.next=3,this.glHandle.render({passthrough:this.passthrough});case 3:if(Z=A.sent){A.next=6;break}return A.abrupt("return",!1);case 6:return this.renderContext&&this.renderContext.transferFromImageBitmap(Z.bitmap),Z.bitmap.close(),A.abrupt("return",!0);case 9:case"end":return A.stop()}},F,this)})),function(F){return W.apply(this,arguments)})},{key:"initializeWebGL",value:(te=(0,f.Z)(x().mark(function F(){return x().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return this.debug&&console.log("Initializing WebGL context and network",this.inputSize,this.renderInputSize),N.prev=1,N.next=4,this.glHandle.initWebGLContext(this.offscreen,{h:this.inputSize.h,w:this.inputSize.w,use_webgl1:this.use_webgl1,float_type:this.float_type});case 4:this.gl=N.sent,this.debug&&console.log("this.gl initialized",this.gl.input),N.next=11;break;case 8:N.prev=8,N.t0=N.catch(1),this.gl=null;case 11:if(!this.gl){N.next=29;break}return this.initialized=this.glHandle.instantiateNetwork(this.networkOptions),N.next=15,this.initialized;case 15:return this.frameBuffer=N.sent,N.next=18,this.glHandle.initRenderer(this.renderInputSize);case 18:this.renderer=N.sent,this.debug&&console.log("this.renderer",this.renderer),this.canvas.style.left="".concat(this.margin.left,"px"),this.canvas.style.top="".concat(this.margin.top,"px"),this.debug&&console.log("this.stream",this.stream),this.glHandle._setInput(this.stream),this.initialRender(),this.initVideoEventRender(),this.initRenderLoop(),N.next=31;break;case 29:document.dispatchEvent(this.events.error),this.disable();case 31:case"end":return N.stop()}},F,this,[[1,8]])})),function(){return te.apply(this,arguments)})},{key:"initRenderLoop",value:function(){var F=this.video;(0,U.yA)(this.video)&&this.render(),F.addEventListener("play",function(){this.render()}.bind(this)),document.dispatchEvent(this.events.load)}},{key:"initialRender",value:function(){var F=this,N=this.video;this.debug&&console.log("Calling Initial Render"),N.readyState===4&&setTimeout(function(){F.renderAFrame()},100),N.requestVideoFrameCallback&&N.requestVideoFrameCallback(function(){if((0,U.yA)(N))return null;this.renderAFrame()}.bind(this))}},{key:"initVideoEventRender",value:function(){var F=this.video;F.oncanplaythrough=function(){this.renderAFrame()}.bind(this),F.onloadeddata=function(){this.renderAFrame()}.bind(this)}},{key:"updateFrameMetrics",value:function(){var F=this.updateInterval||5e3;if(this.frames.rendered.total++,this.frames.rendered.sinceTimestamp++,this.metrics.upscaledFrames++,performance.now()-this.prv>F){this.metrics.fps=JSON.parse(JSON.stringify(this.frames.rendered.sinceTimestamp))/(F/1e3),this.prv=performance.now(),this.frames.rendered.sinceTimestamp=0;var N=this.video,Z=N.webkitDecodedFrameCount||N.mozPresentedFrames||N.decodedFrames||N.presentedFrames;Z&&(this.frames.video.total=Z,this.metrics.videoFrames=Z,this.metrics.droppedFrames=this.metrics.videoFrames-this.metrics.upscaledFrames,this.debug&&this.debug&&console.log("currentTime: ".concat(this.video.currentTime,", FPS: ").concat(this.metrics.fps,", Dropped frames: ").concat(this.metrics.droppedFrames,", Video Frame: ").concat(this.metrics.videoFrames,", Rendered frames: ").concat(this.metrics.upscaledFrames)),this.trackAnalytics("Playback Metrics",{FPS:this.metrics.fps,droppedFrames:this.metrics.droppedFrames,videoFrames:this.metrics.videoFrames,upscaledFrames:this.metrics.upscaledFrames,currentTime:this.video.currentTime}))}}},{key:"renderVideoFrame",value:(z=(0,f.Z)(x().mark(function F(N){var Z,A,O=this;return x().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(D.prev=0,this.debugRender&&console.log("Calling renderVideoFrame in a loop",N),!this.cancelledRenderers){D.next=7;break}if(!((Z=this.cancelledRenderers.indexOf(N))>-1)){D.next=7;break}return delete this.cancelledRenderers[Z],D.abrupt("return");case 7:if(!(this.video&&this.frameBuffer&&this.renderer)){D.next=27;break}return D.next=10,this.renderAFrame(N);case 10:if(A=D.sent,this.debug&&console.log("===========Updated",A),A&&(this.updateFrameMetrics(),this.metrics.frameCount+=1),!this.reqHandle.noDelay){D.next=27;break}if(!this.enabled){D.next=25;break}if(!A){D.next=21;break}return D.next=18,this.renderVideoFrame(N);case 18:return D.abrupt("return");case 21:return setTimeout(function(){return O.renderVideoFrame(N)},16),D.abrupt("return");case 23:D.next=27;break;case 25:return document.dispatchEvent(this.events.stop),D.abrupt("return");case 27:(0,U.yA)(this.video)&&this.enabled?(this.debugRender&&console.log("calling requestFrame"),this.requestFrame(this.video,this.renderVideoFrame.bind(this)),this.isPlaying=!0):(this.debugRender&&console.log("STOPPED playing"),document.dispatchEvent(this.events.stop),this.isPlaying=!1),D.next=33;break;case 30:D.prev=30,D.t0=D.catch(0),console.error("Error in renderVideoFrame",D.t0);case 33:case"end":return D.stop()}},F,this,[[0,30]])})),function(F){return z.apply(this,arguments)})},{key:"requestFrame",value:function(F,N){if(this.reqHandle=this.reqHandle||{},this.reqHandle.useRAF){var Z=(0,H.U7)(N);this.reqHandle.raf=Z}else{var A=F.requestVideoFrameCallback(N);this.reqHandle.video=F,this.reqHandle.rfvc=A}}},{key:"updateNetworkOptions",value:(E=(0,f.Z)(x().mark(function F(N){return x().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.glHandle.updateOptions(N);case 2:N.passthrough!==void 0&&(this.passthrough=N.passthrough);case 3:case"end":return Z.stop()}},F,this)})),function(F){return E.apply(this,arguments)})},{key:"cancelLastRender",value:function(){if(this.debugRender&&console.log("Canceling last render"),this.reqHandle=this.reqHandle||{},this.reqHandle.noDelay&&this.previousRenderCaller&&(this.cancelledRenderers=this.cancelledRenderers||[],this.cancelledRenderers.push("my-render-".concat(this.previousRenderCaller))),this.reqHandle.rfvc){var F=this.reqHandle,N=F.video,Z=F.rfvc;N.cancelVideoFrameCallback(Z),this.reqHandle.rfvc=null}if(this.reqHandle.raf){var A=this.reqHandle.raf;(0,H.Wx)(A),this.reqHandle.raf=null}}},{key:"render",value:function(){this.previousRenderCaller=this.renderCaller,this.renderCaller=(this.renderCaller||0)+1,this.debugRender&&console.log("Starting render call with isPlaying",this.isPlaying),this.prv=performance.now(),this.cancelLastRender(),this.renderVideoFrame("my-render-".concat(this.renderCaller)),document.dispatchEvent(this.events.start)}},{key:"initCanvas",value:function(){var F=document.createElement("canvas");F.id="canv-"+this.id,F.style.position="absolute",F.style.left=this.margin.left,F.style.top=this.margin.top;var N=document.createElement("canvas");this.renderContext=N.getContext("bitmaprenderer"),this.renderCanvas=N,window.upscalers=window.upscalers||{},window.upscalers[F.id]=this;var Z=F.transferControlToOffscreen();return{canvas:F,offscreen:Z}}}]),S}(),k=y},296:function(l,m,c){c.r(m);var f=c(861),g=c(671),b=c(144),v=c(757),_=c.n(v),x=c(706),C=c(33),I=c(55),U=c(877),M=c(820);function V($,B){(B==null||B>$.length)&&(B=$.length);for(var G=0,H=new Array(B);G<B;G++)H[G]=$[G];return H}var T=function(){function $(k,S){(0,g.Z)(this,$),(0,I.ok)()&&console.log("Initialized upscaler with",k);var E=S;switch(this.video=k,this.id=E.id||(0,U.v4)(),this.videoParent=k.parentNode,this.token=E.token,this.serverType=E.serverType,this.fixaspectratio=E.fixaspectratio||!0,this.inputChangePreHook=E.inputChangePreHook||function(){return!0},this.renderSize=E.renderSize,E.container==="disable"?this.container=null:this.container=E.container||k.parentNode,(0,I.ok)()&&console.log("Container is",this.container),this.container&&(this.container.style.background="black",this.container.style.resize="both",this.container.style.overflow="hidden",this.ro=this.getResizeObserver(this.setRenderSize.bind(this)),this.ro.observe(this.container)),this.margin={top:0,left:0},this.use_webgl1=E.use_webgl1||"false",this.float_type=E.float_type||"float16",this.scale=E.scale||3,E.networkParams=E.networkParams||{},this.networkParams={name:"residual_3k_3x",tag:"general",version:"2.1"},this.networkParams=Object.assign(this.networkParams,E.networkParams),this.networkOptions=E.networkOptions||{},(E.network||E.tag||E.version)&&(this.networkParams.name=E.network||this.networkParams.name,this.networkParams.tag=E.tag||this.networkParams.tag,this.networkParams.name==="residual_3k_3x"?this.networkParams.version=E.version||E.networkParams.version||"2.1":this.networkParams.version=E.version||E.networkParams.version||"0"),E.network==="residual_3k"?this.networkParams={name:"residual_3k_3x",tag:"general",version:"2.1"}:E.network==="residual_5k"&&(this.networkParams={name:"residual_5k_3x",tag:"general",version:"0"}),this.networkParams.name){case"residual_3k_3x":case"residual_5k_3x":case"residual_4k_3x":case"residual_4k_2x":case"residual_10k_1x":case"cnn_demo":this.networkType="upscaler";break;case"background_selfie":case"background_webgl":case"background_webgl2":case"background_webgl_unet":this.networkType="background";break;default:console.warning("INVALID networkType for network with params",this.networkParams),this.networkType="INVALID"}this.canvas=this.initCanvas(),this.instantiateP=this.instantiateNetwork(),this.setupMetrics(),this.initEvents(),this.reqHandle={useRAF:!("requestVideoFrameCallback"in HTMLVideoElement.prototype)},this.enable(),this.isPlaying=!1,this.playerInitTime=Date.now(),this.initialized=this.initializeNetwork(k),this.error=null,this.analyticsEnabled=!1,this.debug=E.debug===!0,this.debugRender=E.debugRender===!0,this.initAnalytics()}var B,G,H,X,h,s,y;return(0,b.Z)($,[{key:"initAnalytics",value:(y=(0,f.Z)(_().mark(function k(){return _().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:case"end":return S.stop()}},k)})),function(){return y.apply(this,arguments)})},{key:"trackEventListener",value:function(k){var S=this;return function(){S.debug&&console.log("TrackEventListener",k),S.trackAnalytics(k+" Event",{upscale:S.enabled,type:S.events[k].type,currentTime:S.video.currentTime})}}},{key:"trackAnalytics",value:function(k,S){this.debug&&console.log("Tracking",k,S)}},{key:"setupMetrics",value:function(){this.prv=performance.now(),this.frames={rendered:{sinceTimestamp:0,total:0},video:{total:0}},this.metrics={renderSize:{w:1278,h:720},originalSize:{w:this.video.videoWidth,h:this.video.videoHeight},upscaleFactor:this.scale,droppedFrames:0,fps:0,upscaledFrames:0,videoFrames:0}}},{key:"changeNetwork",value:(s=(0,f.Z)(_().mark(function k(S){var E,z;return _().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return this.debug&&console.log("Changing network from",this.networkParams,"to",S),this.networkParams.name=S.name||this.networkParams.name,this.networkParams.tag=S.tag||this.networkParams.tag,this.networkParams.version=S.version||this.networkParams.version,te.next=6,(0,I.re)(this.networkParams,this.token,this.serverType);case 6:return E=te.sent,te.prev=7,z=(0,x.ZS)(this.networkParams.name,this.networkParams.tag,this.networkParams.version,E),te.next=11,(0,x.Hy)(this.networkParams.name,E);case 11:return this.NetworkClass=te.sent,te.next=14,z;case 14:this.networkParameters=te.sent,this.frameBuffer.clearall(),this.networkOptions.networkParams=this.networkParams,this.networkInstance=new this.NetworkClass(this.gl,this.frameBuffer,this.networkParameters,this.networkOptions),this.renderer.changeNetwork(this.networkInstance),this.renderSize&&this.setRenderSize(this.renderSize),this.render(),te.next=28;break;case 23:te.prev=23,te.t0=te.catch(7),console.error("Error fetching network parameters and model or changing model",te.t0),document.dispatchEvent(this.events.error),this.disable();case 28:case"end":return te.stop()}},k,this,[[7,23]])})),function(k){return s.apply(this,arguments)})},{key:"instantiateNetwork",value:(h=(0,f.Z)(_().mark(function k(){var S,E,z;return _().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,(0,I.re)(this.networkParams,this.token,this.serverType);case 2:return S=te.sent,te.prev=3,this.networkType==="background"&&this.networkOptions.background&&(E=this.preloadBackground(this.networkOptions.background.image)),z=(0,x.ZS)(this.networkParams.name,this.networkParams.tag,this.networkParams.version,S),te.next=8,(0,x.Hy)(this.networkParams.name,S);case 8:return this.NetworkClass=te.sent,te.next=11,z;case 11:if(this.networkParameters=te.sent,!E){te.next=15;break}return te.next=15,E;case 15:this.container?this.container.insertBefore(this.canvas,this.video.nextSibling):document.body.appendChild(this.canvas),te.next=26;break;case 18:throw te.prev=18,te.t0=te.catch(3),console.error("Error in instantiateNetwork",te.t0),document.dispatchEvent(this.events.error),this.initialized=!1,this.error=te.t0,this.disable(),te.t0;case 26:case"end":return te.stop()}},k,this,[[3,18]])})),function(){return h.apply(this,arguments)})},{key:"disable",value:function(){var k=this.video;k.style.height="100%",k.style.width="100%",this.canvas.style.visibility="hidden",k.style.visibility="visible",this.enabled=!1,this.trackAnalytics("Disabled",{upscale:this.enabled})}},{key:"enable",value:function(){this.video.style.visibility="hidden",this.canvas.style.visibility="visible",this.enabled=!0,(0,I.yA)(this.video)&&this.render(),this.trackAnalytics("Enabled",{upscale:this.enabled})}},{key:"initEvents",value:function(){var k={};this.eventList=["load","error","stop","start"],this.eventList.forEach(function(S){k[S]=new Event("vectorly-upscaler-"+S)}),this.events=k}},{key:"on",value:function(k,S){return document.addEventListener("vectorly-upscaler-"+k,S),this}},{key:"getResizeObserver",value:function(k){return new C.Z(function(S){var E,z=function(q,ee){var re=typeof Symbol!="undefined"&&q[Symbol.iterator]||q["@@iterator"];if(!re){if(Array.isArray(q)||(re=function(D,ne){if(D){if(typeof D=="string")return V(D,ne);var K=Object.prototype.toString.call(D).slice(8,-1);return K==="Object"&&D.constructor&&(K=D.constructor.name),K==="Map"||K==="Set"?Array.from(D):K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K)?V(D,ne):void 0}}(q))||ee&&q&&typeof q.length=="number"){re&&(q=re);var F=0,N=function(){};return{s:N,n:function(){return F>=q.length?{done:!0}:{done:!1,value:q[F++]}},e:function(D){throw D},f:N}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Z,A=!0,O=!1;return{s:function(){re=re.call(q)},n:function(){var D=re.next();return A=D.done,D},e:function(D){O=!0,Z=D},f:function(){try{A||re.return==null||re.return()}finally{if(O)throw Z}}}}(S);try{for(z.s();!(E=z.n()).done;){var te=E.value.contentRect,W=te.width,Y=te.height;k({w:W,h:Y})}}catch(q){z.e(q)}finally{z.f()}})}},{key:"setRenderSize",value:function(k){var S=this.renderSize;this.debug&&console.log("Setting renderSize","w",k.w,"h",k.h),this.renderSize=k;var E=this.canvas;if(this.videoSize&&this.fixaspectratio){this.debug&&console.log("video",this.videoSize,"size",k);var z=this.videoSize.width/this.videoSize.height,te={},W={top:0,left:0,w:k.w,h:k.h};te.w=Math.round(k.h*z),te.h=Math.round(k.w/z),this.debug&&console.log("Expected w h",{w:te.w,h:k.h},{w:k.w,h:te.h}),te.w>k.w?(W.w=k.w,W.h=te.h,W.top=(k.h-W.h)/2):te.h>k.h&&(W.w=te.w,W.h=k.h,W.left=(k.w-W.w)/2),this.margin={left:Math.round(W.left),top:Math.round(W.top)},this.renderInputSize={w:W.w,h:W.h},this.metrics.renderSize=this.renderInputSize,this.debug&&console.log("this.margin",this.margin)}else this.renderInputSize=this.renderSize;this.debug&&console.log("===== IN setRenderSize",this.renderInputSize,this.renderSize,this.renderer),this.renderer&&(this.renderer.setProperties(this.renderInputSize),E.style.left="".concat(this.margin.left,"px"),E.style.top="".concat(this.margin.top,"px"),this.initialRender(),this.initRenderLoop(),this.trackAnalytics("Render Resize",{renderSize:this.metrics.renderSize,previousRenderSize:S}))}},{key:"setVideoSize",value:function(k){this.debug&&console.log("Setting videoSize to",k,"from",this.videoSize);var S=!1;if(this.videoSize){var E={currentSrc:this.video.currentSrc!==this.videoSrc.currentSrc,srcObject:this.video.srcObject!==this.videoSrc.srcObject};E.currentSrc||E.srcObject?(this.videoSrc={currentSrc:this.video.currentSrc,srcObject:this.video.srcObject},this.reqHandle=this.reqHandle||{},this.reqHandle.useRAF=!0,S=!0):S=k.width!==this.videoSize.width||k.height!==this.videoSize.height}else this.videoSrc={currentSrc:this.video.currentSrc,srcObject:this.video.srcObject},S=!0;if(S){var z=this.inputChangePreHook({before:this.videoSize,after:k},this);this.videoSize=k,this.trackAnalytics("Video Resize",{videoSize:k,previousVideoSize:this.videoSize,resizedProcessed:z}),z?(this.inputSize={w:k.width,h:k.height},this.renderer&&this.renderer.setInputSize(this.inputSize),this.renderSize&&this.setRenderSize(this.renderSize)):(this.debug&&console.log("not changing as Prehook for inputChange returned",z),this.disable())}}},{key:"initializeNetwork",value:(X=(0,f.Z)(_().mark(function k(S){var E,z,te,W=this;return _().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.prev=0,this.debug&&console.log("Waiting for",this.canvas.id),E=(0,I.br)("canvas#"+this.canvas.id),z=(0,I.uF)(S),Y.next=6,Promise.all([E,z,this.instantiateP]);case 6:return this.debug&&console.log("Found canvas ",this.canvas.id),Y.next=9,z;case 9:return te=Y.sent,this.setVideoSize(te),S.addEventListener("resize",function(){W.setVideoSize({width:S.videoWidth,height:S.videoHeight}),W.metrics.originalSize={w:S.videoWidth,h:S.videoHeight},S.requestVideoFrameCallback&&S.requestVideoFrameCallback(function(){this.renderAFrame()}.bind(W))}),this.renderSize=this.renderSize||{w:1278,h:720},this.setRenderSize(this.renderSize),this.initializeWebGL(),Y.abrupt("return",!0);case 18:return Y.prev=18,Y.t0=Y.catch(0),this.error=Y.t0,Y.abrupt("return",!1);case 22:case"end":return Y.stop()}},k,this,[[0,18]])})),function(k){return X.apply(this,arguments)})},{key:"renderAFrame",value:function(){this.frameBuffer&&this.frameBuffer.setInputImage(this.video),this.renderer&&this.renderer.render()}},{key:"initializeWebGL",value:(H=(0,f.Z)(_().mark(function k(){return _().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:this.debug&&console.log("Initializing WebGL context and network",this.inputSize,this.renderInputSize);try{this.gl=new x.yb(this.canvas.id,{h:this.inputSize.h,w:this.inputSize.w,use_webgl1:this.use_webgl1,float_type:this.float_type}),this.debug&&console.log("this.gl initialized",this.gl.input)}catch(E){console.warn("Error in intializing WebGLContext",E),this.gl=null}if(!this.gl){S.next=17;break}return this.frameBuffer=new x.uL(this.gl),this.networkOptions.networkParams=this.networkParams,this.networkInstance=new this.NetworkClass(this.gl,this.frameBuffer,this.networkParameters,this.networkOptions),this.initialized=this.networkInstance.initialized,S.next=9,this.initialized;case 9:this.renderer=new x.Th(this.gl,this.networkInstance,this.frameBuffer,this.renderInputSize),this.canvas.style.left="".concat(this.margin.left,"px"),this.canvas.style.top="".concat(this.margin.top,"px"),this.initialRender(),this.initVideoEventRender(),this.initRenderLoop(),S.next=19;break;case 17:document.dispatchEvent(this.events.error),this.disable();case 19:case"end":return S.stop()}},k,this)})),function(){return H.apply(this,arguments)})},{key:"initRenderLoop",value:function(){var k=this.video;(0,I.yA)(this.video)&&this.render(),k.addEventListener("play",function(){this.render()}.bind(this)),document.dispatchEvent(this.events.load)}},{key:"initialRender",value:function(){var k=this,S=this.video;this.debug&&console.log("Calling Initial Render"),S.readyState===4&&setTimeout(function(){k.renderAFrame()},100),S.requestVideoFrameCallback&&S.requestVideoFrameCallback(function(){if((0,I.yA)(S))return null;this.renderAFrame()}.bind(this))}},{key:"initVideoEventRender",value:function(){var k=this.video;k.oncanplaythrough=function(){this.renderAFrame()}.bind(this),k.onloadeddata=function(){this.renderAFrame()}.bind(this)}},{key:"updateFrameMetrics",value:function(){if(this.frames.rendered.total++,this.frames.rendered.sinceTimestamp++,this.metrics.upscaledFrames++,performance.now()-this.prv>1e4){this.metrics.fps=JSON.parse(JSON.stringify(this.frames.rendered.sinceTimestamp)),this.prv=performance.now(),this.frames.rendered.sinceTimestamp=0;var k=this.video,S=k.webkitDecodedFrameCount||k.mozPresentedFrames||k.decodedFrames||k.presentedFrames;S&&(this.frames.video.total=S,this.metrics.videoFrames=S,this.metrics.droppedFrames=this.metrics.videoFrames-this.metrics.upscaledFrames,this.debug&&console.log("currentTime: ".concat(this.video.currentTime,", FPS: ").concat(this.metrics.fps,", Dropped frames: ").concat(this.metrics.droppedFrames,", Video Frame: ").concat(this.metrics.videoFrames,", Rendered frames: ").concat(this.metrics.upscaledFrames)),this.trackAnalytics("Playback Metrics",{FPS:this.metrics.fps,droppedFrames:this.metrics.droppedFrames,videoFrames:this.metrics.videoFrames,upscaledFrames:this.metrics.upscaledFrames,currentTime:this.video.currentTime}))}}},{key:"renderVideoFrame",value:function(k){try{this.debugRender&&console.log("Calling renderVideoFrame in a loop",k),this.video&&this.frameBuffer&&this.renderer&&(this.renderAFrame(),this.updateFrameMetrics()),(0,I.yA)(this.video)&&this.enabled?(this.debugRender&&console.log("calling requestFrame"),this.requestFrame(this.video,this.renderVideoFrame.bind(this)),this.isPlaying=!0):(this.debugRender&&console.log("STOPPED playing"),document.dispatchEvent(this.events.stop),this.isPlaying=!1)}catch(S){console.error("Error in renderVideoFrame",S)}}},{key:"requestFrame",value:function(k,S){if(this.reqHandle=this.reqHandle||{},this.reqHandle.useRAF){var E=(0,M.U7)(S);this.reqHandle.raf=E}else{var z=k.requestVideoFrameCallback(S);this.reqHandle.video=k,this.reqHandle.rfvc=z}}},{key:"updateNetworkOptions",value:(G=(0,f.Z)(_().mark(function k(S){return _().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.networkInstance.updateOptions(S);case 2:case"end":return E.stop()}},k,this)})),function(k){return G.apply(this,arguments)})},{key:"cancelLastRender",value:function(){if(this.debugRender&&console.log("Canceling last render"),this.reqHandle=this.reqHandle||{},this.reqHandle.rfvc){var k=this.reqHandle,S=k.video,E=k.rfvc;S.cancelVideoFrameCallback(E),this.reqHandle.rfvc=null}if(this.reqHandle.raf){var z=this.reqHandle.raf;(0,M.Wx)(z),this.reqHandle.raf=null}}},{key:"preloadBackground",value:(B=(0,f.Z)(_().mark(function k(S){var E;return _().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(z.prev=0,typeof S!="string"){z.next=9;break}return z.next=4,fetch(S);case 4:return E=z.sent,z.next=7,E.blob();case 7:return self.preloadedBackground=z.sent,z.abrupt("return",!0);case 9:z.next=15;break;case 11:return z.prev=11,z.t0=z.catch(0),console.warn("Vectorly: unable to load ".concat(S," as a background image")),z.abrupt("return",!1);case 15:case"end":return z.stop()}},k,null,[[0,11]])})),function(k){return B.apply(this,arguments)})},{key:"render",value:function(){this.renderCaller=(this.renderCaller||0)+1,this.debugRender&&console.log("Starting render call with isPlaying",this.isPlaying),this.prv=performance.now(),this.cancelLastRender(),this.renderVideoFrame("my-render-".concat(this.renderCaller)),document.dispatchEvent(this.events.start)}},{key:"initCanvas",value:function(){var k=document.createElement("canvas");return k.id="canv-"+this.id,k.style.position="absolute",k.style.left=this.margin.left,k.style.top=this.margin.top,window.upscalers=window.upscalers||{},window.upscalers[k.id]=this,k}}]),$}();m.default=T},55:function(l,m,c){c.d(m,{br:function(){return v},uF:function(){return _},yA:function(){return x},re:function(){return M},Qy:function(){return V},ok:function(){return T}});var f=c(861),g=c(757),b=c.n(g);function v($){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e5;return new Promise(function(G,H){var X=document.querySelector($),h=setTimeout(function(){H("waitForElement failed for"+$)},B);if(X)G(X);else{var s=new MutationObserver(function(y){y.forEach(function(k){for(var S=0,E=Array.from(k.addedNodes);S<E.length;S++){var z=E[S];if(z.matches&&z.matches($))return s.disconnect(),G(z),void clearTimeout(h)}})});s.observe(document.documentElement,{childList:!0,subtree:!0})}})}function _($){return new Promise(function(B,G){if($ instanceof HTMLVideoElement){if($.videoWidth*$.videoHeight>0)return void B({width:$.videoWidth,height:$.videoHeight});$.onloadedmetadata=function(){B({width:$.videoWidth,height:$.videoHeight})},$.onerror=function(){G()}}else $ instanceof HTMLImageElement&&B({width:$.naturalWidth,height:$.naturalHeight})})}var x=function($){return $ instanceof HTMLMediaElement?!($.paused||$.ended):$ instanceof HTMLImageElement||void 0},C=function($){var B,G=$||"production";switch(G){case"local":B="http://localhost:4000";break;case"staging":B="https://stream-staging.vectorly.io";break;default:B="https://stream.vectorly.io"}return B},I=function(){var $="1.6.10";return"https://cdn.vectorly.io/ai-filters/v1/".concat($,"/")},U=function(){var $=(0,f.Z)(b().mark(function B(G,H,X){var h,s,y,k,S;return b().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return h=I(),s="".concat(C(X),"/upscaler/models/").concat(G.name,"?token=").concat(H,"&path=").concat(encodeURI(h),"&version=").concat(G.version,"&tag=").concat(G.tag),E.next=4,fetch(s);case 4:if(!(y=E.sent).ok){E.next=14;break}return E.next=8,y.json();case 8:return k=E.sent,S=k.token,E.abrupt("return",S);case 14:case 15:case"end":return E.stop()}},B)}));return function(B,G,H){return $.apply(this,arguments)}}(),M=function(){var $=(0,f.Z)(b().mark(function B(G,H,X){var h;return b().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(h={path:I()},!X||X!=="staging"&&X!=="local"){s.next=13;break}return s.prev=2,s.next=5,U(G,H,X);case 5:h.token=s.sent,s.next=11;break;case 8:s.prev=8,s.t0=s.catch(2),console.log("Error while fetching token in staging, defaulting to local files",s.t0);case 11:s.next=16;break;case 13:return s.next=15,U(G,H,X);case 15:h.token=s.sent;case 16:return s.abrupt("return",h);case 17:case"end":return s.stop()}},B,null,[[2,8]])}));return function(B,G,H){return $.apply(this,arguments)}}();function V(){var $={};return["load","error","stop","start"].forEach(function(B){$[B]=new Event("vectorly-upscaler-"+B)}),$}function T(){return!1}},841:function(l,m,c){c.r(m);var f=c(861),g=c(671),b=c(144),v=c(757),_=c.n(v),x=c(706),C=c(877),I=c(55),U=function(){function M(){(0,g.Z)(this,M),this.events=(0,I.Qy)()}var V,T,$,B,G,H,X,h;return(0,b.Z)(M,[{key:"load",value:(h=(0,f.Z)(_().mark(function s(y){var k,S,E;return _().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(y){z.next=4;break}throw console.log("load: "),document.dispatchEvent(this.events.error),new Error("Invalid load config");case 4:return this.token=y.token,this.serverType=y.serverType,k=this.initCanvasWebGL(y),S=this.initFrameBufferWebGL(k),z.next=10,this.importNetwork(S,y.networkParams,y.networkOptions);case 10:return E=z.sent,this.networkInstance=E,z.next=14,this.initRenderer(E,S,y.renderSize);case 14:this.renderer=z.sent;case 15:case"end":return z.stop()}},s,this)})),function(s){return h.apply(this,arguments)})},{key:"on",value:function(s,y){return document.addEventListener("vectorly-upscaler-"+s,y),this}},{key:"initCanvasWebGL",value:function(s){try{return s&&s.canvas&&s.w&&s.h,(0,x.yb)(s.canvas,s)}catch(y){throw console.error("Error in initCanvasWebGL: ",y),document.dispatchEvent(this.events.error),y}}},{key:"initFrameBufferWebGL",value:function(s){try{if(!s)throw new Error("WebGLContext not found");return new x.uL(s)}catch(y){throw console.error("Error in initFrameBufferWebGL: ",y),document.dispatchEvent(this.events.error),y}}},{key:"importNetwork",value:(X=(0,f.Z)(_().mark(function s(y,k,S){var E,z,te,W;return _().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.prev=0,y.clearall()&&k.name&&k.tag&&k.version,Y.next=4,(0,I.re)(k,this.token,this.serverType);case 4:return E=Y.sent,Y.next=7,(0,x.ZS)(k.name,k.tag,k.version,E);case 7:return z=Y.sent,Y.next=10,(0,x.Hy)(k.name,E);case 10:return te=Y.sent,S.networkParams=k,W=new te(y.gl,y,z,S),Y.abrupt("return",W);case 16:throw Y.prev=16,Y.t0=Y.catch(0),console.error("Error in importNetwork: ",Y.t0),document.dispatchEvent(this.events.error),Y.t0;case 21:case"end":return Y.stop()}},s,this,[[0,16]])})),function(s,y,k){return X.apply(this,arguments)})},{key:"updateNetworkOptions",value:(H=(0,f.Z)(_().mark(function s(y){return _().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(k.t0=this.renderer,!k.t0){k.next=4;break}return k.next=4,this.renderer;case 4:if(k.t1=this.networkInstance,!k.t1){k.next=8;break}return k.next=8,this.networkInstance.updateOptions(y);case 8:case"end":return k.stop()}},s,this)})),function(s){return H.apply(this,arguments)})},{key:"initRenderer",value:(G=(0,f.Z)(_().mark(function s(y,k,S){var E;return _().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.prev=0,S==null&&(S={}),z.next=4,y;case 4:return y=z.sent,E=new x.Th(k.gl,y,k,S),document.dispatchEvent(this.events.load),z.abrupt("return",E);case 10:throw z.prev=10,z.t0=z.catch(0),console.error("Error in initRenderer: ",z.t0),document.dispatchEvent(this.events.error),z.t0;case 15:case"end":return z.stop()}},s,this,[[0,10]])})),function(s,y,k){return G.apply(this,arguments)})},{key:"render",value:(B=(0,f.Z)(_().mark(function s(){var y;return _().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.prev=0,k.next=3,this.renderer;case 3:(y=k.sent)&&y.render(),k.next=12;break;case 7:throw k.prev=7,k.t0=k.catch(0),console.error("Error in render: ",k.t0),document.dispatchEvent(this.events.error),k.t0;case 12:case"end":return k.stop()}},s,this,[[0,7]])})),function(){return B.apply(this,arguments)})},{key:"updateInputResolution",value:($=(0,f.Z)(_().mark(function s(y){return _().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.prev=0,y.w&&y.h||console.warn("warning: Invalid InputSize width and height"),k.next=4,this.renderer;case 4:k.sent.setInputSize(y),k.next=13;break;case 8:throw k.prev=8,k.t0=k.catch(0),console.error("Error in updateInputResolution: ",k.t0),document.dispatchEvent(this.events.error),k.t0;case 13:case"end":return k.stop()}},s,this,[[0,8]])})),function(s){return $.apply(this,arguments)})},{key:"updateRenderResolution",value:(T=(0,f.Z)(_().mark(function s(y){return _().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.prev=0,y.w&&y.h||console.warn("warning: Invalid renderSize width and height passed"),k.next=4,this.renderer;case 4:k.sent.setProperties(y),k.next=13;break;case 8:throw k.prev=8,k.t0=k.catch(0),console.error("Error in updateInputResolution: ",k.t0),document.dispatchEvent(this.events.error),k.t0;case 13:case"end":return k.stop()}},s,this,[[0,8]])})),function(s){return T.apply(this,arguments)})},{key:"setInput",value:(V=(0,f.Z)(_().mark(function s(y){var k;return _().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.prev=0,S.next=3,this.renderer;case 3:(k=S.sent).frameBuffer.setInputImage(y),k.frameBuffer.iterations+=1,S.next=13;break;case 8:throw S.prev=8,S.t0=S.catch(0),console.error("Error in setInput: ",S.t0),document.dispatchEvent(this.events.error),S.t0;case 13:case"end":return S.stop()}},s,this,[[0,8]])})),function(s){return V.apply(this,arguments)})},{key:"createCanvas",value:function(s){try{var y=document.createElement("canvas");return y.id=s.id||"canv-"+(0,C.v4)(),y.width=s.w||100,y.height=s.h||100,y}catch(k){throw console.error("Error in canvasConfig: ",k),document.dispatchEvent(this.events.error),k}}}]),M}();m.default={core:U}},444:function(l){l.exports=m=>{if(typeof m!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof m}\``);return!/^[a-zA-Z]:\\/.test(m)&&/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(m)}},190:function(l,m,c){const f=c(444);l.exports=g=>!f(g)},820:function(l,m,c){c.d(m,{Wx:function(){return M},U7:function(){return U}}),l=c.hmd(l);let f=1;const g=typeof self=="object"&&self.self==self?self:typeof c.g=="object"&&c.g.global==c.g?c.g:{},b=Date.now();let v={},_=Date.now();const x=T=>{if(typeof T!="function")throw new TypeError(T+" is not a function");const $=Date.now(),B=$-_,G=B>16?0:16-B,H=f++;return v[H]=T,Object.keys(v).length>1||setTimeout(()=>{_=$;const X=v;v={},Object.keys(X).forEach(h=>X[h](g.performance&&typeof g.performance.now=="function"?g.performance.now():Date.now()-b))},G),H},C=T=>typeof T!="string"?x:T===""?g.requestAnimationFrame:g[T+"RequestAnimationFrame"],I=((T,$)=>{let B=0;for(;T[B]!==void 0;){if($(T[B]))return T[B];B+=1}})(["","webkit","moz","ms","o"],T=>!!C(T)),U=C(I),M=typeof(V=I)!="string"?T=>{delete v[T]}:V===""?g.cancelAnimationFrame:g[V+"CancelAnimationFrame"]||g[V+"CancelRequestAnimationFrame"];var V;g.requestAnimationFrame=U,g.cancelAnimationFrame=M,l.exports&&(l.exports={requestAnimationFrame:U,cancelAnimationFrame:M})},33:function(l,m,c){var f=function(){if(typeof Map!="undefined")return Map;function S(E,z){var te=-1;return E.some(function(W,Y){return W[0]===z&&(te=Y,!0)}),te}return function(){function E(){this.__entries__=[]}return Object.defineProperty(E.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),E.prototype.get=function(z){var te=S(this.__entries__,z),W=this.__entries__[te];return W&&W[1]},E.prototype.set=function(z,te){var W=S(this.__entries__,z);~W?this.__entries__[W][1]=te:this.__entries__.push([z,te])},E.prototype.delete=function(z){var te=this.__entries__,W=S(te,z);~W&&te.splice(W,1)},E.prototype.has=function(z){return!!~S(this.__entries__,z)},E.prototype.clear=function(){this.__entries__.splice(0)},E.prototype.forEach=function(z,te){te===void 0&&(te=null);for(var W=0,Y=this.__entries__;W<Y.length;W++){var q=Y[W];z.call(te,q[1],q[0])}},E}()}(),g=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,b=c.g!==void 0&&c.g.Math===Math?c.g:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")(),v=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(b):function(S){return setTimeout(function(){return S(Date.now())},1e3/60)},_=["top","right","bottom","left","width","height","size","weight"],x=typeof MutationObserver!="undefined",C=function(){function S(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(E,z){var te=!1,W=!1,Y=0;function q(){te&&(te=!1,E()),W&&re()}function ee(){v(q)}function re(){var F=Date.now();if(te){if(F-Y<2)return;W=!0}else te=!0,W=!1,setTimeout(ee,20);Y=F}return re}(this.refresh.bind(this))}return S.prototype.addObserver=function(E){~this.observers_.indexOf(E)||this.observers_.push(E),this.connected_||this.connect_()},S.prototype.removeObserver=function(E){var z=this.observers_,te=z.indexOf(E);~te&&z.splice(te,1),!z.length&&this.connected_&&this.disconnect_()},S.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},S.prototype.updateObservers_=function(){var E=this.observers_.filter(function(z){return z.gatherActive(),z.hasActive()});return E.forEach(function(z){return z.broadcastActive()}),E.length>0},S.prototype.connect_=function(){g&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),x?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},S.prototype.disconnect_=function(){g&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},S.prototype.onTransitionEnd_=function(E){var z=E.propertyName,te=z===void 0?"":z;_.some(function(W){return!!~te.indexOf(W)})&&this.refresh()},S.getInstance=function(){return this.instance_||(this.instance_=new S),this.instance_},S.instance_=null,S}(),I=function(S,E){for(var z=0,te=Object.keys(E);z<te.length;z++){var W=te[z];Object.defineProperty(S,W,{value:E[W],enumerable:!1,writable:!1,configurable:!0})}return S},U=function(S){return S&&S.ownerDocument&&S.ownerDocument.defaultView||b},M=G(0,0,0,0);function V(S){return parseFloat(S)||0}function T(S){for(var E=[],z=1;z<arguments.length;z++)E[z-1]=arguments[z];return E.reduce(function(te,W){return te+V(S["border-"+W+"-width"])},0)}var $=typeof SVGGraphicsElement!="undefined"?function(S){return S instanceof U(S).SVGGraphicsElement}:function(S){return S instanceof U(S).SVGElement&&typeof S.getBBox=="function"};function B(S){return g?$(S)?function(E){var z=E.getBBox();return G(0,0,z.width,z.height)}(S):function(E){var z=E.clientWidth,te=E.clientHeight;if(!z&&!te)return M;var W=U(E).getComputedStyle(E),Y=function(A){for(var O={},D=0,ne=["top","right","bottom","left"];D<ne.length;D++){var K=ne[D],P=A["padding-"+K];O[K]=V(P)}return O}(W),q=Y.left+Y.right,ee=Y.top+Y.bottom,re=V(W.width),F=V(W.height);if(W.boxSizing==="border-box"&&(Math.round(re+q)!==z&&(re-=T(W,"left","right")+q),Math.round(F+ee)!==te&&(F-=T(W,"top","bottom")+ee)),!function(A){return A===U(A).document.documentElement}(E)){var N=Math.round(re+q)-z,Z=Math.round(F+ee)-te;Math.abs(N)!==1&&(re-=N),Math.abs(Z)!==1&&(F-=Z)}return G(Y.left,Y.top,re,F)}(S):M}function G(S,E,z,te){return{x:S,y:E,width:z,height:te}}var H=function(){function S(E){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=G(0,0,0,0),this.target=E}return S.prototype.isActive=function(){var E=B(this.target);return this.contentRect_=E,E.width!==this.broadcastWidth||E.height!==this.broadcastHeight},S.prototype.broadcastRect=function(){var E=this.contentRect_;return this.broadcastWidth=E.width,this.broadcastHeight=E.height,E},S}(),X=function(S,E){var z,te,W,Y,q,ee,re,F=(te=(z=E).x,W=z.y,Y=z.width,q=z.height,ee=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,re=Object.create(ee.prototype),I(re,{x:te,y:W,width:Y,height:q,top:W,right:te+Y,bottom:q+W,left:te}),re);I(this,{target:S,contentRect:F})},h=function(){function S(E,z,te){if(this.activeObservations_=[],this.observations_=new f,typeof E!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=E,this.controller_=z,this.callbackCtx_=te}return S.prototype.observe=function(E){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element!="undefined"&&Element instanceof Object){if(!(E instanceof U(E).Element))throw new TypeError('parameter 1 is not of type "Element".');var z=this.observations_;z.has(E)||(z.set(E,new H(E)),this.controller_.addObserver(this),this.controller_.refresh())}},S.prototype.unobserve=function(E){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element!="undefined"&&Element instanceof Object){if(!(E instanceof U(E).Element))throw new TypeError('parameter 1 is not of type "Element".');var z=this.observations_;z.has(E)&&(z.delete(E),z.size||this.controller_.removeObserver(this))}},S.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},S.prototype.gatherActive=function(){var E=this;this.clearActive(),this.observations_.forEach(function(z){z.isActive()&&E.activeObservations_.push(z)})},S.prototype.broadcastActive=function(){if(this.hasActive()){var E=this.callbackCtx_,z=this.activeObservations_.map(function(te){return new X(te.target,te.broadcastRect())});this.callback_.call(E,z,E),this.clearActive()}},S.prototype.clearActive=function(){this.activeObservations_.splice(0)},S.prototype.hasActive=function(){return this.activeObservations_.length>0},S}(),s=typeof WeakMap!="undefined"?new WeakMap:new f,y=function S(E){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var z=C.getInstance(),te=new h(E,z,this);s.set(this,te)};["observe","unobserve","disconnect"].forEach(function(S){y.prototype[S]=function(){var E;return(E=s.get(this))[S].apply(E,arguments)}});var k=b.ResizeObserver!==void 0?b.ResizeObserver:y;m.Z=k},877:function(l,m,c){var f=c(570),g=c(171),b=g;b.v1=f,b.v4=g,l.exports=b},327:function(l){for(var m=[],c=0;c<256;++c)m[c]=(c+256).toString(16).substr(1);l.exports=function(f,g){var b=g||0,v=m;return[v[f[b++]],v[f[b++]],v[f[b++]],v[f[b++]],"-",v[f[b++]],v[f[b++]],"-",v[f[b++]],v[f[b++]],"-",v[f[b++]],v[f[b++]],"-",v[f[b++]],v[f[b++]],v[f[b++]],v[f[b++]],v[f[b++]],v[f[b++]]].join("")}},217:function(l){var m=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(m){var c=new Uint8Array(16);l.exports=function(){return m(c),c}}else{var f=new Array(16);l.exports=function(){for(var g,b=0;b<16;b++)(3&b)==0&&(g=4294967296*Math.random()),f[b]=g>>>((3&b)<<3)&255;return f}}},570:function(l,m,c){var f,g,b=c(217),v=c(327),_=0,x=0;l.exports=function(C,I,U){var M=I&&U||0,V=I||[],T=(C=C||{}).node||f,$=C.clockseq!==void 0?C.clockseq:g;if(T==null||$==null){var B=b();T==null&&(T=f=[1|B[0],B[1],B[2],B[3],B[4],B[5]]),$==null&&($=g=16383&(B[6]<<8|B[7]))}var G=C.msecs!==void 0?C.msecs:new Date().getTime(),H=C.nsecs!==void 0?C.nsecs:x+1,X=G-_+(H-x)/1e4;if(X<0&&C.clockseq===void 0&&($=$+1&16383),(X<0||G>_)&&C.nsecs===void 0&&(H=0),H>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_=G,x=H,g=$;var h=(1e4*(268435455&(G+=122192928e5))+H)%4294967296;V[M++]=h>>>24&255,V[M++]=h>>>16&255,V[M++]=h>>>8&255,V[M++]=255&h;var s=G/4294967296*1e4&268435455;V[M++]=s>>>8&255,V[M++]=255&s,V[M++]=s>>>24&15|16,V[M++]=s>>>16&255,V[M++]=$>>>8|128,V[M++]=255&$;for(var y=0;y<6;++y)V[M+y]=T[y];return I||v(V)}},171:function(l,m,c){var f=c(217),g=c(327);l.exports=function(b,v,_){var x=v&&_||0;typeof b=="string"&&(v=b==="binary"?new Array(16):null,b=null);var C=(b=b||{}).random||(b.rng||f)();if(C[6]=15&C[6]|64,C[8]=63&C[8]|128,v)for(var I=0;I<16;++I)v[x+I]=C[I];return v||g(C)}},618:function(l){function m(k,S){if(!C)return!1;const E=k.buffer;let z=U.get(E);if(z==null){if((z=c.validate(E))&&S)try{new c.Instance(new c.Module(E)).exports[0]()}catch{z=!1}U.set(E,z)}return z}const c=WebAssembly,f=(...k)=>Uint8Array.of(0,97,115,109,1,0,0,0,...k),g=(...k)=>Uint32Array.of(1836278016,1,...k),b=(...k)=>g(1610679297,33751040,...k,40239360,259),v=(...k)=>f(1,4,1,96,0,0,3,2,1,0,...k,11,0,10,4,110,97,109,101,2,3,1,0,0),_=(...k)=>Uint16Array.of(24832,28019,1,0,1025,24577,0,515,1,...k),x=(...k)=>_(...k,2842,4096,28164,28001,357,260,256,560,259,0),C=typeof c=="object",I=k=>C&&typeof k=="function",U=new WeakMap,M=g(1610679553,58589440,117440770,805372165,101318656,1107297281,268438272,1835101700,17039717,36700416,259),V=_(773,1,2561,269,11,65,65,65,3068,2816,2560,28164,28001,613,259,0),T=g(1610679297,33751040,134873089,100664833,185276736),$=f(2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1,0,8,4,110,97,109,101,2,1,0),B=Uint16Array.of(24832,28019,1,0,1537,24577,512,32639,515,1,2058,1537,16640,16640,2816,2560,28164,28001,613,259,0),G=x(3082,2561,17152,0,0,252),H=x(2058,1537,16640,49152),X=b(101318657,301990913,268438272,1835101700,17039717),h=v(5,4,1,3,1,1,10,7,1,5,0,254,3,0),s=b(84344833,6357249,17369600,4259847,186257917,1845758464),y=v(10,7,1,5,0,208,112,26);l.exports={support:(k=1)=>C&&m(Uint32Array.of(1836278016,k)),get supportStreaming(){return I(c.instantiateStreaming)},feature:{get bigInt(){return m(M,!0)},get bulk(){return m(V)},get exceptions(){return m(T)},get mutableGlobal(){return m($)},get multiValue(){return m(B)},get saturateConversions(){return m(G)},get signExtensions(){return m(H)},get tailCall(){return m(X)},get threads(){return m(h)},get simd(){return m(s)},get references(){return m(y)},get typeReflection(){return I(c.Memory.type)},get funcReferences(){return I(c.Function)}}}},161:function(l,m){m.HR=function(){if((window==null?void 0:window.WebGLRenderingContext)!==void 0){var c=document.createElement("canvas");return c.getContext("webgl")!=null||c.getContext("experimental-webgl")!=null}return!1},m.W8=function(){return(window==null?void 0:window.WebGLRenderingContext)!==void 0&&document.createElement("canvas").getContext("webgl2")!=null}},477:function(l){l.exports=function(m,c,f,g){var b=self||window;try{try{var v;try{v=new b.Blob([m])}catch{(v=new(b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder)).append(m),v=v.getBlob()}var _=b.URL||b.webkitURL,x=_.createObjectURL(v),C=new b[c](x,f);return _.revokeObjectURL(x),C}catch{return new b[c]("data:application/javascript,".concat(encodeURIComponent(m)),f)}}catch{if(!g)throw Error("Inline worker is not supported");return new b[c](g,f)}}},907:function(l,m,c){function f(g,b){(b==null||b>g.length)&&(b=g.length);for(var v=0,_=new Array(b);v<b;v++)_[v]=g[v];return _}c.d(m,{Z:function(){return f}})},861:function(l,m,c){function f(b,v,_,x,C,I,U){try{var M=b[I](U),V=M.value}catch(T){return void _(T)}M.done?v(V):Promise.resolve(V).then(x,C)}function g(b){return function(){var v=this,_=arguments;return new Promise(function(x,C){var I=b.apply(v,_);function U(V){f(I,x,C,U,M,"next",V)}function M(V){f(I,x,C,U,M,"throw",V)}U(void 0)})}}c.d(m,{Z:function(){return g}})},671:function(l,m,c){function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}c.d(m,{Z:function(){return f}})},144:function(l,m,c){function f(b,v){for(var _=0;_<v.length;_++){var x=v[_];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(b,x.key,x)}}function g(b,v,_){return v&&f(b.prototype,v),_&&f(b,_),b}c.d(m,{Z:function(){return g}})},942:function(l,m,c){function f(g,b,v){return b in g?Object.defineProperty(g,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[b]=v,g}c.d(m,{Z:function(){return f}})},885:function(l,m,c){c.d(m,{Z:function(){return g}});var f=c(181);function g(b,v){return function(_){if(Array.isArray(_))return _}(b)||function(_,x){var C=_==null?null:typeof Symbol!="undefined"&&_[Symbol.iterator]||_["@@iterator"];if(C!=null){var I,U,M=[],V=!0,T=!1;try{for(C=C.call(_);!(V=(I=C.next()).done)&&(M.push(I.value),!x||M.length!==x);V=!0);}catch($){T=!0,U=$}finally{try{V||C.return==null||C.return()}finally{if(T)throw U}}return M}}(b,v)||(0,f.Z)(b,v)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},181:function(l,m,c){c.d(m,{Z:function(){return g}});var f=c(907);function g(b,v){if(b){if(typeof b=="string")return(0,f.Z)(b,v);var _=Object.prototype.toString.call(b).slice(8,-1);return _==="Object"&&b.constructor&&(_=b.constructor.name),_==="Map"||_==="Set"?Array.from(b):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?(0,f.Z)(b,v):void 0}}},147:function(l){l.exports={i8:"1.6.10"}}},a={};function o(l){var m=a[l];if(m!==void 0)return m.exports;var c=a[l]={id:l,loaded:!1,exports:{}};return i[l](c,c.exports,o),c.loaded=!0,c.exports}o.n=function(l){var m=l&&l.__esModule?function(){return l.default}:function(){return l};return o.d(m,{a:m}),m},o.d=function(l,m){for(var c in m)o.o(m,c)&&!o.o(l,c)&&Object.defineProperty(l,c,{enumerable:!0,get:m[c]})},o.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),o.hmd=function(l){return(l=Object.create(l)).children||(l.children=[]),Object.defineProperty(l,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+l.id)}}),l},o.o=function(l,m){return Object.prototype.hasOwnProperty.call(l,m)},o.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},o.p="";var u={};return function(){var l=o(296),m=o(423),c=o(841),f=o(720);u.default={UpscaleFilter:l.default,BackgroundFilter:m.default,BackgroundCoreFilter:f.default,UpscaleCoreFilter:c.default.core}}(),u.default}()})})(vectorly_filters);var ElementQueries$1={exports:{}},ResizeSensor={exports:{}};(function(n,t){(function(i,a){n.exports=a()})(typeof window!="undefined"?window:commonjsGlobal,function(){if(typeof window=="undefined")return null;var i=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")(),a=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||function(g){return i.setTimeout(g,20)},o=i.cancelAnimationFrame||i.mozCancelAnimationFrame||i.webkitCancelAnimationFrame||function(g){i.clearTimeout(g)};function u(g,b){var v=Object.prototype.toString.call(g),_=v==="[object Array]"||v==="[object NodeList]"||v==="[object HTMLCollection]"||v==="[object Object]"||typeof jQuery!="undefined"&&g instanceof jQuery||typeof Elements!="undefined"&&g instanceof Elements,x=0,C=g.length;if(_)for(;x<C;x++)b(g[x]);else b(g)}function l(g){if(!g.getBoundingClientRect)return{width:g.offsetWidth,height:g.offsetHeight};var b=g.getBoundingClientRect();return{width:Math.round(b.width),height:Math.round(b.height)}}function m(g,b){Object.keys(b).forEach(function(v){g.style[v]=b[v]})}var c=function(g,b){var v=0;function _(){var C=[];this.add=function(M){C.push(M)};var I,U;this.call=function(M){for(I=0,U=C.length;I<U;I++)C[I].call(this,M)},this.remove=function(M){var V=[];for(I=0,U=C.length;I<U;I++)C[I]!==M&&V.push(C[I]);C=V},this.length=function(){return C.length}}function x(C,I){if(!!C){if(C.resizedAttached){C.resizedAttached.add(I);return}C.resizedAttached=new _,C.resizedAttached.add(I),C.resizeSensor=document.createElement("div"),C.resizeSensor.dir="ltr",C.resizeSensor.className="resize-sensor";var U={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},M={position:"absolute",left:"0px",top:"0px",transition:"0s"};m(C.resizeSensor,U);var V=document.createElement("div");V.className="resize-sensor-expand",m(V,U);var T=document.createElement("div");m(T,M),V.appendChild(T);var $=document.createElement("div");$.className="resize-sensor-shrink",m($,U);var B=document.createElement("div");m(B,M),m(B,{width:"200%",height:"200%"}),$.appendChild(B),C.resizeSensor.appendChild(V),C.resizeSensor.appendChild($),C.appendChild(C.resizeSensor);var G=window.getComputedStyle(C),H=G?G.getPropertyValue("position"):null;H!=="absolute"&&H!=="relative"&&H!=="fixed"&&H!=="sticky"&&(C.style.position="relative");var X=!1,h=0,s=l(C),y=0,k=0,S=!0;v=0;var E=function(){var q=C.offsetWidth,ee=C.offsetHeight;T.style.width=q+10+"px",T.style.height=ee+10+"px",V.scrollLeft=q+10,V.scrollTop=ee+10,$.scrollLeft=q+10,$.scrollTop=ee+10},z=function(){if(S){var q=C.offsetWidth===0&&C.offsetHeight===0;if(q){v||(v=a(function(){v=0,z()}));return}else S=!1}E()};C.resizeSensor.resetSensor=z;var te=function(){h=0,X&&(y=s.width,k=s.height,C.resizedAttached&&C.resizedAttached.call(s))},W=function(){s=l(C),X=s.width!==y||s.height!==k,X&&!h&&(h=a(te)),z()},Y=function(q,ee,re){q.attachEvent?q.attachEvent("on"+ee,re):q.addEventListener(ee,re)};Y(V,"scroll",W),Y($,"scroll",W),v=a(function(){v=0,z()})}}u(g,function(C){x(C,b)}),this.detach=function(C){v||(o(v),v=0),c.detach(g,C)},this.reset=function(){g.resizeSensor.resetSensor()}};if(c.reset=function(g){u(g,function(b){b.resizeSensor.resetSensor()})},c.detach=function(g,b){u(g,function(v){!v||v.resizedAttached&&typeof b=="function"&&(v.resizedAttached.remove(b),v.resizedAttached.length())||v.resizeSensor&&(v.contains(v.resizeSensor)&&v.removeChild(v.resizeSensor),delete v.resizeSensor,delete v.resizedAttached)})},typeof MutationObserver!="undefined"){var f=new MutationObserver(function(g){for(var b in g)if(g.hasOwnProperty(b))for(var v=g[b].addedNodes,_=0;_<v.length;_++)v[_].resizeSensor&&c.reset(v[_])});document.addEventListener("DOMContentLoaded",function(g){f.observe(document.body,{childList:!0,subtree:!0})})}return c})})(ResizeSensor);(function(n,t){(function(i,a){n.exports=a(ResizeSensor.exports)})(typeof window!="undefined"?window:commonjsGlobal,function(i){var a=function(){var u,l={},m=[];function c(G){G||(G=document.documentElement);var H=window.getComputedStyle(G,null).fontSize;return parseFloat(H)||16}function f(G){if(!G.getBoundingClientRect)return{width:G.offsetWidth,height:G.offsetHeight};var H=G.getBoundingClientRect();return{width:Math.round(H.width),height:Math.round(H.height)}}function g(G,H){var X=H.split(/\d/),h=X[X.length-1];switch(H=parseFloat(H),h){case"px":return H;case"em":return H*c(G);case"rem":return H*c();case"vw":return H*document.documentElement.clientWidth/100;case"vh":return H*document.documentElement.clientHeight/100;case"vmin":case"vmax":var s=document.documentElement.clientWidth/100,y=document.documentElement.clientHeight/100,k=Math[h==="vmin"?"min":"max"];return H*k(s,y);default:return H}}function b(G,H){this.element=G;var X,h,s,y,k,S,E,z,te=["min-width","min-height","max-width","max-height"];this.call=function(){s=f(this.element),S={};for(X in l[H])!l[H].hasOwnProperty(X)||(h=l[H][X],y=g(this.element,h.value),k=h.property==="width"?s.width:s.height,z=h.mode+"-"+h.property,E="",h.mode==="min"&&k>=y&&(E+=h.value),h.mode==="max"&&k<=y&&(E+=h.value),S[z]||(S[z]=""),E&&(" "+S[z]+" ").indexOf(" "+E+" ")===-1&&(S[z]+=" "+E));for(var W in te)!te.hasOwnProperty(W)||(S[te[W]]?this.element.setAttribute(te[W],S[te[W]].substr(1)):this.element.removeAttribute(te[W]))}}function v(G,H){G.elementQueriesSetupInformation||(G.elementQueriesSetupInformation=new b(G,H)),G.elementQueriesSensor||(G.elementQueriesSensor=new i(G,function(){G.elementQueriesSetupInformation.call()}))}function _(G,H,X,h){if(typeof l[G]=="undefined"){l[G]=[];var s=m.length;u.innerHTML+=`
`+G+" {animation: 0.1s element-queries;}",u.innerHTML+=`
`+G+" > .resize-sensor {min-width: "+s+"px;}",m.push(G)}l[G].push({mode:H,property:X,value:h})}function x(G){var H;if(document.querySelectorAll&&(H=G?G.querySelectorAll.bind(G):document.querySelectorAll.bind(document)),!H&&typeof $$!="undefined"&&(H=$$),!H&&typeof jQuery!="undefined"&&(H=jQuery),!H)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return H}function C(G){var H=x(G);for(var X in l)if(l.hasOwnProperty(X))for(var h=H(X,G),s=0,y=h.length;s<y;s++)v(h[s],X)}function I(G){var H=[],X=[],h=[],s=0,y=-1,k=[];for(var S in G.children)if(!!G.children.hasOwnProperty(S)&&G.children[S].tagName&&G.children[S].tagName.toLowerCase()==="img"){H.push(G.children[S]);var E=G.children[S].getAttribute("min-width")||G.children[S].getAttribute("data-min-width"),z=G.children[S].getAttribute("data-src")||G.children[S].getAttribute("url");h.push(z);var te={minWidth:E};X.push(te),E?G.children[S].style.display="none":(s=H.length-1,G.children[S].style.display="block")}y=s;function W(){var Y=!1,q;for(q in H)!H.hasOwnProperty(q)||X[q].minWidth&&G.offsetWidth>X[q].minWidth&&(Y=q);if(Y||(Y=s),y!==Y)if(k[Y])H[y].style.display="none",H[Y].style.display="block",y=Y;else{var ee=new Image;ee.onload=function(){H[Y].src=h[Y],H[y].style.display="none",H[Y].style.display="block",k[Y]=!0,y=Y},ee.src=h[Y]}else H[Y].src=h[Y]}G.resizeSensorInstance=new i(G,W),W()}function U(){for(var G=x(),H=G("[data-responsive-image],[responsive-image]"),X=0,h=H.length;X<h;X++)I(H[X])}var M=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/mgi,V=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/mgi;function T(G){var H,X,h,s;for(G=G.replace(/'/g,'"');(H=M.exec(G))!==null;)for(X=H[1]+H[3],h=H[2];(s=V.exec(h))!==null;)_(X,s[1],s[2],s[3])}function $(G){var H="";if(!!G)if(typeof G=="string")G=G.toLowerCase(),(G.indexOf("min-width")!==-1||G.indexOf("max-width")!==-1)&&T(G);else for(var X=0,h=G.length;X<h;X++)G[X].type===1?(H=G[X].selectorText||G[X].cssText,(H.indexOf("min-height")!==-1||H.indexOf("max-height")!==-1||H.indexOf("min-width")!==-1||H.indexOf("max-width")!==-1)&&T(H)):G[X].type===4?$(G[X].cssRules||G[X].rules):G[X].type===3&&G[X].styleSheet.hasOwnProperty("cssRules")&&$(G[X].styleSheet.cssRules)}var B=!1;this.init=function(){var G="animationstart";typeof document.documentElement.style.webkitAnimationName!="undefined"?G="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName!="undefined"?G="mozanimationstart":typeof document.documentElement.style.OAnimationName!="undefined"&&(G="oanimationstart"),document.body.addEventListener(G,function(h){var s=h.target,y=s&&window.getComputedStyle(s,null),k=y&&y.getPropertyValue("animation-name"),S=k&&k.indexOf("element-queries")!==-1;if(S){s.elementQueriesSensor=new i(s,function(){s.elementQueriesSetupInformation&&s.elementQueriesSetupInformation.call()});var E=window.getComputedStyle(s.resizeSensor,null),z=E.getPropertyValue("min-width");z=parseInt(z.replace("px","")),v(h.target,m[z])}}),B||(u=document.createElement("style"),u.type="text/css",u.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",u.innerHTML+=`
@keyframes element-queries { 0% { visibility: inherit; } }`,document.getElementsByTagName("head")[0].appendChild(u),B=!0);for(var H=0,X=document.styleSheets.length;H<X;H++)try{document.styleSheets[H].href&&document.styleSheets[H].href.indexOf("file://")===0&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[H].href),$(document.styleSheets[H].cssRules||document.styleSheets[H].rules||document.styleSheets[H].cssText)}catch{}U()},this.findElementQueriesElements=function(G){C(G)},this.update=function(){this.init()}};a.update=function(){a.instance.update()},a.detach=function(u){u.elementQueriesSetupInformation?(u.elementQueriesSensor.detach(),delete u.elementQueriesSetupInformation,delete u.elementQueriesSensor):u.resizeSensorInstance&&(u.resizeSensorInstance.detach(),delete u.resizeSensorInstance)},a.init=function(){a.instance||(a.instance=new a),a.instance.init()};var o=function(u){if(document.addEventListener)document.addEventListener("DOMContentLoaded",u,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var l=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(u(),clearInterval(l))},10);else window.onload=u};return a.findElementQueriesElements=function(u){a.instance.findElementQueriesElements(u)},a.listen=function(){o(a.init)},a})})(ElementQueries$1);var ElementQueries=ElementQueries$1.exports;function styleInject(n,t){t===void 0&&(t={});var i=t.insertAt;if(!(!n||typeof document=="undefined")){var a=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",i==="top"&&a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}var css_248z='#ctw{margin:0;padding:0;height:100%;width:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}#ctw .container{box-sizing:border-box;height:100vh;padding:32px}#ctw ::selection{background:var(--ctwPrimary)}#ctw ::-moz-selection{background:var(--ctwPrimary)}#ctw ::-webkit-selection{background:var(--ctwPrimary)}#ctw .not-selectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@-webkit-keyframes slideInFromRight{0%{transform:translateX(100%)}to{transform:translateX(0)}}@keyframes slideInFromRight{0%{transform:translateX(100%)}to{transform:translateX(0)}}@-webkit-keyframes show{0%{opacity:0;transform:scale(.4) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}@keyframes show{0%{opacity:0;transform:scale(.4) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}#ctw .no-scrollbar::-webkit-scrollbar{display:none}#ctw .no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}#ctw .bullet-none{list-style-type:none!important;padding-inline:0}#ctw #local-vid-wrapper video,#ctw video#local-video{transform:scaleX(-1)}#ctw button.tooltip:hover span{display:block}#ctw .fade-in-bottom{-webkit-animation-name:fadeInBottom;animation-name:fadeInBottom;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}@-webkit-keyframes fadeInBottom{0%{opacity:0;transform:translateY(200%)}to{opacity:1}}@keyframes fadeInBottom{0%{opacity:0;transform:translateY(200%)}to{opacity:1}}@media (hover:none){#ctw button:hover span{display:none!important}}#ctw .popout-drag{transition-property:"tranform";transition-duration:.2s;transition-timing-function:ease-in}#ctw video ::--webkit-media-controls-play-button,#ctw video ::-webkit-media-controls-panel{display:none!important;-webkit-appearance:none}#ctw video ::-webkit-media-controls-start-playback-button{display:none!important;-webkit-appearance:none}#ctw #opt li>ul{transform:translatex(100%) scale(0)}#ctw #opt li:hover>ul{transform:translatex(101%) scale(1)}#ctw #opt li>button svg{transform:rotate(-90deg)}#ctw #opt li:hover>button svg{transform:rotate(-270deg)}#ctw #opt.group:hover .group-hover\\:scale-100{transform:scale(1)}#ctw #opt.group:hover .group-hover\\:-rotate-180{transform:rotate(180deg)}#ctw #opt .scale-0{transform:scale(0)}#ctw #opt .min-w-32{min-width:8rem}#ctw .catalyst-lds-roller{display:inline-block;position:relative;width:80px;height:80px}#ctw .catalyst-lds-roller div{-webkit-animation:catalyst-lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;animation:catalyst-lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;transform-origin:40px 40px}#ctw .catalyst-lds-roller div:after{content:" ";display:block;position:absolute;width:7px;height:7px;border-radius:50%;background:#fff;margin:-4px 0 0 -4px}#ctw .catalyst-lds-roller div:first-child{-webkit-animation-delay:-36ms;animation-delay:-36ms}#ctw .catalyst-lds-roller div:first-child:after{top:63px;left:63px}#ctw .catalyst-lds-roller div:nth-child(2){-webkit-animation-delay:-72ms;animation-delay:-72ms}#ctw .catalyst-lds-roller div:nth-child(2):after{top:68px;left:56px}#ctw .catalyst-lds-roller div:nth-child(3){-webkit-animation-delay:-.108s;animation-delay:-.108s}#ctw .catalyst-lds-roller div:nth-child(3):after{top:71px;left:48px}#ctw .catalyst-lds-roller div:nth-child(4){-webkit-animation-delay:-.144s;animation-delay:-.144s}#ctw .catalyst-lds-roller div:nth-child(4):after{top:72px;left:40px}#ctw .catalyst-lds-roller div:nth-child(5){-webkit-animation-delay:-.18s;animation-delay:-.18s}#ctw .catalyst-lds-roller div:nth-child(5):after{top:71px;left:32px}#ctw .catalyst-lds-roller div:nth-child(6){-webkit-animation-delay:-.216s;animation-delay:-.216s}#ctw .catalyst-lds-roller div:nth-child(6):after{top:68px;left:24px}#ctw .catalyst-lds-roller div:nth-child(7){-webkit-animation-delay:-.252s;animation-delay:-.252s}#ctw .catalyst-lds-roller div:nth-child(7):after{top:63px;left:17px}#ctw .catalyst-lds-roller div:nth-child(8){-webkit-animation-delay:-.288s;animation-delay:-.288s}#ctw .catalyst-lds-roller div:nth-child(8):after{top:56px;left:12px}@-webkit-keyframes catalyst-lds-roller{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes catalyst-lds-roller{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}#ctw .rm-uncanny-valley{transform:scaleX(-1)}.tippy-box[data-theme~=catalyst]{background-color:var(--ctwTertiary);color:#fff;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji!important;z-index:40}.tippy-box[data-theme~=catalyst][data-placement^=top]>.tippy-arrow:before{border-top-color:var(--ctwTertiary)}.tippy-box[data-theme~=catalyst][data-placement^=bottom]>.tippy-arrow:before{border-bottom-color:var(--ctwTertiary)}.tippy-box[data-theme~=catalyst][data-placement^=left]>.tippy-arrow:before{border-left-color:var(--ctwTertiary)}.tippy-box[data-theme~=catalyst][data-placement^=right]>.tippy-arrow:before{border-right-color:var(--ctwTertiary)}#ctw.catalyst-parent .text-c{font-size:.75rem;line-height:1rem}#ctw.catalyst-parent[min-width~="640px"] .text-c{font-size:.875rem;line-height:1.25rem}#ctw.catalyst-parent[min-width~="768px"] .text-c{font-size:1rem;line-height:1.5rem}#ctw.catalyst-parent[min-width~="1024px"] .text-c{font-size:1.125rem;line-height:1.75rem}#ctw.catalyst-parent[min-width~="1280px"] .text-c{font-size:1.25rem;line-height:1.75rem}#ctw .max-vid-height{max-height:250px}#ctw.catalyst-parent[min-width~="400px"] .max-vid-height{max-height:270px}#ctw.catalyst-parent[min-width~="640px"] .max-vid-height{max-height:inherit}#ctw .catalyst-fullscreen .max-vid-height{max-height:inherit!important}#ctw.catalyst-parent .header-bar{display:block}#ctw.catalyst-parent .header-img,#ctw.catalyst-parent[min-width~="768px"] .header-bar{display:none}#ctw.catalyst-parent[min-width~="768px"] .header-img{display:block}#ctw.catalyst-parent .nav-ops{right:.75rem;top:2.5rem}#ctw.catalyst-parent[min-width~="768px"] .nav-ops{right:1.25rem;top:1.25rem}#ctw.catalyst-parent .speaker-view{flex-direction:column;justify-content:center;padding:2.5rem .25rem}#ctw.catalyst-parent[min-width~="400px"] .speaker-view{padding-left:.5rem;padding-right:.5rem;flex-direction:row;justify-content:space-around}#ctw.catalyst-parent[min-width~="768px"] .speaker-view{padding-left:1.5rem;padding-right:1.5rem}#ctw.catalyst-parent[min-width~="1024px"] .speaker-view{padding-left:2.5rem;padding-right:2.5rem}#ctw.catalyst-parent[min-width~="1280px"] .speaker-view{padding-left:5rem;padding-right:5rem}#ctw.catalyst-parent .other-vids{display:none}#ctw.catalyst-parent[min-width~="400px"] .other-vids{width:30%;display:flex;height:auto;overflow-y:auto;flex-direction:column}#ctw.catalyst-parent[min-width~="1024px"] .other-vids{width:20%;height:100%}#ctw.catalyst-parent .speaker-vid{width:100%}#ctw.catalyst-parent[min-width~="400px"] .speaker-vid{width:70%}#ctw.catalyst-parent[min-width~="1024px"] .speaker-vid{width:80%}#ctw.catalyst-parent .text-n{font-size:.75rem;line-height:1rem}#ctw.catalyst-parent[min-width~="768px"] .text-n{font-size:.875rem;line-height:1.25rem}#ctw.catalyst-parent .vid-p{margin-left:.25rem;margin-right:.25rem}#ctw.catalyst-parent[min-width~="640px"] .vid-p{margin:.25rem 0}#ctw .bg-placeholder{min-height:4.2rem}#ctw.catalyst-parent[min-width~="640px"] .bg-placeholder{min-height:6.5rem}#ctw.catalyst-parent[min-width~="1024px"] .bg-placeholder{min-height:10rem}#ctw .chat-cont{position:absolute;width:18rem}#ctw.catalyst-parent[min-width~="768px"] .chat-cont{position:relative;width:16rem}#ctw .chat-open-shift{margin-right:0}#ctw.catalyst-parent[min-width~="768px"] .chat-open-shift{margin-right:14rem}#ctw .setup-logo{display:none}#ctw.catalyst-parent[min-width~="768px"] .setup-logo{display:block}#ctw .catalyst-ld{position:relative;border-radius:50%;display:inline-block;vertical-align:middle}#ctw .catalyst-ld-1 .catalyst-ld-outer{position:absolute;border:4px solid #fff;border-left-color:transparent;border-bottom:0;width:100%;height:100%;border-radius:50%;-webkit-animation:catalyst-ld-1-outer 1s cubic-bezier(.42,.61,.58,.41) infinite;animation:catalyst-ld-1-outer 1s cubic-bezier(.42,.61,.58,.41) infinite}#ctw .catalyst-ld-1 .catalyst-ld-inner{position:absolute;border-left:4px solid #fff;border-bottom:4px solid #fff;border-radius:50%;width:40px;height:40px;left:calc(50% - 20px);top:calc(50% - 20px);border-right:0;border-top:4px solid transparent;-webkit-animation:catalyst-ld-1-inner 1s cubic-bezier(.42,.61,.58,.41) infinite;animation:catalyst-ld-1-inner 1s cubic-bezier(.42,.61,.58,.41) infinite}@-webkit-keyframes catalyst-ld-1-outer{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes catalyst-ld-1-outer{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@-webkit-keyframes catalyst-ld-1-inner{0%{transform:rotate(0deg)}to{transform:rotate(-1turn)}}@keyframes catalyst-ld-1-inner{0%{transform:rotate(0deg)}to{transform:rotate(-1turn)}}';styleInject(css_248z,{insertAt:"top"});var css_248z$1=".aspect-w-1,.aspect-w-2,.aspect-w-3,.aspect-w-4,.aspect-w-5,.aspect-w-6,.aspect-w-7,.aspect-w-8,.aspect-w-9,.aspect-w-10,.aspect-w-11,.aspect-w-12,.aspect-w-13,.aspect-w-14,.aspect-w-15,.aspect-w-16{position:relative;padding-bottom:calc(var(--tw-aspect-h)/var(--tw-aspect-w)*100%)}.aspect-w-1>*,.aspect-w-2>*,.aspect-w-3>*,.aspect-w-4>*,.aspect-w-5>*,.aspect-w-6>*,.aspect-w-7>*,.aspect-w-8>*,.aspect-w-9>*,.aspect-w-10>*,.aspect-w-11>*,.aspect-w-12>*,.aspect-w-13>*,.aspect-w-14>*,.aspect-w-15>*,.aspect-w-16>*{position:absolute;height:100%;width:100%;top:0;right:0;bottom:0;left:0}.aspect-w-16{--tw-aspect-w:16}.aspect-h-9{--tw-aspect-h:9}#ctw .invisible{visibility:hidden}#ctw .visible{visibility:visible}#ctw .fixed{position:fixed}#ctw .absolute{position:absolute}#ctw .relative{position:relative}#ctw .sticky{position:sticky}#ctw .inset-0{top:0;right:0;bottom:0;left:0}#ctw .right-0{right:0}#ctw .top-2{top:.5rem}#ctw .left-2{left:.5rem}#ctw .bottom-0{bottom:0}#ctw .left-0{left:0}#ctw .top-0{top:0}#ctw .left-1{left:.25rem}#ctw .-right-1{right:-.25rem}#ctw .-bottom-1{bottom:-.25rem}#ctw .z-50{z-index:50}#ctw .z-20{z-index:20}#ctw .z-40{z-index:40}#ctw .z-30{z-index:30}#ctw .z-0{z-index:0}#ctw .z-10{z-index:10}#ctw .m-0{margin:0}#ctw .m-1{margin:.25rem}#ctw .mx-2{margin-left:.5rem;margin-right:.5rem}#ctw .mx-3{margin-left:.75rem;margin-right:.75rem}#ctw .my-3{margin-top:.75rem;margin-bottom:.75rem}#ctw .my-2{margin-top:.5rem;margin-bottom:.5rem}#ctw .my-6{margin-top:1.5rem;margin-bottom:1.5rem}#ctw .ml-20{margin-left:5rem}#ctw .ml-auto{margin-left:auto}#ctw .ml-1{margin-left:.25rem}#ctw .mt-2{margin-top:.5rem}#ctw .ml-2{margin-left:.5rem}#ctw .mr-1{margin-right:.25rem}#ctw .ml-5{margin-left:1.25rem}#ctw .mb-3{margin-bottom:.75rem}#ctw .mt-5{margin-top:1.25rem}#ctw .-mt-8{margin-top:-2rem}#ctw .mb-1{margin-bottom:.25rem}#ctw .mt-1{margin-top:.25rem}#ctw .box-border{box-sizing:border-box}#ctw .block{display:block}#ctw .inline-block{display:inline-block}#ctw .inline{display:inline}#ctw .flex{display:flex}#ctw .table{display:table}#ctw .hidden{display:none}#ctw .h-full{height:100%}#ctw .h-auto{height:auto}#ctw .h-1{height:.25rem}#ctw .h-10{height:2.5rem}#ctw .h-7{height:1.75rem}#ctw .h-16{height:4rem}#ctw .h-52{height:13rem}#ctw .h-14{height:3.5rem}#ctw .h-6{height:1.5rem}#ctw .max-h-screen{max-height:100vh}#ctw .min-h-full{min-height:100%}#ctw .min-h-0{min-height:0}#ctw .w-full{width:100%}#ctw .w-72{width:18rem}#ctw .w-7{width:1.75rem}#ctw .w-16{width:4rem}#ctw .w-80{width:20rem}#ctw .w-20{width:5rem}#ctw .w-14{width:3.5rem}#ctw .w-6{width:1.5rem}#ctw .min-w-0{min-width:0}#ctw .flex-1{flex:1 1 0%}#ctw .transform{--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;transform:translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@-webkit-keyframes fade-in-right{0%{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}#ctw .animate-fade-in-right{-webkit-animation:fade-in-right .25s ease-out;animation:fade-in-right .25s ease-out}@-webkit-keyframes fade-in-up{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes fade-in-up{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}#ctw .animate-fade-in-up{-webkit-animation:fade-in-up .18s ease-out;animation:fade-in-up .18s ease-out}@-webkit-keyframes fade-in-left{0%{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}#ctw .animate-fade-in-left{-webkit-animation:fade-in-left .25s ease-out;animation:fade-in-left .25s ease-out}@keyframes fade-in-right{0%{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}@keyframes fade-in-left{0%{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}@-webkit-keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}#ctw .animate-fade-in-down{-webkit-animation:fade-in-down .18s ease-out;animation:fade-in-down .18s ease-out}@-webkit-keyframes fade-out-up{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(10px)}}@keyframes fade-out-up{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(10px)}}#ctw .animate-fade-out-up{-webkit-animation:fade-out-up .18s ease-out;animation:fade-out-up .18s ease-out}@-webkit-keyframes fade-out-down{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(10px)}}@keyframes fade-out-down{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(10px)}}#ctw .animate-fade-out-down{-webkit-animation:fade-out-down .18s ease-out;animation:fade-out-down .18s ease-out}#ctw .cursor-pointer{cursor:pointer}#ctw .resize-none{resize:none}#ctw .resize{resize:both}#ctw .list-none{list-style-type:none}#ctw .flex-col{flex-direction:column}#ctw .flex-row{flex-direction:row}#ctw .flex-wrap{flex-wrap:wrap}#ctw .content-end{align-content:flex-end}#ctw .content-center{align-content:center}#ctw .items-start{align-items:flex-start}#ctw .items-center{align-items:center}#ctw .items-end{align-items:flex-end}#ctw .justify-center{justify-content:center}#ctw .justify-between{justify-content:space-between}#ctw .justify-around{justify-content:space-around}#ctw .justify-end{justify-content:flex-end}#ctw .self-center{align-self:center}#ctw .overflow-hidden{overflow:hidden}#ctw .overflow-y-auto{overflow-y:auto}#ctw .overflow-x-auto{overflow-x:auto}#ctw .whitespace-nowrap{white-space:nowrap}#ctw .break-all{word-break:break-all}#ctw .rounded-xl{border-radius:.75rem}#ctw .rounded-full{border-radius:9999px}#ctw .rounded-md{border-radius:.375rem}#ctw .rounded-2xl{border-radius:1rem}#ctw .rounded-lg{border-radius:.5rem}#ctw .rounded-t-xl{border-top-left-radius:.75rem;border-top-right-radius:.75rem}#ctw .rounded-b-none{border-bottom-right-radius:0;border-bottom-left-radius:0}#ctw .rounded-b-xl{border-bottom-right-radius:.75rem;border-bottom-left-radius:.75rem}#ctw .rounded-tl-2xl{border-top-left-radius:1rem}#ctw .rounded-tr-2xl{border-top-right-radius:1rem}#ctw .rounded-br-sm{border-bottom-right-radius:.125rem}#ctw .rounded-bl-2xl{border-bottom-left-radius:1rem}#ctw .rounded-br-2xl{border-bottom-right-radius:1rem}#ctw .rounded-bl-sm{border-bottom-left-radius:.125rem}#ctw .border{border-width:1px}#ctw .border-0{border-width:0}#ctw .border-4{border-width:4px}#ctw .border-b{border-bottom-width:1px}#ctw .border-t{border-top-width:1px}#ctw .border-white{--tw-border-opacity:1;border-color:rgba(255,255,255,var(--tw-border-opacity))}#ctw .border-secondary{border-color:var(--ctwSecondary)}#ctw .border-opacity-20{--tw-border-opacity:0.2}#ctw .bg-secondary{background-color:var(--ctwSecondary)}#ctw .bg-primary{background-color:var(--ctwPrimary)}#ctw .bg-gray-100{--tw-bg-opacity:1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}#ctw .bg-gray-800{--tw-bg-opacity:1;background-color:rgba(31,41,55,var(--tw-bg-opacity))}#ctw .bg-tertiary{background-color:var(--ctwTertiary)}#ctw .bg-black{--tw-bg-opacity:1;background-color:rgba(0,0,0,var(--tw-bg-opacity))}#ctw .bg-gray-300{--tw-bg-opacity:1;background-color:rgba(209,213,219,var(--tw-bg-opacity))}#ctw .bg-transparent{background-color:transparent}#ctw .bg-quinary{background-color:var(--ctwQuinary)}#ctw .bg-red{--tw-bg-opacity:1;background-color:rgba(246,79,89,var(--tw-bg-opacity))}#ctw .fill-current{fill:currentColor}#ctw .p-0{padding:0}#ctw .p-1{padding:.25rem}#ctw .p-2{padding:.5rem}#ctw .px-2{padding-left:.5rem;padding-right:.5rem}#ctw .py-1{padding-top:.25rem;padding-bottom:.25rem}#ctw .py-2{padding-top:.5rem;padding-bottom:.5rem}#ctw .px-1{padding-left:.25rem;padding-right:.25rem}#ctw .px-16{padding-left:4rem;padding-right:4rem}#ctw .px-4{padding-left:1rem;padding-right:1rem}#ctw .pt-4{padding-top:1rem}#ctw .pb-36{padding-bottom:9rem}#ctw .pr-2{padding-right:.5rem}#ctw .pl-2{padding-left:.5rem}#ctw .text-center{text-align:center}#ctw .align-middle{vertical-align:middle}#ctw .font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}#ctw .text-xs{font-size:.75rem;line-height:1rem}#ctw .text-xl{font-size:1.25rem;line-height:1.75rem}#ctw .text-sm{font-size:.875rem;line-height:1.25rem}#ctw .text-base{font-size:1rem;line-height:1.5rem}#ctw .font-semibold{font-weight:600}#ctw .font-bold{font-weight:700}#ctw .capitalize{text-transform:capitalize}#ctw .text-quinary{color:var(--ctwQuinary)}#ctw .text-primary{color:var(--ctwPrimary)}#ctw .text-black{--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity))}#ctw .text-red{--tw-text-opacity:1;color:rgba(246,79,89,var(--tw-text-opacity))}#ctw .text-gray-900{--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity))}#ctw .underline{text-decoration:underline}#ctw .opacity-50{opacity:.5}#ctw .shadow-2xl{--tw-shadow:0 25px 50px -12px rgba(0,0,0,0.25)}#ctw .shadow-2xl,#ctw .shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}#ctw .shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,0.1),0 10px 10px -5px rgba(0,0,0,0.04)}#ctw .shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,0.1),0 1px 2px 0 rgba(0,0,0,0.06)}#ctw .shadow,#ctw .shadow-md{box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}#ctw .shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06)}#ctw .outline-none{outline:2px solid transparent;outline-offset:2px}#ctw .ring-2{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color)}#ctw .ring,#ctw .ring-2{box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 transparent)}#ctw .ring{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color)}#ctw .ring-primary{--tw-ring-color:var(--ctwPrimary)}#ctw .ring-opacity-50{--tw-ring-opacity:0.5}#ctw .filter{--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}#ctw .\\!filter{--tw-blur:var(--tw-empty,/*!*/ /*!*/)!important;--tw-brightness:var(--tw-empty,/*!*/ /*!*/)!important;--tw-contrast:var(--tw-empty,/*!*/ /*!*/)!important;--tw-grayscale:var(--tw-empty,/*!*/ /*!*/)!important;--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/)!important;--tw-invert:var(--tw-empty,/*!*/ /*!*/)!important;--tw-saturate:var(--tw-empty,/*!*/ /*!*/)!important;--tw-sepia:var(--tw-empty,/*!*/ /*!*/)!important;--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/)!important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}#ctw .blur{--tw-blur:blur(8px)}#ctw .transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}#ctw .duration,#ctw .transition{transition-duration:.15s}#ctw .ease{transition-timing-function:cubic-bezier(.4,0,.2,1)}#ctw *{--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}#ctw html{-moz-tab-size:4;-o-tab-size:4;tab-size:4;line-height:1.15;-webkit-text-size-adjust:100%}#ctw body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}#ctw hr{height:0;color:inherit}#ctw abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}#ctw b,#ctw strong{font-weight:bolder}#ctw code,#ctw kbd,#ctw pre,#ctw samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}#ctw small{font-size:80%}#ctw sub,#ctw sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}#ctw sub{bottom:-.25em}#ctw sup{top:-.5em}#ctw table{text-indent:0;border-color:inherit}#ctw button,#ctw input,#ctw optgroup,#ctw select,#ctw textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}#ctw button,#ctw select{text-transform:none}#ctw [type=button],#ctw [type=reset],#ctw [type=submit],#ctw button{-webkit-appearance:button}#ctw ::-moz-focus-inner{border-style:none;padding:0}#ctw :-moz-focusring{outline:1px dotted ButtonText}#ctw :-moz-ui-invalid{box-shadow:none}#ctw legend{padding:0}#ctw progress{vertical-align:baseline}#ctw ::-webkit-inner-spin-button,#ctw ::-webkit-outer-spin-button{height:auto}#ctw [type=search]{-webkit-appearance:textfield;outline-offset:-2px}#ctw ::-webkit-search-decoration{-webkit-appearance:none}#ctw ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}#ctw summary{display:list-item}#ctw blockquote,#ctw dd,#ctw dl,#ctw figure,#ctw h1,#ctw h2,#ctw h3,#ctw h4,#ctw h5,#ctw h6,#ctw hr,#ctw p,#ctw pre{margin:0}#ctw button{background-color:transparent;background-image:none}#ctw fieldset,#ctw ol,#ctw ul{margin:0;padding:0}#ctw ol,#ctw ul{list-style:none}#ctw html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}#ctw body{font-family:inherit;line-height:inherit}#ctw *,#ctw :after,#ctw :before{box-sizing:border-box;border:0 solid}#ctw hr{border-top-width:1px}#ctw img{border-style:solid}#ctw textarea{resize:vertical}#ctw input::-moz-placeholder,#ctw textarea::-moz-placeholder{opacity:1;color:#9ca3af}#ctw input:-ms-input-placeholder,#ctw textarea:-ms-input-placeholder{opacity:1;color:#9ca3af}#ctw input::placeholder,#ctw textarea::placeholder{opacity:1;color:#9ca3af}#ctw [role=button],#ctw button{cursor:pointer}#ctw table{border-collapse:collapse}#ctw h1,#ctw h2,#ctw h3,#ctw h4,#ctw h5,#ctw h6{font-size:inherit;font-weight:inherit}#ctw a{color:inherit;text-decoration:inherit}#ctw button,#ctw input,#ctw optgroup,#ctw select,#ctw textarea{padding:0;line-height:inherit;color:inherit}#ctw code,#ctw kbd,#ctw pre,#ctw samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}#ctw audio,#ctw canvas,#ctw embed,#ctw iframe,#ctw img,#ctw object,#ctw svg,#ctw video{display:block;vertical-align:middle}#ctw img,#ctw video{max-width:100%;height:auto}#ctw *,#ctw :after,#ctw :before{--tw-border-opacity:1;border-color:rgba(229,231,235,var(--tw-border-opacity))}#ctw .container{width:100%}@media (min-width:640px){#ctw .container{max-width:640px}}@media (min-width:768px){#ctw .container{max-width:768px}}@media (min-width:1024px){#ctw .container{max-width:1024px}}@media (min-width:1280px){#ctw .container{max-width:1280px}}@media (min-width:1536px){#ctw .container{max-width:1536px}}#ctw .aspect-w-1,#ctw .aspect-w-2,#ctw .aspect-w-3,#ctw .aspect-w-4,#ctw .aspect-w-5,#ctw .aspect-w-6,#ctw .aspect-w-7,#ctw .aspect-w-8,#ctw .aspect-w-9,#ctw .aspect-w-10,#ctw .aspect-w-11,#ctw .aspect-w-12,#ctw .aspect-w-13,#ctw .aspect-w-14,#ctw .aspect-w-15,#ctw .aspect-w-16{position:relative;padding-bottom:calc(var(--tw-aspect-h)/var(--tw-aspect-w)*100%)}#ctw .aspect-w-1>*,#ctw .aspect-w-2>*,#ctw .aspect-w-3>*,#ctw .aspect-w-4>*,#ctw .aspect-w-5>*,#ctw .aspect-w-6>*,#ctw .aspect-w-7>*,#ctw .aspect-w-8>*,#ctw .aspect-w-9>*,#ctw .aspect-w-10>*,#ctw .aspect-w-11>*,#ctw .aspect-w-12>*,#ctw .aspect-w-13>*,#ctw .aspect-w-14>*,#ctw .aspect-w-15>*,#ctw .aspect-w-16>*{position:absolute;height:100%;width:100%;top:0;right:0;bottom:0;left:0}#ctw .aspect-none{position:static;padding-bottom:0}#ctw .aspect-none>*{position:static;height:auto;width:auto;top:auto;right:auto;bottom:auto;left:auto}#ctw .aspect-w-1{--tw-aspect-w:1}#ctw .aspect-w-2{--tw-aspect-w:2}#ctw .aspect-w-3{--tw-aspect-w:3}#ctw .aspect-w-4{--tw-aspect-w:4}#ctw .aspect-w-5{--tw-aspect-w:5}#ctw .aspect-w-6{--tw-aspect-w:6}#ctw .aspect-w-7{--tw-aspect-w:7}#ctw .aspect-w-8{--tw-aspect-w:8}#ctw .aspect-w-9{--tw-aspect-w:9}#ctw .aspect-w-10{--tw-aspect-w:10}#ctw .aspect-w-11{--tw-aspect-w:11}#ctw .aspect-w-12{--tw-aspect-w:12}#ctw .aspect-w-13{--tw-aspect-w:13}#ctw .aspect-w-14{--tw-aspect-w:14}#ctw .aspect-w-15{--tw-aspect-w:15}#ctw .aspect-w-16{--tw-aspect-w:16}#ctw .aspect-h-1{--tw-aspect-h:1}#ctw .aspect-h-2{--tw-aspect-h:2}#ctw .aspect-h-3{--tw-aspect-h:3}#ctw .aspect-h-4{--tw-aspect-h:4}#ctw .aspect-h-5{--tw-aspect-h:5}#ctw .aspect-h-6{--tw-aspect-h:6}#ctw .aspect-h-7{--tw-aspect-h:7}#ctw .aspect-h-8{--tw-aspect-h:8}#ctw .aspect-h-9{--tw-aspect-h:9}#ctw .aspect-h-10{--tw-aspect-h:10}#ctw .aspect-h-11{--tw-aspect-h:11}#ctw .aspect-h-12{--tw-aspect-h:12}#ctw .aspect-h-13{--tw-aspect-h:13}#ctw .aspect-h-14{--tw-aspect-h:14}#ctw .aspect-h-15{--tw-aspect-h:15}#ctw .aspect-h-16{--tw-aspect-h:16}#ctw .hover\\:-translate-y-0\\.5:hover{--tw-translate-y:-0.125rem}#ctw .hover\\:-translate-y-0:hover{--tw-translate-y:0px}#ctw .hover\\:bg-gray-100:hover{--tw-bg-opacity:1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}#ctw .hover\\:bg-quaternary:hover{background-color:var(--ctwQuaternary)}#ctw .hover\\:text-gray-50:hover{--tw-text-opacity:1;color:rgba(249,250,251,var(--tw-text-opacity))}#ctw .focus\\:border-0:focus{border-width:0}#ctw .focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}#ctw .focus\\:ring-1:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 transparent)}#ctw .focus\\:ring-primary:focus{--tw-ring-color:var(--ctwPrimary)}@media (prefers-reduced-motion:reduce){#ctw .motion-reduce\\:transform-none{transform:none}#ctw .motion-reduce\\:transition-none{transition-property:none}}@media (min-width:640px){#ctw .sm\\:z-20{z-index:20}#ctw .sm\\:mt-1{margin-top:.25rem}#ctw .sm\\:mb-1{margin-bottom:.25rem}#ctw .sm\\:ml-0{margin-left:0}#ctw .sm\\:mr-0{margin-right:0}#ctw .sm\\:block{display:block}#ctw .sm\\:w-64{width:16rem}#ctw .sm\\:w-96{width:24rem}#ctw .sm\\:animate-fade-in-right{-webkit-animation:fade-in-right .25s ease-out;animation:fade-in-right .25s ease-out}#ctw .sm\\:animate-fade-in-left{-webkit-animation:fade-in-left .25s ease-out;animation:fade-in-left .25s ease-out}#ctw .sm\\:justify-around{justify-content:space-around}#ctw .sm\\:px-2{padding-left:.5rem;padding-right:.5rem}}@media (min-width:768px){#ctw .md\\:h-8{height:2rem}#ctw .md\\:w-8{width:2rem}#ctw .md\\:px-3{padding-left:.75rem;padding-right:.75rem}}@media (min-width:1024px){#ctw .lg\\:h-full{height:100%}#ctw .lg\\:p-2{padding:.5rem}#ctw .lg\\:px-10{padding-left:2.5rem;padding-right:2.5rem}}@media (min-width:1280px){#ctw .xl\\:px-20{padding-left:5rem;padding-right:5rem}}";styleInject(css_248z$1,{insertAt:"top"});var AUTH_ADDRESS="https://staging.catalyst.chat/auth/meeting/token",DEFAULT_AUTOFADE=600,SUPPORT_EMAIL="support@catalyst.chat",SUPPORT_URL="https://catalyst.chat/contact",DEFAULT_WELCOME_MESSAGE="\u{1F44B} Waiting for others to join...",THEMES={default:{primary:"#11c1e8",secondary:"#374151",tertiary:"#4B5563",quaternary:"#6B7280",quinary:"#fff"},light:{primary:"#11c1e8",secondary:"#d4def7",tertiary:"#b4bdc0",quaternary:"#6B7280",quinary:"#fff"},dark:{primary:"#11c1e8",secondary:"#111827",tertiary:"#374151",quaternary:"#4B5563",quinary:"#fff"},night:{primary:"#c471ed",secondary:"#000",tertiary:"#1F2937",quaternary:"#374151",quinary:"#fff"},hoursLight:{primary:"#50c878",secondary:"#e1e2ea",tertiary:"#b4bdc0",quaternary:"#6B7280",quinary:"#fff"},hoursDark:{primary:"#50c878",secondary:"#17171d",tertiary:"#252429",quaternary:"#45a566",quinary:"#fff"}},BUILT_IN_BACKGROUNDS=["https://demo.vectorly.io/virtual-backgrounds/1.jpg","https://demo.vectorly.io/virtual-backgrounds/2.jpg","https://demo.vectorly.io/virtual-backgrounds/3.jpg","https://demo.vectorly.io/virtual-backgrounds/4.jpg","https://demo.vectorly.io/virtual-backgrounds/5.jpg","https://demo.vectorly.io/virtual-backgrounds/6.jpg","https://demo.vectorly.io/virtual-backgrounds/7.jpg","https://demo.vectorly.io/virtual-backgrounds/8.jpg","https://demo.vectorly.io/virtual-backgrounds/9.jpg"];function setThemeColor(n){var t,i=new _temp,a=THEMES.default;if(typeof n=="string"&&n in THEMES)i.ctwPrimary=THEMES[n].primary,i.ctwSecondary=THEMES[n].secondary,i.ctwTertiary=THEMES[n].tertiary,i.ctwQuaternary=THEMES[n].quaternary,i.ctwQuinary=THEMES[n].quinary;else if(typeof n=="object"){var o,u,l,m,c;i.ctwPrimary=(o=n.primary)!=null?o:a.primary,i.ctwSecondary=(u=n.secondary)!=null?u:a.secondary,i.ctwTertiary=(l=n.tertiary)!=null?l:a.tertiary,i.ctwQuaternary=(m=n.quaternary)!=null?m:a.quaternary,i.ctwQuinary=(c=n.quinary)!=null?c:a.quinary}var f=document.createElement("style");document.head.appendChild(f),(t=f.sheet)==null||t.insertRule(":root { -- cssVar.ctwPrimary: "+i.ctwPrimary+`,
              -- cssVar.ctwSecondary: `+i.ctwSecondary+`,
              -- cssVar.ctwTertiary: `+i.ctwTertiary+`,
                -- cssVar.ctwQuaternary: `+i.ctwQuaternary+`,
                  -- cssVar.ctwQuinary: `+i.ctwQuinary+`,
      }`)}function generateUUID(){var n=new Date().getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var a=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(i=="x"?a:a&3|8).toString(16)});return t}function contactSupport(n){window.open(n!=null?n:SUPPORT_URL,"_blank")}var adjectives=["aback","abaft","abandoned","abashed","aberrant","abhorrent","abiding","abject","ablaze","able","abnormal","aboard","aboriginal","abortive","abounding","abrasive","abrupt","absent","absorbed","absorbing","abstracted","absurd","abundant","abusive","acceptable","accessible","accidental","accurate","acid","acidic","acoustic","acrid","actually","ad","hoc","adamant","adaptable","addicted","adhesive","adjoining","adorable","adventurous","afraid","aggressive","agonizing","agreeable","ahead","ajar","alcoholic","alert","alike","alive","alleged","alluring","aloof","amazing","ambiguous","ambitious","amuck","amused","amusing","ancient","angry","animated","annoyed","annoying","anxious","apathetic","aquatic","aromatic","arrogant","ashamed","aspiring","assorted","astonishing","attractive","auspicious","automatic","available","average","awake","aware","awesome","awful","axiomatic","bad","barbarous","bashful","bawdy","beautiful","befitting","belligerent","beneficial","bent","berserk","best","better","bewildered","big","billowy","bite-sized","bitter","bizarre","black","bloody","blue","blue-eyed","blushing","boiling","boorish","bored","boring","bouncy","boundless","brainy","brash","brave","brawny","breakable","breezy","brief","bright","bright","broad","broken","brown","bumpy","burly","bustling","busy","cagey","calculating","callous","calm","capable","capricious","careful","careless","caring","cautious","ceaseless","certain","changeable","charming","cheap","cheerful","chemical","chief","childlike","chilly","chivalrous","chubby","chunky","clammy","classy","clean","clear","clever","cloistered","cloudy","closed","clumsy","cluttered","coherent","cold","colorful","colossal","combative","comfortable","common","complete","complex","concerned","condemned","confused","conscious","cooing","cool","cooperative","coordinated","courageous","cowardly","crabby","craven","crazy","creepy","crooked","crowded","cruel","cuddly","cultured","cumbersome","curious","curly","curved","curvy","cut","cute","cute","cynical","daffy","daily","damaged","damaging","damp","dangerous","dapper","dark","dashing","dazzling","dead","deadpan","deafening","dear","debonair","decisive","decorous","deep","deeply","defeated","defective","defiant","delicate","delicious","delightful","demonic","delirious","dependent","depressed","deranged","descriptive","deserted","detailed","determined","devilish","didactic","different","difficult","diligent","direful","dirty","disagreeable","disastrous","discreet","disgusted","disgusting","disillusioned","dispensable","distinct","disturbed","divergent","dizzy","domineering","doubtful","drab","draconian","dramatic","dreary","drunk","dry","dull","dusty","dynamic","dysfunctional","eager","early","earsplitting","earthy","easy","eatable","economic","educated","efficacious","efficient","eight","elastic","elated","elderly","electric","elegant","elfin","elite","embarrassed","eminent","empty","enchanted","enchanting","encouraging","endurable","energetic","enormous","entertaining","enthusiastic","envious","equable","equal","erratic","ethereal","evanescent","evasive","even","excellent","excited","exciting","exclusive","exotic","expensive","extra-large","extra-small","exuberant","exultant","fabulous","faded","faint","fair","faithful","fallacious","false","familiar","famous","fanatical","fancy","fantastic","far","far-flung","fascinated","fast","fat","faulty","fearful","fearless","feeble","feigned","female","fertile","festive","few","fierce","filthy","fine","finicky","first","five","fixed","flagrant","flaky","flashy","flat","flawless","flimsy","flippant","flowery","fluffy","fluttering","foamy","foolish","foregoing","forgetful","fortunate","four frail","fragile","frantic","free","freezing","frequent","fresh","fretful","friendly","frightened","frightening","full","fumbling","functional","funny","furry","furtive","future","futuristic","fuzzy ","gabby","gainful","gamy","gaping","garrulous","gaudy","general","gentle","giant","giddy","gifted","gigantic","glamorous","gleaming","glib","glistening","glorious","glossy","godly","good","godlike","goofy","gorgeous","graceful","grandiose","grateful","gratis","gray","greasy","great","greedy","green","grey","grieving","groovy","grotesque","grouchy","grubby","gruesome","grumpy","guarded","guiltless","gullible","gusty","guttural","habitual","half","hallowed","halting","handsome","handsomely","handy","hanging","hapless","happy","hard","harmonious","harsh","hateful","heady","healthy","heartbreaking","hearty","heavenly","heavy","hellish","helpful","helpless","hesitant","hideous","highfalutin","high-pitched","hilarious","hissing","historical","holistic","hollow","homeless","homely","honorable","horrible","hospitable","hot huge","hulking","humdrum","humorous","hungry","hurried","hurt","hushed","husky","hypnotic","hysterical","icky","icy","idiotic","ignorant","ill","illegal","ill-fated","ill-informed","illustrious","imaginary","immense","imminent","impartial","imperfect","impolite","important","imported","impossible","incandescent","incompetent","inconclusive","industrious","incredible","inexpensive","infamous","innate","innocent","inquisitive","insidious","instinctive","intelligent","interesting","internal","invincible","irate","irritating","itchy","jaded","jagged","jazzy","jealous","jittery","jobless","jolly","joyous","judicious","juicy","jumbled","jumpy","juvenile","kaput","keen","kind","kindhearted","kindly","knotty","knowing","knowledgeable","known","labored","lackadaisical","lacking","lame","lamentable","languid","large","last","late","laughable","lavish","lazy","lean","learned","left","legal","lethal","level","lewd","light","like","likeable","limping","literate","little","lively","lively","living","lonely","long","longing","long-term","loose","lopsided","loud","loutish","lovely","loving","low","lowly","lucky","ludicrous","lumpy","lush","luxuriant","lying","lyrical","macabre","macho","maddening","madly","magenta","magical","magnificent","majestic","makeshift","male","malicious","mammoth","maniacal","many","marked","massive","married","marvelous","material","materialistic","mature","mean","measly","meaty","medical","meek","mellow","melodic","melted","merciful","mere","messy","mighty","military","milky","mindless","miniature","minor","miscreant","misty","mixed","moaning","modern","moldy","momentous","motionless","mountainous","muddled","mundane","murky","mushy","mute","mysterious","naive","nappy","narrow","nasty","natural","naughty","nauseating","near","neat","nebulous","necessary","needless","needy","neighborly","nervous","new","next","nice","nifty","nimble","nine","nippy","noiseless","noisy","nonchalant","nondescript","nonstop","normal","nostalgic","nosy","noxious","null","numberless","numerous","nutritious","nutty","oafish","obedient","obeisant","obese","obnoxious","obscene","obsequious","observant","obsolete","obtainable","oceanic","odd","offbeat","old","old-fashioned","omniscient","one","onerous","open","opposite","optimal","orange","ordinary","organic","ossified","outgoing","outrageous","outstanding","oval","overconfident","overjoyed","overrated","overt","overwrought","painful","painstaking","pale","paltry","panicky","panoramic","parallel","parched","parsimonious","past","pastoral","pathetic","peaceful","penitent","perfect","periodic","permissible","perpetual","petite","petite","phobic","physical","picayune","pink","piquant","placid","plain","plant","plastic","plausible","pleasant","plucky","pointless","poised","polite","political","poor","possessive","possible","powerful","precious","premium","present","pretty","previous","pricey","prickly","private","probable","productive","profuse","protective","proud","psychedelic","psychotic","public","puffy","pumped","puny","purple","purring","pushy","puzzled","puzzling","quack","quaint","quarrelsome","questionable","quick","quickest","quiet","quirky","quixotic","quizzical","rabid","racial","ragged","rainy","rambunctious","rampant","rapid","rare","raspy","ratty","ready","real","rebel","receptive","recondite","red","redundant","reflective","regular","relieved","remarkable","reminiscent","repulsive","resolute","resonant","responsible","rhetorical","rich","right","righteous","rightful","rigid","ripe","ritzy","roasted","robust","romantic","roomy","rotten","rough","round","royal","ruddy","rude","rural","rustic","ruthless","sable","sad","safe","salty","same","sassy","satisfying","savory","scandalous","scarce","scared","scary","scattered","scientific","scintillating","scrawny","screeching","second","second-hand","secret","secretive","sedate","seemly","selective","selfish","separate","serious","shaggy","shaky","shallow","sharp","shiny","shivering","shocking","short","shrill","shut","shy","sick","silent","silent","silky","silly","simple","simplistic","sincere","six","skillful","skinny","sleepy","slim","slimy","slippery","sloppy","slow","small","smart","smelly","smiling","smoggy","smooth","sneaky","snobbish","snotty","soft","soggy","solid","somber","sophisticated","sordid","sore","sore","sour","sparkling","special","spectacular","spicy","spiffy","spiky","spiritual","spiteful","splendid","spooky","spotless","spotted","spotty","spurious","squalid","square","squealing","squeamish","staking","stale","standing","statuesque","steadfast","steady","steep","stereotyped","sticky","stiff","stimulating","stingy","stormy","straight","strange","striped","strong","stupendous","stupid","sturdy","subdued","subsequent","substantial","successful","succinct","sudden","sulky","super","superb","superficial","supreme","swanky","sweet","sweltering","swift","symptomatic","synonymous","taboo","tacit","tacky","talented","tall","tame","tan","tangible","tangy","tart","tasteful","tasteless","tasty","tawdry","tearful","tedious","teeny","teeny-tiny","telling","temporary","ten","tender tense","tense","tenuous","terrible","terrific","tested","testy","thankful","therapeutic","thick","thin","thinkable","third","thirsty","thoughtful","thoughtless","threatening","three","thundering","tidy","tight","tightfisted","tiny","tired","tiresome","toothsome","torpid","tough","towering","tranquil","trashy","tremendous","tricky","trite","troubled","truculent","true","truthful","two","typical","ubiquitous","ugliest","ugly","ultra","unable","unaccountable","unadvised","unarmed","unbecoming","unbiased","uncovered","understood","undesirable","unequal","unequaled","uneven","unhealthy","uninterested","unique","unkempt","unknown","unnatural","unruly","unsightly","unsuitable","untidy","unused","unusual","unwieldy","unwritten","upbeat","uppity","upset","uptight","used","useful","useless","utopian","utter","uttermost","vacuous","vagabond","vague","valuable","various","vast","vengeful","venomous","verdant","versed","victorious","vigorous","violent","violet","vivacious","voiceless","volatile","voracious","vulgar","wacky","waggish","waiting","wakeful","wandering","wanting","warlike","warm","wary","wasteful","watery","weak","wealthy","weary","well-groomed","well-made","well-off","well-to-do","wet","whimsical","whispering","white","whole","wholesale","wicked","wide","wide-eyed","wiggly","wild","willing","windy","wiry","wise","wistful","witty","woebegone","womanly","wonderful","wooden","woozy","workable","worried","worthless","wrathful","wretched","wrong","wry","xenophobic","yellow","yielding","young","youthful","yummy","zany","zealous","zesty","zippy","zonked"],nouns=["accelerator","accordion","account","accountant","acknowledgment","acoustic","acrylic","act","action","active","activity","actor","actress","adapter","addition","address","adjustment","adult","advantage","advertisement","advice","afghanistan","africa","aftermath","afternoon","aftershave","afterthought","age","agenda","agreement","air","airbus","airmail","airplane","airport","airship","alarm","albatross","alcohol","algebra","algeria","alibi","alley","alligator","alloy","almanac","alphabet","alto","aluminum","aluminum","ambulance","america","amount","amusement","anatomy","anesthesiologist","anger","angle","angora","animal","anime","ankle","answer","ant","antarctica","anteater","antelope","anthony","anthropology","apartment","apology","apparatus","apparel","appeal","appendix","apple","appliance","approval","april","aquarius","arch","archaeology","archeology","archer","architecture","area","argentina","argument","aries","arithmetic","arm","armadillo","armchair","armenian","army","arrow","art","ash","ashtray","asia","asparagus","asphalt","asterisk","astronomy","athlete","atm","atom","attack","attempt","attention","attic","attraction","august","aunt","australia","australian","author","authorization","authority","authorization","avenue","babies","baboon","baby","back","backbone","bacon","badge","badger","bag","bagel","bagpipe","bail","bait","baker","bakery","balance","balinese","ball","balloon","bamboo","banana","band","bandana","bangladesh","bangle","banjo","bank","bankbook","banker","bar","barbara","barber","barge","baritone","barometer","base","baseball","basement","basin","basket","basketball","bass","bassoon","bat","bath","bathroom","bathtub","battery","battle","bay","beach","bead","beam","bean","bear","beard","beast","beat","beautician","beauty","beaver","bed","bedroom","bee","beech","beef","beer","beet","beetle","beggar","beginner","begonia","behavior","belgian","belief","believe","bell","belt","bench","bengal","beret","berry","bestseller","betty","bibliography","bicycle","bike","bill","billboard","biology","biplane","birch","bird","birth","birthday","bit","bite","black","bladder","blade","blanket","blinker","blizzard","block","blood","blouse","blow","blowgun","blue","board","boat","bobcat","body","bolt","bomb","bomber","bone","bongo","bonsai","book","bookcase","booklet","boot","border","botany","bottle","bottom","boundary","bow","bowl","bowling","box","boy","bra","brace","bracket","brain","brake","branch","brand","brandy","brass","brazil","bread","break","breakfast","breath","brian","brick","bridge","british","broccoli","brochure","broker","bronze","brother","brother-in-law","brow","brown","brush","bubble","bucket","budget","buffer","buffet","bugle","building","bulb","bull","bulldozer","bumper","bun","burglar","burma","burn","burst","bus","bush","business","butane","butcher","butter","button","buzzard","c-clamp","cabbage","cabinet","cable","cactus","cafe","cake","calculator","calculus","calendar","calf","call","camel","camera","camp","can","canada","canadian","cancer","candle","cannon","canoe","canvas","cap","capital","capricorn","captain","caption","car","caravan","carbon","card","cardboard","cardigan","care","carnation","carol","carp","carpenter","carriage","carrot","cart","cartoon","case","cast","castanet","cat","catamaran","caterpillar","cathedral","catsup","cattle","cauliflower","cause","caution","cave","cd","ceiling","celery","celeste","cell","cellar","cello","celsius","cement","cemetery","cent","centimeter","century","ceramic","cereal","certification","chain","chair","chalk","chance","change","channel","character","chard","charles","chauffeur","check","cheek","cheese","cheetah","chef","chemistry","cheque","cherries","cherry","chess","chest","chick","chicken","chicory","chief","child","children","chill","chime","chimpanzee","chin","china","chinese","chive","chocolate","chord","christmas","christopher","chronometer","church","cicada","cinema","circle","circulation","cirrus","citizenship","city","clam","clarinet","class","claus","clave","clef","clerk","click","client","climb","clipper","cloakroom","clock","close","closet","cloth","cloud","cloudy","clover","club","clutch","coach","coal","coast","coat","cobweb","cocktail","cocoa","cod","coffee","coil","coin","coke","cold","collar","college","collision","colombia","colon","colony","color","colt","column","columnist","comb","comfort","comic","comma","command","commission","committee","community","company","comparison","competition","competitor","composer","composition","computer","condition","condor","cone","confirmation","conga","congo","conifer","connection","consonant","continent","control","cook","cooking","copper","copy","copyright","cord","cork","cormorant","corn","cornet","correspondent","cost","cotton","couch","cougar","cough","country","course","court","cousin","cover","cow","cowbell","crab","crack","cracker","craftsman","crate","crawdad","crayfish","crayon","cream","creator","creature","credit","creditor","creek","crib","cricket","crime","criminal","crocodile","crocus","croissant","crook","crop","cross","crow","crowd","crown","crush","cry","cub","cuban","cucumber","cultivator","cup","cupboard","cupcake","curler","currency","current","curtain","curve","cushion","custard","customer","cut","cuticle","cycle","cyclone","cylinder","cymbal","dad","daffodil","dahlia","daisy","damage","dance","dancer","danger","daniel","dash","dashboard","database","date","daughter","david","day","dead","deadline","deal","death","deborah","debt","debtor","decade","december","decimal","decision","decrease","dedication","deer","defense","deficit","degree","delete","delivery","den","denim","dentist","deodorant","department","deposit","description","desert","design","desire","desk","dessert","destruction","detail","detective","development","dew","diamond","diaphragm","dibble","dictionary","dietician","difference","digestion","digger","digital","dill","dime","dimple","dinghy","dinner","dinosaur","diploma","dipstick","direction","dirt","disadvantage","discovery","discussion","disease","disgust","dish","distance","distribution","distributor","diving","division","divorced","dock","doctor","dog","dogsled","doll","dollar","dolphin","domain","donald","donkey","donna","door","dorothy","double","doubt","downtown","dragon","dragonfly","drain","drake","drama","draw","drawbridge","drawer","dream","dredger","dress","dresser","dressing","drill","drink","drive","driver","driving","drizzle","drop","drug","drum","dry","dryer","duck","duckling","dugout","dungeon","dust","eagle","ear","earth","earthquake","ease","east","edge","edger","editor","editorial","education","edward","eel","effect","egg","eggnog","eggplant","egypt","eight","elbow","element","elephant","elizabeth","ellipse","emery","employee","employer","encyclopedia","end","enemy","energy","engine","engineer","engineering","english","enquiry","entrance","environment","epoch","epoxy","equinox","equipment","era","error","estimate","ethernet","ethiopia","euphonium","europe","evening","event","ex-husband","ex-wife","examination","example","exchange","exclamation","exhaust","existence","expansion","experience","expert","explanation","eye","eyebrow","eyelash","eyeliner","face","facilities","fact","factory","fahrenheit","fairies","fall","family","fan","fang","farm","farmer","fat","father","faucet","fear","feast","feather","feature","february","feedback","feeling","feet","felony","female","fender","ferry","ferryboat","fertilizer","fiber","fiberglass","fibre","fiction","field","fifth","fight","fighter","file","find","fine","finger","fir","fire","fired","fireman","fireplace","firewall","fish","fisherman","flag","flame","flare","flat","flavor","flax","flesh","flight","flock","flood","floor","flower","flugelhorn","flute","fly","foam","fog","fold","font","food","foot","football","footnote","force","forecast","forehead","forest","forgery","fork","form","format","fortnight","foundation","fountain","fowl","fox","foxglove","fragrance","frame","france","freckle","freeze","freezer","freighter","french","freon","friction","friday","fridge","friend","frog","front","frost","frown","fruit","fuel","fur","furniture","galley","gallon","game","gander","garage","garden","garlic","gas","gasoline","gate","gateway","gauge","gazelle","gear","gearshift","geese","gemini","gender","geography","geology","geometry","george","geranium","german","germany","ghana","ghost","giant","giraffe","girdle","girl","gladiolus","glass","glider","gliding","glockenspiel","glove","glue","goal","goat","gold","goldfish","golf","gondola","gong","good-bye","goose","gore-tex","gorilla","gosling","government","governor","grade","grain","gram","granddaughter","grandfather","grandmother","grandson","grape","graphic","grass","grasshopper","gray","grease","greece","greek","green","grenade","grey","grill","grip","ground","group","grouse","growth","guarantee","guatemalan","guide","guilty","guitar","gum","gun","gym","gymnast","hacksaw","hail","hair","haircut","halibut","hall","hallway","hamburger","hammer","hamster","hand","handball","handicap","handle","handsaw","harbor","hardboard","hardcover","hardhat","hardware","harmonica","harmony","harp","hat","hate","hawk","head","headlight","headline","health","hearing","heart","heat","heaven","hedge","height","helen","helicopter","helium","hell","helmet","help","hemp","hen","heron","herring","hexagon","hill","himalayan","hip","hippopotamus","history","hobbies","hockey","hoe","hole","holiday","home","honey","hood","hook","hope","horn","horse","hose","hospital","hot","hour","hourglass","house","hovercraft","hub","hubcap","humidity","humor","hurricane","hyacinth","hydrant","hydrofoil","hydrogen","hyena","hygienic","ice","icebreaker","icicle","icon","idea","ikebana","illegal","imprisonment","improvement","impulse","inch","income","increase","index","india","indonesia","industry","ink","innocent","input","insect","instruction","instrument","insulation","insurance","interactive","interest","internet","interviewer","intestine","invention","inventory","invoice","iran","iraq","iris","iron","island","israel","italian","italy","jacket","jaguar","jail","jam","james","january","japan","japanese","jar","jasmine","jason","jaw","jeans","jeep","jeff","jelly","jellyfish","jennifer","jet","jewel","jogging","john","join","joke","joseph","journey","judge","judo","juice","july","jumbo","jump","jumper","june","jury","justice","jute","kale","kamikaze","kangaroo","karate","karen","kayak","kendo","kenneth","kenya","ketchup","kettle","kettledrum","kevin","key","keyboard","keyboarding","kick","kidney","kilogram","kilometer","kimberly","kiss","kitchen","kite","kitten","kitty","knee","knickers","knife","knight","knot","knowledge","kohlrabi","korean","laborer","lace","ladybug","lake","lamb","lamp","lan","land","landmine","language","larch","lasagna","latency","latex","lathe","laugh","laundry","laura","law","lawyer","layer","lead","leaf","learning","leather","leek","leg","legal","lemonade","lentil","leo","leopard","letter","lettuce","level","libra","library","license","lier","lift","light","lightning","lilac","lily","limit","linda","line","linen","link","lion","lip","lipstick","liquid","liquor","lisa","list","literature","litter","liver","lizard","llama","loaf","loan","lobster","lock","locket","locust","look","loss","lotion","love","low","lumber","lunch","lunchroom","lung","lunge","lute","lettuce","lycra","lynx","lyondell","lyre","lyric","macaroni","machine","macrame","magazine","magic","magician","maid","mail","mailbox","mailman","makeup","malaysia","male","mall","mallet","man","manager","mandolin","manicure","manx","map","maple","maraca","marble","march","margaret","margin","maria","marimba","mark","market","married","mary","mascara","mask","mass","match","math","mattock","may","mayonnaise","meal","measure","meat","mechanic","medicine","meeting","melody","memory","men","menu","mercury","message","metal","meteorology","meter","methane","mexican","mexico","mice","michael","michelle","microwave","middle","mile","milk","milkshake","millennium","millimeter","millisecond","mimosa","mind","mine","mini-skirt","minibus","minister","mint","minute","mirror","missile","mist","mistake","mitten","moat","modem","mole","mom","monday","money","monkey","month","moon","morning","morocco","mosque","mosquito","mother","mother-in-law","motion","motorboat","motorcycle","mountain","mouse","moustache","mouth","move","multi-hop","multimedia","muscle","museum","music","musician","mustard","myanmar","nail","name","nancy","napkin","narcissus","nation","neck","need","needle","neon","nepal","nephew","nerve","nest","net","network","news","newsprint","newsstand","nic","nickel","niece","nigeria","night","nitrogen","node","noise","noodle","north","norwegian","nose","note","notebook","notify","novel","november","number","numeric","nurse","nut","nylon","oak","oatmeal","objective","oboe","observation","occupation","ocean","ocelot","octagon","octave","october","octopus","odometer","offence","offer","office","oil","okra","olive","onion","open","opera","operation","ophthalmologist","opinion","option","orange","orchestra","orchid","order","organ","organization","ornament","ostrich","otter","ounce","output","outrigger","oval","oven","overcoat","owl","owner","ox","oxygen","oyster","package","packet","page","pail","pain","paint","pair","pajama","pakistan","palm","pamphlet","pan","pancake","pancreas","panda","pansy","panther","panties","pantry","pants","panty","pantyhose","paper","paperback","parade","parallelogram","parcel","parent","parentheses","park","parrot","parsnip","part","particle","partner","partridge","party","passbook","passenger","passive","pasta","paste","pastor","pastry","patch","path","patient","patio","patricia","paul","payment","pea","peace","peak","peanut","pear","pedestrian","pediatrician","peen","peer-to-peer","pelican","pen","penalty","pencil","pendulum","pentagon","peony","pepper","perch","perfume","period","periodical","peripheral","permission","persian","person","peru","pest","pet","pharmacist","pheasant","philippines","philosophy","phone","physician","piano","piccolo","pickle","picture","pie","pig","pigeon","pike","pillow","pilot","pimple","pin","pine","ping","pink","pint","pipe","pisces","pizza","place","plain","plane","planet","plant","plantation","plaster","plasterboard","plastic","plate","platinum","play","playground","playroom","pleasure","plier","plot","plough","plow","plywood","pocket","poet","point","poison","poland","police","policeman","polish","politician","pollution","polo","polyester","pond","popcorn","poppy","population","porch","porcupine","port","porter","position","possibility","postage","postbox","pot","potato","poultry","pound","powder","power","precipitation","preface","prepared","pressure","price","priest","print","printer","prison","probation","process","processing","produce","product","production","professor","profit","promotion","propane","property","prose","prosecution","protest","protocol","pruner","psychiatrist","psychology","ptarmigan","puffin","pull","puma","pump","pumpkin","punch","punishment","puppy","purchase","purple","purpose","push","pvc","pajama","pyramid","quail","quality","quart","quarter","quartz","queen","question","quicksand","quiet","quill","quilt","quince","quit","quiver","quotation","rabbi","rabbit","racing","radar","radiator","radio","radish","raft","rail","railway","rain","rainbow","raincoat","rainstorm","rake","ramie","random","range","rat","rate","raven","ravioli","ray","rayon","reaction","reading","reason","receipt","recess","record","recorder","rectangle","red","reduction","refrigerator","refund","regret","reindeer","relation","relative","religion","relish","reminder","repair","replace","report","representative","request","resolution","respect","responsibility","rest","restaurant","result","retailer","revolve","revolver","reward","rhinoceros","rhythm","rice","richard","riddle","rifle","ring","rise","risk","river","riverbed","road","roadway","roast","robert","robin","rock","rocket","rod","roll","romania","romanian","ronald","roof","room","rooster","root","rose","rotate","route","router","rowboat","rub","rubber","rugby","rule","run","russia","russian","rutabaga","ruth","sack","sagittarius","sail","sailboat","sailor","salad","salary","sale","salesman","salmon","salt","sampan","samurai","sand","sandra","sandwich","santa","sarah","sardine","satin","saturday","sauce","saudi arabia","sausage","save","saw","saxophone","scale","scallion","scanner","scarecrow","scarf","scene","scent","schedule","school","science","scissors","scooter","scorpio","scorpion","scraper","screen","screw","screwdriver","sea","seagull","seal","seaplane","search","seashore","season","seat","second","secretary","secure","security","seed","seeder","segment","select","selection","self","semicircle","semicolon","sense","sentence","separated","september","servant","server","session","sex","shade","shadow","shake","shallot","shame","shampoo","shape","share","shark","sharon","shears","sheep","sheet","shelf","shell","shield","shingle","ship","shirt","shock","shoe","shoemaker","shop","shorts","shoulder","shovel","show","shrimp","shrine","siamese","siberian","side","sideboard","sidecar","sidewalk","sign","signature","silica","silk","silver","sing","singer","single","sink","sister","size","skate","skiing","skill","skin","skirt","sky","slash","slave","sled","sleep","sleet","slice","slime","slip","slipper","slope","smash","smell","smile","smoke","snail","snake","sneeze","snow","snowboarding","snowflake","snowman","snowplow","snowstorm","soap","soccer","society","sociology","sock","soda","sofa","softball","softdrink","software","soil","soldier","son","song","soprano","sort","sound","soup","sousaphone","soy","soybean","space","spade","spaghetti","spain","spandex","spark","sparrow","spear","specialist","speedboat","sphere","sphinx","spider","spike","spinach","spleen","sponge","spoon","spot","spring","sprout","spruce","spy","square","squash","squid","squirrel","stage","staircase","stamp","star","start","starter","state","statement","station","statistic","steam","steel","stem","step","stepdaughter","stepmother","stepson","steven","stew","stick","stinger","stitch","stock","stocking","stomach","stone","stool","stop","stopsign","stopwatch","store","storm","story","stove","stranger","straw","stream","street","streetcar","stretch","string","structure","study","sturgeon","submarine","substance","subway","success","sudan","suede","sugar","suggestion","suit","summer","sun","sunday","sundial","sunflower","sunshine","supermarket","supply","support","surfboard","surgeon","surname","surprise","susan","sushi","swallow","swamp","swan","sweater","sweatshirt","sweatshop","swedish","sweets","swim","swimming","swing","swiss","switch","sword","swordfish","sycamore","syria","syrup","system","t-shirt","table","tablecloth","tabletop","tachometer","tadpole","tail","tailor","taiwan","talk","tank","tanker","tanzania","target","taste","taurus","tax","taxi","taxicab","tea","teacher","teaching","team","technician","teeth","television","teller","temper","temperature","temple","tempo","tendency","tennis","tenor","tent","territory","test","text","textbook","texture","thailand","theater","theory","thermometer","thing","thistle","thomas","thought","thread","thrill","throat","throne","thumb","thunder","thunderstorm","thursday","ticket","tie","tiger","tights","tile","timbale","time","timer","timpani","tin","tip","tire","titanium","title","toad","toast","toe","toenail","toilet","tom-tom","tomato","ton","tongue","tooth","toothbrush","toothpaste","top","tornado","tortellini","tortoise","touch","tower","town","toy","tractor","trade","traffic","trail","train","tramp","transaction","transmission","transport","trapezoid","tray","treatment","tree","trial","triangle","trick","trigonometry","trip","trombone","trouble","trousers","trout","trowel","truck","trumpet","trunk","tsunami","tub","tuba","tuesday","tugboat","tulip","tuna","tune","turkey","turkish","turn","turnip","turnover","turret","turtle","tv","twig","twilight","twine","twist","typhoon","uganda","ukraine","ukrainian","umbrella","uncle","underclothes","underpants","undershirt","underwear","unit","united kingdom","unshielded","use","utensil","uzbekistan","vacation","vacuum","valley","value","van","aardvark","vase","vault","vegetable","vegetarian","veil","vein","velvet","venezuela","venezuelan","verdict","vermicelli","verse","vessel","vest","veterinarian","vibraphone","vietnam","view","vinyl","viola","violet","violin","virgo","viscose","vise","vision","visitor","voice","volcano","volleyball","voyage","vulture","waiter","waitress","walk","wall","wallaby","wallet","walrus","war","warm","wash","washer","wasp","waste","watch","watchmaker","water","waterfall","wave","wax","way","wealth","weapon","weasel","weather","wedge","wednesday","weed","weeder","week","weight","whale","wheel","whip","whiskey","whistle","white","wholesaler","whorl","wilderness","william","willow","wind","windchime","window","windscreen","windshield","wine","wing","winter","wire","wish","witch","withdrawal","witness","wolf","woman","women","wood","wool","woolen","word","work","workshop","worm","wound","wrecker","wren","wrench","wrinkle","wrist","writer","xylophone","yacht","yak","yam","yard","yarn","year","yellow","yew","yogurt","yoke","yugoslavian","zebra","zephyr","zinc","zipper","zone","zoo","zoology"];function genRandomName(){var n=adjectives[Math.floor(Math.random()*adjectives.length)],t=nouns[Math.floor(Math.random()*nouns.length)];return t=t.charAt(0).toUpperCase()+t.substring(1),n=n.charAt(0).toUpperCase()+n.substring(1),n+t}function useDebounce(n,t){var i=react.exports.useState(n),a=i[0],o=i[1];return react.exports.useEffect(function(){var u=setTimeout(function(){return o(n)},t||500);return function(){clearTimeout(u)}},[n,t]),a}var VidWrapper=e.memo(function(n){var t,i=n.track,a=n.isLocal,o=n.disableSelfieMode,u=react.exports.useRef(null),l=react.exports.useState(!1),m=l[0],c=l[1],f=useDebounce(m,250);react.exports.useEffect(function(){var b=u.current;if(!!b)return b.muted=!0,i.attach(b),function(){i.detach(b)}},[i,u]);var g=((t=i.mediaStreamTrack)==null?void 0:t.getSettings().facingMode)!=="environment";return jsxs(Fragment,{children:[f&&jsx("div",{className:"catalyst-ld-1 h-16 w-16 absolute self-center",children:jsx("div",{className:"catalyst-ld-inner"})}),jsx("video",{ref:u,onLoadStart:function(){return c(!0)},onWaiting:function(){return c(!0)},onPlaying:function(){return c(!1)},className:"min-h-0 min-w-0 rounded-lg z-10 h-auto w-full "+(a&&g&&!o?"rm-uncanny-valley":"")+" contain max-vid-height"})]})});function useIsMounted(){var n=react.exports.useRef(!1);return react.exports.useEffect(function(){return n.current=!0,function(){n.current=!1}},[]),function(){return n.current}}var ToolbarButton=e.memo(function(n){var t=n.ref,i=n.type,a=n.tooltip,o=n.disabled,u=n.disabledTooltip,l=n.onClick,m=n.icon,c=n.inputDevices,f=n.outputDevices,g=n.onIpDeviceClick,b=n.onOpDeviceClick,v=n.bgColor,_=n.iconColor,x=n.selectedOpDevice,C=n.selectedIpDevice,I=n.cstmSupportUrl,U=n.bgRemovalEffect,M=n.setBgRemovalEffect,V=n.bgRemovalEnabled,T=react.exports.useState(!1),$=T[0],B=T[1],G=react.exports.useRef(null),H=react.exports.useState(!1),X=H[0],h=H[1],s=react.exports.useRef(null),y=react.exports.useState(["none","blur",!U||U==="none"||U==="blur"?BUILT_IN_BACKGROUNDS[Math.floor(Math.random()*BUILT_IN_BACKGROUNDS.length)]:U]),k=y[0],S=function(te){g&&g(te),B(!1)},E=function(te){b&&b(te),B(!1)};return jsx(Tippy,{interactive:!0,triggerTarget:G.current,className:"bg-tertiary font-sans",trigger:"click",disabled:!c&&!f,onShown:function(){B(!0)},onHidden:function(){B(!1),X&&h(!1)},content:f||c?(c==null?void 0:c.length)===0&&!isMobile_1?jsxs("div",{className:"font-sans flex flex-col justify-center items-center text-center text-quinary text-c",children:[jsxs("span",{className:"block mb-1",children:["Catalyst couldn't find any ",i==null?void 0:i.toLowerCase()," devices."]}),jsxs("span",{className:"inline-block mb-1",children:["If you are having trouble,"," ",jsx("a",{className:"text-primary whitespace-nowrap font-semibold",href:"https://docs.catalyst.chat/docs-permissions",target:"_blank",rel:"noreferrer",children:"read our guide here"}),","]}),jsxs("span",{className:"block mb-1",children:["or"," ",jsx("a",{className:"text-primary font-semibold",target:"_blank",rel:"noreferrer",href:I&&(I==null?void 0:I.length)>0?I:SUPPORT_URL,children:"contact support"})]})]}):(c==null?void 0:c.length)!==0&&jsx("div",{children:jsxs("ul",{className:"font-sans list-none m-0 p-0",children:[f&&f.length>0&&jsxs(Fragment,{children:[jsxs("li",{className:"flex items-center text-xs text-quinary font-semibold p-1 border-white border-b border-opacity-20 whitespace-nowrap ",children:[i," Output"]},"input-row"),f==null?void 0:f.map(function(z,te){var W=z.label.includes("(")?z.label.substring(0,z.label.indexOf("(")):z.label;return jsxs("li",{className:"flex items-center text-xs text-quinary p-1 cursor-pointer whitespace-nowrap",onClick:function(){return E(z)},children:[z.label===(x==null?void 0:x.label)?jsx(FontAwesomeIcon,{icon:faCheckCircle,className:"mr-1 text-primary "}):jsx(FontAwesomeIcon,{icon:faCircle,className:"mr-1 "}),W]},te)})]}),jsxs("li",{className:"flex items-center text-xs text-quinary font-semibold p-1 border-white border-b border-opacity-20 whitespace-nowrap",children:[i," Input"]},"input-row"),c==null?void 0:c.map(function(z,te){var W=z.label.includes("(")?z.label.substring(0,z.label.indexOf("(")):z.label;return jsxs("li",{className:"flex items-center text-xs text-quinary p-1 whitespace-nowrap cursor-pointer",onClick:function(){return S(z)},children:[z.label===(C==null?void 0:C.label)?jsx(FontAwesomeIcon,{icon:faCheckCircle,className:"mr-1 text-primary"}):jsx(FontAwesomeIcon,{icon:faCircle,className:"mr-1 "}),W]},te)}),(i==null?void 0:i.toLowerCase())==="audio"&&jsxs("button",{className:"flex items-center text-xs text-quinary p-1 mt-1 w-full whitespace-nowrap border-white border-t border-opacity-20 focus:outline-none focus:border-0 focus:ring-1 focus:ring-primary",onClick:function(){var te;return(te=s.current)==null?void 0:te.play()},children:[jsx(FontAwesomeIcon,{icon:faVolumeUp,className:"mr-1 "+(X?"text-primary":"text-quinary")}),X?jsxs(Fragment,{children:[" Testing ",i,"..."]}):jsxs(Fragment,{children:[" Test ",i," Output"]}),jsx("audio",{onPlay:function(){return h(!0)},onEnded:function(){return h(!1)},ref:s,children:jsx("source",{src:"https://github.com/Catalyst-Video/catalyst-react/blob/master/src/assets/sounds/audio-test.mp3?raw=true"})})]})," ",(i==null?void 0:i.toLowerCase())==="video"&&V&&jsxs("div",{children:[jsx("li",{className:"flex items-center text-xs text-quinary font-semibold p-2 whitespace-nowrap border-white border-b border-opacity-20",children:"Background Filters"},"input-row"),k.map(function(z,te){return jsxs("button",{className:"flex items-center text-xs text-quinary p-1 w-full whitespace-nowrap focus:outline-none focus:border-0 focus:ring-1 focus:ring-primary capitalize",onClick:function(){M&&M(z)},children:[jsx(FontAwesomeIcon,{icon:z===U?faCheckCircle:faCircle,className:"mr-1 "+(z===U?"text-primary":"text-quinary")}),jsx("span",{className:"capitalize",children:z==="blur"?"Blur":z==="none"?"None":"Image"})]},"bg-rm"+te)})]})]})}):null,children:jsxs("div",{className:"inline-block m-1 relative",children:[jsx(Tippy,{content:a,theme:"catalyst",disabled:$||u,zIndex:40,children:jsx("button",{id:i+"-btn",disabled:o,className:"rounded-full w-14 h-14 flex justify-center items-center "+(v||"bg-tertiary hover:bg-quaternary")+" focus:outline-none focus:border-0 ",onClick:l,children:m&&jsx(FontAwesomeIcon,{className:_||"text-quinary  hover:text-gray-50",size:"lg",icon:m})})}),c&&c.length>0&&jsx("button",{disabled:o,ref:t!=null?t:G,className:"absolute z-10 -right-1 -bottom-1 "+(v||"bg-tertiary hover:bg-quaternary ")+"  rounded-full border-4 border-secondary h-6 w-6 flex justify-center items-center focus:outline-none",onClick:function(){return B(function(te){return!te})},children:jsx(FontAwesomeIcon,{size:"xs",className:"transition transform hover:-translate-y-0.5 motion-reduce:transition-none motion-reduce:transform-none  "+(_?"text-gray-900":"text-quinary"),icon:$?faChevronUp:faChevronDown})})]})})}),AudioDeviceBtn=function n(t){var i=t.isMuted,a=t.onClick,o=t.onIpSelected,u=t.onOpSelected,l=t.audioDevice,m=t.outputDevice,c=t.cstmSupportUrl,f=react.exports.useState([]),g=f[0],b=f[1],v=react.exports.useState([]),_=v[0],x=v[1],C=react.exports.useState([]),I=C[0],U=C[1],M=react.exports.useState([]),V=M[0],T=M[1],$=useIsMounted();react.exports.useEffect(function(){navigator.mediaDevices.enumerateDevices().then(function(H){if(!!$()){var X=H.filter(function(s){return s.kind==="audioinput"&&s.deviceId});b(X),U(X.map(function(s){return{label:s.label}}));var h=H.filter(function(s){return s.kind==="audiooutput"&&s.deviceId});return x(h),T(h.map(function(s){return{label:s.label}})),H}}).catch(function(H){console.log(H)})},[i]);var B=function(X){var h=g.find(function(s){return s.label===X.label});h&&o&&o(h)},G=function(X){var h=_.find(function(s){return s.label===X.label});h&&u&&u(h)};return jsx(ToolbarButton,{type:"Audio",tooltip:i?"Unmute":"Mute",icon:i?faMicrophoneSlash:faMicrophone,bgColor:i?"bg-quinary  hover:bg-gray-100":void 0,iconColor:i?"text-red":void 0,onClick:a,inputDevices:I,outputDevices:V,onIpDeviceClick:B,onOpDeviceClick:G,selectedIpDevice:l,selectedOpDevice:m,cstmSupportUrl:c})},VidDeviceBtn=function n(t){var i=t.isEnabled,a=t.onClick,o=t.onIpSelected,u=t.videoDevice,l=t.cstmSupportUrl,m=t.bgRemovalEnabled,c=t.bgRemovalEffect,f=t.setBgRemovalEffect,g=react.exports.useState([]),b=g[0],v=g[1],_=react.exports.useState([]),x=_[0],C=_[1],I=useIsMounted();react.exports.useEffect(function(){navigator.mediaDevices.enumerateDevices().then(function(M){if(!!I()){var V=M.filter(function(T){return T.kind==="videoinput"&&T.deviceId});return v(V),C(V.map(function(T){return{label:T.label}})),M}})},[i]);var U=function(V){var T=b.find(function($){return $.label===V.label});T&&o&&o(T)};return jsx(ToolbarButton,{type:"Video",tooltip:i?"Disable Video":"Enable Video",icon:i?faVideo:faVideoSlash,bgColor:i?void 0:"bg-quinary  hover:bg-gray-100",iconColor:i?void 0:"text-red",onIpDeviceClick:U,onClick:a,bgRemovalEnabled:m,inputDevices:x,selectedIpDevice:u,cstmSupportUrl:l,bgRemovalEffect:c,setBgRemovalEffect:f})},HeaderImg=e.memo(function(n){var t=n.color;return jsx("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",height:"48",viewBox:"0 0 1561.000000 421.000000",preserveAspectRatio:"xMidYMid meet",className:"fill-current "+(t!=null?t:"text-primary"),children:jsxs("g",{transform:"translate(0.000000,421.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",className:"fill-current "+(t!=null?t:"text-primary"),children:[jsx("path",{d:"M3790 3883 c-614 -58 -1138 -421 -1395 -966 -100 -213 -164 -470 -165 -664 l0 -53 -425 0 -425 0 0 450 0 450 -450 0 -450 0 0 -450 0 -450 448 0 449 0 7 -111 c28 -458 246 -898 591 -1187 298 -250 617 -379 1013 -408 l92 -7 0 427 0 426 -45 0 c-178 0 -425 110 -562 252 -144 149 -242 370 -243 551 l0 57 425 0 425 0 0 53 c0 111 56 279 132 399 141 220 433 388 674 388 l44 0 0 425 0 425 -52 -2 c-29 0 -69 -3 -88 -5z"}),jsx("path",{d:"M10240 2200 l0 -840 175 0 175 0 0 840 0 840 -175 0 -175 0 0 -840z"}),jsx("path",{d:"M5427 2970 c-119 -21 -278 -84 -361 -143 -58 -40 -158 -142 -198 -201 -95 -139 -138 -285 -138 -471 0 -247 79 -437 248 -597 88 -83 181 -138 297 -177 127 -42 218 -54 365 -48 214 9 394 78 530 204 38 36 70 68 70 73 0 4 -52 56 -115 115 l-115 107 -55 -51 c-31 -28 -90 -67 -131 -87 -69 -35 -83 -38 -183 -42 -176 -7 -275 26 -385 129 -207 193 -207 555 0 748 110 103 209 136 385 129 100 -4 114 -7 183 -42 41 -20 100 -59 130 -87 l56 -51 102 93 c57 50 109 97 116 104 20 18 -7 56 -86 121 -83 68 -175 116 -287 149 -75 23 -114 28 -235 31 -80 1 -167 -1 -193 -6z"}),jsx("path",{d:"M7900 2700 l0 -150 -95 0 -95 0 0 -135 0 -135 94 0 95 0 3 -322 c3 -309 4 -325 26 -380 47 -117 156 -201 300 -228 86 -17 241 -8 317 19 104 37 102 32 55 157 -55 147 -50 141 -97 118 -52 -25 -149 -25 -187 -1 -15 10 -36 37 -47 60 -17 38 -19 69 -19 310 l0 267 155 0 155 0 0 135 0 135 -155 0 -155 0 0 150 0 150 -175 0 -175 0 0 -150z"}),jsx("path",{d:"M13510 2700 l0 -150 -95 0 -95 0 0 -135 0 -135 94 0 95 0 3 -322 c3 -309 4 -325 26 -380 47 -117 156 -201 300 -228 86 -17 241 -8 317 19 104 37 102 32 55 157 -55 147 -50 141 -97 118 -52 -25 -149 -25 -187 -1 -15 10 -36 37 -47 60 -17 38 -19 69 -19 310 l0 267 155 0 155 0 0 135 0 135 -155 0 -155 0 0 150 0 150 -175 0 -175 0 0 -150z"}),jsx("path",{d:"M6764 2585 c-105 -19 -181 -43 -259 -82 -38 -19 -74 -38 -78 -43 -9 -8 110 -253 121 -248 4 2 41 20 82 41 167 84 390 84 483 -1 27 -24 53 -80 61 -128 l7 -42 -223 -5 c-235 -5 -288 -13 -393 -61 -74 -33 -120 -79 -157 -153 -28 -57 -32 -75 -32 -147 1 -231 176 -376 454 -376 145 0 241 32 320 106 l50 47 0 -67 0 -66 165 0 165 0 0 403 c0 323 -3 415 -15 466 -45 189 -180 312 -388 355 -91 19 -262 20 -363 1z m416 -775 c0 -73 -24 -125 -77 -169 -101 -84 -289 -79 -355 9 -45 60 -27 154 36 187 48 25 89 31 249 32 l147 1 0 -60z"}),jsx("path",{d:"M9154 2585 c-105 -19 -181 -43 -259 -82 -38 -19 -74 -38 -78 -43 -9 -8 110 -253 121 -248 4 2 41 20 82 41 167 84 390 84 483 -1 27 -24 53 -80 61 -128 l7 -42 -223 -5 c-235 -5 -288 -13 -393 -61 -74 -33 -120 -79 -157 -153 -28 -57 -32 -75 -32 -147 1 -231 176 -376 454 -376 145 0 241 32 320 106 l50 47 0 -67 0 -66 165 0 165 0 0 403 c0 323 -3 415 -15 466 -45 189 -180 312 -388 355 -91 19 -262 20 -363 1z m416 -775 c0 -73 -24 -125 -77 -169 -101 -84 -289 -79 -355 9 -45 60 -27 154 36 187 48 25 89 31 249 32 l147 1 0 -60z"}),jsx("path",{d:"M12585 2593 c-141 -22 -262 -80 -335 -160 -120 -131 -117 -349 5 -462 80 -73 151 -99 383 -137 205 -33 262 -58 262 -113 0 -65 -59 -101 -176 -109 -141 -8 -318 29 -431 92 l-44 25 -30 -64 c-16 -36 -42 -94 -58 -130 l-30 -64 32 -20 c48 -30 200 -78 301 -96 49 -8 139 -15 200 -15 270 0 472 92 546 246 31 65 38 172 17 245 -42 143 -160 214 -433 259 -172 28 -239 48 -269 78 -28 27 -31 48 -13 86 41 92 319 100 506 15 36 -16 66 -28 67 -27 6 12 115 249 115 252 0 10 -127 58 -201 76 -83 21 -339 36 -414 23z"}),jsx("path",{d:"M11007 1964 c263 -612 265 -617 250 -648 -23 -49 -68 -97 -104 -112 -18 -8 -59 -14 -92 -14 -49 0 -72 6 -127 35 -37 19 -68 34 -69 33 -1 -2 -30 -58 -65 -126 -71 -140 -72 -129 27 -177 73 -35 165 -55 258 -55 197 0 346 86 440 254 26 48 389 890 600 1394 l14 32 -172 0 -173 0 -169 -409 c-93 -225 -172 -408 -174 -405 -3 2 -79 185 -171 407 l-166 402 -186 3 -186 2 265 -616z"})]})})});function useLocalStorage(n,t){var i=function(){if(typeof window=="undefined")return t;try{var c=window.localStorage.getItem(n);return c!=null?c:t}catch(f){return console.warn("Error reading localStorage key \u201C"+n+"\u201D:",f),t}},a=react.exports.useState(i),o=a[0],u=a[1],l=function(c){typeof window=="undefined"&&console.warn("Tried setting localStorage key \u201C"+n+"\u201D even though environment is not a client");try{var f=c instanceof Function?c(o):c;window.localStorage.setItem(n,f),u(f),window.dispatchEvent(new Event("local-storage"))}catch(g){console.warn("Error setting localStorage key \u201C"+n+"\u201D:",g)}};return react.exports.useEffect(function(){u(i())},[]),react.exports.useEffect(function(){var m=function(){u(i())};return window.addEventListener("storage",m),window.addEventListener("local-storage",m),function(){window.removeEventListener("storage",m),window.removeEventListener("local-storage",m)}},[]),[o,l]}var SetupView=function n(t){var i=t.audioOn,a=t.videoOn,o=t.setAudioOn,u=t.setVideoOn,l=t.setReady,m=t.userName,c=t.setUserName,f=t.cstmSetupBg,g=t.disableNameField,b=t.cstmSupportUrl,v=react.exports.useState(),_=v[0],x=v[1],C=react.exports.useState(),I=C[0],U=C[1],M=react.exports.useState(),V=M[0],T=M[1],$=react.exports.useState(),B=$[0],G=$[1],H=useLocalStorage("PREFERRED_AUDIO_DEVICE_ID","default"),X=H[0],h=H[1],s=useLocalStorage("PREFERRED_VIDEO_DEVICE_ID","default"),y=s[0],k=s[1],S=useLocalStorage("PREFERRED_OUTPUT_DEVICE_ID","default"),E=S[0],z=S[1],te=react.exports.useRef(null),W=useIsMounted(),Y=react.exports.useState("linear-gradient(217deg, hsla(356, 90%, 64%, 0.8), hsla(280, 78%, 69%, 0.8), hsla(191, 86%, 49%, 0.8))"),q=Y[0];react.exports.useEffect(function(){if(!(!te.current||!_)){var Z=te.current;return _.attach(Z),function(){_.detach(Z),_.stop()}}},[_,te]),react.exports.useEffect(function(){(!B||!I||!V)&&localStorage&&navigator.mediaDevices.enumerateDevices().then(function(Z){if(!!W()){if(!B){var A=Z.filter(function(ie){return ie.kind==="audiooutput"&&(ie==null?void 0:ie.deviceId)}),O;if(E&&(O=A.find(function(ie){return(ie==null?void 0:ie.deviceId)===E})),!O){var D;O=A[0],z((D=O)==null?void 0:D.deviceId)}G(O)}if(!I){var ne=Z.filter(function(ie){return ie.kind==="audioinput"&&(ie==null?void 0:ie.deviceId)}),K;if(X&&(K=ne.find(function(ie){return(ie==null?void 0:ie.deviceId)===X})),!K){var P;K=ne[0],h((P=K)==null?void 0:P.deviceId)}U(K)}if(!V){var j=Z.filter(function(ie){return ie.kind==="videoinput"&&(ie==null?void 0:ie.deviceId)}),L;if(y&&(L=j.find(function(ie){return(ie==null?void 0:ie.deviceId)===y})),!L&&(L=j.find(function(ie){var se;return(ie==null?void 0:ie.deviceId)===(_==null||(se=_.mediaStreamTrack.getSettings())==null?void 0:se.deviceId)}),L&&!y)){var oe;k((oe=L)==null?void 0:oe.deviceId)}T(L)}return B&&I&&V}}),a&&dist.createLocalVideoTrack().then(function(Z){if(!!W())return x(Z),Z})},[]),react.exports.useEffect(function(){I&&dist.createLocalAudioTrack({deviceId:I==null?void 0:I.deviceId}).then(function(Z){if(!!W())return h(I==null?void 0:I.deviceId),Z}).catch(function(Z){console.log(Z)})},[I]),react.exports.useEffect(function(){V&&dist.createLocalVideoTrack({deviceId:V==null?void 0:V.deviceId}).then(function(Z){if(!!W())return x(Z),Z}).catch(function(Z){console.log(Z)})},[V]);var ee=function(){o(function(A){return!A})},re=function(A){if(_){var O;if(((O=_.mediaStreamTrack.getSettings())==null?void 0:O.deviceId)===(A==null?void 0:A.deviceId))return;T(A),k(A==null?void 0:A.deviceId)}},F=function(){if(_)_.stop(),u(!1),x(void 0);else{var A={};V&&(A.deviceId=V==null?void 0:V.deviceId),dist.createLocalVideoTrack(A).then(function(O){if(!!W())return x(O),u(!0),O})}},N=function(A){G(A),z(A==null?void 0:A.deviceId)};return jsxs("div",{className:"h-full w-full flex justify-between items-center flex-col flex-1",style:f?f.length>0?{background:f}:{background:"#f3f5fd"}:{background:q},children:[jsx("span",{id:"setuproom-header",className:"setup-logo mx-2 mt-5",children:jsx(HeaderImg,{color:"text-quinary "})}),jsx("div",{id:"setuproom-cont",className:" flex-col flex-1 text-center mx-3 my-3 rounded-md flex justify-center",children:jsx("div",{id:"setuproom-comp",className:"rounded-2xl my-2 mx-1z-10 overflow-hidden",children:jsxs("div",{className:"w-80 sm:w-96 lg:h-full rounded-t-xl bg-secondary rounded-b-none z-1",children:[jsx("div",{className:"flex justify-center",children:_&&a?jsx(VidWrapper,{track:_,isLocal:!0}):jsx("div",{className:"min-h-0 min-w-0 rounded-lg h-52 w-full bg-black"})}),!g&&jsx("div",{className:"pt-4 w-full flex justify-center",children:jsx("input",{className:"outline-none border-0 bg-gray-300 rounded-2xl px-4 py-1 -mt-8 z-10 text-black  text-center ",placeholder:"Display name",value:m,onChange:function(A){return c(A.target.value)}})}),jsxs("div",{id:"opts",className:"flex flex-row justify-around bg-secondary items-center my-6",children:[jsx(AudioDeviceBtn,{isMuted:!i,onClick:ee,onIpSelected:U,onOpSelected:N,audioDevice:I,outputDevice:B,cstmSupportUrl:b}),jsx(VidDeviceBtn,{isEnabled:_!==void 0&&a,onClick:F,videoDevice:V,onIpSelected:re,cstmSupportUrl:b})]}),jsx("button",{id:"setuproom-but",className:"rounded-b-xl cursor-pointer block outline-none border-0 font-bold text-md h-14 text-quinary  w-full focus:outline-none focus:border-0 bg-primary",onClick:function(){W()&&l(!0)},children:"Join Call"})]})})})]})};function asyncGeneratorStep(n,t,i,a,o,u,l){try{var m=n[u](l),c=m.value}catch(f){i(f);return}m.done?t(c):Promise.resolve(c).then(a,o)}function _asyncToGenerator(n){return function(){var t=this,i=arguments;return new Promise(function(a,o){var u=n.apply(t,i);function l(c){asyncGeneratorStep(u,a,o,l,m,"next",c)}function m(c){asyncGeneratorStep(u,a,o,l,m,"throw",c)}l(void 0)})}}function createCommonjsModule(n,t){return t={exports:{}},n(t,t.exports),t.exports}var runtime_1=createCommonjsModule(function(n){var t=function(i){var a=Object.prototype,o=a.hasOwnProperty,u,l=typeof Symbol=="function"?Symbol:{},m=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",f=l.toStringTag||"@@toStringTag";function g(W,Y,q){return Object.defineProperty(W,Y,{value:q,enumerable:!0,configurable:!0,writable:!0}),W[Y]}try{g({},"")}catch{g=function(Y,q,ee){return Y[q]=ee}}function b(W,Y,q,ee){var re=Y&&Y.prototype instanceof M?Y:M,F=Object.create(re.prototype),N=new E(ee||[]);return F._invoke=s(W,q,N),F}i.wrap=b;function v(W,Y,q){try{return{type:"normal",arg:W.call(Y,q)}}catch(ee){return{type:"throw",arg:ee}}}var _="suspendedStart",x="suspendedYield",C="executing",I="completed",U={};function M(){}function V(){}function T(){}var $={};$[m]=function(){return this};var B=Object.getPrototypeOf,G=B&&B(B(z([])));G&&G!==a&&o.call(G,m)&&($=G);var H=T.prototype=M.prototype=Object.create($);V.prototype=H.constructor=T,T.constructor=V,V.displayName=g(T,f,"GeneratorFunction");function X(W){["next","throw","return"].forEach(function(Y){g(W,Y,function(q){return this._invoke(Y,q)})})}i.isGeneratorFunction=function(W){var Y=typeof W=="function"&&W.constructor;return Y?Y===V||(Y.displayName||Y.name)==="GeneratorFunction":!1},i.mark=function(W){return Object.setPrototypeOf?Object.setPrototypeOf(W,T):(W.__proto__=T,g(W,f,"GeneratorFunction")),W.prototype=Object.create(H),W},i.awrap=function(W){return{__await:W}};function h(W,Y){function q(F,N,Z,A){var O=v(W[F],W,N);if(O.type==="throw")A(O.arg);else{var D=O.arg,ne=D.value;return ne&&typeof ne=="object"&&o.call(ne,"__await")?Y.resolve(ne.__await).then(function(K){q("next",K,Z,A)},function(K){q("throw",K,Z,A)}):Y.resolve(ne).then(function(K){D.value=K,Z(D)},function(K){return q("throw",K,Z,A)})}}var ee;function re(F,N){function Z(){return new Y(function(A,O){q(F,N,A,O)})}return ee=ee?ee.then(Z,Z):Z()}this._invoke=re}X(h.prototype),h.prototype[c]=function(){return this},i.AsyncIterator=h,i.async=function(W,Y,q,ee,re){re===void 0&&(re=Promise);var F=new h(b(W,Y,q,ee),re);return i.isGeneratorFunction(Y)?F:F.next().then(function(N){return N.done?N.value:F.next()})};function s(W,Y,q){var ee=_;return function(F,N){if(ee===C)throw new Error("Generator is already running");if(ee===I){if(F==="throw")throw N;return te()}for(q.method=F,q.arg=N;;){var Z=q.delegate;if(Z){var A=y(Z,q);if(A){if(A===U)continue;return A}}if(q.method==="next")q.sent=q._sent=q.arg;else if(q.method==="throw"){if(ee===_)throw ee=I,q.arg;q.dispatchException(q.arg)}else q.method==="return"&&q.abrupt("return",q.arg);ee=C;var O=v(W,Y,q);if(O.type==="normal"){if(ee=q.done?I:x,O.arg===U)continue;return{value:O.arg,done:q.done}}else O.type==="throw"&&(ee=I,q.method="throw",q.arg=O.arg)}}}function y(W,Y){var q=W.iterator[Y.method];if(q===u){if(Y.delegate=null,Y.method==="throw"){if(W.iterator.return&&(Y.method="return",Y.arg=u,y(W,Y),Y.method==="throw"))return U;Y.method="throw",Y.arg=new TypeError("The iterator does not provide a 'throw' method")}return U}var ee=v(q,W.iterator,Y.arg);if(ee.type==="throw")return Y.method="throw",Y.arg=ee.arg,Y.delegate=null,U;var re=ee.arg;if(!re)return Y.method="throw",Y.arg=new TypeError("iterator result is not an object"),Y.delegate=null,U;if(re.done)Y[W.resultName]=re.value,Y.next=W.nextLoc,Y.method!=="return"&&(Y.method="next",Y.arg=u);else return re;return Y.delegate=null,U}X(H),g(H,f,"Generator"),H[m]=function(){return this},H.toString=function(){return"[object Generator]"};function k(W){var Y={tryLoc:W[0]};1 in W&&(Y.catchLoc=W[1]),2 in W&&(Y.finallyLoc=W[2],Y.afterLoc=W[3]),this.tryEntries.push(Y)}function S(W){var Y=W.completion||{};Y.type="normal",delete Y.arg,W.completion=Y}function E(W){this.tryEntries=[{tryLoc:"root"}],W.forEach(k,this),this.reset(!0)}i.keys=function(W){var Y=[];for(var q in W)Y.push(q);return Y.reverse(),function ee(){for(;Y.length;){var re=Y.pop();if(re in W)return ee.value=re,ee.done=!1,ee}return ee.done=!0,ee}};function z(W){if(W){var Y=W[m];if(Y)return Y.call(W);if(typeof W.next=="function")return W;if(!isNaN(W.length)){var q=-1,ee=function re(){for(;++q<W.length;)if(o.call(W,q))return re.value=W[q],re.done=!1,re;return re.value=u,re.done=!0,re};return ee.next=ee}}return{next:te}}i.values=z;function te(){return{value:u,done:!0}}return E.prototype={constructor:E,reset:function(W){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(S),!W)for(var Y in this)Y.charAt(0)==="t"&&o.call(this,Y)&&!isNaN(+Y.slice(1))&&(this[Y]=u)},stop:function(){this.done=!0;var W=this.tryEntries[0],Y=W.completion;if(Y.type==="throw")throw Y.arg;return this.rval},dispatchException:function(W){if(this.done)throw W;var Y=this;function q(A,O){return F.type="throw",F.arg=W,Y.next=A,O&&(Y.method="next",Y.arg=u),!!O}for(var ee=this.tryEntries.length-1;ee>=0;--ee){var re=this.tryEntries[ee],F=re.completion;if(re.tryLoc==="root")return q("end");if(re.tryLoc<=this.prev){var N=o.call(re,"catchLoc"),Z=o.call(re,"finallyLoc");if(N&&Z){if(this.prev<re.catchLoc)return q(re.catchLoc,!0);if(this.prev<re.finallyLoc)return q(re.finallyLoc)}else if(N){if(this.prev<re.catchLoc)return q(re.catchLoc,!0)}else if(Z){if(this.prev<re.finallyLoc)return q(re.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(W,Y){for(var q=this.tryEntries.length-1;q>=0;--q){var ee=this.tryEntries[q];if(ee.tryLoc<=this.prev&&o.call(ee,"finallyLoc")&&this.prev<ee.finallyLoc){var re=ee;break}}re&&(W==="break"||W==="continue")&&re.tryLoc<=Y&&Y<=re.finallyLoc&&(re=null);var F=re?re.completion:{};return F.type=W,F.arg=Y,re?(this.method="next",this.next=re.finallyLoc,U):this.complete(F)},complete:function(W,Y){if(W.type==="throw")throw W.arg;return W.type==="break"||W.type==="continue"?this.next=W.arg:W.type==="return"?(this.rval=this.arg=W.arg,this.method="return",this.next="end"):W.type==="normal"&&Y&&(this.next=Y),U},finish:function(W){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var q=this.tryEntries[Y];if(q.finallyLoc===W)return this.complete(q.completion,q.afterLoc),S(q),U}},catch:function(W){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var q=this.tryEntries[Y];if(q.tryLoc===W){var ee=q.completion;if(ee.type==="throw"){var re=ee.arg;S(q)}return re}}throw new Error("illegal catch attempt")},delegateYield:function(W,Y,q){return this.delegate={iterator:z(W),resultName:Y,nextLoc:q},this.method==="next"&&(this.arg=u),U}},i}(n.exports);try{regeneratorRuntime=t}catch{Function("r","regeneratorRuntime = r")(t)}}),AudWrapper=e.memo(function(n){var t=n.track,i=n.isLocal,a=n.sinkId,o=react.exports.useRef();return react.exports.useEffect(function(){if(!i){if(o.current=t.attach(),t.sid&&o.current.setAttribute("data-audio-track-id",t.sid),a){var u;(u=o.current)==null||u.setSinkId(a)}return function(){return t.detach().forEach(function(l){return l.remove()})}}},[t,i,a]),null}),useMember=function n(t){var i=react.exports.useState(!1),a=i[0],o=i[1],u=react.exports.useState(!1),l=u[0],m=u[1],c=react.exports.useState(!1),f=c[0],g=c[1],b=react.exports.useState(),v=b[0],_=b[1],x=react.exports.useState([]),C=x[0],I=x[1],U=react.exports.useState([]),M=U[0],V=U[1],T=function(){I(Array.from(t.tracks.values())),V(Array.from(t.tracks.values()).filter(function(H){return H.track!==void 0}))},$=function(){var G=_asyncToGenerator(runtime_1.mark(function H(X){return runtime_1.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t instanceof dist.LocalParticipant){s.next=2;break}throw new Error("not local member: unable to unpublish");case 2:t.unpublishTrack(X),t.emit("localtrackchanged");case 4:case"end":return s.stop()}},H)}));return function(X){return G.apply(this,arguments)}}();react.exports.useEffect(function(){var G=function(y){y.kind===dist.Track.Kind.Audio?o(!0):y.kind===dist.Track.Kind.Video&&m(!0)},H=function(y){y.kind===dist.Track.Kind.Audio?o(!1):y.kind===dist.Track.Kind.Video&&m(!1)},X=function(){t.metadata&&_(t.metadata)},h=function(){g(t.isSpeaking)};return t.on(dist.ParticipantEvent.TrackMuted,G),t.on(dist.ParticipantEvent.TrackUnmuted,H),t.on(dist.ParticipantEvent.MetadataChanged,X),t.on(dist.ParticipantEvent.IsSpeakingChanged,h),t.on(dist.ParticipantEvent.TrackPublished,T),t.on(dist.ParticipantEvent.TrackUnpublished,T),t.on(dist.ParticipantEvent.TrackSubscribed,T),t.on(dist.ParticipantEvent.TrackUnsubscribed,T),t.on("localtrackchanged",T),X(),h(),T(),function(){t.off(dist.ParticipantEvent.TrackMuted,G),t.off(dist.ParticipantEvent.TrackUnmuted,H),t.off(dist.ParticipantEvent.MetadataChanged,X),t.off(dist.ParticipantEvent.IsSpeakingChanged,h),t.off(dist.ParticipantEvent.TrackPublished,T),t.off(dist.ParticipantEvent.TrackUnpublished,T),t.off(dist.ParticipantEvent.TrackSubscribed,T),t.off(dist.ParticipantEvent.TrackUnsubscribed,T),t.off("localtrackchanged",T)}},[t]);var B;return t.audioTracks.forEach(function(G){B=G.isMuted}),B===void 0&&(B=!0),a!==B&&o(B),{isLocal:t instanceof dist.LocalParticipant,isSpeaking:f,isMuted:a,isAudioMuted:a,isVideoMuted:l,publications:C,subscribedTracks:M,metadata:v,unpublishTrack:$}};function useTimeout(n,t){var i=react.exports.useRef(n);react.exports.useEffect(function(){i.current=n},[n]),react.exports.useEffect(function(){if(t!==null){var a=setTimeout(function(){return i.current()},t);return function(){return clearTimeout(a)}}},[t])}var MemberView=e.memo(function(n){var t=n.member,i=n.width,a=n.height,o=n.classes,u=n.disableSelfieMode,l=n.displayName,m=n.quality,c=n.onClick,f=react.exports.useState(!0),g=f[0],b=f[1],v=useMember(t),_=v.isLocal,x=v.isMuted,C=v.subscribedTracks,I=react.exports.useState(),U=I[0],M=I[1],V=useInView(),T=V.ref,$=V.inView,B=react.exports.useState(!1),G=B[1];return react.exports.useEffect(function(){if(!!T){var H=$;g!==H&&b(H)}},[T,$,t]),react.exports.useEffect(function(){var H;C.forEach(function(X){X.isSubscribed&&X.kind===dist.Track.Kind.Video&&X.trackName!=="screen"&&!H&&(H=X,G(!0))}),M(H)},[C]),react.exports.useEffect(function(){U instanceof dist.RemoteTrackPublication&&g&&U.setEnabled(!0)},[m,g,U]),useTimeout(function(){U instanceof dist.RemoteTrackPublication&&(U==null||U.setEnabled(g),g&&(U==null||U.setVideoQuality(m!=null?m:livekit_rtc.VideoQuality.HIGH)))},3e3),jsx("div",{className:"m-1 "+o+" cursor-pointer",children:jsxs("div",{ref:T,className:"relative z-0 align-middle self-center overflow-hidden text-center bg-gray-800 flex justify-center rounded-xl "+(t.isSpeaking?"ring-2 ring-primary ring-opacity-50 ":""),style:{height:a,width:i},onClick:c,children:[U!=null&&U.track?jsx(VidWrapper,{track:U.track,isLocal:_,disableSelfieMode:u}):jsx("div",{className:"bg-placeholder w-full h-full bg-primary min-h-full"}),jsxs("div",{className:"absolute bottom-0 left-0 flex text-quinary justify-between p-1 lg:p-2 w-full",children:[jsxs("div",{className:"h-7 md:h-8 not-selectable flex items-center justify-center px-2 py-1 relative",children:[jsx("span",{className:"absolute top-0 left-0 opacity-50 rounded-xl w-full h-full"}),jsx("span",{className:"text-n text-quinary z-30",children:(l!=null?l:_)?t.identity+" (You)":t.identity})]}),x&&jsxs("div",{className:"relative h-7 w-7 md:h-8 md:w-8 flex items-center justify-center p-1",children:[jsx("span",{className:"absolute rounded-full top-0 left-0 opacity-50 z-30 bg-tertiary w-full h-full"}),jsx(FontAwesomeIcon,{icon:faMicrophoneSlash,size:"2x",className:"text-quinary  not-selectable p-2 z-30"})]})]})]})})}),ScreenShareWrapper=function n(t){var i=t.track,a=t.width,o=t.height,u=t.classes,l=t.onClick;return jsx("div",{className:u,onClick:l,children:jsxs("div",{className:"relative z-0 cursor-pointer self-center overflow-hidden text-center bg-gray-800 rounded-lg m-1 flex justify-center",style:{height:o,width:a},children:[jsx(VidWrapper,{track:i,isLocal:!1}),jsx("div",{className:"absolute bottom-0 left-0 flex text-quinary  justify-end p-2 w-full",children:jsxs("div",{className:"relative h-7 w-7 md:h-8 md:w-8 flex items-center justify-center p-1",children:[jsx("span",{className:"absolute rounded-full top-0 left-0 opacity-50 z-30 bg-secondary  w-full h-full"}),jsx(FontAwesomeIcon,{icon:faDesktop,size:"2x",className:"text-quinary  not-selectable p-2 z-30"})]})})]})})},Chat=function n(t){var i=t.chatOpen,a=t.localParticipant,o=t.chatMessages,u=t.setChatMessages,l=t.setChatOpen,m=react.exports.useRef(null),c=react.exports.useState(""),f=c[0],g=c[1],b=new TextEncoder,v=function(C){if(C&&C.length>0&&RegExp(".").test(C)&&(C=C.replace(/</g,"&lt;").replace(/>/g,"&gt;"),a)){var I={type:"ctw-chat",text:C,sender:a.sid},U=b.encode(JSON.stringify(I));a.publishData(U,dist.DataPacket_Kind.RELIABLE),u(function(M){return[].concat(M,[{text:C,sender:a}])}),g("")}};react.exports.useEffect(function(){var x;(x=m.current)==null||x.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},[o,i]);var _=function(C,I){var U=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,M=C.match(U);return M?jsx("a",{target:"_blank",href:M[0],className:(I?"text-quinary ":"text-primary")+" underline",children:M[0]}):C};return jsx(Fragment,{children:i&&jsxs("div",{style:{zIndex:100},className:"chat-cont bg-secondary flex h-full right-0 shadow-2xl sm:z-20 z-50",children:[jsx(Tippy,{content:"Close Chat",theme:"catalyst",placement:"bottom",children:jsx("button",{className:"absolute top-2 left-2 z-50",onClick:function(){return l(function(C){return!C})},children:jsx(FontAwesomeIcon,{id:"chat-close",icon:faTimes,size:"lg",className:"text-quinary "})})}),jsx("div",{id:"chat-zone",className:"flex h-full absolute overflow-x-none inset-0 pt-4 pb-36",children:jsxs("div",{id:"chat-messages",className:"w-full h-auto overflow-x-none overflow-y-auto z-20 inset-0 relative no-scrollbar ",children:[o.map(function(x,C){var I,U;return x.sender instanceof dist.LocalParticipant?jsxs("div",{className:"sent-message flex flex-col items-start content-end p-1 pr-2 ml-20 fade-in-bottom z-40",children:[(C===0||o[C-1].sender!==x.sender)&&jsxs("span",{className:"text-quinary  font-semibold text-xs ml-auto p-1 not-selectable",children:[(I=x.sender)==null?void 0:I.identity," (You)"]}),jsx("div",{className:"bg-primary text-quinary  rounded-tl-2xl rounded-tr-2xl rounded-br-sm rounded-bl-2xl  ml-auto p-2",children:jsx("div",{className:"message break-all px-2 py-1 text-xs",children:_(x.text,!0)})})]},C):jsxs("div",{className:"received-message flex flex-col items-start content-end p-1 pl-2 fade-in-bottom",children:[(C===0||o[C-1].sender!==x.sender)&&jsx("span",{className:"text-quinary  font-semibold text-xs p-1 not-selectable",children:x==null||(U=x.sender)==null?void 0:U.identity}),jsx("div",{className:"bg-gray-100 text-black flex items-center justify-center rounded-tl-2xl rounded-tr-2xl rounded-br-2xl rounded-bl-sm p-2",children:jsx("div",{className:"message break-all px-2 py-1 text-xs",children:_(x.text,!1)})})]},C)}),jsx("div",{ref:m,id:"chat-end",className:"invisible w-full h-1 content-end"})]})}),jsxs("div",{id:"chat-compose-wrapper",className:"w-full absolute bottom-0 left-0 bg-secondary flex z-30 flex-row",children:[jsx("textarea",{id:"chat-compose",placeholder:"Type your message",className:"focus:outline-none focus:border-0 resize-none text-quinary  bg-secondary ml-1",rows:6,value:f,onKeyUp:function(C){C.keyCode===13&&(C.preventDefault(),v(f))},onChange:function(C){return g(C.target.value)}}),jsx("span",{onClick:function(){v(f)},className:"bg-primary mt-2 ml-2 p-2 cursor-pointer fixed right-0 z-30 rounded-xl text-quinary  h-10 mr-1",children:jsx(FontAwesomeIcon,{id:"chat-send",icon:faPaperPlane,size:"lg",className:"text-quinary "})})]})]})})};function useEventListener(n,t,i){var a=react.exports.useRef();react.exports.useEffect(function(){var o=(i==null?void 0:i.current)||window;if(!!(o&&o.addEventListener)){a.current!==t&&(a.current=t);var u=function(m){a!=null&&a.current&&a.current(m)};return o.addEventListener(n,u),function(){o.removeEventListener(n,u)}}},[n,i,t])}var RoomWrapper=function n(t){var i=t.roomState,a=t.speakerMode,o=t.setSpeakerMode,u=t.chatOpen,l=t.setChatOpen,m=t.disableChat,c=t.disableSelfieMode,f=t.chatMessages,g=t.setChatMessages,b=t.cstmWelcomeMsg,v=t.handleComponentRefresh,_=i.isConnecting,x=i.error,C=i.localMember,I=i.members,U=i.room,M=react.exports.useState(0),V=M[0],T=M[1],$=react.exports.useState(!1),B=$[0],G=$[1],H=react.exports.useState(),X=H[0],h=H[1],s=react.exports.useRef(null),y=react.exports.useState({width:"0px",height:"0px"}),k=y[0],S=y[1],E=useFullScreenHandle(),z=useIsMounted(),te=function(){if(!!z()){var re=4,F=0,N=0;s.current&&(F=s.current.offsetWidth-re*2,N=s.current.offsetHeight-re*2);for(var Z=0,A=1,O=(I.length<1?1:I.length)+V+(I.length<2?1:0);A<5e3;){var D=W(A,O,F,N,re);if(D===!1){Z=A-1;break}A++}Z=Z-re*2,S({width:Z+"px",height:Z*.5625+"px"})}},W=function(re,F,N,Z,A){A===void 0&&(A=10);for(var O=0,D=0,ne=re*.75+A*2;O<F;)D+re>N&&(D=0,ne=ne+re*.75+A*2),D=D+re+A*2,O++;return ne>Z?!1:re};if(useEventListener("load",te),useEventListener("resize",te),useTimeout(function(){!z()||G(!0)},8e3),react.exports.useEffect(function(){if(z()){var ee;X||h((ee=I[0])==null?void 0:ee.sid),te()}},[I,V,u,E.active,a]),I.length===0||x||!U||_)return jsxs("div",{className:"absolute not-selectable top-0 left-1 w-full h-full flex justify-center items-center text-xl text-quinary",children:[jsxs("div",{className:"flex flex-col items-center justify-between p-2",children:[jsxs("div",{className:"catalyst-ld catalyst-ld-1 h-16 w-16",children:[jsx("div",{className:"catalyst-ld-outer"}),jsx("div",{className:"catalyst-ld-inner"})]}),jsxs("div",{className:"pt-4",children:[x&&jsxs("span",{children:["\u26A0\uFE0F ",x.message]}),_&&jsx("span",{children:"\u26A1 Connecting..."}),!U&&!_&&!x&&jsx("span",{children:"\u{1F680} Preparing room..."}),I.length===0&&U&&!_&&jsx("span",{children:b!=null?b:DEFAULT_WELCOME_MESSAGE})]})]}),B&&jsxs("div",{className:"absolute bottom-0 flex flex-col py-2 justify-center w-full animate-fade-in-up",children:[jsx("div",{className:"py-1 text-sm text-center",children:"Having connection issues?"}),jsxs("button",{className:"cursor-pointer focus:border-0 focus:outline-none text-center",onClick:function(){U==null||U.disconnect(),v()},children:[jsx("span",{className:"pr-2 text-primary text-base",children:"Refresh"}),jsx(FontAwesomeIcon,{icon:faSync,size:"sm",className:"inline text-primary"})]})]})]});var Y,q=[];return I.forEach(function(ee){ee.videoTracks.forEach(function(re){re.trackName==="screen"&&re.track&&(Y=re.track,q.includes(Y)||(q=[].concat(q,[Y]),X!==Y.sid&&q.length!=V&&z()&&h(Y.sid)))})}),q.length!=V&&z()&&(T(q.length),!I.find(function(ee){return ee.sid===X})&&!q.find(function(ee){return ee.sid===X})&&h(I[0].sid)),jsxs(Fragment,{children:[!a&&jsxs("div",{id:"remote-vid-wrapper",ref:s,className:"flex justify-center content-center items-center flex-wrap align-middle z-2 w-full h-full max-h-screen max-w-screen box-border animate-fade-in-left",children:[q&&q.map(function(ee,re){return jsx(ScreenShareWrapper,{track:ee,height:k.height,width:k.width,onClick:function(){h(ee.sid),o(function(N){return!N})}},re+"-screen")}),I.map(function(ee,re){return jsx(MemberView,{member:ee,height:k.height,width:k.width,disableSelfieMode:c,quality:re>4?livekit_rtc.VideoQuality.LOW:livekit_rtc.VideoQuality.HIGH,onClick:function(){h(ee.sid),o(function(N){return!N})}},ee.identity)}),I.length===1&&jsx("div",{className:"relative z-0 inline-block align-middle self-center overflow-hidden text-center m-1 bg-gray-800 rounded-xl",style:{height:k.height,width:k.width},onClick:function(){return o(function(re){return!re})},children:jsx("div",{className:"absolute not-selectable top-0 left-1 w-full h-full flex justify-center items-center z-0 text-c text-quinary ",children:jsx("span",{children:b!=null?b:DEFAULT_WELCOME_MESSAGE})})})]}),a&&jsxs("div",{className:"speaker-view flex z-20 w-full justify-center sm:justify-around  animate-fade-in-right",children:[jsxs("div",{className:"speaker-vid flex flex-col p-1 justify-center content-center",children:[I.map(function(ee,re){if(ee.sid===X){var F;return jsx(MemberView,{member:ee!=null?ee:I[0],height:"100%",width:"100%",disableSelfieMode:c,classes:"aspect-w-16 aspect-h-9",quality:livekit_rtc.VideoQuality.HIGH,onClick:function(){return o(function(Z){return!Z})}},(F=ee.identity)!=null?F:"first-vid")}else return}),q.map(function(ee){if(ee.sid===X)return jsx(ScreenShareWrapper,{track:ee,height:"100%",width:"100%",classes:"aspect-w-16 aspect-h-9",onClick:function(){return o(function(F){return!F})}},"main-screen")})]}),jsxs("div",{className:"other-vids flex p-1 justify-center content-center no-scrollbar overflow-x-auto top-0 left-0",onClick:function(){return o(function(re){return!re})},children:[I.length===1&&jsx(Fragment,{children:jsx("div",{className:"box ml-1 mr-1 w-full sm:mt-1 sm:mb-1 sm:ml-0 sm:mr-0 aspect-w-16 aspect-h-9 bg-gray-800 rounded-xl",children:jsx("div",{className:"absolute not-selectable top-0 left-1 w-full h-full flex justify-center items-center z-0 text-c text-quinary  text-center px-1 sm:px-2 md:px-3 ",children:jsx("span",{children:b!=null?b:DEFAULT_WELCOME_MESSAGE})})})}),q&&q.map(function(ee,re){if(ee.sid!==X)return jsx(ScreenShareWrapper,{track:ee,height:"100%",width:"100%",classes:"box w-full vid-p h-auto aspect-w-16 aspect-h-9",onClick:function(){h(ee.sid),o(function(N){return!N})}},"sidebar-screen-"+re)}),I.map(function(ee,re){if(ee.sid!==X)return jsx(MemberView,{member:ee,height:"100%",width:"100%",disableSelfieMode:c,classes:"box vid-p w-full h-auto aspect-w-16 aspect-h-9",quality:re>4?livekit_rtc.VideoQuality.LOW:livekit_rtc.VideoQuality.HIGH,onClick:function(){h(ee.sid),o(function(N){return!N})}},ee.identity)})]})]}),!m&&jsx(Chat,{chatOpen:u,setChatOpen:l,localParticipant:C,chatMessages:f,setChatMessages:g})]})},HeaderLogo=e.memo(function(n){var t=n.alwaysBanner;return jsxs("div",{id:"header",children:[jsx("div",{className:"absolute left-0 top-0 block w-full text-center bg-primary p-1 text-quinary text-sm font-semibold z-40 "+(t?"":"header-bar"),children:"Powered by Catalyst"}),!t&&jsx("div",{className:"absolute z-40 hidden sm:block not-selectable top-2 left-2",children:jsx("div",{id:"header-img-wrapper",className:"inline bg-transparent header-img focus:border-0 focus:outline-none",children:jsx(HeaderImg,{})})}),jsx("div",{className:"hidden ring-2 ring-primary ring-opacity-50"})]})}),initBgFilter=function(){var n=_asyncToGenerator(runtime_1.mark(function t(i,a,o){return runtime_1.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(o&&o.length>0&&o!=="none"&&i.length>0)){l.next=3;break}if(!(a!=null&&a.mediaStreamTrack)){l.next=3;break}return l.abrupt("return",new vectorly_filters.exports.BackgroundFilter(a.mediaStreamTrack,{token:i!=null?i:"BG_REMOVAL_TOKEN",background:o,blurRadius:6}));case 3:return l.abrupt("return",null);case 4:case"end":return l.stop()}},t)}));return function(i,a,o){return n.apply(this,arguments)}}(),applyBgFilterToTracks=function(){var n=_asyncToGenerator(runtime_1.mark(function t(i,a){var o;return runtime_1.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!a){l.next=5;break}return l.next=3,a.getOutput();case 3:o=l.sent,i.forEach(function(m){m.kind==="video"&&!m.name.includes("screen")&&(m.mediaStreamTrack=o.getVideoTracks()[0])});case 5:return l.abrupt("return",i);case 6:case"end":return l.stop()}},t)}));return function(i,a){return n.apply(this,arguments)}}(),applyBgFilterToTrack=function(){var n=_asyncToGenerator(runtime_1.mark(function t(i,a){return runtime_1.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!a){u.next=3;break}return u.next=3,a.changeInput(i);case 3:case"end":return u.stop()}},t)}));return function(i,a){return n.apply(this,arguments)}}(),Toolbar=function n(t){var i,a,o,u,l,m,c=t.room,f=t.onLeave,g=t.setSpeakerMode,b=t.chatMessages,v=t.updateOutputDevice,_=t.outputDevice,x=t.chatOpen,C=t.bgRemoval,I=t.bgRemovalKey,U=t.bgFilter,M=t.setBgFilter,V=t.setChatOpen,T=t.disableChat,$=t.cstmSupportUrl,B=useMember(c.localParticipant),G=B.publications,H=B.isMuted,X=B.unpublishTrack,h=react.exports.useState(),s=h[0],y=h[1],k=react.exports.useState(),S=k[0],E=k[1],z=react.exports.useState(),te=z[0],W=z[1],Y=react.exports.useState(),q=Y[0],ee=Y[1],re=react.exports.useState(),F=re[0],N=re[1],Z=useLocalStorage("PREFERRED_AUDIO_DEVICE_ID","default"),A=Z[0],O=Z[1],D=useLocalStorage("PREFERRED_VIDEO_DEVICE_ID","default"),ne=D[0],K=D[1],P=react.exports.useState(!1),j=P[0],L=P[1],oe=react.exports.useState(!!(C&&C!=="none")),ie=oe[0],se=oe[1],ye=react.exports.useState(C!=null?C:"none"),fe=ye[0],_e=ye[1],ke=react.exports.useRef(null),Ee=useIsMounted();react.exports.useEffect(function(){y(G.find(function(Te){return Te.kind===dist.Track.Kind.Audio})),E(G.find(function(Te){return Te.kind===dist.Track.Kind.Video&&Te.trackName!=="screen"})),W(G.find(function(Te){return Te.kind===dist.Track.Kind.Video&&Te.trackName==="screen"}))},[G]),react.exports.useEffect(function(){!T&&b.length>0&&b[b.length-1].sender!==c.localParticipant&&!x&&(L(!0),setTimeout(function(){!Ee()||L(!1)},2e3))},[b]),react.exports.useEffect(function(){(!q||!F)&&navigator.mediaDevices.enumerateDevices().then(function(Te){if(!q){var ue=Te.filter(function(le){return le.kind==="audioinput"&&le.deviceId}),J;if(A&&(J=ue.find(function(le){return le.deviceId===A})),!J){var Q;J=(Q=ue.find(function(le){var Pe;return le.deviceId===(s==null||(Pe=s.audioTrack)==null?void 0:Pe.mediaStreamTrack.getSettings().deviceId)}))!=null?Q:ue[0]}ee(J)}if(!F){var ce=Te.filter(function(le){return le.kind==="videoinput"&&le.deviceId}),pe;if(ne&&(pe=ce.find(function(le){return le.deviceId===ne})),!pe){var he;pe=(he=ce.find(function(le){var Pe;return le.deviceId===(S==null||(Pe=S.videoTrack)==null?void 0:Pe.mediaStreamTrack.getSettings().deviceId)}))!=null?he:ce[0]}N(pe)}}).catch(function(Te){console.log(Te)})},[s,S]),react.exports.useEffect(function(){var Te;q&&(q==null?void 0:q.deviceId)!==(s==null||(Te=s.audioTrack)==null?void 0:Te.mediaStreamTrack.getSettings().deviceId)&&(q==null?void 0:q.deviceId)!==A&&(O(q==null?void 0:q.deviceId),dist.createLocalAudioTrack({deviceId:q==null?void 0:q.deviceId}).then(function(ue){s&&X(s.track),c.localParticipant.publishTrack(ue)}).catch(function(ue){console.log(ue)}))},[q]),react.exports.useEffect(function(){var Te;F&&(F==null?void 0:F.deviceId)!==(S==null||(Te=S.videoTrack)==null?void 0:Te.mediaStreamTrack.getSettings())&&F&&(F==null?void 0:F.deviceId)!==ne&&(K(F==null?void 0:F.deviceId),dist.createLocalVideoTrack({deviceId:F==null?void 0:F.deviceId}).then(function(){var ue=_asyncToGenerator(runtime_1.mark(function J(Q){var ce;return runtime_1.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(S&&X(S.track),ce=Q,!(fe&&U&&!isMobile_1)){he.next=8;break}return he.next=5,applyBgFilterToTrack(Q.mediaStreamTrack,U);case 5:return he.next=7,U.getOutputTrack();case 7:ce=he.sent;case 8:c.localParticipant.publishTrack(ce);case 9:case"end":return he.stop()}},J)}));return function(J){return ue.apply(this,arguments)}}()).catch(function(ue){console.log(ue)}))},[F]);var be=function(){var Te=_asyncToGenerator(runtime_1.mark(function ue(){var J,Q,ce,pe;return runtime_1.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(J=U,!(!J&&S&&I.length>0&&!isMobile_1)){le.next=5;break}dist.createLocalVideoTrack({deviceId:F==null?void 0:F.deviceId}).then(function(){var Pe=_asyncToGenerator(runtime_1.mark(function ae(ve){return runtime_1.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return S&&X(S.track),Le.next=3,initBgFilter(I,S.track,fe);case 3:if(J=Le.sent,M(J),se(!0),!J){Le.next=10;break}return Le.next=9,J.getOutputTrack();case 9:ve=Le.sent;case 10:c.localParticipant.publishTrack(ve);case 11:case"end":return Le.stop()}},ae)}));return function(ae){return Pe.apply(this,arguments)}}()).catch(function(Pe){console.log(Pe)}),le.next=30;break;case 5:if(!J){le.next=30;break}if(fe!=="none"){le.next=13;break}return le.next=9,J.disable();case 9:ce=le.sent,ce&&(Q=ce.getVideoTracks()[0],Q&&(S&&X(S.track),c.localParticipant.publishTrack(Q),se(!1))),le.next=30;break;case 13:if(ie){le.next=22;break}return le.next=16,J.enable();case 16:if(pe=le.sent,!pe){le.next=22;break}return le.next=20,J.getOutputTrack();case 20:Q=le.sent,Q&&(S&&X(S.track),c.localParticipant.publishTrack(Q),se(!0));case 22:if(!(fe==="blur"&&J.background!=="blur")){le.next=27;break}return le.next=25,J.changeBackground("blur");case 25:le.next=30;break;case 27:if(J.background===fe){le.next=30;break}return le.next=30,J.changeBackground(fe);case 30:case"end":return le.stop()}},ue)}));return function(){return Te.apply(this,arguments)}}();react.exports.useEffect(function(){be()},[fe]);var xe=function(){if(S!=null&&S.track)S&&X(S.track);else{var ue={};F&&(ue.deviceId=F==null?void 0:F.deviceId),dist.createLocalVideoTrack(ue).then(function(){var J=_asyncToGenerator(runtime_1.mark(function Q(ce){var pe;return runtime_1.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(pe=ce,!(fe&&U&&!isMobile_1)){le.next=7;break}return le.next=4,applyBgFilterToTrack(ce.mediaStreamTrack,U);case 4:return le.next=6,U.getOutputTrack();case 6:pe=le.sent;case 7:c.localParticipant.publishTrack(pe);case 8:case"end":return le.stop()}},Q)}));return function(Q){return J.apply(this,arguments)}}()).catch(function(J){console.log(J)})}},Se=function(){if(!s||H)if(s)s.unmute();else{var ue={};q&&(ue.deviceId=q==null?void 0:q.deviceId),dist.createLocalAudioTrack(ue).then(function(J){c.localParticipant.publishTrack(J)}).catch(function(J){console.log(J)})}else s.mute()};return jsxs("div",{id:"toolbar",className:x?"chat-open-shift":"",children:[jsx(AudioDeviceBtn,{isMuted:!s||H,onIpSelected:ee,onOpSelected:v,onClick:Se,audioDevice:q,outputDevice:_,cstmSupportUrl:$}),jsx(VidDeviceBtn,{isEnabled:!!(S!=null&&S.track),onIpSelected:N,onClick:xe,videoDevice:F,bgRemovalEnabled:I.length>0&&!isMobile_1,cstmSupportUrl:$,bgRemovalEffect:fe,setBgRemovalEffect:_e}),!isMobile_1&&jsx(ToolbarButton,{type:"screenshare",tooltip:te!=null&&te.track?"Stop Sharing":"Share Screen",icon:faDesktop,bgColor:te!=null&&te.track?"bg-primary":"bg-tertiary hover:bg-quaternary",onClick:te!=null&&te.track?function(){X(te.track)}:function(){navigator.mediaDevices.getDisplayMedia({video:{width:dist.VideoPresets.fhd.resolution.width,height:dist.VideoPresets.fhd.resolution.height},audio:!0}).then(function(Te){c.localParticipant.publishTrack(Te.getTracks()[0],{name:"screen",videoEncoding:{maxBitrate:3e6,maxFramerate:30}}).then(function(ue){g(!0)})}).catch(function(Te){console.log("Error sharing screen: "+Te)})}}),!T&&jsx(Tippy,{visible:j,arrow:!1,onTrigger:function(){return V(!0)},content:jsxs("div",{className:"text-xs",children:[jsxs("strong",{children:[(i=b[b.length-1])==null||(a=i.sender)==null?void 0:a.identity,":"]}),jsx("br",{}),((o=b[b.length-1])==null?void 0:o.text.substring(0,((u=b[b.length-1])==null?void 0:u.text.length)<40?(l=b[b.length-1])==null?void 0:l.text.length:40))+(((m=b[b.length-1])==null?void 0:m.text.length)>40?"...":"")]}),theme:"catalyst",triggerTarget:ke.current,children:jsx("div",{ref:ke,className:"inline-block relative",children:jsx(ToolbarButton,{type:"chat",tooltip:"Toggle Chat",disabledTooltip:j,icon:faCommentAlt,bgColor:x?"bg-primary":"bg-tertiary hover:bg-quaternary  ",onClick:function(){V(function(ue){return!ue})}})})}),f&&jsx(ToolbarButton,{type:"endcall",tooltip:"End Call",icon:faPhoneSlash,bgColor:"bg-red",onClick:function(){c.disconnect(),f(c)}})]})},useRoom=function n(t){var i=react.exports.useState(),a=i[0],o=i[1],u=react.exports.useState(!1),l=u[0],m=u[1],c=react.exports.useState(),f=c[0],g=c[1],b=react.exports.useState([]),v=b[0],_=b[1],x=react.exports.useState([]),C=x[0],I=x[1],U=react.exports.useState(),M=U[0],V=U[1],T=react.exports.useCallback(function(){var B=_asyncToGenerator(runtime_1.mark(function G(H,X,h){var s,y,k;return runtime_1.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return m(!0),E.prev=1,E.next=4,dist.connect(H,X,h);case 4:return s=E.sent,o(s),V(s.localParticipant),y=function(){var te=Array.from(s.participants.values()),W=[s.localParticipant];W.push.apply(W,te),sortMembers(W,s.localParticipant),_(W)},k=function(te){if(y(),!(te&&te.kind!==dist.Track.Kind.Audio)){var W=[];s.participants.forEach(function(Y){Y.audioTracks.forEach(function(q){q.track&&q.kind===dist.Track.Kind.Audio&&W.push(q.track)})}),I(W)}},s.once(dist.RoomEvent.Disconnected,function(){setTimeout(function(){return o(void 0)}),s.off(dist.RoomEvent.ParticipantConnected,y),s.off(dist.RoomEvent.ParticipantDisconnected,y),s.off(dist.RoomEvent.ActiveSpeakersChanged,y),s.off(dist.RoomEvent.TrackSubscribed,k),s.off(dist.RoomEvent.TrackUnsubscribed,k)}),s.on(dist.RoomEvent.ParticipantConnected,y),s.on(dist.RoomEvent.ParticipantDisconnected,y),s.on(dist.RoomEvent.ActiveSpeakersChanged,y),s.on(dist.RoomEvent.TrackSubscribed,k),s.on(dist.RoomEvent.TrackUnsubscribed,k),m(!1),k(),E.abrupt("return",s);case 20:return E.prev=20,E.t0=E.catch(1),m(!1),g(E.t0),E.abrupt("return",void 0);case 25:case"end":return E.stop()}},G,null,[[1,20]])}));return function(G,H,X){return B.apply(this,arguments)}}(),[]),$=function(){(a==null?void 0:a.state)!=dist.RoomState.Disconnected&&(a==null||a.disconnect())};return{connectAll:T,disconnectAll:$,isConnecting:l,room:a,error:f,localMember:M,members:v,audioTracks:C}};function sortMembers(n,t){if(n.sort(function(a,o){var u,l,m,c;if(a.isSpeaking&&o.isSpeaking)return o.audioLevel-a.audioLevel;if(a.isSpeaking!==o.isSpeaking)return a.isSpeaking?-1:1;if(a.lastSpokeAt!==o.lastSpokeAt){var f,g,b,v,_=(f=(g=a.lastSpokeAt)==null?void 0:g.getTime())!=null?f:0,x=(b=(v=o.lastSpokeAt)==null?void 0:v.getTime())!=null?b:0;return x-_}var C=a.videoTracks.size>0,I=o.videoTracks.size>0;return C!==I?C?-1:1:((u=(l=a.joinedAt)==null?void 0:l.getTime())!=null?u:0)-((m=(c=o.joinedAt)==null?void 0:c.getTime())!=null?m:0)}),t){var i=n.indexOf(t);i>=0&&(n.splice(i,1),n.length>0?n.splice(1,0,t):n.push(t))}}function useReadLocalStorage(n){var t=function(){if(typeof window=="undefined")return null;try{var l=window.localStorage.getItem(n);return l!=null?l:null}catch(m){return console.warn("Error reading localStorage key \u201C"+n+"\u201D:",m),null}},i=react.exports.useState(t),a=i[0],o=i[1];return react.exports.useEffect(function(){o(t())},[]),react.exports.useEffect(function(){var u=function(){o(t())};return window.addEventListener("storage",u),window.addEventListener("local-storage",u),function(){window.removeEventListener("storage",u),window.removeEventListener("local-storage",u)}},[]),a}var CatalystChatView=function n(t){var i=t.token,a=t.meta,o=t.fade,u=t.disableChat,l=t.disableSelfieMode,m=t.disableRefreshBtn,c=t.cstmWelcomeMsg,f=t.cstmSupportUrl,g=t.arbData,b=t.bgRemoval,v=t.bgRemovalKey,_=t.handleReceiveArbData,x=t.onJoinCall,C=t.onMemberJoin,I=t.onMemberLeave,U=t.onLeaveCall,M=t.handleComponentRefresh,V=useFullScreenHandle(),T=react.exports.useState(0),$=T[0],B=T[1],G=react.exports.useState(!1),H=G[0],X=G[1],h=react.exports.useState(!1),s=h[0],y=h[1],k=react.exports.useState([]),S=k[0],E=k[1],z=react.exports.useState(!1),te=z[0],W=z[1],Y=react.exports.useState(),q=Y[0],ee=Y[1],re=react.exports.useState(),F=re[0],N=re[1],Z=useRoom(),A=useIsMounted(),O=useReadLocalStorage("PREFERRED_AUDIO_DEVICE_ID"),D=useReadLocalStorage("PREFERRED_VIDEO_DEVICE_ID"),ne=useLocalStorage("PREFERRED_OUTPUT_DEVICE_ID","default"),K=ne[0],P=ne[1],j=react.exports.useRef(null),L=react.exports.useRef(null),oe=react.exports.useRef(null),ie=new TextDecoder,se=function(){var ke=_asyncToGenerator(runtime_1.mark(function Ee(be){var xe,Se,Te;return runtime_1.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(A()){J.next=2;break}return J.abrupt("return");case 2:if(x&&x(),be.on(dist.RoomEvent.ParticipantConnected,function(){!A()||(ye(be),C&&C())}),be.on(dist.RoomEvent.ParticipantDisconnected,function(){!A()||(ye(be),I&&I())}),be.on(dist.RoomEvent.DataReceived,function(Q,ce,pe){var he;if(!!A()){var le=ie.decode(Q),Pe=JSON.parse(le);((he=JSON.parse(le))==null?void 0:he.type)==="ctw-chat"?E(function(ae){var ve,Ce;return[].concat(ae,[{text:Pe.text,sender:(ve=(Ce=be.participants)==null?void 0:Ce.get(Pe.sender))!=null?ve:""}])}):_&&_(Q)}}),ye(be),!(a.audioEnabled||a.videoEnabled)){J.next=23;break}return J.next=10,dist.createLocalTracks({audio:a.audioEnabled?O?{deviceId:O}:!0:!1,video:a.videoEnabled?D?{deviceId:D}:!0:!1});case 10:if(xe=J.sent,!(b&&b!=="none"&&v.length>0&&!isMobile_1)){J.next=22;break}if(Se=xe.find(function(Q){return Q.kind==="video"}),!Se){J.next=22;break}return J.next=16,initBgFilter(v,Se,b);case 16:if(Te=J.sent,!Te){J.next=22;break}return N(Te),J.next=21,applyBgFilterToTracks(xe,Te);case 21:xe=J.sent;case 22:xe.forEach(function(Q){!A()||be.localParticipant.publishTrack(Q,a.simulcast?{simulcast:!0}:{})});case 23:case"end":return J.stop()}},Ee)}));return function(be){return ke.apply(this,arguments)}}();react.exports.useEffect(function(){var ke;g&&((ke=Z.localMember)==null||ke.publishData(g,dist.DataPacket_Kind.RELIABLE))},[g]),react.exports.useEffect(function(){i&&i.length>0&&i!=="INVALID"&&Z.connectAll("wss://infra.catalyst.chat",i,a).then(function(ke){if(!(!A()||!ke))return se&&se(ke),function(){ke.disconnect()}}).catch(function(ke){console.error(ke)})},[i]),react.exports.useEffect(function(){return q||navigator.mediaDevices.enumerateDevices().then(function(ke){var Ee,be;if(!!A()){var xe=ke.filter(function(ue){return ue.kind==="audiooutput"&&(ue==null?void 0:ue.deviceId)}),Se;if(K&&(Se=xe.find(function(ue){return(ue==null?void 0:ue.deviceId)===K})),Se||(Se=xe[0]),ee(Se),K!==((Ee=Se)==null?void 0:Ee.deviceId)&&(be=Se)!=null&&be.deviceId){var Te;P((Te=Se)==null?void 0:Te.deviceId)}}}),function(){Z.disconnectAll()}},[Z.room]);var ye=function(Ee){B(Ee.participants.size+1)},fe=function(){U&&U(),y(!0)},_e=function(Ee){ee(Ee),P(Ee==null?void 0:Ee.deviceId)};return o>0&&react.exports.useEffect(function(){var ke,Ee=function(){var Q,ce;if(!!A()){var pe=(Q=L.current)==null?void 0:Q.classList,he=(ce=j.current)==null?void 0:ce.classList;pe&&he&&(xe===5&&!Se&&(pe==null||pe.remove("animate-fade-in-down"),pe==null||pe.add("animate-fade-out-up"),he==null||he.remove("animate-fade-in-up"),he==null||he.add("animate-fade-out-down"),setTimeout(function(){!A()||(pe==null||pe.remove("animate-fade-out-up"),pe==null||pe.add("hidden"),he==null||he.remove("animate-fade-out-down"),he==null||he.add("hidden"),Se=!0)},170),xe=1),xe+=1)}},be=function(){var Q,ce;if(!!A()){var pe=(Q=L.current)==null?void 0:Q.classList,he=(ce=j.current)==null?void 0:ce.classList;pe&&he&&(pe==null||pe.remove("hidden"),pe==null||pe.add("animate-fade-in-down"),he==null||he.remove("hidden"),he==null||he.add("animate-fade-in-up"),Se=!1,xe=1,clearInterval(ue),ue=setInterval(Ee,o))}},xe=1,Se=!1,Te=r(function(){!A()||be()},25);(ke=oe.current)==null||ke.addEventListener("mousemove",Te);var ue=setInterval(Ee,o);return function(){var J;clearInterval(ue),(J=oe.current)==null||J.removeEventListener("mousemove",Te)}},[]),jsx("div",{id:"video-chat",className:"relative w-full h-full",ref:oe,children:jsx("div",{id:"bg-theme",className:"w-full h-full bg-secondary ",children:i==="INVALID"?jsx("div",{className:"absolute top-0 flex items-center justify-center w-full h-full px-16 text-xl not-selectable left-1 text-quinary",children:jsxs("span",{className:"text-center",children:["\u26A0\uFE0F An error occurred generating your user token.",jsx("br",{}),"Please"," ",jsx("a",{href:f&&f.length>0?f:SUPPORT_EMAIL,target:"_blank",rel:"noreferrer",children:"contact us"})," ","for help"]})}):jsxs(FullScreen,{handle:V,className:"catalyst-fullscreen w-full h-full bg-secondary overflow-hidden",children:[Z.room&&jsxs("div",{id:"header-wrapper",className:"animate-fade-in-down",ref:L,children:[jsx(HeaderLogo,{alwaysBanner:!1}),jsxs("div",{className:(te?"chat-open-shift":"")+" absolute z-50 flex nav-ops",children:[jsx(FontAwesomeIcon,{icon:faUserFriends,size:"lg",className:"mr-1 text-quinary"}),jsx("span",{className:"text-quinary ",children:$}),(f==null?void 0:f.length)!=0&&jsx(Tippy,{content:"Help",theme:"catalyst",placement:"bottom",children:jsx("button",{className:"ml-5 cursor-pointer focus:border-0 focus:outline-none",onClick:function(){return contactSupport(f)},children:jsx(FontAwesomeIcon,{icon:faQuestion,size:"lg",className:"text-quinary"})})}),!m&&jsx(Tippy,{content:"Refresh",theme:"catalyst",placement:"bottom",children:jsx("button",{className:"ml-5 cursor-pointer focus:border-0 focus:outline-none",onClick:function(){var Ee;Z==null||(Ee=Z.room)==null||Ee.disconnect(),M()},children:jsx(FontAwesomeIcon,{icon:faSync,size:"lg",className:"text-quinary"})})}),jsx(Tippy,{content:"Toggle View",theme:"catalyst",placement:"bottom",children:jsx("button",{className:"ml-5 cursor-pointer focus:border-0 focus:outline-none",onClick:function(){return X(function(Ee){return!Ee})},children:jsx(FontAwesomeIcon,{icon:H?faTh:faThLarge,size:"lg",className:"text-quinary"})})}),!isMobile_1&&jsx(Tippy,{content:"Full Screen",theme:"catalyst",placement:"bottom",children:jsx("button",{className:"ml-5 cursor-pointer focus:border-0 focus:outline-none",onClick:function(){V.active?V.exit():V.enter()},children:jsx(FontAwesomeIcon,{icon:V.active?faCompressAlt:faExpandAlt,size:"lg",className:"text-quinary"})})})]})]}),jsxs("div",{id:"call-section",className:"items-end w-full h-full",children:[!s&&jsxs("div",{id:"vid-chat-cont",className:"absolute inset-0 flex",children:[jsx(RoomWrapper,{onLeave:fe,chatOpen:te,setChatOpen:W,roomState:Z,speakerMode:H,disableChat:u,disableSelfieMode:l,chatMessages:S,setSpeakerMode:X,setChatMessages:E,cstmWelcomeMsg:c,handleComponentRefresh:M}),Z.room&&jsx("div",{ref:j,className:"absolute bottom-0 left-0 right-0 z-20 flex items-center justify-center mb-3",children:jsx(Toolbar,{room:Z.room,onLeave:fe,setSpeakerMode:X,chatMessages:S,setChatMessages:E,updateOutputDevice:_e,outputDevice:q,bgFilter:F,setBgFilter:N,bgRemoval:b,bgRemovalKey:v,chatOpen:te,setChatOpen:W,disableChat:u,cstmSupportUrl:f})}),Z.audioTracks.map(function(ke){return jsx(AudWrapper,{track:ke,isLocal:!1,sinkId:q==null?void 0:q.deviceId},ke.sid)})]}),s&&jsx("div",{className:"absolute inset-0 z-40 flex items-center justify-center w-full h-full text-xl not-selectable text-quinary",children:jsx("span",{children:"\u{1F590}\uFE0F Call ended"})})]})]})})})};ElementQueries.listen();var CatalystChat=function n(t){var i=t.room,a=t.appId,o=t.name,u=t.theme,l=t.fade,m=t.audioOffDefault,c=t.videoOffDefault,f=t.simulcast,g=t.bgRemoval,b=t.disableChat,v=t.disableSelfieMode,_=t.disableSetupView,x=t.disableNameField,C=t.cstmSetupBg,I=t.disableRefreshBtn,U=t.cstmWelcomeMsg,M=t.cstmSupportUrl,V=t.arbData,T=t.handleReceiveArbData,$=t.handleUserData,B=t.onJoinCall,G=t.onMemberJoin,H=t.onMemberLeave,X=t.onLeaveCall,h=t.handleComponentRefresh,s=react.exports.useState(_!=null?_:!1),y=s[0],k=s[1],S=react.exports.useState(o!=null?o:genRandomName()),E=S[0],z=S[1],te=useCookies(["PERSISTENT_CLIENT_ID"]),W=te[0],Y=te[1],q=react.exports.useState(!m),ee=q[0],re=q[1],F=react.exports.useState(!c),N=F[0],Z=F[1],A=react.exports.useState(""),O=A[0],D=A[1],ne=react.exports.useState(""),K=ne[0],P=ne[1],j=useIsMounted();return h||(h=function(){}),react.exports.useEffect(function(){setThemeColor(u!=null?u:THEMES.default)},[]),react.exports.useEffect(function(){y&&K.length<1&&setTimeout(function(){if(!!j()){var L=W.PERSISTENT_CLIENT_ID||generateUUID();W.PERSISTENT_CLIENT_ID||Y("PERSISTENT_CLIENT_ID",L,{expires:new Date(Date.now()+1e3*60*60*24*365)}),fetch(AUTH_ADDRESS+"?participantName="+E+"&appId="+a+"&roomName="+i+"&uniqueClientIdentifier="+L,{method:"GET",headers:{"Content-Type":"application/json",mode:"no-cors"}}).then(function(oe){if(!!j())return oe.status===200&&oe.json().then(function(ie){if(!!j())return ie.vectorlyToken.length>0&&D(ie.vectorlyToken),$&&$(ie),P(ie.token),ie.token}),oe.status===500&&(console.log("There is no user record corresponding to the provided identifier"),P("INVALID")),K}).catch(function(oe){console.log(oe),P("INVALID")})}},500)},[y]),jsx("div",{id:"ctw",className:"catalyst-parent",ref:function(oe){var ie,se;if(oe&&((ie=oe.parentNode)==null||(se=ie.parentNode)==null?void 0:se.nodeName)==="BODY"){var ye;oe.style.position="fixed";var fe=document.createElement("style");document.head.appendChild(fe),fe==null||(ye=fe.sheet)==null||ye.insertRule("html, body { margin: 0px; padding: 0px; height: 100%; }")}},children:jsx("div",{id:"catalyst-wrapper",className:"h-full w-full m-0 p-0 overflow-hidden max-h-screen max-w-screen box-border",children:y?jsx(CatalystChatView,{token:K,meta:{audioEnabled:ee,videoEnabled:N,simulcast:f!=null?f:!0,loglevel:"trace"},fade:l!=null?l:DEFAULT_AUTOFADE,disableChat:b,disableSelfieMode:v,arbData:V,bgRemovalKey:O,bgRemoval:g,handleReceiveArbData:T,cstmWelcomeMsg:U,cstmSupportUrl:M,disableRefreshBtn:I,onJoinCall:B,onMemberJoin:G,onMemberLeave:H,onLeaveCall:X,handleComponentRefresh:h}):_?null:jsx(SetupView,{meta:{audioEnabled:ee,videoEnabled:N,simulcast:f!=null?f:!0,loglevel:"trace"},setAudioOn:re,setVideoOn:Z,audioOn:ee,videoOn:N,setReady:k,userName:E,setUserName:z,disableNameField:x,cstmSetupBg:C,cstmSupportUrl:M})})})},CatalystChatWrapper=function n(t){var i=react.exports.useState(0),a=i[0],o=i[1],u=function(){t.onComponentRefresh&&t.onComponentRefresh(),o(a+1)};return jsx(CatalystChat,pt({},Object.assign({key:a},t,{handleComponentRefresh:u})))};const Videopage=()=>{const{user:n,selectedChat:t}=ChatState(),i=useHistory();return jsx(Box,{w:"100%",h:"100vh",children:jsx(CatalystChatWrapper,{room:t._id,appId:"Wq5fHCh2lHRYl0hz8ffbu2g8Ojp1",name:n.name,disableChat:!0,disableSetupView:!0,onLeaveCall:()=>{i.push("/@"),window.location.reload()}})})};export{Videopage as default};
