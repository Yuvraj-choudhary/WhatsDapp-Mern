var St=Object.defineProperty,_t=Object.defineProperties;var Et=Object.getOwnPropertyDescriptors;var vt=Object.getOwnPropertySymbols;var xt=Object.prototype.hasOwnProperty,Ct=Object.prototype.propertyIsEnumerable;var yt=(t,e,n)=>e in t?St(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ft=(t,e)=>{for(var n in e||(e={}))xt.call(e,n)&&yt(t,n,e[n]);if(vt)for(var n of vt(e))Ct.call(e,n)&&yt(t,n,e[n]);return t},bt=(t,e)=>_t(t,Et(e));import{r as react,Z as commonjsGlobal,$ as getAugmentedNamespace,a0 as PropTypes,a1 as React$1,a2 as applyStyles,a3 as createPopper,j as jsx,f as jsxs,F as Fragment,a4 as reactDom,a5 as ChatState,g as useHistory,B as Box}from"./index.dba9e112.js";(function(){let t=0;window.CSSGlobalVariables=function(e={}){if(!new.target)throw new Error('Calling CSSGlobalVariables constructor without "new" is forbidden');const n={filter:!1,autoprefix:!0,normalize:!1};if(typeof e!="object")throw new Error("CSSGlobalVariables constructor expects a config Object as first argument");if(e.hasOwnProperty("normalize")&&typeof e.normalize!="function")throw new Error('Config property "normalize" must be a function');if(e.hasOwnProperty("autoprefix")&&typeof e.autoprefix!="boolean")throw new Error('Config property "autoprefix" must be a boolean');if(e.hasOwnProperty("filter")){if(typeof e.filter!="string")throw new Error('Config property "filter" must be a string');try{document.querySelectorAll(e.filter)}catch{throw new Error('Provided "filter" is an invalid selector ("'+e.filter+'")')}}Object.assign(n,e),t++,n.id=t;const i={},a=new Proxy(i,{get:function(s,l){return l=c(l),Reflect.get(s,l)},set:function(s,l,m){return l=c(l),m=String(m),document.documentElement.style.setProperty(l,m),Reflect.set(s,l,m)},deleteProperty:function(){return!1},has:function(s,l){return l=c(l),Reflect.has(s,l)},defineProperty:function(s,l,m){if(l=c(l),typeof m=="object"&&m.hasOwnProperty("value")){let y=String(m.value);document.documentElement.style.setProperty(l,y),Reflect.set(s,l,y)}return s},ownKeys:function(s){return Reflect.ownKeys(s)},getOwnPropertyDescriptor:function(s,l){return l=c(l),Reflect.getOwnPropertyDescriptor(s,l)}});function c(s=""){if(s=String(s),n.normalize&&(s=n.normalize(s)),s.substring(0,2)!=="--")if(n.autoprefix)s="--"+s;else throw new Error('Invalid CSS Variable name. Name must start with "--" (autoprefix=false)');return s}function u(){Array.from(document.styleSheets).forEach(s=>{if(s.ownerNode.getAttribute("css-global-vars-ignore"))return;if(n.filter){let y=document.querySelectorAll(n.filter),g=!1;for(let S in Object.keys(y))if(y[S]===s.ownerNode){g=!0;break}if(!g)return!1}let l=!1;try{s.rules||s.cssRules}catch{s.ownerNode.hasAttribute("css-global-vars-ignore")?console.warn("Unexpected error reading CSS properties."):(s.ownerNode.setAttribute("css-global-vars-ignore",!0),console.warn("Cross Origin Policy restrictions are blocking the access to the CSS rules of a remote stylesheet. The affected stylesheet is going to be ignored by CSSGlobalVariables. Check the documentation for instructions to prevent this issue.")),l=!0}if(l)return;let m=s.ownerNode.getAttribute("css-global-vars-id");if(!String(m).split(",").includes(String(n.id))){{let y=s.ownerNode.getAttribute("css-global-vars-id");y===null||y===""?y=n.id:y+=","+n.id,s.ownerNode.setAttribute("css-global-vars-id",y)}Array.from(s.rules||s.cssRules).forEach(y=>{if(y.selectorText===":root"){let g=y.cssText.split("{");g=g[1].replace("}","").split(";");for(let S=0;S<g.length;S++){let E=g[S].split(":");E.length===2&&E[0].indexOf("--")===1&&(i[E[0].trim()]=E[1].trim())}}})}});for(let s in i)i.hasOwnProperty(s)&&(i[s]=window.getComputedStyle(document.documentElement,null).getPropertyValue(s).trim());return!0}var h=new MutationObserver(s=>{let l=!1;s.forEach(m=>{if(m.type==="childList"){for(let y=0;y<m.addedNodes.length;y++)(m.addedNodes[y].tagName==="STYLE"||m.addedNodes[y].tagName==="LINK")&&(l=!0);for(let y=0;y<m.removedNodes.length;y++)(m.removedNodes[y].tagName==="STYLE"||m.removedNodes[y].tagName==="LINK")&&(l=!0)}}),l&&setTimeout(u,500)});return h.observe(document.documentElement,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),u(),a}})();let _temp=window.CSSGlobalVariables;delete window.CSSGlobalVariables;/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var parse_1=parse$2,serialize_1=serialize,decode=decodeURIComponent,encode=encodeURIComponent,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function parse$2(t,e){if(typeof t!="string")throw new TypeError("argument str must be a string");for(var n={},i=e||{},a=t.split(";"),c=i.decode||decode,u=0;u<a.length;u++){var h=a[u],s=h.indexOf("=");if(!(s<0)){var l=h.substring(0,s).trim();if(n[l]==null){var m=h.substring(s+1,h.length).trim();m[0]==='"'&&(m=m.slice(1,-1)),n[l]=tryDecode(m,c)}}}return n}function serialize(t,e,n){var i=n||{},a=i.encode||encode;if(typeof a!="function")throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(t))throw new TypeError("argument name is invalid");var c=a(e);if(c&&!fieldContentRegExp.test(c))throw new TypeError("argument val is invalid");var u=t+"="+c;if(i.maxAge!=null){var h=i.maxAge-0;if(isNaN(h)||!isFinite(h))throw new TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(h)}if(i.domain){if(!fieldContentRegExp.test(i.domain))throw new TypeError("option domain is invalid");u+="; Domain="+i.domain}if(i.path){if(!fieldContentRegExp.test(i.path))throw new TypeError("option path is invalid");u+="; Path="+i.path}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");u+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(u+="; HttpOnly"),i.secure&&(u+="; Secure"),i.sameSite){var s=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(s){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return u}function tryDecode(t,e){try{return e(t)}catch{return t}}function hasDocumentCookie(){return typeof document=="object"&&typeof document.cookie=="string"}function parseCookies(t,e){return typeof t=="string"?parse_1(t,e):typeof t=="object"&&t!==null?t:{}}function isParsingCookie(t,e){return typeof e=="undefined"&&(e=!t||t[0]!=="{"&&t[0]!=="["&&t[0]!=='"'),!e}function readCookie(t,e){e===void 0&&(e={});var n=cleanupCookieValue(t);if(isParsingCookie(n,e.doNotParse))try{return JSON.parse(n)}catch{}return t}function cleanupCookieValue(t){return t&&t[0]==="j"&&t[1]===":"?t.substr(2):t}var __assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},__assign.apply(this,arguments)},Cookies=function(){function t(e,n){var i=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=parseCookies(e,n),new Promise(function(){i.HAS_DOCUMENT_COOKIE=hasDocumentCookie()}).catch(function(){})}return t.prototype._updateBrowserValues=function(e){!this.HAS_DOCUMENT_COOKIE||(this.cookies=parse_1(document.cookie,e))},t.prototype._emitChange=function(e){for(var n=0;n<this.changeListeners.length;++n)this.changeListeners[n](e)},t.prototype.get=function(e,n,i){return n===void 0&&(n={}),this._updateBrowserValues(i),readCookie(this.cookies[e],n)},t.prototype.getAll=function(e,n){e===void 0&&(e={}),this._updateBrowserValues(n);var i={};for(var a in this.cookies)i[a]=readCookie(this.cookies[a],e);return i},t.prototype.set=function(e,n,i){var a;typeof n=="object"&&(n=JSON.stringify(n)),this.cookies=__assign(__assign({},this.cookies),(a={},a[e]=n,a)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=serialize_1(e,n,i)),this._emitChange({name:e,value:n,options:i})},t.prototype.remove=function(e,n){var i=n=__assign(__assign({},n),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=__assign({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=serialize_1(e,"",i)),this._emitChange({name:e,value:void 0,options:n})},t.prototype.addChangeListener=function(e){this.changeListeners.push(e)},t.prototype.removeChangeListener=function(e){var n=this.changeListeners.indexOf(e);n>=0&&this.changeListeners.splice(n,1)},t}(),Cookies$1=Cookies,CookiesContext=react.exports.createContext(new Cookies$1);CookiesContext.Provider;CookiesContext.Consumer;var CookiesContext$1=CookiesContext;function isInBrowser(){return typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"}function useCookies(t){var e=react.exports.useContext(CookiesContext$1);if(!e)throw new Error("Missing <CookiesProvider>");var n=e.getAll(),i=react.exports.useState(n),a=i[0],c=i[1],u=react.exports.useRef(a);isInBrowser()&&react.exports.useLayoutEffect(function(){function l(){var m=e.getAll();shouldUpdate(t||null,m,u.current)&&c(m),u.current=m}return e.addChangeListener(l),function(){e.removeChangeListener(l)}},[e]);var h=react.exports.useMemo(function(){return e.set.bind(e)},[e]),s=react.exports.useMemo(function(){return e.remove.bind(e)},[e]);return[a,h,s]}function shouldUpdate(t,e,n){if(!t)return!0;for(var i=0,a=t;i<a.length;i++){var c=a[i];if(e[c]!==n[c])return!0}return!1}var dist={},livekit_models={},long=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Long(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(t){return(t&&t.__isLong__)===!0}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(t,e){var n,i,a;return e?(t>>>=0,(a=0<=t&&t<256)&&(i=UINT_CACHE[t],i)?i:(n=fromBits(t,(t|0)<0?-1:0,!0),a&&(UINT_CACHE[t]=n),n)):(t|=0,(a=-128<=t&&t<128)&&(i=INT_CACHE[t],i)?i:(n=fromBits(t,t<0?-1:0,!1),a&&(INT_CACHE[t]=n),n))}Long.fromInt=fromInt;function fromNumber(t,e){if(isNaN(t))return e?UZERO:ZERO;if(e){if(t<0)return UZERO;if(t>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(t<=-TWO_PWR_63_DBL)return MIN_VALUE;if(t+1>=TWO_PWR_63_DBL)return MAX_VALUE}return t<0?fromNumber(-t,e).neg():fromBits(t%TWO_PWR_32_DBL|0,t/TWO_PWR_32_DBL|0,e)}Long.fromNumber=fromNumber;function fromBits(t,e,n){return new Long(t,e,n)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return ZERO;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return fromString(t.substring(1),e,n).neg();for(var a=fromNumber(pow_dbl(n,8)),c=ZERO,u=0;u<t.length;u+=8){var h=Math.min(8,t.length-u),s=parseInt(t.substring(u,u+h),n);if(h<8){var l=fromNumber(pow_dbl(n,h));c=c.mul(l).add(fromNumber(s))}else c=c.mul(a),c=c.add(fromNumber(s))}return c.unsigned=e,c}Long.fromString=fromString;function fromValue(t,e){return typeof t=="number"?fromNumber(t,e):typeof t=="string"?fromString(t,e):fromBits(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=1<<16,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low};LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)};LongPrototype.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var n=fromNumber(e),i=this.div(n),a=i.mul(n).sub(this);return i.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var c=fromNumber(pow_dbl(e,6),this.unsigned),u=this,h="";;){var s=u.div(c),l=u.sub(s.mul(c)).toInt()>>>0,m=l.toString(e);if(u=s,u.isZero())return m+h;for(;m.length<6;)m="0"+m;h=""+m+h}};LongPrototype.getHighBits=function(){return this.high};LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0};LongPrototype.getLowBits=function(){return this.low};LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0};LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&(e&1<<n)==0;n--);return this.high!=0?n+33:n+1};LongPrototype.isZero=function(){return this.high===0&&this.low===0};LongPrototype.eqz=LongPrototype.isZero;LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0};LongPrototype.isPositive=function(){return this.unsigned||this.high>=0};LongPrototype.isOdd=function(){return(this.low&1)===1};LongPrototype.isEven=function(){return(this.low&1)===0};LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};LongPrototype.eq=LongPrototype.equals;LongPrototype.notEquals=function(e){return!this.eq(e)};LongPrototype.neq=LongPrototype.notEquals;LongPrototype.ne=LongPrototype.notEquals;LongPrototype.lessThan=function(e){return this.comp(e)<0};LongPrototype.lt=LongPrototype.lessThan;LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0};LongPrototype.lte=LongPrototype.lessThanOrEqual;LongPrototype.le=LongPrototype.lessThanOrEqual;LongPrototype.greaterThan=function(e){return this.comp(e)>0};LongPrototype.gt=LongPrototype.greaterThan;LongPrototype.greaterThanOrEqual=function(e){return this.comp(e)>=0};LongPrototype.gte=LongPrototype.greaterThanOrEqual;LongPrototype.ge=LongPrototype.greaterThanOrEqual;LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};LongPrototype.comp=LongPrototype.compare;LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)};LongPrototype.neg=LongPrototype.negate;LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var n=this.high>>>16,i=this.high&65535,a=this.low>>>16,c=this.low&65535,u=e.high>>>16,h=e.high&65535,s=e.low>>>16,l=e.low&65535,m=0,y=0,g=0,S=0;return S+=c+l,g+=S>>>16,S&=65535,g+=a+s,y+=g>>>16,g&=65535,y+=i+h,m+=y>>>16,y&=65535,m+=n+u,m&=65535,fromBits(g<<16|S,m<<16|y,this.unsigned)};LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())};LongPrototype.sub=LongPrototype.subtract;LongPrototype.multiply=function(e){if(this.isZero())return ZERO;if(isLong(e)||(e=fromValue(e)),wasm){var n=wasm.mul(this.low,this.high,e.low,e.high);return fromBits(n,wasm.get_high(),this.unsigned)}if(e.isZero())return ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,a=this.high&65535,c=this.low>>>16,u=this.low&65535,h=e.high>>>16,s=e.high&65535,l=e.low>>>16,m=e.low&65535,y=0,g=0,S=0,E=0;return E+=u*m,S+=E>>>16,E&=65535,S+=c*m,g+=S>>>16,S&=65535,S+=u*l,g+=S>>>16,S&=65535,g+=a*m,y+=g>>>16,g&=65535,g+=c*l,y+=g>>>16,g&=65535,g+=u*s,y+=g>>>16,g&=65535,y+=i*m+a*l+c*s+u*h,y&=65535,fromBits(S<<16|E,y<<16|g,this.unsigned)};LongPrototype.mul=LongPrototype.multiply;LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high);return fromBits(n,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var i,a,c;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;c=UZERO}else{if(this.eq(MIN_VALUE)){if(e.eq(ONE)||e.eq(NEG_ONE))return MIN_VALUE;if(e.eq(MIN_VALUE))return ONE;var u=this.shr(1);return i=u.div(e).shl(1),i.eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(a=this.sub(e.mul(i)),c=i.add(a.div(e)),c)}else if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();c=ZERO}for(a=this;a.gte(e);){i=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var h=Math.ceil(Math.log(i)/Math.LN2),s=h<=48?1:pow_dbl(2,h-48),l=fromNumber(i),m=l.mul(e);m.isNegative()||m.gt(a);)i-=s,l=fromNumber(i,this.unsigned),m=l.mul(e);l.isZero()&&(l=ONE),c=c.add(l),a=a.sub(m)}return c};LongPrototype.div=LongPrototype.divide;LongPrototype.modulo=function(e){if(isLong(e)||(e=fromValue(e)),wasm){var n=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high);return fromBits(n,wasm.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};LongPrototype.mod=LongPrototype.modulo;LongPrototype.rem=LongPrototype.modulo;LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)};LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)};LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)};LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)};LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)};LongPrototype.shl=LongPrototype.shiftLeft;LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};LongPrototype.shr=LongPrototype.shiftRight;LongPrototype.shiftRightUnsigned=function(e){if(isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var i=this.low;return fromBits(i>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?fromBits(n,0,this.unsigned):fromBits(n>>>e-32,0,this.unsigned)};LongPrototype.shru=LongPrototype.shiftRightUnsigned;LongPrototype.shr_u=LongPrototype.shiftRightUnsigned;LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this};LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)};LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};LongPrototype.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};LongPrototype.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Long.fromBytes=function(e,n,i){return i?Long.fromBytesLE(e,n):Long.fromBytesBE(e,n)};Long.fromBytesLE=function(e,n){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Long.fromBytesBE=function(e,n){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(t,e){for(var n=new Array(arguments.length-1),i=0,a=2,c=!0;a<arguments.length;)n[i++]=arguments[a++];return new Promise(function(h,s){n[i]=function(m){if(c)if(c=!1,m)s(m);else{for(var y=new Array(arguments.length-1),g=0;g<y.length;)y[g++]=arguments[g];h.apply(null,y)}};try{t.apply(e||null,n)}catch(l){c&&(c=!1,s(l))}})}var base64$1={};(function(t){var e=t;e.length=function(h){var s=h.length;if(!s)return 0;for(var l=0;--s%4>1&&h.charAt(s)==="=";)++l;return Math.ceil(h.length*3)/4-l};for(var n=new Array(64),i=new Array(123),a=0;a<64;)i[n[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;e.encode=function(h,s,l){for(var m=null,y=[],g=0,S=0,E;s<l;){var x=h[s++];switch(S){case 0:y[g++]=n[x>>2],E=(x&3)<<4,S=1;break;case 1:y[g++]=n[E|x>>4],E=(x&15)<<2,S=2;break;case 2:y[g++]=n[E|x>>6],y[g++]=n[x&63],S=0;break}g>8191&&((m||(m=[])).push(String.fromCharCode.apply(String,y)),g=0)}return S&&(y[g++]=n[E],y[g++]=61,S===1&&(y[g++]=61)),m?(g&&m.push(String.fromCharCode.apply(String,y.slice(0,g))),m.join("")):String.fromCharCode.apply(String,y.slice(0,g))};var c="invalid encoding";e.decode=function(h,s,l){for(var m=l,y=0,g,S=0;S<h.length;){var E=h.charCodeAt(S++);if(E===61&&y>1)break;if((E=i[E])===void 0)throw Error(c);switch(y){case 0:g=E,y=1;break;case 1:s[l++]=g<<2|(E&48)>>4,g=E,y=2;break;case 2:s[l++]=(g&15)<<4|(E&60)>>2,g=E,y=3;break;case 3:s[l++]=(g&3)<<6|E,y=0;break}}if(y===1)throw Error(c);return l-m},e.test=function(h){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(h)}})(base64$1);var eventemitter=EventEmitter$1;function EventEmitter$1(){this._listeners={}}EventEmitter$1.prototype.on=function(e,n,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:n,ctx:i||this}),this};EventEmitter$1.prototype.off=function(e,n){if(e===void 0)this._listeners={};else if(n===void 0)this._listeners[e]=[];else for(var i=this._listeners[e],a=0;a<i.length;)i[a].fn===n?i.splice(a,1):++a;return this};EventEmitter$1.prototype.emit=function(e){var n=this._listeners[e];if(n){for(var i=[],a=1;a<arguments.length;)i.push(arguments[a++]);for(a=0;a<n.length;)n[a].fn.apply(n[a++].ctx,i)}return this};var float=factory(factory);function factory(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),i=n[3]===128;function a(s,l,m){e[0]=s,l[m]=n[0],l[m+1]=n[1],l[m+2]=n[2],l[m+3]=n[3]}function c(s,l,m){e[0]=s,l[m]=n[3],l[m+1]=n[2],l[m+2]=n[1],l[m+3]=n[0]}t.writeFloatLE=i?a:c,t.writeFloatBE=i?c:a;function u(s,l){return n[0]=s[l],n[1]=s[l+1],n[2]=s[l+2],n[3]=s[l+3],e[0]}function h(s,l){return n[3]=s[l],n[2]=s[l+1],n[1]=s[l+2],n[0]=s[l+3],e[0]}t.readFloatLE=i?u:h,t.readFloatBE=i?h:u}():function(){function e(i,a,c,u){var h=a<0?1:0;if(h&&(a=-a),a===0)i(1/a>0?0:2147483648,c,u);else if(isNaN(a))i(2143289344,c,u);else if(a>34028234663852886e22)i((h<<31|2139095040)>>>0,c,u);else if(a<11754943508222875e-54)i((h<<31|Math.round(a/1401298464324817e-60))>>>0,c,u);else{var s=Math.floor(Math.log(a)/Math.LN2),l=Math.round(a*Math.pow(2,-s)*8388608)&8388607;i((h<<31|s+127<<23|l)>>>0,c,u)}}t.writeFloatLE=e.bind(null,writeUintLE),t.writeFloatBE=e.bind(null,writeUintBE);function n(i,a,c){var u=i(a,c),h=(u>>31)*2+1,s=u>>>23&255,l=u&8388607;return s===255?l?NaN:h*(1/0):s===0?h*1401298464324817e-60*l:h*Math.pow(2,s-150)*(l+8388608)}t.readFloatLE=n.bind(null,readUintLE),t.readFloatBE=n.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),i=n[7]===128;function a(s,l,m){e[0]=s,l[m]=n[0],l[m+1]=n[1],l[m+2]=n[2],l[m+3]=n[3],l[m+4]=n[4],l[m+5]=n[5],l[m+6]=n[6],l[m+7]=n[7]}function c(s,l,m){e[0]=s,l[m]=n[7],l[m+1]=n[6],l[m+2]=n[5],l[m+3]=n[4],l[m+4]=n[3],l[m+5]=n[2],l[m+6]=n[1],l[m+7]=n[0]}t.writeDoubleLE=i?a:c,t.writeDoubleBE=i?c:a;function u(s,l){return n[0]=s[l],n[1]=s[l+1],n[2]=s[l+2],n[3]=s[l+3],n[4]=s[l+4],n[5]=s[l+5],n[6]=s[l+6],n[7]=s[l+7],e[0]}function h(s,l){return n[7]=s[l],n[6]=s[l+1],n[5]=s[l+2],n[4]=s[l+3],n[3]=s[l+4],n[2]=s[l+5],n[1]=s[l+6],n[0]=s[l+7],e[0]}t.readDoubleLE=i?u:h,t.readDoubleBE=i?h:u}():function(){function e(i,a,c,u,h,s){var l=u<0?1:0;if(l&&(u=-u),u===0)i(0,h,s+a),i(1/u>0?0:2147483648,h,s+c);else if(isNaN(u))i(0,h,s+a),i(2146959360,h,s+c);else if(u>17976931348623157e292)i(0,h,s+a),i((l<<31|2146435072)>>>0,h,s+c);else{var m;if(u<22250738585072014e-324)m=u/5e-324,i(m>>>0,h,s+a),i((l<<31|m/4294967296)>>>0,h,s+c);else{var y=Math.floor(Math.log(u)/Math.LN2);y===1024&&(y=1023),m=u*Math.pow(2,-y),i(m*4503599627370496>>>0,h,s+a),i((l<<31|y+1023<<20|m*1048576&1048575)>>>0,h,s+c)}}}t.writeDoubleLE=e.bind(null,writeUintLE,0,4),t.writeDoubleBE=e.bind(null,writeUintBE,4,0);function n(i,a,c,u,h){var s=i(u,h+a),l=i(u,h+c),m=(l>>31)*2+1,y=l>>>20&2047,g=4294967296*(l&1048575)+s;return y===2047?g?NaN:m*(1/0):y===0?m*5e-324*g:m*Math.pow(2,y-1075)*(g+4503599627370496)}t.readDoubleLE=n.bind(null,readUintLE,0,4),t.readDoubleBE=n.bind(null,readUintBE,4,0)}(),t}function writeUintLE(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function writeUintBE(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=t&255}function readUintLE(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function readUintBE(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}var utf8$2={};(function(t){var e=t;e.length=function(i){for(var a=0,c=0,u=0;u<i.length;++u)c=i.charCodeAt(u),c<128?a+=1:c<2048?a+=2:(c&64512)===55296&&(i.charCodeAt(u+1)&64512)===56320?(++u,a+=4):a+=3;return a},e.read=function(i,a,c){var u=c-a;if(u<1)return"";for(var h=null,s=[],l=0,m;a<c;)m=i[a++],m<128?s[l++]=m:m>191&&m<224?s[l++]=(m&31)<<6|i[a++]&63:m>239&&m<365?(m=((m&7)<<18|(i[a++]&63)<<12|(i[a++]&63)<<6|i[a++]&63)-65536,s[l++]=55296+(m>>10),s[l++]=56320+(m&1023)):s[l++]=(m&15)<<12|(i[a++]&63)<<6|i[a++]&63,l>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,s)),l=0);return h?(l&&h.push(String.fromCharCode.apply(String,s.slice(0,l))),h.join("")):String.fromCharCode.apply(String,s.slice(0,l))},e.write=function(i,a,c){for(var u=c,h,s,l=0;l<i.length;++l)h=i.charCodeAt(l),h<128?a[c++]=h:h<2048?(a[c++]=h>>6|192,a[c++]=h&63|128):(h&64512)===55296&&((s=i.charCodeAt(l+1))&64512)===56320?(h=65536+((h&1023)<<10)+(s&1023),++l,a[c++]=h>>18|240,a[c++]=h>>12&63|128,a[c++]=h>>6&63|128,a[c++]=h&63|128):(a[c++]=h>>12|224,a[c++]=h>>6&63|128,a[c++]=h&63|128);return c-u}})(utf8$2);var pool_1=pool;function pool(t,e,n){var i=n||8192,a=i>>>1,c=null,u=i;return function(s){if(s<1||s>a)return t(s);u+s>i&&(c=t(i),u=0);var l=e.call(c,u,u+=s);return u&7&&(u=(u|7)+1),l}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(t,e){this.lo=t>>>0,this.hi=e>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function t(e){if(e===0)return zero;var n=e<0;n&&(e=-e);var i=e>>>0,a=(e-i)/4294967296>>>0;return n&&(a=~a>>>0,i=~i>>>0,++i>4294967295&&(i=0,++a>4294967295&&(a=0))),new LongBits$2(i,a)};LongBits$2.from=function t(e){if(typeof e=="number")return LongBits$2.fromNumber(e);if(util$5.isString(e))if(util$5.Long)e=util$5.Long.fromString(e);else return LongBits$2.fromNumber(parseInt(e,10));return e.low||e.high?new LongBits$2(e.low>>>0,e.high>>>0):zero};LongBits$2.prototype.toNumber=function t(e){if(!e&&this.hi>>>31){var n=~this.lo+1>>>0,i=~this.hi>>>0;return n||(i=i+1>>>0),-(n+i*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function t(e){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function t(e){return e===zeroHash?zero:new LongBits$2((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)};LongBits$2.prototype.toHash=function t(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function t(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};LongBits$2.prototype.zzDecode=function t(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};LongBits$2.prototype.length=function t(){var e=this.lo,n=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?n===0?e<16384?e<128?1:2:e<2097152?3:4:n<16384?n<128?5:6:n<2097152?7:8:i<128?9:10};(function(t){var e=t;e.asPromise=aspromise,e.base64=base64$1,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=longbits,e.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c},e.isString=function(c){return typeof c=="string"||c instanceof String},e.isObject=function(c){return c&&typeof c=="object"},e.isset=e.isSet=function(c,u){var h=c[u];return h!=null&&c.hasOwnProperty(u)?typeof h!="object"||(Array.isArray(h)?h.length:Object.keys(h).length)>0:!1},e.Buffer=function(){try{var a=e.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(c){return typeof c=="number"?e.Buffer?e._Buffer_allocUnsafe(c):new e.Array(c):e.Buffer?e._Buffer_from(c):typeof Uint8Array=="undefined"?c:new Uint8Array(c)},e.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(c){return c?e.LongBits.from(c).toHash():e.LongBits.zeroHash},e.longFromHash=function(c,u){var h=e.LongBits.fromHash(c);return e.Long?e.Long.fromBits(h.lo,h.hi,u):h.toNumber(Boolean(u))};function n(a,c,u){for(var h=Object.keys(c),s=0;s<h.length;++s)(a[h[s]]===void 0||!u)&&(a[h[s]]=c[h[s]]);return a}e.merge=n,e.lcFirst=function(c){return c.charAt(0).toLowerCase()+c.substring(1)};function i(a){function c(u,h){if(!(this instanceof c))return new c(u,h);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,c):Object.defineProperty(this,"stack",{value:new Error().stack||""}),h&&n(this,h)}return(c.prototype=Object.create(Error.prototype)).constructor=c,Object.defineProperty(c.prototype,"name",{get:function(){return a}}),c.prototype.toString=function(){return this.name+": "+this.message},c}e.newError=i,e.ProtocolError=i("ProtocolError"),e.oneOfGetter=function(c){for(var u={},h=0;h<c.length;++h)u[c[h]]=1;return function(){for(var s=Object.keys(this),l=s.length-1;l>-1;--l)if(u[s[l]]===1&&this[s[l]]!==void 0&&this[s[l]]!==null)return s[l]}},e.oneOfSetter=function(c){return function(u){for(var h=0;h<c.length;++h)c[h]!==u&&delete this[c[h]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var a=e.Buffer;if(!a){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=a.from!==Uint8Array.from&&a.from||function(u,h){return new a(u,h)},e._Buffer_allocUnsafe=a.allocUnsafe||function(u){return new a(u)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function noop$3(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer$1(){this.len=0,this.head=new Op(noop$3,0,0),this.tail=this.head,this.states=null}var create$1=function t(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function t(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function t(e,n,i){return this.tail=this.tail.next=new Op(e,n,i),this.len+=n,this};function writeByte(t,e,n){e[n]=t&255}function writeVarint32(t,e,n){for(;t>127;)e[n++]=t&127|128,t>>>=7;e[n]=t}function VarintOp(t,e){this.len=t,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function t(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function t(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function t(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(t,e,n){for(;t.hi;)e[n++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=t.lo&127|128,t.lo=t.lo>>>7;e[n++]=t.lo}Writer$1.prototype.uint64=function t(e){var n=LongBits$1.from(e);return this._push(writeVarint64,n.length(),n)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function t(e){var n=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,n.length(),n)};Writer$1.prototype.bool=function t(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}Writer$1.prototype.fixed32=function t(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function t(e){var n=LongBits$1.from(e);return this._push(writeFixed32,4,n.lo)._push(writeFixed32,4,n.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function t(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function t(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function t(e,n,i){n.set(e,i)}:function t(e,n,i){for(var a=0;a<e.length;++a)n[i+a]=e[a]};Writer$1.prototype.bytes=function t(e){var n=e.length>>>0;if(!n)return this._push(writeByte,1,0);if(util$4.isString(e)){var i=Writer$1.alloc(n=base64.length(e));base64.decode(e,i,0),e=i}return this.uint32(n)._push(writeBytes,n,e)};Writer$1.prototype.string=function t(e){var n=utf8$1.length(e);return n?this.uint32(n)._push(utf8$1.write,n,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function t(){return this.states=new State(this),this.head=this.tail=new Op(noop$3,0,0),this.len=0,this};Writer$1.prototype.reset=function t(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$3,0,0),this.len=0),this};Writer$1.prototype.ldelim=function t(){var e=this.head,n=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=n,this.len+=i),this};Writer$1.prototype.finish=function t(){for(var e=this.head.next,n=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,n,i),i+=e.len,e=e.next;return n};Writer$1._configure=function(t){BufferWriter$1=t,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,n,i){n.set(e,i)}:function(e,n,i){if(e.copy)e.copy(n,i,0,e.length);else for(var a=0;a<e.length;)n[i++]=e[a++]}};BufferWriter.prototype.bytes=function t(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var n=e.length>>>0;return this.uint32(n),n&&this._push(BufferWriter.writeBytesBuffer,n,e),this};function writeStringBuffer(t,e,n){t.length<40?util$3.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}BufferWriter.prototype.string=function t(e){var n=util$3.Buffer.byteLength(e);return this.uint32(n),n&&this._push(writeStringBuffer,n,e),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Reader$1(t){this.buf=t,this.pos=0,this.len=t.length}var create_array=typeof Uint8Array!="undefined"?function t(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function t(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create=function t(){return util$2.Buffer?function(n){return(Reader$1.create=function(a){return util$2.Buffer.isBuffer(a)?new BufferReader$1(a):create_array(a)})(n)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function t(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function t(){return this.uint32()|0};Reader$1.prototype.sint32=function t(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var t=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function t(){return this.uint32()!==0};function readFixed32_end(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function t(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function t(){var e=this.uint32(),n=this.pos,i=this.pos+e;if(i>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(n,i):n===i?new this.buf.constructor(0):this._slice.call(this.buf,n,i)};Reader$1.prototype.string=function t(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function t(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Reader$1._configure=function(t){BufferReader$1=t,Reader$1.create=create(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(t){Reader.call(this,t)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function t(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(t,e,n){if(typeof t!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}Service.prototype.rpcCall=function t(e,n,i,a,c){if(!a)throw TypeError("request must be specified");var u=this;if(!c)return util.asPromise(t,u,e,n,i,a);if(!u.rpcImpl){setTimeout(function(){c(Error("already ended"))},0);return}try{return u.rpcImpl(e,n[u.requestDelimited?"encodeDelimited":"encode"](a).finish(),function(s,l){if(s)return u.emit("error",s,e),c(s);if(l===null){u.end(!0);return}if(!(l instanceof i))try{l=i[u.responseDelimited?"decodeDelimited":"decode"](l)}catch(m){return u.emit("error",m,e),c(m)}return u.emit("data",l,e),c(null,l)})}catch(h){u.emit("error",h,e),setTimeout(function(){c(h)},0);return}};Service.prototype.end=function t(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(t){var e=t;e.Service=service})(rpc);var roots={};(function(t){var e=t;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=minimal$1,e.rpc=rpc,e.roots=roots,e.configure=n;function n(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}n()})(indexMinimal);var minimal=indexMinimal;(function(t){var e=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserPacket=t.SpeakerInfo=t.ActiveSpeakerUpdate=t.DataPacket=t.TrackInfo=t.ParticipantInfo=t.Codec=t.Room=t.dataPacket_KindToJSON=t.dataPacket_KindFromJSON=t.DataPacket_Kind=t.participantInfo_StateToJSON=t.participantInfo_StateFromJSON=t.ParticipantInfo_State=t.trackTypeToJSON=t.trackTypeFromJSON=t.TrackType=t.protobufPackage=void 0;const n=e(long),i=e(minimal);t.protobufPackage="livekit";var a;(function(o){o[o.AUDIO=0]="AUDIO",o[o.VIDEO=1]="VIDEO",o[o.DATA=2]="DATA",o[o.UNRECOGNIZED=-1]="UNRECOGNIZED"})(a=t.TrackType||(t.TrackType={}));function c(o){switch(o){case 0:case"AUDIO":return a.AUDIO;case 1:case"VIDEO":return a.VIDEO;case 2:case"DATA":return a.DATA;case-1:case"UNRECOGNIZED":default:return a.UNRECOGNIZED}}t.trackTypeFromJSON=c;function u(o){switch(o){case a.AUDIO:return"AUDIO";case a.VIDEO:return"VIDEO";case a.DATA:return"DATA";default:return"UNKNOWN"}}t.trackTypeToJSON=u;var h;(function(o){o[o.JOINING=0]="JOINING",o[o.JOINED=1]="JOINED",o[o.ACTIVE=2]="ACTIVE",o[o.DISCONNECTED=3]="DISCONNECTED",o[o.UNRECOGNIZED=-1]="UNRECOGNIZED"})(h=t.ParticipantInfo_State||(t.ParticipantInfo_State={}));function s(o){switch(o){case 0:case"JOINING":return h.JOINING;case 1:case"JOINED":return h.JOINED;case 2:case"ACTIVE":return h.ACTIVE;case 3:case"DISCONNECTED":return h.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return h.UNRECOGNIZED}}t.participantInfo_StateFromJSON=s;function l(o){switch(o){case h.JOINING:return"JOINING";case h.JOINED:return"JOINED";case h.ACTIVE:return"ACTIVE";case h.DISCONNECTED:return"DISCONNECTED";default:return"UNKNOWN"}}t.participantInfo_StateToJSON=l;var m;(function(o){o[o.RELIABLE=0]="RELIABLE",o[o.LOSSY=1]="LOSSY",o[o.UNRECOGNIZED=-1]="UNRECOGNIZED"})(m=t.DataPacket_Kind||(t.DataPacket_Kind={}));function y(o){switch(o){case 0:case"RELIABLE":return m.RELIABLE;case 1:case"LOSSY":return m.LOSSY;case-1:case"UNRECOGNIZED":default:return m.UNRECOGNIZED}}t.dataPacket_KindFromJSON=y;function g(o){switch(o){case m.RELIABLE:return"RELIABLE";case m.LOSSY:return"LOSSY";default:return"UNKNOWN"}}t.dataPacket_KindToJSON=g;const S={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:""};t.Room={encode(o,v=i.default.Writer.create()){o.sid!==""&&v.uint32(10).string(o.sid),o.name!==""&&v.uint32(18).string(o.name),o.emptyTimeout!==0&&v.uint32(24).uint32(o.emptyTimeout),o.maxParticipants!==0&&v.uint32(32).uint32(o.maxParticipants),o.creationTime!==0&&v.uint32(40).int64(o.creationTime),o.turnPassword!==""&&v.uint32(50).string(o.turnPassword);for(const b of o.enabledCodecs)t.Codec.encode(b,v.uint32(58).fork()).ldelim();return v},decode(o,v){const b=o instanceof i.default.Reader?o:new i.default.Reader(o);let T=v===void 0?b.len:b.pos+v;const _=Object.assign({},S);for(_.enabledCodecs=[];b.pos<T;){const B=b.uint32();switch(B>>>3){case 1:_.sid=b.string();break;case 2:_.name=b.string();break;case 3:_.emptyTimeout=b.uint32();break;case 4:_.maxParticipants=b.uint32();break;case 5:_.creationTime=f(b.int64());break;case 6:_.turnPassword=b.string();break;case 7:_.enabledCodecs.push(t.Codec.decode(b,b.uint32()));break;default:b.skipType(B&7);break}}return _},fromJSON(o){const v=Object.assign({},S);if(v.enabledCodecs=[],o.sid!==void 0&&o.sid!==null?v.sid=String(o.sid):v.sid="",o.name!==void 0&&o.name!==null?v.name=String(o.name):v.name="",o.emptyTimeout!==void 0&&o.emptyTimeout!==null?v.emptyTimeout=Number(o.emptyTimeout):v.emptyTimeout=0,o.maxParticipants!==void 0&&o.maxParticipants!==null?v.maxParticipants=Number(o.maxParticipants):v.maxParticipants=0,o.creationTime!==void 0&&o.creationTime!==null?v.creationTime=Number(o.creationTime):v.creationTime=0,o.turnPassword!==void 0&&o.turnPassword!==null?v.turnPassword=String(o.turnPassword):v.turnPassword="",o.enabledCodecs!==void 0&&o.enabledCodecs!==null)for(const b of o.enabledCodecs)v.enabledCodecs.push(t.Codec.fromJSON(b));return v},toJSON(o){const v={};return o.sid!==void 0&&(v.sid=o.sid),o.name!==void 0&&(v.name=o.name),o.emptyTimeout!==void 0&&(v.emptyTimeout=o.emptyTimeout),o.maxParticipants!==void 0&&(v.maxParticipants=o.maxParticipants),o.creationTime!==void 0&&(v.creationTime=o.creationTime),o.turnPassword!==void 0&&(v.turnPassword=o.turnPassword),o.enabledCodecs?v.enabledCodecs=o.enabledCodecs.map(b=>b?t.Codec.toJSON(b):void 0):v.enabledCodecs=[],v},fromPartial(o){const v=Object.assign({},S);if(v.enabledCodecs=[],o.sid!==void 0&&o.sid!==null?v.sid=o.sid:v.sid="",o.name!==void 0&&o.name!==null?v.name=o.name:v.name="",o.emptyTimeout!==void 0&&o.emptyTimeout!==null?v.emptyTimeout=o.emptyTimeout:v.emptyTimeout=0,o.maxParticipants!==void 0&&o.maxParticipants!==null?v.maxParticipants=o.maxParticipants:v.maxParticipants=0,o.creationTime!==void 0&&o.creationTime!==null?v.creationTime=o.creationTime:v.creationTime=0,o.turnPassword!==void 0&&o.turnPassword!==null?v.turnPassword=o.turnPassword:v.turnPassword="",o.enabledCodecs!==void 0&&o.enabledCodecs!==null)for(const b of o.enabledCodecs)v.enabledCodecs.push(t.Codec.fromPartial(b));return v}};const E={mime:"",fmtpLine:""};t.Codec={encode(o,v=i.default.Writer.create()){return o.mime!==""&&v.uint32(10).string(o.mime),o.fmtpLine!==""&&v.uint32(18).string(o.fmtpLine),v},decode(o,v){const b=o instanceof i.default.Reader?o:new i.default.Reader(o);let T=v===void 0?b.len:b.pos+v;const _=Object.assign({},E);for(;b.pos<T;){const B=b.uint32();switch(B>>>3){case 1:_.mime=b.string();break;case 2:_.fmtpLine=b.string();break;default:b.skipType(B&7);break}}return _},fromJSON(o){const v=Object.assign({},E);return o.mime!==void 0&&o.mime!==null?v.mime=String(o.mime):v.mime="",o.fmtpLine!==void 0&&o.fmtpLine!==null?v.fmtpLine=String(o.fmtpLine):v.fmtpLine="",v},toJSON(o){const v={};return o.mime!==void 0&&(v.mime=o.mime),o.fmtpLine!==void 0&&(v.fmtpLine=o.fmtpLine),v},fromPartial(o){const v=Object.assign({},E);return o.mime!==void 0&&o.mime!==null?v.mime=o.mime:v.mime="",o.fmtpLine!==void 0&&o.fmtpLine!==null?v.fmtpLine=o.fmtpLine:v.fmtpLine="",v}};const x={sid:"",identity:"",state:0,metadata:"",joinedAt:0,hidden:!1};t.ParticipantInfo={encode(o,v=i.default.Writer.create()){o.sid!==""&&v.uint32(10).string(o.sid),o.identity!==""&&v.uint32(18).string(o.identity),o.state!==0&&v.uint32(24).int32(o.state);for(const b of o.tracks)t.TrackInfo.encode(b,v.uint32(34).fork()).ldelim();return o.metadata!==""&&v.uint32(42).string(o.metadata),o.joinedAt!==0&&v.uint32(48).int64(o.joinedAt),o.hidden===!0&&v.uint32(56).bool(o.hidden),v},decode(o,v){const b=o instanceof i.default.Reader?o:new i.default.Reader(o);let T=v===void 0?b.len:b.pos+v;const _=Object.assign({},x);for(_.tracks=[];b.pos<T;){const B=b.uint32();switch(B>>>3){case 1:_.sid=b.string();break;case 2:_.identity=b.string();break;case 3:_.state=b.int32();break;case 4:_.tracks.push(t.TrackInfo.decode(b,b.uint32()));break;case 5:_.metadata=b.string();break;case 6:_.joinedAt=f(b.int64());break;case 7:_.hidden=b.bool();break;default:b.skipType(B&7);break}}return _},fromJSON(o){const v=Object.assign({},x);if(v.tracks=[],o.sid!==void 0&&o.sid!==null?v.sid=String(o.sid):v.sid="",o.identity!==void 0&&o.identity!==null?v.identity=String(o.identity):v.identity="",o.state!==void 0&&o.state!==null?v.state=s(o.state):v.state=0,o.tracks!==void 0&&o.tracks!==null)for(const b of o.tracks)v.tracks.push(t.TrackInfo.fromJSON(b));return o.metadata!==void 0&&o.metadata!==null?v.metadata=String(o.metadata):v.metadata="",o.joinedAt!==void 0&&o.joinedAt!==null?v.joinedAt=Number(o.joinedAt):v.joinedAt=0,o.hidden!==void 0&&o.hidden!==null?v.hidden=Boolean(o.hidden):v.hidden=!1,v},toJSON(o){const v={};return o.sid!==void 0&&(v.sid=o.sid),o.identity!==void 0&&(v.identity=o.identity),o.state!==void 0&&(v.state=l(o.state)),o.tracks?v.tracks=o.tracks.map(b=>b?t.TrackInfo.toJSON(b):void 0):v.tracks=[],o.metadata!==void 0&&(v.metadata=o.metadata),o.joinedAt!==void 0&&(v.joinedAt=o.joinedAt),o.hidden!==void 0&&(v.hidden=o.hidden),v},fromPartial(o){const v=Object.assign({},x);if(v.tracks=[],o.sid!==void 0&&o.sid!==null?v.sid=o.sid:v.sid="",o.identity!==void 0&&o.identity!==null?v.identity=o.identity:v.identity="",o.state!==void 0&&o.state!==null?v.state=o.state:v.state=0,o.tracks!==void 0&&o.tracks!==null)for(const b of o.tracks)v.tracks.push(t.TrackInfo.fromPartial(b));return o.metadata!==void 0&&o.metadata!==null?v.metadata=o.metadata:v.metadata="",o.joinedAt!==void 0&&o.joinedAt!==null?v.joinedAt=o.joinedAt:v.joinedAt=0,o.hidden!==void 0&&o.hidden!==null?v.hidden=o.hidden:v.hidden=!1,v}};const A={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1};t.TrackInfo={encode(o,v=i.default.Writer.create()){return o.sid!==""&&v.uint32(10).string(o.sid),o.type!==0&&v.uint32(16).int32(o.type),o.name!==""&&v.uint32(26).string(o.name),o.muted===!0&&v.uint32(32).bool(o.muted),o.width!==0&&v.uint32(40).uint32(o.width),o.height!==0&&v.uint32(48).uint32(o.height),o.simulcast===!0&&v.uint32(56).bool(o.simulcast),v},decode(o,v){const b=o instanceof i.default.Reader?o:new i.default.Reader(o);let T=v===void 0?b.len:b.pos+v;const _=Object.assign({},A);for(;b.pos<T;){const B=b.uint32();switch(B>>>3){case 1:_.sid=b.string();break;case 2:_.type=b.int32();break;case 3:_.name=b.string();break;case 4:_.muted=b.bool();break;case 5:_.width=b.uint32();break;case 6:_.height=b.uint32();break;case 7:_.simulcast=b.bool();break;default:b.skipType(B&7);break}}return _},fromJSON(o){const v=Object.assign({},A);return o.sid!==void 0&&o.sid!==null?v.sid=String(o.sid):v.sid="",o.type!==void 0&&o.type!==null?v.type=c(o.type):v.type=0,o.name!==void 0&&o.name!==null?v.name=String(o.name):v.name="",o.muted!==void 0&&o.muted!==null?v.muted=Boolean(o.muted):v.muted=!1,o.width!==void 0&&o.width!==null?v.width=Number(o.width):v.width=0,o.height!==void 0&&o.height!==null?v.height=Number(o.height):v.height=0,o.simulcast!==void 0&&o.simulcast!==null?v.simulcast=Boolean(o.simulcast):v.simulcast=!1,v},toJSON(o){const v={};return o.sid!==void 0&&(v.sid=o.sid),o.type!==void 0&&(v.type=u(o.type)),o.name!==void 0&&(v.name=o.name),o.muted!==void 0&&(v.muted=o.muted),o.width!==void 0&&(v.width=o.width),o.height!==void 0&&(v.height=o.height),o.simulcast!==void 0&&(v.simulcast=o.simulcast),v},fromPartial(o){const v=Object.assign({},A);return o.sid!==void 0&&o.sid!==null?v.sid=o.sid:v.sid="",o.type!==void 0&&o.type!==null?v.type=o.type:v.type=0,o.name!==void 0&&o.name!==null?v.name=o.name:v.name="",o.muted!==void 0&&o.muted!==null?v.muted=o.muted:v.muted=!1,o.width!==void 0&&o.width!==null?v.width=o.width:v.width=0,o.height!==void 0&&o.height!==null?v.height=o.height:v.height=0,o.simulcast!==void 0&&o.simulcast!==null?v.simulcast=o.simulcast:v.simulcast=!1,v}};const F={kind:0};t.DataPacket={encode(o,v=i.default.Writer.create()){return o.kind!==0&&v.uint32(8).int32(o.kind),o.user!==void 0&&t.UserPacket.encode(o.user,v.uint32(18).fork()).ldelim(),o.speaker!==void 0&&t.ActiveSpeakerUpdate.encode(o.speaker,v.uint32(26).fork()).ldelim(),v},decode(o,v){const b=o instanceof i.default.Reader?o:new i.default.Reader(o);let T=v===void 0?b.len:b.pos+v;const _=Object.assign({},F);for(;b.pos<T;){const B=b.uint32();switch(B>>>3){case 1:_.kind=b.int32();break;case 2:_.user=t.UserPacket.decode(b,b.uint32());break;case 3:_.speaker=t.ActiveSpeakerUpdate.decode(b,b.uint32());break;default:b.skipType(B&7);break}}return _},fromJSON(o){const v=Object.assign({},F);return o.kind!==void 0&&o.kind!==null?v.kind=y(o.kind):v.kind=0,o.user!==void 0&&o.user!==null?v.user=t.UserPacket.fromJSON(o.user):v.user=void 0,o.speaker!==void 0&&o.speaker!==null?v.speaker=t.ActiveSpeakerUpdate.fromJSON(o.speaker):v.speaker=void 0,v},toJSON(o){const v={};return o.kind!==void 0&&(v.kind=g(o.kind)),o.user!==void 0&&(v.user=o.user?t.UserPacket.toJSON(o.user):void 0),o.speaker!==void 0&&(v.speaker=o.speaker?t.ActiveSpeakerUpdate.toJSON(o.speaker):void 0),v},fromPartial(o){const v=Object.assign({},F);return o.kind!==void 0&&o.kind!==null?v.kind=o.kind:v.kind=0,o.user!==void 0&&o.user!==null?v.user=t.UserPacket.fromPartial(o.user):v.user=void 0,o.speaker!==void 0&&o.speaker!==null?v.speaker=t.ActiveSpeakerUpdate.fromPartial(o.speaker):v.speaker=void 0,v}};const D={};t.ActiveSpeakerUpdate={encode(o,v=i.default.Writer.create()){for(const b of o.speakers)t.SpeakerInfo.encode(b,v.uint32(10).fork()).ldelim();return v},decode(o,v){const b=o instanceof i.default.Reader?o:new i.default.Reader(o);let T=v===void 0?b.len:b.pos+v;const _=Object.assign({},D);for(_.speakers=[];b.pos<T;){const B=b.uint32();switch(B>>>3){case 1:_.speakers.push(t.SpeakerInfo.decode(b,b.uint32()));break;default:b.skipType(B&7);break}}return _},fromJSON(o){const v=Object.assign({},D);if(v.speakers=[],o.speakers!==void 0&&o.speakers!==null)for(const b of o.speakers)v.speakers.push(t.SpeakerInfo.fromJSON(b));return v},toJSON(o){const v={};return o.speakers?v.speakers=o.speakers.map(b=>b?t.SpeakerInfo.toJSON(b):void 0):v.speakers=[],v},fromPartial(o){const v=Object.assign({},D);if(v.speakers=[],o.speakers!==void 0&&o.speakers!==null)for(const b of o.speakers)v.speakers.push(t.SpeakerInfo.fromPartial(b));return v}};const $={sid:"",level:0,active:!1};t.SpeakerInfo={encode(o,v=i.default.Writer.create()){return o.sid!==""&&v.uint32(10).string(o.sid),o.level!==0&&v.uint32(21).float(o.level),o.active===!0&&v.uint32(24).bool(o.active),v},decode(o,v){const b=o instanceof i.default.Reader?o:new i.default.Reader(o);let T=v===void 0?b.len:b.pos+v;const _=Object.assign({},$);for(;b.pos<T;){const B=b.uint32();switch(B>>>3){case 1:_.sid=b.string();break;case 2:_.level=b.float();break;case 3:_.active=b.bool();break;default:b.skipType(B&7);break}}return _},fromJSON(o){const v=Object.assign({},$);return o.sid!==void 0&&o.sid!==null?v.sid=String(o.sid):v.sid="",o.level!==void 0&&o.level!==null?v.level=Number(o.level):v.level=0,o.active!==void 0&&o.active!==null?v.active=Boolean(o.active):v.active=!1,v},toJSON(o){const v={};return o.sid!==void 0&&(v.sid=o.sid),o.level!==void 0&&(v.level=o.level),o.active!==void 0&&(v.active=o.active),v},fromPartial(o){const v=Object.assign({},$);return o.sid!==void 0&&o.sid!==null?v.sid=o.sid:v.sid="",o.level!==void 0&&o.level!==null?v.level=o.level:v.level=0,o.active!==void 0&&o.active!==null?v.active=o.active:v.active=!1,v}};const k={participantSid:"",destinationSids:""};t.UserPacket={encode(o,v=i.default.Writer.create()){o.participantSid!==""&&v.uint32(10).string(o.participantSid),o.payload.length!==0&&v.uint32(18).bytes(o.payload);for(const b of o.destinationSids)v.uint32(26).string(b);return v},decode(o,v){const b=o instanceof i.default.Reader?o:new i.default.Reader(o);let T=v===void 0?b.len:b.pos+v;const _=Object.assign({},k);for(_.destinationSids=[],_.payload=new Uint8Array;b.pos<T;){const B=b.uint32();switch(B>>>3){case 1:_.participantSid=b.string();break;case 2:_.payload=b.bytes();break;case 3:_.destinationSids.push(b.string());break;default:b.skipType(B&7);break}}return _},fromJSON(o){const v=Object.assign({},k);if(v.destinationSids=[],v.payload=new Uint8Array,o.participantSid!==void 0&&o.participantSid!==null?v.participantSid=String(o.participantSid):v.participantSid="",o.payload!==void 0&&o.payload!==null&&(v.payload=W(o.payload)),o.destinationSids!==void 0&&o.destinationSids!==null)for(const b of o.destinationSids)v.destinationSids.push(String(b));return v},toJSON(o){const v={};return o.participantSid!==void 0&&(v.participantSid=o.participantSid),o.payload!==void 0&&(v.payload=q(o.payload!==void 0?o.payload:new Uint8Array)),o.destinationSids?v.destinationSids=o.destinationSids.map(b=>b):v.destinationSids=[],v},fromPartial(o){const v=Object.assign({},k);if(v.destinationSids=[],o.participantSid!==void 0&&o.participantSid!==null?v.participantSid=o.participantSid:v.participantSid="",o.payload!==void 0&&o.payload!==null?v.payload=o.payload:v.payload=new Uint8Array,o.destinationSids!==void 0&&o.destinationSids!==null)for(const b of o.destinationSids)v.destinationSids.push(b);return v}};var j=(()=>{if(typeof j!="undefined")return j;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();const U=j.atob||(o=>j.Buffer.from(o,"base64").toString("binary"));function W(o){const v=U(o),b=new Uint8Array(v.length);for(let T=0;T<v.length;++T)b[T]=v.charCodeAt(T);return b}const G=j.btoa||(o=>j.Buffer.from(o,"binary").toString("base64"));function q(o){const v=[];for(const b of o)v.push(String.fromCharCode(b));return G(v.join(""))}function f(o){if(o.gt(Number.MAX_SAFE_INTEGER))throw new j.Error("Value is larger than Number.MAX_SAFE_INTEGER");return o.toNumber()}i.default.util.Long!==n.default&&(i.default.util.Long=n.default,i.default.configure())})(livekit_models);var livekit_rtc={};(function(t){var e=commonjsGlobal&&commonjsGlobal.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakersChanged=t.ICEServer=t.LeaveRequest=t.UpdateTrackSettings=t.UpdateSubscription=t.ParticipantUpdate=t.SessionDescription=t.TrackPublishedResponse=t.JoinResponse=t.SetSimulcastLayers=t.MuteTrackRequest=t.TrickleRequest=t.AddTrackRequest=t.SignalResponse=t.SignalRequest=t.videoQualityToJSON=t.videoQualityFromJSON=t.VideoQuality=t.signalTargetToJSON=t.signalTargetFromJSON=t.SignalTarget=t.protobufPackage=void 0;const n=e(long),i=e(minimal),a=livekit_models;t.protobufPackage="livekit";var c;(function(f){f[f.PUBLISHER=0]="PUBLISHER",f[f.SUBSCRIBER=1]="SUBSCRIBER",f[f.UNRECOGNIZED=-1]="UNRECOGNIZED"})(c=t.SignalTarget||(t.SignalTarget={}));function u(f){switch(f){case 0:case"PUBLISHER":return c.PUBLISHER;case 1:case"SUBSCRIBER":return c.SUBSCRIBER;case-1:case"UNRECOGNIZED":default:return c.UNRECOGNIZED}}t.signalTargetFromJSON=u;function h(f){switch(f){case c.PUBLISHER:return"PUBLISHER";case c.SUBSCRIBER:return"SUBSCRIBER";default:return"UNKNOWN"}}t.signalTargetToJSON=h;var s;(function(f){f[f.LOW=0]="LOW",f[f.MEDIUM=1]="MEDIUM",f[f.HIGH=2]="HIGH",f[f.UNRECOGNIZED=-1]="UNRECOGNIZED"})(s=t.VideoQuality||(t.VideoQuality={}));function l(f){switch(f){case 0:case"LOW":return s.LOW;case 1:case"MEDIUM":return s.MEDIUM;case 2:case"HIGH":return s.HIGH;case-1:case"UNRECOGNIZED":default:return s.UNRECOGNIZED}}t.videoQualityFromJSON=l;function m(f){switch(f){case s.LOW:return"LOW";case s.MEDIUM:return"MEDIUM";case s.HIGH:return"HIGH";default:return"UNKNOWN"}}t.videoQualityToJSON=m;const y={};t.SignalRequest={encode(f,o=i.default.Writer.create()){return f.offer!==void 0&&t.SessionDescription.encode(f.offer,o.uint32(10).fork()).ldelim(),f.answer!==void 0&&t.SessionDescription.encode(f.answer,o.uint32(18).fork()).ldelim(),f.trickle!==void 0&&t.TrickleRequest.encode(f.trickle,o.uint32(26).fork()).ldelim(),f.addTrack!==void 0&&t.AddTrackRequest.encode(f.addTrack,o.uint32(34).fork()).ldelim(),f.mute!==void 0&&t.MuteTrackRequest.encode(f.mute,o.uint32(42).fork()).ldelim(),f.subscription!==void 0&&t.UpdateSubscription.encode(f.subscription,o.uint32(50).fork()).ldelim(),f.trackSetting!==void 0&&t.UpdateTrackSettings.encode(f.trackSetting,o.uint32(58).fork()).ldelim(),f.leave!==void 0&&t.LeaveRequest.encode(f.leave,o.uint32(66).fork()).ldelim(),f.simulcast!==void 0&&t.SetSimulcastLayers.encode(f.simulcast,o.uint32(74).fork()).ldelim(),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},y);for(;v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.offer=t.SessionDescription.decode(v,v.uint32());break;case 2:T.answer=t.SessionDescription.decode(v,v.uint32());break;case 3:T.trickle=t.TrickleRequest.decode(v,v.uint32());break;case 4:T.addTrack=t.AddTrackRequest.decode(v,v.uint32());break;case 5:T.mute=t.MuteTrackRequest.decode(v,v.uint32());break;case 6:T.subscription=t.UpdateSubscription.decode(v,v.uint32());break;case 7:T.trackSetting=t.UpdateTrackSettings.decode(v,v.uint32());break;case 8:T.leave=t.LeaveRequest.decode(v,v.uint32());break;case 9:T.simulcast=t.SetSimulcastLayers.decode(v,v.uint32());break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},y);return f.offer!==void 0&&f.offer!==null?o.offer=t.SessionDescription.fromJSON(f.offer):o.offer=void 0,f.answer!==void 0&&f.answer!==null?o.answer=t.SessionDescription.fromJSON(f.answer):o.answer=void 0,f.trickle!==void 0&&f.trickle!==null?o.trickle=t.TrickleRequest.fromJSON(f.trickle):o.trickle=void 0,f.addTrack!==void 0&&f.addTrack!==null?o.addTrack=t.AddTrackRequest.fromJSON(f.addTrack):o.addTrack=void 0,f.mute!==void 0&&f.mute!==null?o.mute=t.MuteTrackRequest.fromJSON(f.mute):o.mute=void 0,f.subscription!==void 0&&f.subscription!==null?o.subscription=t.UpdateSubscription.fromJSON(f.subscription):o.subscription=void 0,f.trackSetting!==void 0&&f.trackSetting!==null?o.trackSetting=t.UpdateTrackSettings.fromJSON(f.trackSetting):o.trackSetting=void 0,f.leave!==void 0&&f.leave!==null?o.leave=t.LeaveRequest.fromJSON(f.leave):o.leave=void 0,f.simulcast!==void 0&&f.simulcast!==null?o.simulcast=t.SetSimulcastLayers.fromJSON(f.simulcast):o.simulcast=void 0,o},toJSON(f){const o={};return f.offer!==void 0&&(o.offer=f.offer?t.SessionDescription.toJSON(f.offer):void 0),f.answer!==void 0&&(o.answer=f.answer?t.SessionDescription.toJSON(f.answer):void 0),f.trickle!==void 0&&(o.trickle=f.trickle?t.TrickleRequest.toJSON(f.trickle):void 0),f.addTrack!==void 0&&(o.addTrack=f.addTrack?t.AddTrackRequest.toJSON(f.addTrack):void 0),f.mute!==void 0&&(o.mute=f.mute?t.MuteTrackRequest.toJSON(f.mute):void 0),f.subscription!==void 0&&(o.subscription=f.subscription?t.UpdateSubscription.toJSON(f.subscription):void 0),f.trackSetting!==void 0&&(o.trackSetting=f.trackSetting?t.UpdateTrackSettings.toJSON(f.trackSetting):void 0),f.leave!==void 0&&(o.leave=f.leave?t.LeaveRequest.toJSON(f.leave):void 0),f.simulcast!==void 0&&(o.simulcast=f.simulcast?t.SetSimulcastLayers.toJSON(f.simulcast):void 0),o},fromPartial(f){const o=Object.assign({},y);return f.offer!==void 0&&f.offer!==null?o.offer=t.SessionDescription.fromPartial(f.offer):o.offer=void 0,f.answer!==void 0&&f.answer!==null?o.answer=t.SessionDescription.fromPartial(f.answer):o.answer=void 0,f.trickle!==void 0&&f.trickle!==null?o.trickle=t.TrickleRequest.fromPartial(f.trickle):o.trickle=void 0,f.addTrack!==void 0&&f.addTrack!==null?o.addTrack=t.AddTrackRequest.fromPartial(f.addTrack):o.addTrack=void 0,f.mute!==void 0&&f.mute!==null?o.mute=t.MuteTrackRequest.fromPartial(f.mute):o.mute=void 0,f.subscription!==void 0&&f.subscription!==null?o.subscription=t.UpdateSubscription.fromPartial(f.subscription):o.subscription=void 0,f.trackSetting!==void 0&&f.trackSetting!==null?o.trackSetting=t.UpdateTrackSettings.fromPartial(f.trackSetting):o.trackSetting=void 0,f.leave!==void 0&&f.leave!==null?o.leave=t.LeaveRequest.fromPartial(f.leave):o.leave=void 0,f.simulcast!==void 0&&f.simulcast!==null?o.simulcast=t.SetSimulcastLayers.fromPartial(f.simulcast):o.simulcast=void 0,o}};const g={};t.SignalResponse={encode(f,o=i.default.Writer.create()){return f.join!==void 0&&t.JoinResponse.encode(f.join,o.uint32(10).fork()).ldelim(),f.answer!==void 0&&t.SessionDescription.encode(f.answer,o.uint32(18).fork()).ldelim(),f.offer!==void 0&&t.SessionDescription.encode(f.offer,o.uint32(26).fork()).ldelim(),f.trickle!==void 0&&t.TrickleRequest.encode(f.trickle,o.uint32(34).fork()).ldelim(),f.update!==void 0&&t.ParticipantUpdate.encode(f.update,o.uint32(42).fork()).ldelim(),f.trackPublished!==void 0&&t.TrackPublishedResponse.encode(f.trackPublished,o.uint32(50).fork()).ldelim(),f.leave!==void 0&&t.LeaveRequest.encode(f.leave,o.uint32(66).fork()).ldelim(),f.mute!==void 0&&t.MuteTrackRequest.encode(f.mute,o.uint32(74).fork()).ldelim(),f.speakersChanged!==void 0&&t.SpeakersChanged.encode(f.speakersChanged,o.uint32(82).fork()).ldelim(),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},g);for(;v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.join=t.JoinResponse.decode(v,v.uint32());break;case 2:T.answer=t.SessionDescription.decode(v,v.uint32());break;case 3:T.offer=t.SessionDescription.decode(v,v.uint32());break;case 4:T.trickle=t.TrickleRequest.decode(v,v.uint32());break;case 5:T.update=t.ParticipantUpdate.decode(v,v.uint32());break;case 6:T.trackPublished=t.TrackPublishedResponse.decode(v,v.uint32());break;case 8:T.leave=t.LeaveRequest.decode(v,v.uint32());break;case 9:T.mute=t.MuteTrackRequest.decode(v,v.uint32());break;case 10:T.speakersChanged=t.SpeakersChanged.decode(v,v.uint32());break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},g);return f.join!==void 0&&f.join!==null?o.join=t.JoinResponse.fromJSON(f.join):o.join=void 0,f.answer!==void 0&&f.answer!==null?o.answer=t.SessionDescription.fromJSON(f.answer):o.answer=void 0,f.offer!==void 0&&f.offer!==null?o.offer=t.SessionDescription.fromJSON(f.offer):o.offer=void 0,f.trickle!==void 0&&f.trickle!==null?o.trickle=t.TrickleRequest.fromJSON(f.trickle):o.trickle=void 0,f.update!==void 0&&f.update!==null?o.update=t.ParticipantUpdate.fromJSON(f.update):o.update=void 0,f.trackPublished!==void 0&&f.trackPublished!==null?o.trackPublished=t.TrackPublishedResponse.fromJSON(f.trackPublished):o.trackPublished=void 0,f.leave!==void 0&&f.leave!==null?o.leave=t.LeaveRequest.fromJSON(f.leave):o.leave=void 0,f.mute!==void 0&&f.mute!==null?o.mute=t.MuteTrackRequest.fromJSON(f.mute):o.mute=void 0,f.speakersChanged!==void 0&&f.speakersChanged!==null?o.speakersChanged=t.SpeakersChanged.fromJSON(f.speakersChanged):o.speakersChanged=void 0,o},toJSON(f){const o={};return f.join!==void 0&&(o.join=f.join?t.JoinResponse.toJSON(f.join):void 0),f.answer!==void 0&&(o.answer=f.answer?t.SessionDescription.toJSON(f.answer):void 0),f.offer!==void 0&&(o.offer=f.offer?t.SessionDescription.toJSON(f.offer):void 0),f.trickle!==void 0&&(o.trickle=f.trickle?t.TrickleRequest.toJSON(f.trickle):void 0),f.update!==void 0&&(o.update=f.update?t.ParticipantUpdate.toJSON(f.update):void 0),f.trackPublished!==void 0&&(o.trackPublished=f.trackPublished?t.TrackPublishedResponse.toJSON(f.trackPublished):void 0),f.leave!==void 0&&(o.leave=f.leave?t.LeaveRequest.toJSON(f.leave):void 0),f.mute!==void 0&&(o.mute=f.mute?t.MuteTrackRequest.toJSON(f.mute):void 0),f.speakersChanged!==void 0&&(o.speakersChanged=f.speakersChanged?t.SpeakersChanged.toJSON(f.speakersChanged):void 0),o},fromPartial(f){const o=Object.assign({},g);return f.join!==void 0&&f.join!==null?o.join=t.JoinResponse.fromPartial(f.join):o.join=void 0,f.answer!==void 0&&f.answer!==null?o.answer=t.SessionDescription.fromPartial(f.answer):o.answer=void 0,f.offer!==void 0&&f.offer!==null?o.offer=t.SessionDescription.fromPartial(f.offer):o.offer=void 0,f.trickle!==void 0&&f.trickle!==null?o.trickle=t.TrickleRequest.fromPartial(f.trickle):o.trickle=void 0,f.update!==void 0&&f.update!==null?o.update=t.ParticipantUpdate.fromPartial(f.update):o.update=void 0,f.trackPublished!==void 0&&f.trackPublished!==null?o.trackPublished=t.TrackPublishedResponse.fromPartial(f.trackPublished):o.trackPublished=void 0,f.leave!==void 0&&f.leave!==null?o.leave=t.LeaveRequest.fromPartial(f.leave):o.leave=void 0,f.mute!==void 0&&f.mute!==null?o.mute=t.MuteTrackRequest.fromPartial(f.mute):o.mute=void 0,f.speakersChanged!==void 0&&f.speakersChanged!==null?o.speakersChanged=t.SpeakersChanged.fromPartial(f.speakersChanged):o.speakersChanged=void 0,o}};const S={cid:"",name:"",type:0,width:0,height:0,muted:!1};t.AddTrackRequest={encode(f,o=i.default.Writer.create()){return f.cid!==""&&o.uint32(10).string(f.cid),f.name!==""&&o.uint32(18).string(f.name),f.type!==0&&o.uint32(24).int32(f.type),f.width!==0&&o.uint32(32).uint32(f.width),f.height!==0&&o.uint32(40).uint32(f.height),f.muted===!0&&o.uint32(48).bool(f.muted),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},S);for(;v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.cid=v.string();break;case 2:T.name=v.string();break;case 3:T.type=v.int32();break;case 4:T.width=v.uint32();break;case 5:T.height=v.uint32();break;case 6:T.muted=v.bool();break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},S);return f.cid!==void 0&&f.cid!==null?o.cid=String(f.cid):o.cid="",f.name!==void 0&&f.name!==null?o.name=String(f.name):o.name="",f.type!==void 0&&f.type!==null?o.type=a.trackTypeFromJSON(f.type):o.type=0,f.width!==void 0&&f.width!==null?o.width=Number(f.width):o.width=0,f.height!==void 0&&f.height!==null?o.height=Number(f.height):o.height=0,f.muted!==void 0&&f.muted!==null?o.muted=Boolean(f.muted):o.muted=!1,o},toJSON(f){const o={};return f.cid!==void 0&&(o.cid=f.cid),f.name!==void 0&&(o.name=f.name),f.type!==void 0&&(o.type=a.trackTypeToJSON(f.type)),f.width!==void 0&&(o.width=f.width),f.height!==void 0&&(o.height=f.height),f.muted!==void 0&&(o.muted=f.muted),o},fromPartial(f){const o=Object.assign({},S);return f.cid!==void 0&&f.cid!==null?o.cid=f.cid:o.cid="",f.name!==void 0&&f.name!==null?o.name=f.name:o.name="",f.type!==void 0&&f.type!==null?o.type=f.type:o.type=0,f.width!==void 0&&f.width!==null?o.width=f.width:o.width=0,f.height!==void 0&&f.height!==null?o.height=f.height:o.height=0,f.muted!==void 0&&f.muted!==null?o.muted=f.muted:o.muted=!1,o}};const E={candidateInit:"",target:0};t.TrickleRequest={encode(f,o=i.default.Writer.create()){return f.candidateInit!==""&&o.uint32(10).string(f.candidateInit),f.target!==0&&o.uint32(16).int32(f.target),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},E);for(;v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.candidateInit=v.string();break;case 2:T.target=v.int32();break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},E);return f.candidateInit!==void 0&&f.candidateInit!==null?o.candidateInit=String(f.candidateInit):o.candidateInit="",f.target!==void 0&&f.target!==null?o.target=u(f.target):o.target=0,o},toJSON(f){const o={};return f.candidateInit!==void 0&&(o.candidateInit=f.candidateInit),f.target!==void 0&&(o.target=h(f.target)),o},fromPartial(f){const o=Object.assign({},E);return f.candidateInit!==void 0&&f.candidateInit!==null?o.candidateInit=f.candidateInit:o.candidateInit="",f.target!==void 0&&f.target!==null?o.target=f.target:o.target=0,o}};const x={sid:"",muted:!1};t.MuteTrackRequest={encode(f,o=i.default.Writer.create()){return f.sid!==""&&o.uint32(10).string(f.sid),f.muted===!0&&o.uint32(16).bool(f.muted),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},x);for(;v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.sid=v.string();break;case 2:T.muted=v.bool();break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},x);return f.sid!==void 0&&f.sid!==null?o.sid=String(f.sid):o.sid="",f.muted!==void 0&&f.muted!==null?o.muted=Boolean(f.muted):o.muted=!1,o},toJSON(f){const o={};return f.sid!==void 0&&(o.sid=f.sid),f.muted!==void 0&&(o.muted=f.muted),o},fromPartial(f){const o=Object.assign({},x);return f.sid!==void 0&&f.sid!==null?o.sid=f.sid:o.sid="",f.muted!==void 0&&f.muted!==null?o.muted=f.muted:o.muted=!1,o}};const A={trackSid:"",layers:0};t.SetSimulcastLayers={encode(f,o=i.default.Writer.create()){f.trackSid!==""&&o.uint32(10).string(f.trackSid),o.uint32(18).fork();for(const v of f.layers)o.int32(v);return o.ldelim(),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},A);for(T.layers=[];v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.trackSid=v.string();break;case 2:if((_&7)===2){const B=v.uint32()+v.pos;for(;v.pos<B;)T.layers.push(v.int32())}else T.layers.push(v.int32());break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},A);if(o.layers=[],f.trackSid!==void 0&&f.trackSid!==null?o.trackSid=String(f.trackSid):o.trackSid="",f.layers!==void 0&&f.layers!==null)for(const v of f.layers)o.layers.push(l(v));return o},toJSON(f){const o={};return f.trackSid!==void 0&&(o.trackSid=f.trackSid),f.layers?o.layers=f.layers.map(v=>m(v)):o.layers=[],o},fromPartial(f){const o=Object.assign({},A);if(o.layers=[],f.trackSid!==void 0&&f.trackSid!==null?o.trackSid=f.trackSid:o.trackSid="",f.layers!==void 0&&f.layers!==null)for(const v of f.layers)o.layers.push(v);return o}};const F={serverVersion:"",subscriberPrimary:!1};t.JoinResponse={encode(f,o=i.default.Writer.create()){f.room!==void 0&&a.Room.encode(f.room,o.uint32(10).fork()).ldelim(),f.participant!==void 0&&a.ParticipantInfo.encode(f.participant,o.uint32(18).fork()).ldelim();for(const v of f.otherParticipants)a.ParticipantInfo.encode(v,o.uint32(26).fork()).ldelim();f.serverVersion!==""&&o.uint32(34).string(f.serverVersion);for(const v of f.iceServers)t.ICEServer.encode(v,o.uint32(42).fork()).ldelim();return f.subscriberPrimary===!0&&o.uint32(48).bool(f.subscriberPrimary),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},F);for(T.otherParticipants=[],T.iceServers=[];v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.room=a.Room.decode(v,v.uint32());break;case 2:T.participant=a.ParticipantInfo.decode(v,v.uint32());break;case 3:T.otherParticipants.push(a.ParticipantInfo.decode(v,v.uint32()));break;case 4:T.serverVersion=v.string();break;case 5:T.iceServers.push(t.ICEServer.decode(v,v.uint32()));break;case 6:T.subscriberPrimary=v.bool();break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},F);if(o.otherParticipants=[],o.iceServers=[],f.room!==void 0&&f.room!==null?o.room=a.Room.fromJSON(f.room):o.room=void 0,f.participant!==void 0&&f.participant!==null?o.participant=a.ParticipantInfo.fromJSON(f.participant):o.participant=void 0,f.otherParticipants!==void 0&&f.otherParticipants!==null)for(const v of f.otherParticipants)o.otherParticipants.push(a.ParticipantInfo.fromJSON(v));if(f.serverVersion!==void 0&&f.serverVersion!==null?o.serverVersion=String(f.serverVersion):o.serverVersion="",f.iceServers!==void 0&&f.iceServers!==null)for(const v of f.iceServers)o.iceServers.push(t.ICEServer.fromJSON(v));return f.subscriberPrimary!==void 0&&f.subscriberPrimary!==null?o.subscriberPrimary=Boolean(f.subscriberPrimary):o.subscriberPrimary=!1,o},toJSON(f){const o={};return f.room!==void 0&&(o.room=f.room?a.Room.toJSON(f.room):void 0),f.participant!==void 0&&(o.participant=f.participant?a.ParticipantInfo.toJSON(f.participant):void 0),f.otherParticipants?o.otherParticipants=f.otherParticipants.map(v=>v?a.ParticipantInfo.toJSON(v):void 0):o.otherParticipants=[],f.serverVersion!==void 0&&(o.serverVersion=f.serverVersion),f.iceServers?o.iceServers=f.iceServers.map(v=>v?t.ICEServer.toJSON(v):void 0):o.iceServers=[],f.subscriberPrimary!==void 0&&(o.subscriberPrimary=f.subscriberPrimary),o},fromPartial(f){const o=Object.assign({},F);if(o.otherParticipants=[],o.iceServers=[],f.room!==void 0&&f.room!==null?o.room=a.Room.fromPartial(f.room):o.room=void 0,f.participant!==void 0&&f.participant!==null?o.participant=a.ParticipantInfo.fromPartial(f.participant):o.participant=void 0,f.otherParticipants!==void 0&&f.otherParticipants!==null)for(const v of f.otherParticipants)o.otherParticipants.push(a.ParticipantInfo.fromPartial(v));if(f.serverVersion!==void 0&&f.serverVersion!==null?o.serverVersion=f.serverVersion:o.serverVersion="",f.iceServers!==void 0&&f.iceServers!==null)for(const v of f.iceServers)o.iceServers.push(t.ICEServer.fromPartial(v));return f.subscriberPrimary!==void 0&&f.subscriberPrimary!==null?o.subscriberPrimary=f.subscriberPrimary:o.subscriberPrimary=!1,o}};const D={cid:""};t.TrackPublishedResponse={encode(f,o=i.default.Writer.create()){return f.cid!==""&&o.uint32(10).string(f.cid),f.track!==void 0&&a.TrackInfo.encode(f.track,o.uint32(18).fork()).ldelim(),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},D);for(;v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.cid=v.string();break;case 2:T.track=a.TrackInfo.decode(v,v.uint32());break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},D);return f.cid!==void 0&&f.cid!==null?o.cid=String(f.cid):o.cid="",f.track!==void 0&&f.track!==null?o.track=a.TrackInfo.fromJSON(f.track):o.track=void 0,o},toJSON(f){const o={};return f.cid!==void 0&&(o.cid=f.cid),f.track!==void 0&&(o.track=f.track?a.TrackInfo.toJSON(f.track):void 0),o},fromPartial(f){const o=Object.assign({},D);return f.cid!==void 0&&f.cid!==null?o.cid=f.cid:o.cid="",f.track!==void 0&&f.track!==null?o.track=a.TrackInfo.fromPartial(f.track):o.track=void 0,o}};const $={type:"",sdp:""};t.SessionDescription={encode(f,o=i.default.Writer.create()){return f.type!==""&&o.uint32(10).string(f.type),f.sdp!==""&&o.uint32(18).string(f.sdp),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},$);for(;v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.type=v.string();break;case 2:T.sdp=v.string();break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},$);return f.type!==void 0&&f.type!==null?o.type=String(f.type):o.type="",f.sdp!==void 0&&f.sdp!==null?o.sdp=String(f.sdp):o.sdp="",o},toJSON(f){const o={};return f.type!==void 0&&(o.type=f.type),f.sdp!==void 0&&(o.sdp=f.sdp),o},fromPartial(f){const o=Object.assign({},$);return f.type!==void 0&&f.type!==null?o.type=f.type:o.type="",f.sdp!==void 0&&f.sdp!==null?o.sdp=f.sdp:o.sdp="",o}};const k={};t.ParticipantUpdate={encode(f,o=i.default.Writer.create()){for(const v of f.participants)a.ParticipantInfo.encode(v,o.uint32(10).fork()).ldelim();return o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},k);for(T.participants=[];v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.participants.push(a.ParticipantInfo.decode(v,v.uint32()));break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},k);if(o.participants=[],f.participants!==void 0&&f.participants!==null)for(const v of f.participants)o.participants.push(a.ParticipantInfo.fromJSON(v));return o},toJSON(f){const o={};return f.participants?o.participants=f.participants.map(v=>v?a.ParticipantInfo.toJSON(v):void 0):o.participants=[],o},fromPartial(f){const o=Object.assign({},k);if(o.participants=[],f.participants!==void 0&&f.participants!==null)for(const v of f.participants)o.participants.push(a.ParticipantInfo.fromPartial(v));return o}};const j={trackSids:"",subscribe:!1};t.UpdateSubscription={encode(f,o=i.default.Writer.create()){for(const v of f.trackSids)o.uint32(10).string(v);return f.subscribe===!0&&o.uint32(16).bool(f.subscribe),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},j);for(T.trackSids=[];v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.trackSids.push(v.string());break;case 2:T.subscribe=v.bool();break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},j);if(o.trackSids=[],f.trackSids!==void 0&&f.trackSids!==null)for(const v of f.trackSids)o.trackSids.push(String(v));return f.subscribe!==void 0&&f.subscribe!==null?o.subscribe=Boolean(f.subscribe):o.subscribe=!1,o},toJSON(f){const o={};return f.trackSids?o.trackSids=f.trackSids.map(v=>v):o.trackSids=[],f.subscribe!==void 0&&(o.subscribe=f.subscribe),o},fromPartial(f){const o=Object.assign({},j);if(o.trackSids=[],f.trackSids!==void 0&&f.trackSids!==null)for(const v of f.trackSids)o.trackSids.push(v);return f.subscribe!==void 0&&f.subscribe!==null?o.subscribe=f.subscribe:o.subscribe=!1,o}};const U={trackSids:"",disabled:!1,quality:0};t.UpdateTrackSettings={encode(f,o=i.default.Writer.create()){for(const v of f.trackSids)o.uint32(10).string(v);return f.disabled===!0&&o.uint32(24).bool(f.disabled),f.quality!==0&&o.uint32(32).int32(f.quality),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},U);for(T.trackSids=[];v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.trackSids.push(v.string());break;case 3:T.disabled=v.bool();break;case 4:T.quality=v.int32();break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},U);if(o.trackSids=[],f.trackSids!==void 0&&f.trackSids!==null)for(const v of f.trackSids)o.trackSids.push(String(v));return f.disabled!==void 0&&f.disabled!==null?o.disabled=Boolean(f.disabled):o.disabled=!1,f.quality!==void 0&&f.quality!==null?o.quality=l(f.quality):o.quality=0,o},toJSON(f){const o={};return f.trackSids?o.trackSids=f.trackSids.map(v=>v):o.trackSids=[],f.disabled!==void 0&&(o.disabled=f.disabled),f.quality!==void 0&&(o.quality=m(f.quality)),o},fromPartial(f){const o=Object.assign({},U);if(o.trackSids=[],f.trackSids!==void 0&&f.trackSids!==null)for(const v of f.trackSids)o.trackSids.push(v);return f.disabled!==void 0&&f.disabled!==null?o.disabled=f.disabled:o.disabled=!1,f.quality!==void 0&&f.quality!==null?o.quality=f.quality:o.quality=0,o}};const W={canReconnect:!1};t.LeaveRequest={encode(f,o=i.default.Writer.create()){return f.canReconnect===!0&&o.uint32(8).bool(f.canReconnect),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},W);for(;v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.canReconnect=v.bool();break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},W);return f.canReconnect!==void 0&&f.canReconnect!==null?o.canReconnect=Boolean(f.canReconnect):o.canReconnect=!1,o},toJSON(f){const o={};return f.canReconnect!==void 0&&(o.canReconnect=f.canReconnect),o},fromPartial(f){const o=Object.assign({},W);return f.canReconnect!==void 0&&f.canReconnect!==null?o.canReconnect=f.canReconnect:o.canReconnect=!1,o}};const G={urls:"",username:"",credential:""};t.ICEServer={encode(f,o=i.default.Writer.create()){for(const v of f.urls)o.uint32(10).string(v);return f.username!==""&&o.uint32(18).string(f.username),f.credential!==""&&o.uint32(26).string(f.credential),o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},G);for(T.urls=[];v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.urls.push(v.string());break;case 2:T.username=v.string();break;case 3:T.credential=v.string();break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},G);if(o.urls=[],f.urls!==void 0&&f.urls!==null)for(const v of f.urls)o.urls.push(String(v));return f.username!==void 0&&f.username!==null?o.username=String(f.username):o.username="",f.credential!==void 0&&f.credential!==null?o.credential=String(f.credential):o.credential="",o},toJSON(f){const o={};return f.urls?o.urls=f.urls.map(v=>v):o.urls=[],f.username!==void 0&&(o.username=f.username),f.credential!==void 0&&(o.credential=f.credential),o},fromPartial(f){const o=Object.assign({},G);if(o.urls=[],f.urls!==void 0&&f.urls!==null)for(const v of f.urls)o.urls.push(v);return f.username!==void 0&&f.username!==null?o.username=f.username:o.username="",f.credential!==void 0&&f.credential!==null?o.credential=f.credential:o.credential="",o}};const q={};t.SpeakersChanged={encode(f,o=i.default.Writer.create()){for(const v of f.speakers)a.SpeakerInfo.encode(v,o.uint32(10).fork()).ldelim();return o},decode(f,o){const v=f instanceof i.default.Reader?f:new i.default.Reader(f);let b=o===void 0?v.len:v.pos+o;const T=Object.assign({},q);for(T.speakers=[];v.pos<b;){const _=v.uint32();switch(_>>>3){case 1:T.speakers.push(a.SpeakerInfo.decode(v,v.uint32()));break;default:v.skipType(_&7);break}}return T},fromJSON(f){const o=Object.assign({},q);if(o.speakers=[],f.speakers!==void 0&&f.speakers!==null)for(const v of f.speakers)o.speakers.push(a.SpeakerInfo.fromJSON(v));return o},toJSON(f){const o={};return f.speakers?o.speakers=f.speakers.map(v=>v?a.SpeakerInfo.toJSON(v):void 0):o.speakers=[],o},fromPartial(f){const o=Object.assign({},q);if(o.speakers=[],f.speakers!==void 0&&f.speakers!==null)for(const v of f.speakers)o.speakers.push(a.SpeakerInfo.fromPartial(v));return o}},i.default.util.Long!==n.default&&(i.default.util.Long=n.default,i.default.configure())})(livekit_rtc);var LocalParticipant$1={},loglevel={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(commonjsGlobal,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"];function c(x,A){var F=x[A];if(typeof F.bind=="function")return F.bind(x);try{return Function.prototype.bind.call(F,x)}catch{return function(){return Function.prototype.apply.apply(F,[x,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(x){return x==="debug"&&(x="log"),typeof console===n?!1:x==="trace"&&i?u:console[x]!==void 0?c(console,x):console.log!==void 0?c(console,"log"):e}function s(x,A){for(var F=0;F<a.length;F++){var D=a[F];this[D]=F<x?e:this.methodFactory(D,x,A)}this.log=this.debug}function l(x,A,F){return function(){typeof console!==n&&(s.call(this,A,F),this[x].apply(this,arguments))}}function m(x,A,F){return h(x)||l.apply(this,arguments)}function y(x,A,F){var D=this,$;A=A==null?"WARN":A;var k="loglevel";typeof x=="string"?k+=":"+x:typeof x=="symbol"&&(k=void 0);function j(q){var f=(a[q]||"silent").toUpperCase();if(!(typeof window===n||!k)){try{window.localStorage[k]=f;return}catch{}try{window.document.cookie=encodeURIComponent(k)+"="+f+";"}catch{}}}function U(){var q;if(!(typeof window===n||!k)){try{q=window.localStorage[k]}catch{}if(typeof q===n)try{var f=window.document.cookie,o=f.indexOf(encodeURIComponent(k)+"=");o!==-1&&(q=/^([^;]+)/.exec(f.slice(o))[1])}catch{}return D.levels[q]===void 0&&(q=void 0),q}}function W(){if(!(typeof window===n||!k)){try{window.localStorage.removeItem(k);return}catch{}try{window.document.cookie=encodeURIComponent(k)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}D.name=x,D.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},D.methodFactory=F||m,D.getLevel=function(){return $},D.setLevel=function(q,f){if(typeof q=="string"&&D.levels[q.toUpperCase()]!==void 0&&(q=D.levels[q.toUpperCase()]),typeof q=="number"&&q>=0&&q<=D.levels.SILENT){if($=q,f!==!1&&j(q),s.call(D,q,x),typeof console===n&&q<D.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+q},D.setDefaultLevel=function(q){A=q,U()||D.setLevel(q,!1)},D.resetLevel=function(){D.setLevel(A,!1),W()},D.enableAll=function(q){D.setLevel(D.levels.TRACE,q)},D.disableAll=function(q){D.setLevel(D.levels.SILENT,q)};var G=U();G==null&&(G=A),D.setLevel(G,!1)}var g=new y,S={};g.getLogger=function(A){if(typeof A!="symbol"&&typeof A!="string"||A==="")throw new TypeError("You must supply a name when creating a logger.");var F=S[A];return F||(F=S[A]=new y(A,g.getLevel(),g.methodFactory)),F};var E=typeof window!==n?window.log:void 0;return g.noConflict=function(){return typeof window!==n&&window.log===g&&(window.log=E),g},g.getLoggers=function(){return S},g.default=g,g})})(loglevel);var errors={};Object.defineProperty(errors,"__esModule",{value:!0});errors.PublishDataError=errors.UnexpectedConnectionState=errors.UnsupportedServer=errors.TrackInvalidError=errors.ConnectionError=errors.LivekitError=void 0;class LivekitError extends Error{constructor(e,n){super(n||"an error has occured"),this.code=e}}errors.LivekitError=LivekitError;class ConnectionError extends LivekitError{constructor(e){super(1,e)}}errors.ConnectionError=ConnectionError;class TrackInvalidError extends LivekitError{constructor(e){super(20,e||"Track is invalid")}}errors.TrackInvalidError=TrackInvalidError;class UnsupportedServer extends LivekitError{constructor(e){super(10,e||"Unsupported server")}}errors.UnsupportedServer=UnsupportedServer;class UnexpectedConnectionState extends LivekitError{constructor(e){super(12,e||"Unexpected connection state")}}errors.UnexpectedConnectionState=UnexpectedConnectionState;class PublishDataError extends LivekitError{constructor(e){super(13,e||"Unable to publish data")}}errors.PublishDataError=PublishDataError;var events$1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TrackEvent=t.EngineEvent=t.ParticipantEvent=t.RoomEvent=void 0,function(e){e.Reconnecting="reconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.ActiveSpeakersChanged="activeSpeakersChanged",e.MetadataChanged="metadataChanged",e.DataReceived="dataReceived",e.AudioPlaybackStatusChanged="audioPlaybackChanged"}(t.RoomEvent||(t.RoomEvent={})),function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.MetadataChanged="metadataChanged",e.DataReceived="dataReceived",e.IsSpeakingChanged="isSpeakingChanged"}(t.ParticipantEvent||(t.ParticipantEvent={})),function(e){e.Connected="connected",e.Disconnected="disconnected",e.Reconnecting="reconnecting",e.Reconnected="reconnected",e.ParticipantUpdate="participantUpdate",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.SpeakersChanged="speakersChanged",e.DataPacketReceived="dataPacketReceived",e.RemoteMuteChanged="remoteMuteChanged"}(t.EngineEvent||(t.EngineEvent={})),function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed"}(t.TrackEvent||(t.TrackEvent={}))})(events$1);var LocalAudioTrack$1={},LocalTrack$1={},options$1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPresets43=t.VideoPresets=t.AudioPresets=t.VideoPreset=void 0;class e{constructor(i,a,c,u){this.width=i,this.height=a,this.encoding={maxBitrate:c,maxFramerate:u}}get resolution(){return{width:{ideal:this.width},height:{ideal:this.height},frameRate:{ideal:this.encoding.maxFramerate}}}}t.VideoPreset=e,function(n){n.telephone={maxBitrate:12e3},n.speech={maxBitrate:2e4},n.music={maxBitrate:32e3}}(t.AudioPresets||(t.AudioPresets={})),t.VideoPresets={qvga:new e(320,180,125e3,15),vga:new e(640,360,4e5,30),qhd:new e(960,540,8e5,30),hd:new e(1280,720,25e5,30),fhd:new e(1920,1080,4e6,30)},t.VideoPresets43={qvga:new e(240,180,1e5,15),vga:new e(480,360,32e4,30),qhd:new e(720,540,64e4,30),hd:new e(960,720,2e6,30),fhd:new e(1440,1080,32e5,30)}})(options$1);var Track={},events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function t(e,n,i){return Function.prototype.apply.call(e,n,i)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(t){console&&console.warn&&console.warn(t)}var NumberIsNaN=Number.isNaN||function t(e){return e!==e};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");defaultMaxListeners=t}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function t(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(t){return t._maxListeners===void 0?EventEmitter.defaultMaxListeners:t._maxListeners}EventEmitter.prototype.getMaxListeners=function t(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function t(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var a=e==="error",c=this._events;if(c!==void 0)a=a&&c.error===void 0;else if(!a)return!1;if(a){var u;if(n.length>0&&(u=n[0]),u instanceof Error)throw u;var h=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw h.context=u,h}var s=c[e];if(s===void 0)return!1;if(typeof s=="function")ReflectApply(s,this,n);else for(var l=s.length,m=arrayClone(s,l),i=0;i<l;++i)ReflectApply(m[i],this,n);return!0};function _addListener(t,e,n,i){var a,c,u;if(checkListener(n),c=t._events,c===void 0?(c=t._events=Object.create(null),t._eventsCount=0):(c.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),c=t._events),u=c[e]),u===void 0)u=c[e]=n,++t._eventsCount;else if(typeof u=="function"?u=c[e]=i?[n,u]:[u,n]:i?u.unshift(n):u.push(n),a=_getMaxListeners(t),a>0&&u.length>a&&!u.warned){u.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=u.length,ProcessEmitWarning(h)}return t}EventEmitter.prototype.addListener=function t(e,n){return _addListener(this,e,n,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function t(e,n){return _addListener(this,e,n,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},a=onceWrapper.bind(i);return a.listener=n,i.wrapFn=a,a}EventEmitter.prototype.once=function t(e,n){return checkListener(n),this.on(e,_onceWrap(this,e,n)),this};EventEmitter.prototype.prependOnceListener=function t(e,n){return checkListener(n),this.prependListener(e,_onceWrap(this,e,n)),this};EventEmitter.prototype.removeListener=function t(e,n){var i,a,c,u,h;if(checkListener(n),a=this._events,a===void 0)return this;if(i=a[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(c=-1,u=i.length-1;u>=0;u--)if(i[u]===n||i[u].listener===n){h=i[u].listener,c=u;break}if(c<0)return this;c===0?i.shift():spliceOne(i,c),i.length===1&&(a[e]=i[0]),a.removeListener!==void 0&&this.emit("removeListener",e,h||n)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function t(e){var n,i,a;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var c=Object.keys(i),u;for(a=0;a<c.length;++a)u=c[a],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(a=n.length-1;a>=0;a--)this.removeListener(e,n[a]);return this};function _listeners(t,e,n){var i=t._events;if(i===void 0)return[];var a=i[e];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?unwrapListeners(a):arrayClone(a,a.length)}EventEmitter.prototype.listeners=function t(e){return _listeners(this,e,!0)};EventEmitter.prototype.rawListeners=function t(e){return _listeners(this,e,!1)};EventEmitter.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):listenerCount.call(t,e)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}EventEmitter.prototype.eventNames=function t(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function spliceOne(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function unwrapListeners(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function once(t,e){return new Promise(function(n,i){function a(u){t.removeListener(e,c),i(u)}function c(){typeof t.removeListener=="function"&&t.removeListener("error",a),n([].slice.call(arguments))}eventTargetAgnosticAddListener(t,e,c,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(t,a,{once:!0})})}function addErrorHandlerIfEventEmitter(t,e,n){typeof t.on=="function"&&eventTargetAgnosticAddListener(t,"error",e,n)}function eventTargetAgnosticAddListener(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function a(c){i.once&&t.removeEventListener(e,a),n(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.detachTrack=t.attachToElement=t.Track=void 0;const e=events.exports,n=livekit_models,i=events$1,a=[];class c extends e.EventEmitter{constructor(l,m,y){super(),this.attachedElements=[],this.isMuted=!1,this.kind=m,this.mediaStreamTrack=l,this.name=y||""}attach(l){let m="audio";return this.kind===c.Kind.Video&&(m="video"),l||(m==="audio"&&(a.forEach(y=>{y.parentElement===null&&!l&&(l=y)}),l&&a.splice(a.indexOf(l),1)),l||(l=document.createElement(m))),l instanceof HTMLVideoElement&&(l.playsInline=!0,l.autoplay=!0),this.attachedElements.includes(l)||(u(this.mediaStreamTrack,l),this.attachedElements.push(l),l instanceof HTMLAudioElement&&l.play().then(()=>{this.emit(i.TrackEvent.AudioPlaybackStarted)}).catch(y=>{this.emit(i.TrackEvent.AudioPlaybackFailed,y)})),l}detach(l){if(l){h(this.mediaStreamTrack,l);const y=this.attachedElements.indexOf(l);return y>=0&&(this.attachedElements.splice(y,1),this.recycleElement(l)),l}const m=[];return this.attachedElements.forEach(y=>{h(this.mediaStreamTrack,y),m.push(y),this.recycleElement(y)}),this.attachedElements=[],m}stop(){this.mediaStreamTrack.stop()}recycleElement(l){if(l instanceof HTMLAudioElement){let m=!0;l.pause(),a.forEach(y=>{y.parentElement||(m=!1)}),m&&a.push(l)}}}t.Track=c;function u(s,l){let m;l.srcObject instanceof MediaStream?m=l.srcObject:(m=new MediaStream,l.srcObject=m);let y;s.kind==="audio"?y=m.getAudioTracks():y=m.getVideoTracks(),y.forEach(g=>{m.removeTrack(g)}),m.addTrack(s)}t.attachToElement=u;function h(s,l){l.srcObject instanceof MediaStream&&(l.srcObject.removeTrack(s),l.srcObject=null)}t.detachTrack=h,function(s){let l;(function(g){g.Audio="audio",g.Video="video",g.Unknown="unknown"})(l=s.Kind||(s.Kind={}));function m(g){switch(g){case l.Audio:return n.TrackType.AUDIO;case l.Video:return n.TrackType.VIDEO;default:return n.TrackType.UNRECOGNIZED}}s.kindToProto=m;function y(g){switch(g){case n.TrackType.AUDIO:return l.Audio;case n.TrackType.VIDEO:return l.Video;default:return l.Unknown}}s.kindFromProto=y}(c=t.Track||(t.Track={}))})(Track);var __awaiter$6=commonjsGlobal&&commonjsGlobal.__awaiter||function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(m){try{l(i.next(m))}catch(y){u(y)}}function s(m){try{l(i.throw(m))}catch(y){u(y)}}function l(m){m.done?c(m.value):a(m.value).then(h,s)}l((i=i.apply(t,e||[])).next())})},__importDefault$9=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(LocalTrack$1,"__esModule",{value:!0});const loglevel_1$5=__importDefault$9(loglevel.exports),errors_1$2=errors,events_1$7=events$1,options_1$1=options$1,Track_1$8=Track;class LocalTrack extends Track_1$8.Track{constructor(e,n,i,a){super(e,n,i),this.constraints=a!=null?a:e.getConstraints()}get id(){return this.mediaStreamTrack.id}get dimensions(){if(this.kind!==Track_1$8.Track.Kind.Video)return;const{width:e,height:n}=this.mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}static constraintsForOptions(e){const n={},i=Object.assign({},options_1$1.VideoPresets.qhd.resolution);typeof e.video=="object"&&e.video&&(Object.assign(i,e.video),e.video.resolution&&Object.assign(i,e.video.resolution)),e.video===!1?n.video=!1:n.video=i;const a={echoCancellation:!0,noiseSuppression:!0};return typeof e.audio=="object"&&e.audio&&Object.assign(a,e.audio),e.audio===!1?n.audio=!1:n.audio=a,n}mute(){return this.setTrackMuted(!0),this}unmute(){return this.setTrackMuted(!1),this}restart(e){return __awaiter$6(this,void 0,void 0,function*(){if(!this.sender)throw new errors_1$2.TrackInvalidError("unable to restart an unpublished track");e||(e=this.constraints),loglevel_1$5.default.debug("restarting track with constraints",e);const n={audio:!1,video:!1};this.kind===Track_1$8.Track.Kind.Video?n.video=e:n.audio=e;const a=(yield navigator.mediaDevices.getUserMedia(n)).getTracks()[0];return loglevel_1$5.default.info("re-acquired MediaStreamTrack"),this.mediaStreamTrack.stop(),this.attachedElements.forEach(c=>{Track_1$8.detachTrack(this.mediaStreamTrack,c)}),a.enabled=this.mediaStreamTrack.enabled,yield this.sender.replaceTrack(a),this.mediaStreamTrack=a,this.attachedElements.forEach(c=>{Track_1$8.attachToElement(a,c)}),this.constraints=e,this})}setTrackMuted(e){this.isMuted!==e&&(this.isMuted=e,this.mediaStreamTrack.enabled=!e,this.emit(e?events_1$7.TrackEvent.Muted:events_1$7.TrackEvent.Unmuted,this))}}LocalTrack$1.default=LocalTrack;var __awaiter$5=commonjsGlobal&&commonjsGlobal.__awaiter||function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(m){try{l(i.next(m))}catch(y){u(y)}}function s(m){try{l(i.throw(m))}catch(y){u(y)}}function l(m){m.done?c(m.value):a(m.value).then(h,s)}l((i=i.apply(t,e||[])).next())})},__importDefault$8=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(LocalAudioTrack$1,"__esModule",{value:!0});const LocalTrack_1$1=__importDefault$8(LocalTrack$1),Track_1$7=Track;class LocalAudioTrack extends LocalTrack_1$1.default{constructor(e,n,i){super(e,Track_1$7.Track.Kind.Audio,n,i)}restartTrack(e){return __awaiter$5(this,void 0,void 0,function*(){let n;if(e){const i=LocalTrack_1$1.default.constraintsForOptions({audio:e});typeof i.audio!="boolean"&&(n=i.audio)}yield this.restart(n)})}}LocalAudioTrack$1.default=LocalAudioTrack;var LocalTrackPublication$1={},TrackPublication$1={},LocalVideoTrack$1={},stats={};Object.defineProperty(stats,"__esModule",{value:!0});stats.monitorFrequency=void 0;stats.monitorFrequency=2e3;var __awaiter$4=commonjsGlobal&&commonjsGlobal.__awaiter||function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(m){try{l(i.next(m))}catch(y){u(y)}}function s(m){try{l(i.throw(m))}catch(y){u(y)}}function l(m){m.done?c(m.value):a(m.value).then(h,s)}l((i=i.apply(t,e||[])).next())})},__importDefault$7=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(LocalVideoTrack$1,"__esModule",{value:!0});const loglevel_1$4=__importDefault$7(loglevel.exports),livekit_rtc_1$3=livekit_rtc,stats_1=stats,LocalTrack_1=__importDefault$7(LocalTrack$1),Track_1$6=Track,QUALITY_UPGRADE_DELAY=60*1e3,QUALITY_DOWNGRADE_DELAY=5*1e3,ridOrder=["f","h","q"];class LocalVideoTrack extends LocalTrack_1.default{constructor(e,n,i){super(e,Track_1$6.Track.Kind.Video,n,i),this.monitorSender=()=>__awaiter$4(this,void 0,void 0,function*(){if(!this.sender)return;const a=yield this.getSenderStats(),c=new Map(a.map(u=>[u.rid,u]));this.prevStats&&this.isSimulcast&&this.checkAndUpdateSimulcast(c),this.prevStats=c,setTimeout(()=>{this.monitorSender()},stats_1.monitorFrequency)})}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){!this.isSimulcast||(this.signalClient=e,setTimeout(()=>{this.monitorSender()},stats_1.monitorFrequency))}stop(){this.sender=void 0,this.mediaStreamTrack.getConstraints(),super.stop()}mute(){return this.mediaStreamTrack.stop(),super.mute()}unmute(){return this.restartTrack(),super.unmute()}getSenderStats(){return __awaiter$4(this,void 0,void 0,function*(){if(!this.sender)return[];const e=[],n=yield this.sender.getStats();let i;return n.forEach(a=>{a.type==="track"&&a.trackIdentifier===this.mediaStreamTrack.id&&(i=a)}),i&&(n.forEach(a=>{if(a.type==="outbound-rtp"&&a.trackId===i.id){const c={type:"video",streamId:a.id,frameHeight:a.frameHeight,frameWidth:a.frameWidth,firCount:a.firCount,pliCount:a.pliCount,nackCount:a.nackCount,packetsSent:a.packetsSent,framesSent:a.framesSent,timestamp:a.timestamp,rid:a.rid,retransmittedPacketsSent:a.retransmittedPacketsSent,qualityLimitationReason:a.qualityLimitationReason,qualityLimitationResolutionChanges:a.qualityLimitationResolutionChanges},u=n.get(a.remoteId);u&&(c.jitter=u.jitter,c.packetsLost=u.packetsLost,c.roundTripTime=u.roundTripTime),e.push(c)}}),e.sort((a,c)=>{const u=ridOrder.indexOf(a.rid),h=ridOrder.indexOf(c.rid);return u===h?0:u<h?-1:1})),e})}setPublishingQuality(e){var n;if(!this.isSimulcast||!this.encodings)return;let i=!1;const a=[];if(this.encodings.forEach(u=>{var h;const s=videoQualityForRid((h=u.rid)!==null&&h!==void 0?h:""),l=s<=e;l!==u.active&&(i=!0,u.active=l),l&&a.push(s)}),!i||!this.sender||!this.sid)return;this.lastQualityChange=new Date().getTime(),this.lastExplicitQualityChange=new Date().getTime(),(n=this.signalClient)===null||n===void 0||n.sendSetSimulcastLayers(this.sid,a);const c=this.sender.getParameters();c.encodings=this.encodings,loglevel_1$4.default.debug("setting publishing quality. max quality",e),this.sender.setParameters(c)}restartTrack(e){return __awaiter$4(this,void 0,void 0,function*(){let n;if(e){const i=LocalTrack_1.default.constraintsForOptions({video:e});typeof i.video!="boolean"&&(n=i.video)}yield this.restart(n)})}checkAndUpdateSimulcast(e){var n,i;if(!this.sender||this.isMuted)return;const a=this.sender.getParameters();this.encodings=a.encodings;let c;if(this.encodings.forEach(m=>{c===void 0&&m.active&&(c=m)}),!c)return;const u=(n=c.rid)!==null&&n!==void 0?n:"",h=e.get(u),s=(i=this.prevStats)===null||i===void 0?void 0:i.get(u);if(!h||!s)return;const l=videoQualityForRid(u);if(h.qualityLimitationResolutionChanges-s.qualityLimitationResolutionChanges>0&&(this.lastQualityChange=new Date().getTime()),h.framesSent-s.framesSent>0){if(l===livekit_rtc_1$3.VideoQuality.HIGH||!this.lastQualityChange)return;const m=l+1;if(new Date().getTime()-this.lastQualityChange<QUALITY_UPGRADE_DELAY)return;loglevel_1$4.default.debug("upgrading video quality to",m),this.setPublishingQuality(m);return}this.lastExplicitQualityChange&&new Date().getTime()-this.lastExplicitQualityChange<QUALITY_DOWNGRADE_DELAY||l!==livekit_rtc_1$3.VideoQuality.UNRECOGNIZED&&l!==livekit_rtc_1$3.VideoQuality.LOW&&(loglevel_1$4.default.debug("downgrading video quality to",l-1),this.setPublishingQuality(l-1))}}LocalVideoTrack$1.default=LocalVideoTrack;function videoQualityForRid(t){switch(t){case"f":return livekit_rtc_1$3.VideoQuality.HIGH;case"h":return livekit_rtc_1$3.VideoQuality.MEDIUM;case"q":return livekit_rtc_1$3.VideoQuality.LOW;default:return livekit_rtc_1$3.VideoQuality.UNRECOGNIZED}}var RemoteAudioTrack$1={};Object.defineProperty(RemoteAudioTrack$1,"__esModule",{value:!0});const events_1$6=events$1,Track_1$5=Track;class RemoteAudioTrack extends Track_1$5.Track{constructor(e,n,i){super(e,Track_1$5.Track.Kind.Audio),this.sid=n,this.receiver=i}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this.emit(e?events_1$6.TrackEvent.Muted:events_1$6.TrackEvent.Unmuted,this))}}RemoteAudioTrack$1.default=RemoteAudioTrack;var RemoteVideoTrack$1={};Object.defineProperty(RemoteVideoTrack$1,"__esModule",{value:!0});const events_1$5=events$1,Track_1$4=Track;class RemoteVideoTrack extends Track_1$4.Track{constructor(e,n,i){super(e,Track_1$4.Track.Kind.Video),this.sid=n,this.receiver=i}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this.emit(e?events_1$5.TrackEvent.Muted:events_1$5.TrackEvent.Unmuted,this)),this.attachedElements.forEach(n=>{e?Track_1$4.detachTrack(this.mediaStreamTrack,n):Track_1$4.attachToElement(this.mediaStreamTrack,n)})}stop(){super.stop()}}RemoteVideoTrack$1.default=RemoteVideoTrack;var __importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(TrackPublication$1,"__esModule",{value:!0});const events_1$4=events.exports,events_2$1=events$1,LocalAudioTrack_1$1=__importDefault$6(LocalAudioTrack$1),LocalVideoTrack_1$1=__importDefault$6(LocalVideoTrack$1),RemoteAudioTrack_1$1=__importDefault$6(RemoteAudioTrack$1),RemoteVideoTrack_1$1=__importDefault$6(RemoteVideoTrack$1),Track_1$3=Track;class TrackPublication extends events_1$4.EventEmitter{constructor(e,n,i){super(),this.metadataMuted=!1,this.kind=e,this.trackSid=n,this.trackName=i}setTrack(e){this.track=e,e&&(e.on(events_2$1.TrackEvent.Muted,()=>{this.emit(events_2$1.TrackEvent.Muted)}),e.on(events_2$1.TrackEvent.Unmuted,()=>{this.emit(events_2$1.TrackEvent.Unmuted)}))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get audioTrack(){if(this.track instanceof LocalAudioTrack_1$1.default||this.track instanceof RemoteAudioTrack_1$1.default)return this.track}get videoTrack(){if(this.track instanceof LocalVideoTrack_1$1.default||this.track instanceof RemoteVideoTrack_1$1.default)return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.kind===Track_1$3.Track.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast)}}TrackPublication$1.default=TrackPublication;var __importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(LocalTrackPublication$1,"__esModule",{value:!0});const TrackPublication_1$1=__importDefault$5(TrackPublication$1);class LocalTrackPublication extends TrackPublication_1$1.default{constructor(e,n,i){super(e,n.sid,n.name),this.updateInfo(n),this.setTrack(i)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}mute(){var e;(e=this.track)===null||e===void 0||e.mute()}unmute(){var e;(e=this.track)===null||e===void 0||e.unmute()}}LocalTrackPublication$1.default=LocalTrackPublication;var Participant$1={};Object.defineProperty(Participant$1,"__esModule",{value:!0});const events_1$3=events.exports,events_2=events$1,Track_1$2=Track;class Participant extends events_1$3.EventEmitter{constructor(e,n){super(),this.audioLevel=0,this.isSpeaking=!1,this.sid=e,this.identity=n,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}get joinedAt(){return this.participantInfo?new Date(this.participantInfo.joinedAt*1e3):new Date}updateInfo(e){this.identity=e.identity,this.sid=e.sid,this.setMetadata(e.metadata),this.participantInfo=e}setMetadata(e){const n=!this.participantInfo||this.participantInfo.metadata!==e,i=this.metadata;this.metadata=e,n&&this.emit(events_2.ParticipantEvent.MetadataChanged,i)}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(events_2.ParticipantEvent.IsSpeakingChanged,e))}addTrackPublication(e){e.on(events_2.TrackEvent.Muted,()=>{this.emit(events_2.ParticipantEvent.TrackMuted,e)}),e.on(events_2.TrackEvent.Unmuted,()=>{this.emit(events_2.ParticipantEvent.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.tracks.set(e.trackSid,e),e.kind){case Track_1$2.Track.Kind.Audio:this.audioTracks.set(e.trackSid,e);break;case Track_1$2.Track.Kind.Video:this.videoTracks.set(e.trackSid,e);break}}}Participant$1.default=Participant;var RemoteParticipant$1={},RemoteTrackPublication$1={},__importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(RemoteTrackPublication$1,"__esModule",{value:!0});const livekit_rtc_1$2=livekit_rtc,events_1$2=events$1,TrackPublication_1=__importDefault$4(TrackPublication$1);class RemoteTrackPublication extends TrackPublication_1.default{constructor(){super(...arguments),this.disabled=!1,this.currentVideoQuality=livekit_rtc_1$2.VideoQuality.HIGH}setSubscribed(e){this.subscribed=e;const n={trackSids:[this.trackSid],subscribe:this.subscribed};this.emit(events_1$2.TrackEvent.UpdateSubscription,n)}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isEnabled(){return!this.disabled}setEnabled(e){this.disabled!==!e&&(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){this.currentVideoQuality!==e&&(this.currentVideoQuality=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}updateInfo(e){var n;super.updateInfo(e),this.metadataMuted=e.muted,(n=this.track)===null||n===void 0||n.setMuted(e.muted)}emitTrackUpdate(){const e={trackSids:[this.trackSid],disabled:this.disabled,quality:this.currentVideoQuality};this.emit(events_1$2.TrackEvent.UpdateSettings,e)}}RemoteTrackPublication$1.default=RemoteTrackPublication;var __importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(RemoteParticipant$1,"__esModule",{value:!0});const loglevel_1$3=__importDefault$3(loglevel.exports),events_1$1=events$1,RemoteAudioTrack_1=__importDefault$3(RemoteAudioTrack$1),RemoteTrackPublication_1=__importDefault$3(RemoteTrackPublication$1),RemoteVideoTrack_1=__importDefault$3(RemoteVideoTrack$1),Track_1$1=Track,Participant_1$1=__importDefault$3(Participant$1);class RemoteParticipant extends Participant_1$1.default{constructor(e,n,i){super(n,i||""),this.signalClient=e,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map}static fromParticipantInfo(e,n){const i=new RemoteParticipant(e,n.sid,n.identity);return i.updateInfo(n),i}addTrackPublication(e){super.addTrackPublication(e),e.on(events_1$1.TrackEvent.UpdateSettings,n=>{this.signalClient.sendUpdateTrackSettings(n)}),e.on(events_1$1.TrackEvent.UpdateSubscription,n=>{this.signalClient.sendUpdateSubscription(n)})}addSubscribedMediaTrack(e,n,i,a){let c=this.getTrackPublication(n);if(c||n.startsWith("TR")||this.tracks.forEach(s=>{!c&&e.kind===s.kind.toString()&&(c=s)}),!c){if(a===0){loglevel_1$3.default.error("could not find published track",this.sid,n),this.emit(events_1$1.ParticipantEvent.TrackSubscriptionFailed,n);return}a===void 0&&(a=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,i,a-1)},150);return}const u=e.kind==="video";let h;return u?h=new RemoteVideoTrack_1.default(e,n,i):h=new RemoteAudioTrack_1.default(e,n,i),c.setTrack(h),h.name=c.trackName,h.sid=c.trackSid,h.isMuted=c.isMuted,e.onended=()=>{this.emit(events_1$1.ParticipantEvent.TrackUnsubscribed,h,c)},this.emit(events_1$1.ParticipantEvent.TrackSubscribed,h,c),c}get hasMetadata(){return!!this.participantInfo}getTrackPublication(e){return this.tracks.get(e)}updateInfo(e){const n=this.hasMetadata;super.updateInfo(e);const i=new Map,a=new Map;e.tracks.forEach(c=>{let u=this.getTrackPublication(c.sid);if(u)u.updateInfo(c);else{const h=Track_1$1.Track.kindFromProto(c.type);if(!h)return;u=new RemoteTrackPublication_1.default(h,c.sid,c.name),u.updateInfo(c),a.set(c.sid,u),this.addTrackPublication(u)}i.set(c.sid,u)}),n&&a.forEach(c=>{this.emit(events_1$1.ParticipantEvent.TrackPublished,c)}),this.tracks.forEach(c=>{i.has(c.trackSid)||this.unpublishTrack(c.trackSid,!0)})}unpublishTrack(e,n){const i=this.tracks.get(e);if(!!i){switch(this.tracks.delete(e),i.kind){case Track_1$1.Track.Kind.Audio:this.audioTracks.delete(e);break;case Track_1$1.Track.Kind.Video:this.videoTracks.delete(e);break}if(i.track){const{track:a}=i;a.stop(),i.setTrack(void 0),this.emit(events_1$1.ParticipantEvent.TrackUnsubscribed,a,i)}n&&this.emit(events_1$1.ParticipantEvent.TrackUnpublished,i)}}emit(e,...n){return loglevel_1$3.default.trace("participant event",this.sid,e,...n),super.emit(e,...n)}}RemoteParticipant$1.default=RemoteParticipant;var __awaiter$3=commonjsGlobal&&commonjsGlobal.__awaiter||function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(m){try{l(i.next(m))}catch(y){u(y)}}function s(m){try{l(i.throw(m))}catch(y){u(y)}}function l(m){m.done?c(m.value):a(m.value).then(h,s)}l((i=i.apply(t,e||[])).next())})},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(LocalParticipant$1,"__esModule",{value:!0});const loglevel_1$2=__importDefault$2(loglevel.exports),livekit_rtc_1$1=livekit_rtc,errors_1$1=errors,events_1=events$1,LocalAudioTrack_1=__importDefault$2(LocalAudioTrack$1),LocalTrackPublication_1=__importDefault$2(LocalTrackPublication$1),LocalVideoTrack_1=__importDefault$2(LocalVideoTrack$1),options_1=options$1,Track_1=Track,Participant_1=__importDefault$2(Participant$1),RemoteParticipant_1=__importDefault$2(RemoteParticipant$1);class LocalParticipant extends Participant_1.default{constructor(e,n,i){super(e,n),this.onTrackUnmuted=a=>{this.onTrackMuted(a,!1)},this.onTrackMuted=(a,c)=>{if(c===void 0&&(c=!0),!a.sid){loglevel_1$2.default.error("could not update mute status for unpublished track",a);return}this.engine.updateMuteStatus(a.sid,c)},this.presets169=[options_1.VideoPresets.qvga,options_1.VideoPresets.vga,options_1.VideoPresets.qhd,options_1.VideoPresets.hd,options_1.VideoPresets.fhd],this.presets43=[options_1.VideoPresets43.qvga,options_1.VideoPresets43.vga,options_1.VideoPresets43.qhd,options_1.VideoPresets43.hd,options_1.VideoPresets43.fhd],this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=i,this.engine.on(events_1.EngineEvent.RemoteMuteChanged,(a,c)=>{const u=this.tracks.get(a);!u||!u.track||(c?u.mute():u.unmute())})}publishTrack(e,n){return __awaiter$3(this,void 0,void 0,function*(){if(e instanceof MediaStreamTrack)switch(e.kind){case"audio":e=new LocalAudioTrack_1.default(e,n==null?void 0:n.name);break;case"video":e=new LocalVideoTrack_1.default(e,n==null?void 0:n.name);break;default:throw new errors_1$1.TrackInvalidError(`unsupported MediaStreamTrack kind ${e.kind}`)}let i;if(this.tracks.forEach(y=>{!y.track||y.track===e&&(i=y)}),i)return i;e.on(events_1.TrackEvent.Muted,this.onTrackMuted),e.on(events_1.TrackEvent.Unmuted,this.onTrackUnmuted),e.mediaStreamTrack.addEventListener("ended",()=>{this.unpublishTrack(e)});const a=e.mediaStreamTrack.id,c=livekit_rtc_1$1.AddTrackRequest.fromPartial({cid:a,name:e.name,type:Track_1.Track.kindToProto(e.kind),muted:e.isMuted});e.dimensions&&(c.width=e.dimensions.width,c.height=e.dimensions.height);const u=yield this.engine.addTrack(c),h=new LocalTrackPublication_1.default(e.kind,u,e);e.sid=u.sid;let s;if(e.kind===Track_1.Track.Kind.Video){const y=e.mediaStreamTrack.getSettings();s=this.computeVideoEncodings(y.width,y.height,n)}else e.kind===Track_1.Track.Kind.Audio&&(n==null?void 0:n.audioBitrate)&&(s=[{maxBitrate:n==null?void 0:n.audioBitrate}]);if(!this.engine.publisher)throw new errors_1$1.UnexpectedConnectionState("publisher is closed");loglevel_1$2.default.debug("publishing with encodings",s);const l={direction:"sendonly"};s&&(l.sendEncodings=s);const m=this.engine.publisher.pc.addTransceiver(e.mediaStreamTrack,l);return this.engine.negotiate(),e.sender=m.sender,e instanceof LocalVideoTrack_1.default&&e.startMonitor(this.engine.client),n!=null&&n.videoCodec&&this.setPreferredCodec(m,e.kind,n.videoCodec),this.addTrackPublication(h),this.emit(events_1.ParticipantEvent.TrackPublished,h),h})}unpublishTrack(e){const n=this.getPublicationForTrack(e);if(loglevel_1$2.default.debug("unpublishTrack","unpublishing track",e),!n)return loglevel_1$2.default.warn("unpublishTrack","track was not unpublished because no publication was found",e),null;(e instanceof LocalAudioTrack_1.default||e instanceof LocalVideoTrack_1.default)&&(e.removeListener(events_1.TrackEvent.Muted,this.onTrackMuted),e.removeListener(events_1.TrackEvent.Unmuted,this.onTrackUnmuted)),e.stop();let i;switch(e instanceof MediaStreamTrack?i=e:i=e.mediaStreamTrack,this.engine.publisher&&this.engine.publisher.pc.getSenders().forEach(c=>{var u;if(c.track===i)try{(u=this.engine.publisher)===null||u===void 0||u.pc.removeTrack(c),this.engine.negotiate()}catch(h){loglevel_1$2.default.warn("unpublishTrack","failed to remove track",h)}}),this.tracks.delete(n.trackSid),n.kind){case Track_1.Track.Kind.Audio:this.audioTracks.delete(n.trackSid);break;case Track_1.Track.Kind.Video:this.videoTracks.delete(n.trackSid);break}return n}unpublishTracks(e){const n=[];return e.forEach(i=>{const a=this.unpublishTrack(i);a&&n.push(a)}),n}get publisherMetrics(){return null}publishData(e,n,i){return __awaiter$3(this,void 0,void 0,function*(){const a=[];i!==void 0&&i.forEach(u=>{u instanceof RemoteParticipant_1.default?a.push(u.sid):a.push(u)});const c={kind:n,user:{participantSid:this.sid,payload:e,destinationSids:a}};yield this.engine.sendDataPacket(c,n)})}getPublicationForTrack(e){let n;return this.tracks.forEach(i=>{const a=i.track;!a||(e instanceof MediaStreamTrack?(a instanceof LocalAudioTrack_1.default||a instanceof LocalVideoTrack_1.default)&&a.mediaStreamTrack===e&&(n=i):e===a&&(n=i))}),n}setPreferredCodec(e,n,i){if(!("getCapabilities"in RTCRtpSender))return;const a=RTCRtpSender.getCapabilities(n);if(!a)return;const c=a.codecs.find(u=>{const h=u.mimeType.toLowerCase(),s=h===`video/${i}`;return i==="h264"&&u.sdpFmtpLine?s&&u.sdpFmtpLine.includes("profile-level-id=42e01f"):s||h==="audio/opus"});c&&"setCodecPreferences"in e&&e.setCodecPreferences([c])}computeVideoEncodings(e,n,i){let a,c=i==null?void 0:i.videoEncoding;if(!(!c&&!(i!=null&&i.simulcast)||!e||!n)){if(c||(c=this.determineAppropriateEncoding(e,n),loglevel_1$2.default.debug("using video encoding",c)),i!=null&&i.simulcast){a=[{rid:"f",maxBitrate:c.maxBitrate,maxFramerate:c.maxFramerate}];const u=this.presetsForResolution(e,n),h=u[1],s=u[0];e>=960?(a.push({rid:"h",scaleResolutionDownBy:n/h.height,maxBitrate:h.encoding.maxBitrate,maxFramerate:h.encoding.maxFramerate}),a.push({rid:"q",scaleResolutionDownBy:n/s.height,maxBitrate:s.encoding.maxBitrate,maxFramerate:s.encoding.maxFramerate})):a.push({rid:"h",scaleResolutionDownBy:n/s.height,maxBitrate:s.encoding.maxBitrate,maxFramerate:s.encoding.maxFramerate})}else a=[c];return a}}determineAppropriateEncoding(e,n){const i=this.presetsForResolution(e,n);let{encoding:a}=i[0];for(let c=0;c<i.length;c+=1){const u=i[c];e>=u.width&&n>=u.height&&(a=u.encoding)}return a}presetsForResolution(e,n){const i=e/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?this.presets169:this.presets43}}LocalParticipant$1.default=LocalParticipant;var Room={},RTCEngine={},PCTransport$1={};function r(t,e,n){var i,a,c;e===void 0&&(e=50),n===void 0&&(n={});var u=(i=n.isImmediate)!=null&&i,h=(a=n.callback)!=null&&a,s=n.maxWait,l=Date.now(),m=[];function y(){if(s!==void 0){var S=Date.now()-l;if(S+e>=s)return s-S}return e}var g=function(){var S=[].slice.call(arguments),E=this;return new Promise(function(x,A){var F=u&&c===void 0;if(c!==void 0&&clearTimeout(c),c=setTimeout(function(){if(c=void 0,l=Date.now(),!u){var $=t.apply(E,S);h&&h($),m.forEach(function(k){return(0,k.resolve)($)}),m=[]}},y()),F){var D=t.apply(E,S);return h&&h(D),x(D)}m.push({resolve:x,reject:A})})};return g.cancel=function(S){c!==void 0&&clearTimeout(c),m.forEach(function(E){return(0,E.reject)(S)}),m=[]},g}var index_esm=Object.freeze(Object.defineProperty({__proto__:null,debounce:r},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(index_esm),__awaiter$2=commonjsGlobal&&commonjsGlobal.__awaiter||function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(m){try{l(i.next(m))}catch(y){u(y)}}function s(m){try{l(i.throw(m))}catch(y){u(y)}}function l(m){m.done?c(m.value):a(m.value).then(h,s)}l((i=i.apply(t,e||[])).next())})},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(PCTransport$1,"__esModule",{value:!0});const loglevel_1$1=__importDefault$1(loglevel.exports),ts_debounce_1=require$$1;class PCTransport{constructor(e){this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.negotiate=ts_debounce_1.debounce(()=>{this.createAndSendOffer()},100),this.pc=new RTCPeerConnection(e)}addIceCandidate(e){return __awaiter$2(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){return __awaiter$2(this,void 0,void 0,function*(){yield this.pc.setRemoteDescription(e),this.pendingCandidates.forEach(n=>{this.pc.addIceCandidate(n)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate&&(this.renegotiate=!1,this.createAndSendOffer())})}createAndSendOffer(e){return __awaiter$2(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(loglevel_1$1.default.debug("restarting ICE"),this.restartingIce=!0),this.pc.signalingState==="have-local-offer"){const i=this.pc.remoteDescription;if((e==null?void 0:e.iceRestart)&&i)yield this.pc.setRemoteDescription(i);else{this.renegotiate=!0;return}}loglevel_1$1.default.debug("starting to negotiate");const n=yield this.pc.createOffer(e);yield this.pc.setLocalDescription(n),this.onOffer(n)})}close(){this.pc.close()}}PCTransport$1.default=PCTransport;var utils={},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(m){try{l(i.next(m))}catch(y){u(y)}}function s(m){try{l(i.throw(m))}catch(y){u(y)}}function l(m){m.done?c(m.value):a(m.value).then(h,s)}l((i=i.apply(t,e||[])).next())})};Object.defineProperty(utils,"__esModule",{value:!0});utils.sleep=utils.useLegacyAPI=utils.unpackStreamId=void 0;const separator="|";function unpackStreamId(t){const e=t.split(separator);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}utils.unpackStreamId=unpackStreamId;function useLegacyAPI(){return typeof navigator!="undefined"&&navigator.product==="ReactNative"}utils.useLegacyAPI=useLegacyAPI;function sleep(t){return __awaiter$1(this,void 0,void 0,function*(){return new Promise(e=>setTimeout(e,t))})}utils.sleep=sleep;(function(t){var e=commonjsGlobal&&commonjsGlobal.__awaiter||function(x,A,F,D){function $(k){return k instanceof F?k:new F(function(j){j(k)})}return new(F||(F=Promise))(function(k,j){function U(q){try{G(D.next(q))}catch(f){j(f)}}function W(q){try{G(D.throw(q))}catch(f){j(f)}}function G(q){q.done?k(q.value):$(q.value).then(U,W)}G((D=D.apply(x,A||[])).next())})},n=commonjsGlobal&&commonjsGlobal.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(t,"__esModule",{value:!0}),t.maxICEConnectTimeout=void 0;const i=events.exports,a=n(loglevel.exports),c=livekit_models,u=livekit_rtc,h=errors,s=events$1,l=n(PCTransport$1),m=utils,y="_lossy",g="_reliable",S=5;t.maxICEConnectTimeout=5*1e3;class E extends i.EventEmitter{constructor(A,F){super(),this.subscriberPrimary=!1,this.iceConnected=!1,this.isClosed=!0,this.pendingTrackResolvers={},this.hasPublished=!1,this.reconnectAttempts=0,this.handleDataChannel=({channel:D})=>e(this,void 0,void 0,function*(){if(!!D){if(D.label===g)this.reliableDCSub=D;else if(D.label===y)this.lossyDCSub=D;else return;D.onmessage=this.handleDataMessage}}),this.handleDataMessage=D=>e(this,void 0,void 0,function*(){let $;if(D.data instanceof ArrayBuffer)$=D.data;else if(D.data instanceof Blob)$=yield D.data.arrayBuffer();else{a.default.error("unsupported data type",D.data);return}const k=c.DataPacket.decode(new Uint8Array($));k.speaker?this.emit(s.EngineEvent.ActiveSpeakersUpdate,k.speaker.speakers):k.user&&this.emit(s.EngineEvent.DataPacketReceived,k.user,k.kind)}),this.handleDisconnect=D=>{if(this.isClosed)return;if(a.default.debug(`${D} disconnected`),this.reconnectAttempts>=S){a.default.info("could not connect to signal after",S,"attempts. giving up"),this.close(),this.emit(s.EngineEvent.Disconnected);return}const $=this.reconnectAttempts*this.reconnectAttempts*300;setTimeout(()=>{this.reconnect().then(()=>{this.reconnectAttempts=0}).catch(this.handleDisconnect)},$)},this.client=A,this.rtcConfig=F||{}}join(A,F,D){return e(this,void 0,void 0,function*(){this.url=A,this.token=F;const $=yield this.client.join(A,F,D);return this.isClosed=!1,this.subscriberPrimary=$.subscriberPrimary,this.publisher||this.configure($),this.subscriberPrimary||(yield this.negotiate()),$})}close(){this.isClosed=!0,this.publisher&&(this.publisher.pc.getSenders().forEach(A=>{var F;try{(F=this.publisher)===null||F===void 0||F.pc.removeTrack(A)}catch(D){a.default.warn("could not removeTrack",D)}}),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),this.client.close()}addTrack(A){if(this.pendingTrackResolvers[A.cid])throw new h.TrackInvalidError("a track with the same ID has already been published");return new Promise(F=>{this.pendingTrackResolvers[A.cid]=F,this.client.sendAddTrack(A)})}updateMuteStatus(A,F){this.client.sendMuteTrack(A,F)}configure(A){if(this.publisher||this.subscriber)return;if(A.iceServers&&!this.rtcConfig.iceServers){const D=[];A.iceServers.forEach($=>{const k={urls:$.urls};$.username&&(k.username=$.username),$.credential&&(k.credential=$.credential),D.push(k)}),this.rtcConfig.iceServers=D}this.publisher=new l.default(this.rtcConfig),this.subscriber=new l.default(this.rtcConfig),this.publisher.pc.onicecandidate=D=>{!D.candidate||(a.default.trace("adding ICE candidate for peer",D.candidate),this.client.sendIceCandidate(D.candidate,u.SignalTarget.PUBLISHER))},this.subscriber.pc.onicecandidate=D=>{!D.candidate||this.client.sendIceCandidate(D.candidate,u.SignalTarget.SUBSCRIBER)},this.publisher.onOffer=D=>{this.client.sendOffer(D)};let F=this.publisher.pc;A.subscriberPrimary&&(F=this.subscriber.pc,this.subscriber.pc.ondatachannel=this.handleDataChannel),F.oniceconnectionstatechange=()=>{F.iceConnectionState==="connected"?(a.default.trace("ICE connected"),this.iceConnected||(this.iceConnected=!0,this.emit(s.EngineEvent.Connected))):F.iceConnectionState==="failed"&&(a.default.trace("ICE disconnected"),this.iceConnected&&(this.iceConnected=!1,this.handleDisconnect("peerconnection")))},this.subscriber.pc.ontrack=D=>{this.emit(s.EngineEvent.MediaTrackAdded,D.track,D.streams[0],D.receiver)},this.lossyDC=this.publisher.pc.createDataChannel(y,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.publisher.pc.createDataChannel(g,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.client.onAnswer=D=>e(this,void 0,void 0,function*(){!this.publisher||(a.default.debug("received server answer",D.type,this.publisher.pc.signalingState),yield this.publisher.setRemoteDescription(D))}),this.client.onTrickle=(D,$)=>{!this.publisher||!this.subscriber||(a.default.trace("got ICE candidate from peer",D,$),$===u.SignalTarget.PUBLISHER?this.publisher.addIceCandidate(D):this.subscriber.addIceCandidate(D))},this.client.onOffer=D=>e(this,void 0,void 0,function*(){if(!this.subscriber)return;a.default.debug("received server offer",D.type,this.subscriber.pc.signalingState),yield this.subscriber.setRemoteDescription(D);const $=yield this.subscriber.pc.createAnswer();yield this.subscriber.pc.setLocalDescription($),this.client.sendAnswer($)}),this.client.onParticipantUpdate=D=>{this.emit(s.EngineEvent.ParticipantUpdate,D)},this.client.onLocalTrackPublished=D=>{const $=this.pendingTrackResolvers[D.cid];if(!$){a.default.error("missing track resolver for ",D.cid);return}delete this.pendingTrackResolvers[D.cid],$(D.track)},this.client.onSpeakersChanged=D=>{this.emit(s.EngineEvent.SpeakersChanged,D)},this.client.onClose=()=>{this.handleDisconnect("signal")},this.client.onLeave=()=>{this.close(),this.emit(s.EngineEvent.Disconnected)},this.client.onRemoteMuteChanged=(D,$)=>{this.emit(s.EngineEvent.RemoteMuteChanged,D,$)}}reconnect(){return e(this,void 0,void 0,function*(){if(this.isClosed)return;if(!this.url||!this.token)throw new h.ConnectionError("could not reconnect, url or token not saved");if(a.default.info("reconnecting to signal connection, attempt",this.reconnectAttempts),this.reconnectAttempts===0&&this.emit(s.EngineEvent.Reconnecting),this.reconnectAttempts+=1,yield this.client.reconnect(this.url,this.token),!this.publisher||!this.subscriber)throw new h.UnexpectedConnectionState("publisher and subscriber connections unset");this.subscriber.restartingIce=!0,this.hasPublished&&(yield this.publisher.createAndSendOffer({iceRestart:!0}));const A=new Date().getTime();for(;new Date().getTime()-A<t.maxICEConnectTimeout*2;){if(this.iceConnected){this.emit(s.EngineEvent.Reconnected);return}yield m.sleep(100)}throw new h.ConnectionError("could not establish ICE connection")})}sendDataPacket(A,F){return e(this,void 0,void 0,function*(){const D=c.DataPacket.encode(A).finish();yield this.ensurePublisherConnected(),F===c.DataPacket_Kind.LOSSY&&this.lossyDC?this.lossyDC.send(D):F===c.DataPacket_Kind.RELIABLE&&this.reliableDC&&this.reliableDC.send(D)})}ensurePublisherConnected(){return e(this,void 0,void 0,function*(){if(!this.subscriberPrimary||this.publisher&&this.publisher.pc.iceConnectionState==="connected")return;yield this.negotiate();const A=new Date().getTime()+t.maxICEConnectTimeout;for(;new Date().getTime()<A;){if(this.publisher&&this.publisher.pc.iceConnectionState==="connected")return;yield m.sleep(50)}throw new h.ConnectionError("could not establish publisher connection")})}negotiate(){return e(this,void 0,void 0,function*(){!this.publisher||(this.hasPublished=!0,this.publisher.negotiate())})}}t.default=E})(RTCEngine);(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(D,$,k,j){j===void 0&&(j=k),Object.defineProperty(D,j,{enumerable:!0,get:function(){return $[k]}})}:function(D,$,k,j){j===void 0&&(j=k),D[j]=$[k]}),n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(D,$){Object.defineProperty(D,"default",{enumerable:!0,value:$})}:function(D,$){D.default=$}),i=commonjsGlobal&&commonjsGlobal.__importStar||function(D){if(D&&D.__esModule)return D;var $={};if(D!=null)for(var k in D)k!=="default"&&Object.prototype.hasOwnProperty.call(D,k)&&e($,D,k);return n($,D),$},a=commonjsGlobal&&commonjsGlobal.__awaiter||function(D,$,k,j){function U(W){return W instanceof k?W:new k(function(G){G(W)})}return new(k||(k=Promise))(function(W,G){function q(v){try{o(j.next(v))}catch(b){G(b)}}function f(v){try{o(j.throw(v))}catch(b){G(b)}}function o(v){v.done?W(v.value):U(v.value).then(q,f)}o((j=j.apply(D,$||[])).next())})},c=commonjsGlobal&&commonjsGlobal.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(t,"__esModule",{value:!0}),t.RoomState=void 0;const u=events.exports,h=c(loglevel.exports),s=livekit_models,l=errors,m=events$1,y=c(LocalParticipant$1),g=c(RemoteParticipant$1),S=i(RTCEngine),E=Track,x=utils;var A;(function(D){D.Disconnected="disconnected",D.Connected="connected",D.Reconnecting="reconnecting"})(A=t.RoomState||(t.RoomState={}));class F extends u.EventEmitter{constructor($,k){super(),this.state=A.Disconnected,this.activeSpeakers=[],this.audioEnabled=!0,this.connect=(j,U,W)=>a(this,void 0,void 0,function*(){if(this.localParticipant)return h.default.warn("already connected to room",this.name),this;try{const G=yield this.engine.join(j,U,W);if(h.default.debug("connected to Livekit Server",G.serverVersion),!G.serverVersion)throw new l.UnsupportedServer("unknown server version");this.state=A.Connected;const q=G.participant;this.localParticipant=new y.default(q.sid,q.identity,this.engine),this.localParticipant.updateInfo(q),this.localParticipant.on(m.ParticipantEvent.MetadataChanged,(f,o)=>{this.emit(m.RoomEvent.MetadataChanged,f,o)}),this.localParticipant.on(m.ParticipantEvent.TrackMuted,f=>{this.emit(m.RoomEvent.TrackMuted,f,this.localParticipant)}),this.localParticipant.on(m.ParticipantEvent.TrackUnmuted,f=>{this.emit(m.RoomEvent.TrackUnmuted,f,this.localParticipant)}),G.otherParticipants.forEach(f=>{this.getOrCreateParticipant(f.sid,f)}),this.name=G.room.name,this.sid=G.room.sid}catch(G){throw this.engine.close(),G}return new Promise((G,q)=>{const f=setTimeout(()=>{this.engine.close(),q(new l.ConnectionError("could not connect after timeout"))},S.maxICEConnectTimeout);this.engine.once(m.EngineEvent.Connected,()=>{clearTimeout(f),window.addEventListener("beforeunload",this.disconnect),G(this)})})}),this.disconnect=()=>{this.engine.client.sendLeave(),this.engine.close(),this.handleDisconnect()},this.handleActiveSpeakersUpdate=j=>{const U=[],W={};j.forEach(G=>{if(W[G.sid]=!0,G.sid===this.localParticipant.sid)this.localParticipant.audioLevel=G.level,this.localParticipant.setIsSpeaking(!0),U.push(this.localParticipant);else{const q=this.participants.get(G.sid);q&&(q.audioLevel=G.level,q.setIsSpeaking(!0),U.push(q))}}),W[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(G=>{W[G.sid]||(G.audioLevel=0,G.setIsSpeaking(!1))}),this.activeSpeakers=U,this.emit(m.RoomEvent.ActiveSpeakersChanged,U)},this.handleSpeakersChanged=j=>{const U=new Map;this.activeSpeakers.forEach(G=>{U.set(G.sid,G)}),j.forEach(G=>{let q=this.participants.get(G.sid);G.sid===this.localParticipant.sid&&(q=this.localParticipant),q&&(q.audioLevel=G.level,q.setIsSpeaking(G.active),G.active?U.set(G.sid,q):U.delete(G.sid))});const W=Array.from(U.values());W.sort((G,q)=>q.audioLevel-G.audioLevel),this.activeSpeakers=W,this.emit(m.RoomEvent.ActiveSpeakersChanged,W)},this.handleDataPacket=(j,U)=>{const W=this.participants.get(j.participantSid);this.emit(m.RoomEvent.DataReceived,j.payload,W,U),W==null||W.emit(m.ParticipantEvent.DataReceived,j.payload,U)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(m.RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=j=>{h.default.warn("could not playback audio",j),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(m.RoomEvent.AudioPlaybackStatusChanged,!1))},this.participants=new Map,this.engine=new S.default($,k),this.acquireAudioContext(),this.engine.on(m.EngineEvent.MediaTrackAdded,(j,U,W)=>{this.onTrackAdded(j,U,W)}),this.engine.on(m.EngineEvent.Disconnected,()=>{this.handleDisconnect()}),this.engine.on(m.EngineEvent.ParticipantUpdate,j=>{this.handleParticipantUpdates(j)}),this.engine.on(m.EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate),this.engine.on(m.EngineEvent.SpeakersChanged,this.handleSpeakersChanged),this.engine.on(m.EngineEvent.DataPacketReceived,this.handleDataPacket),this.engine.on(m.EngineEvent.Reconnecting,()=>{this.state=A.Reconnecting,this.emit(m.RoomEvent.Reconnecting)}),this.engine.on(m.EngineEvent.Reconnected,()=>{this.state=A.Connected,this.emit(m.RoomEvent.Reconnected)})}startAudio(){return a(this,void 0,void 0,function*(){this.acquireAudioContext();const $=[];this.participants.forEach(k=>{k.audioTracks.forEach(j=>{j.track&&j.track.attachedElements.forEach(U=>{$.push(U)})})});try{yield Promise.all($.map(k=>k.play())),this.handleAudioPlaybackStarted()}catch(k){throw this.handleAudioPlaybackFailed(k),k}})}get canPlaybackAudio(){return this.audioEnabled}onTrackAdded($,k,j){const U=x.unpackStreamId(k.id),W=U[0];let G=U[1];(!G||G==="")&&(G=$.id),this.getOrCreateParticipant(W).addSubscribedMediaTrack($,G,j)}handleDisconnect(){this.state!==A.Disconnected&&(this.participants.forEach($=>{$.tracks.forEach(k=>{$.unpublishTrack(k.trackSid)})}),this.localParticipant.tracks.forEach($=>{var k,j;(k=$.track)===null||k===void 0||k.stop(),(j=$.track)===null||j===void 0||j.detach()}),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&(this.audioContext.close(),this.audioContext=void 0),window.removeEventListener("beforeunload",this.disconnect),this.emit(m.RoomEvent.Disconnected),this.state=A.Disconnected)}handleParticipantUpdates($){$.forEach(k=>{if(k.sid===this.localParticipant.sid){this.localParticipant.updateInfo(k);return}let j=this.participants.get(k.sid);const U=!j;j=this.getOrCreateParticipant(k.sid,k),k.state===s.ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(k.sid,j):U?this.emit(m.RoomEvent.ParticipantConnected,j):j.updateInfo(k)})}handleParticipantDisconnected($,k){this.participants.delete($),k&&(k.tracks.forEach(j=>{k.unpublishTrack(j.trackSid)}),this.emit(m.RoomEvent.ParticipantDisconnected,k))}acquireAudioContext(){this.audioContext&&this.audioContext.close();const $=window.AudioContext||window.webkitAudioContext;$&&(this.audioContext=new $)}getOrCreateParticipant($,k){let j=this.participants.get($);return j||(k?j=g.default.fromParticipantInfo(this.engine.client,k):j=new g.default(this.engine.client,$,""),this.participants.set($,j),j.on(m.ParticipantEvent.TrackPublished,U=>{this.emit(m.RoomEvent.TrackPublished,U,j)}),j.on(m.ParticipantEvent.TrackSubscribed,(U,W)=>{U.kind===E.Track.Kind.Audio&&(U.on(m.TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),U.on(m.TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)),this.emit(m.RoomEvent.TrackSubscribed,U,W,j)}),j.on(m.ParticipantEvent.TrackUnpublished,U=>{this.emit(m.RoomEvent.TrackUnpublished,U,j)}),j.on(m.ParticipantEvent.TrackUnsubscribed,(U,W)=>{this.emit(m.RoomEvent.TrackUnsubscribed,U,W,j)}),j.on(m.ParticipantEvent.TrackSubscriptionFailed,U=>{this.emit(m.RoomEvent.TrackSubscriptionFailed,U,j)}),j.on(m.ParticipantEvent.TrackMuted,U=>{this.emit(m.RoomEvent.TrackMuted,U,j)}),j.on(m.ParticipantEvent.TrackUnmuted,U=>{this.emit(m.RoomEvent.TrackUnmuted,U,j)}),j.on(m.ParticipantEvent.MetadataChanged,(U,W)=>{this.emit(m.RoomEvent.MetadataChanged,U,W)})),j}emit($,...k){return h.default.debug("room event",$,...k),super.emit($,...k)}}t.default=F})(Room);var livekit={},SignalClient={};let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(t,e,n){const i=t.match(e);return i&&i.length>=n&&parseInt(i[n],10)}function wrapPeerConnectionEvent(t,e,n){if(!t.RTCPeerConnection)return;const i=t.RTCPeerConnection.prototype,a=i.addEventListener;i.addEventListener=function(u,h){if(u!==e)return a.apply(this,arguments);const s=l=>{const m=n(l);m&&(h.handleEvent?h.handleEvent(m):h(m))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(h,s),a.apply(this,[u,s])};const c=i.removeEventListener;i.removeEventListener=function(u,h){if(u!==e||!this._eventMap||!this._eventMap[e])return c.apply(this,arguments);if(!this._eventMap[e].has(h))return c.apply(this,arguments);const s=this._eventMap[e].get(h);return this._eventMap[e].delete(h),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,c.apply(this,[u,s])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(u){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),u&&this.addEventListener(e,this["_on"+e]=u)},enumerable:!0,configurable:!0})}function disableLog(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(logDisabled_=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(deprecationWarnings_=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function log$1(){if(typeof window=="object"){if(logDisabled_)return;typeof console!="undefined"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(t,e){!deprecationWarnings_||console.warn(t+" is deprecated, please use "+e+" instead.")}function detectBrowser(t){const e={browser:null,version:null};if(typeof t=="undefined"||!t.navigator)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=extractVersion(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)e.browser="chrome",e.version=extractVersion(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=extractVersion(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=extractVersion(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function isObject(t){return Object.prototype.toString.call(t)==="[object Object]"}function compactObject(t){return isObject(t)?Object.keys(t).reduce(function(e,n){const i=isObject(t[n]),a=i?compactObject(t[n]):t[n],c=i&&!Object.keys(a).length;return a===void 0||c?e:Object.assign(e,{[n]:a})},{}):t}function walkStats(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?walkStats(t,t.get(e[i]),n):i.endsWith("Ids")&&e[i].forEach(a=>{walkStats(t,t.get(a),n)})}))}function filterStats(t,e,n){const i=n?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const c=[];return t.forEach(u=>{u.type==="track"&&u.trackIdentifier===e.id&&c.push(u)}),c.forEach(u=>{t.forEach(h=>{h.type===i&&h.trackId===u.id&&walkStats(t,h,a)})}),a}const logging=log$1;function shimGetUserMedia$3(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const i=function(h){if(typeof h!="object"||h.mandatory||h.optional)return h;const s={};return Object.keys(h).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const m=typeof h[l]=="object"?h[l]:{ideal:h[l]};m.exact!==void 0&&typeof m.exact=="number"&&(m.min=m.max=m.exact);const y=function(g,S){return g?g+S.charAt(0).toUpperCase()+S.slice(1):S==="deviceId"?"sourceId":S};if(m.ideal!==void 0){s.optional=s.optional||[];let g={};typeof m.ideal=="number"?(g[y("min",l)]=m.ideal,s.optional.push(g),g={},g[y("max",l)]=m.ideal,s.optional.push(g)):(g[y("",l)]=m.ideal,s.optional.push(g))}m.exact!==void 0&&typeof m.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[y("",l)]=m.exact):["min","max"].forEach(g=>{m[g]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[y(g,l)]=m[g])})}),h.advanced&&(s.optional=(s.optional||[]).concat(h.advanced)),s},a=function(h,s){if(e.version>=61)return s(h);if(h=JSON.parse(JSON.stringify(h)),h&&typeof h.audio=="object"){const l=function(m,y,g){y in m&&!(g in m)&&(m[g]=m[y],delete m[y])};h=JSON.parse(JSON.stringify(h)),l(h.audio,"autoGainControl","googAutoGainControl"),l(h.audio,"noiseSuppression","googNoiseSuppression"),h.audio=i(h.audio)}if(h&&typeof h.video=="object"){let l=h.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const m=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!m)){delete h.video.facingMode;let y;if(l.exact==="environment"||l.ideal==="environment"?y=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(y=["front"]),y)return n.mediaDevices.enumerateDevices().then(g=>{g=g.filter(E=>E.kind==="videoinput");let S=g.find(E=>y.some(x=>E.label.toLowerCase().includes(x)));return!S&&g.length&&y.includes("back")&&(S=g[g.length-1]),S&&(h.video.deviceId=l.exact?{exact:S.deviceId}:{ideal:S.deviceId}),h.video=i(h.video),logging("chrome: "+JSON.stringify(h)),s(h)})}h.video=i(h.video)}return logging("chrome: "+JSON.stringify(h)),s(h)},c=function(h){return e.version>=64?h:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[h.name]||h.name,message:h.message,constraint:h.constraint||h.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(h,s,l){a(h,m=>{n.webkitGetUserMedia(m,s,y=>{l&&l(c(y))})})};if(n.getUserMedia=u.bind(n),n.mediaDevices.getUserMedia){const h=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(s){return a(s,l=>h(l).then(m=>{if(l.audio&&!m.getAudioTracks().length||l.video&&!m.getVideoTracks().length)throw m.getTracks().forEach(y=>{y.stop()}),new DOMException("","NotFoundError");return m},m=>Promise.reject(c(m))))}}}function shimGetDisplayMedia$2(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&!!t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(i){return e(i).then(a=>{const c=i.video&&i.video.width,u=i.video&&i.video.height,h=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,maxFrameRate:h||3}},c&&(i.video.mandatory.maxWidth=c),u&&(i.video.mandatory.maxHeight=u),t.navigator.mediaDevices.getUserMedia(i)})}}}function shimMediaStream(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function shimOnTrack$1(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",a=>{let c;t.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(h=>h.track&&h.track.id===a.track.id):c={track:a.track};const u=new Event("track");u.track=a.track,u.receiver=c,u.transceiver={receiver:c},u.streams=[i.stream],this.dispatchEvent(u)}),i.stream.getTracks().forEach(a=>{let c;t.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(h=>h.track&&h.track.id===a.id):c={track:a};const u=new Event("track");u.track=a,u.receiver=c,u.transceiver={receiver:c},u.streams=[i.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else wrapPeerConnectionEvent(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function shimGetSendersWithDtmf(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(a,c){return{track:c,get dtmf(){return this._dtmf===void 0&&(c.kind==="audio"?this._dtmf=a.createDTMFSender(c):this._dtmf=null),this._dtmf},_pc:a}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(h,s){let l=a.apply(this,arguments);return l||(l=e(this,h),this._senders.push(l)),l};const c=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(h){c.apply(this,arguments);const s=this._senders.indexOf(h);s!==-1&&this._senders.splice(s,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(c){this._senders=this._senders||[],n.apply(this,[c]),c.getTracks().forEach(u=>{this._senders.push(e(this,u))})};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(c){this._senders=this._senders||[],i.apply(this,[c]),c.getTracks().forEach(u=>{const h=this._senders.find(s=>s.track===u);h&&this._senders.splice(this._senders.indexOf(h),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,a,c]=arguments;if(arguments.length>0&&typeof i=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof i!="function"))return e.apply(this,[]);const u=function(s){const l={};return s.result().forEach(y=>{const g={id:y.id,timestamp:y.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[y.type]||y.type};y.names().forEach(S=>{g[S]=y.stat(S)}),l[g.id]=g}),l},h=function(s){return new Map(Object.keys(s).map(l=>[l,s[l]]))};if(arguments.length>=2){const s=function(l){a(h(u(l)))};return e.apply(this,[s,i])}return new Promise((s,l)=>{e.apply(this,[function(m){s(h(u(m)))},l])}).then(a,c)}}function shimSenderReceiverGetStats(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const c=n.apply(this,[]);return c.forEach(u=>u._pc=this),c});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const c=i.apply(this,arguments);return c._pc=this,c}),t.RTCRtpSender.prototype.getStats=function(){const c=this;return this._pc.getStats().then(u=>filterStats(u,c.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const a=n.apply(this,[]);return a.forEach(c=>c._pc=this),a}),wrapPeerConnectionEvent(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(c=>filterStats(c,a.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let a,c,u;return this.getSenders().forEach(h=>{h.track===i&&(a?u=!0:a=h)}),this.getReceivers().forEach(h=>(h.track===i&&(c?u=!0:c=h),h.track===i)),u||a&&c?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():c?c.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(u,h){if(!h)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const s=e.apply(this,arguments);return this._shimmedLocalStreams[h.id]?this._shimmedLocalStreams[h.id].indexOf(s)===-1&&this._shimmedLocalStreams[h.id].push(s):this._shimmedLocalStreams[h.id]=[h,s],s};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(l=>{if(this.getSenders().find(y=>y.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const h=this.getSenders();n.apply(this,arguments);const s=this.getSenders().filter(l=>h.indexOf(l)===-1);this._shimmedLocalStreams[u.id]=[u].concat(s)};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],i.apply(this,arguments)};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(h=>{const s=this._shimmedLocalStreams[h].indexOf(u);s!==-1&&this._shimmedLocalStreams[h].splice(s,1),this._shimmedLocalStreams[h].length===1&&delete this._shimmedLocalStreams[h]}),a.apply(this,arguments)}}function shimAddTrackRemoveTrack(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return shimAddTrackRemoveTrackWithNative(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const m=n.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(y=>this._reverseStreams[y.id])};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(y=>{if(this.getSenders().find(S=>S.track===y))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const y=new t.MediaStream(m.getTracks());this._streams[m.id]=y,this._reverseStreams[y.id]=m,m=y}i.apply(this,[m])};const a=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},t.RTCPeerConnection.prototype.addTrack=function(m,y){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const g=[].slice.call(arguments,1);if(g.length!==1||!g[0].getTracks().find(x=>x===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(x=>x.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const E=this._streams[y.id];if(E)E.addTrack(m),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const x=new t.MediaStream([m]);this._streams[y.id]=x,this._reverseStreams[x.id]=y,this.addStream(x)}return this.getSenders().find(x=>x.track===m)};function c(l,m){let y=m.sdp;return Object.keys(l._reverseStreams||[]).forEach(g=>{const S=l._reverseStreams[g],E=l._streams[S.id];y=y.replace(new RegExp(E.id,"g"),S.id)}),new RTCSessionDescription({type:m.type,sdp:y})}function u(l,m){let y=m.sdp;return Object.keys(l._reverseStreams||[]).forEach(g=>{const S=l._reverseStreams[g],E=l._streams[S.id];y=y.replace(new RegExp(S.id,"g"),E.id)}),new RTCSessionDescription({type:m.type,sdp:y})}["createOffer","createAnswer"].forEach(function(l){const m=t.RTCPeerConnection.prototype[l],y={[l](){const g=arguments;return arguments.length&&typeof arguments[0]=="function"?m.apply(this,[E=>{const x=c(this,E);g[0].apply(null,[x])},E=>{g[1]&&g[1].apply(null,E)},arguments[2]]):m.apply(this,arguments).then(E=>c(this,E))}};t.RTCPeerConnection.prototype[l]=y[l]});const h=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?h.apply(this,arguments):(arguments[0]=u(this,arguments[0]),h.apply(this,arguments))};const s=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const l=s.get.apply(this);return l.type===""?l:c(this,l)}}),t.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(m._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let g;Object.keys(this._streams).forEach(S=>{this._streams[S].getTracks().find(x=>m.track===x)&&(g=this._streams[S])}),g&&(g.getTracks().length===1?this.removeStream(this._reverseStreams[g.id]):g.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$2(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),!!t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=t.RTCPeerConnection.prototype[n],a={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=a[n]})}function fixNegotiationNeeded(t,e){wrapPeerConnectionEvent(t,"negotiationneeded",n=>{const i=n.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}var chromeShim=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream,shimOnTrack:shimOnTrack$1,shimGetSendersWithDtmf,shimGetStats,shimSenderReceiverGetStats,shimAddTrackRemoveTrackWithNative,shimAddTrackRemoveTrack,shimPeerConnection:shimPeerConnection$2,fixNegotiationNeeded,shimGetUserMedia:shimGetUserMedia$3,shimGetDisplayMedia:shimGetDisplayMedia$2},Symbol.toStringTag,{value:"Module"}));function filterIceServers$1(t,e){let n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(i=>{if(i&&(i.urls||i.url)){let a=i.urls||i.url;i.url&&!i.urls&&deprecated("RTCIceServer.url","RTCIceServer.urls");const c=typeof a=="string";return c&&(a=[a]),a=a.filter(u=>{if(u.indexOf("stun:")===0)return!1;const h=u.startsWith("turn")&&!u.startsWith("turn:[")&&u.includes("transport=udp");return h&&!n?(n=!0,!0):h&&!n}),delete i.url,i.urls=c?a[0]:a,!!a.length}})}var sdp={exports:{}};(function(t){var e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(function(i){return i.trim()})},e.splitSections=function(n){var i=n.split(`
m=`);return i.map(function(a,c){return(c>0?"m="+a:a).trim()+`\r
`})},e.getDescription=function(n){var i=e.splitSections(n);return i&&i[0]},e.getMediaSections=function(n){var i=e.splitSections(n);return i.shift(),i},e.matchPrefix=function(n,i){return e.splitLines(n).filter(function(a){return a.indexOf(i)===0})},e.parseCandidate=function(n){var i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");for(var a={foundation:i[0],component:parseInt(i[1],10),protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]},c=8;c<i.length;c+=2)switch(i[c]){case"raddr":a.relatedAddress=i[c+1];break;case"rport":a.relatedPort=parseInt(i[c+1],10);break;case"tcptype":a.tcpType=i[c+1];break;case"ufrag":a.ufrag=i[c+1],a.usernameFragment=i[c+1];break;default:a[i[c]]=i[c+1];break}return a},e.writeCandidate=function(n){var i=[];i.push(n.foundation),i.push(n.component),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);var a=n.type;return i.push("typ"),i.push(a),a!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(n){return n.substr(14).split(" ")},e.parseRtpMap=function(n){var i=n.substr(9).split(" "),a={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),a.name=i[0],a.clockRate=parseInt(i[1],10),a.channels=i.length===3?parseInt(i[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(n){var i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);var a=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(n){var i=n.substr(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1]}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+`\r
`},e.parseFmtp=function(n){for(var i={},a,c=n.substr(n.indexOf(" ")+1).split(";"),u=0;u<c.length;u++)a=c[u].trim().split("="),i[a[0].trim()]=a[1];return i},e.writeFmtp=function(n){var i="",a=n.payloadType;if(n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){var c=[];Object.keys(n.parameters).forEach(function(u){n.parameters[u]?c.push(u+"="+n.parameters[u]):c.push(u)}),i+="a=fmtp:"+a+" "+c.join(";")+`\r
`}return i},e.parseRtcpFb=function(n){var i=n.substr(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(n){var i="",a=n.payloadType;return n.preferredPayloadType!==void 0&&(a=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(c){i+="a=rtcp-fb:"+a+" "+c.type+(c.parameter&&c.parameter.length?" "+c.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(n){var i=n.indexOf(" "),a={ssrc:parseInt(n.substr(7,i-7),10)},c=n.indexOf(":",i);return c>-1?(a.attribute=n.substr(i+1,c-i-1),a.value=n.substr(c+1)):a.attribute=n.substr(i+1),a},e.parseSsrcGroup=function(n){var i=n.substr(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(function(a){return parseInt(a,10)})}},e.getMid=function(n){var i=e.matchPrefix(n,"a=mid:")[0];if(i)return i.substr(6)},e.parseFingerprint=function(n){var i=n.substr(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1]}},e.getDtlsParameters=function(n,i){var a=e.matchPrefix(n+i,"a=fingerprint:");return{role:"auto",fingerprints:a.map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,i){var a="a=setup:"+i+`\r
`;return n.fingerprints.forEach(function(c){a+="a=fingerprint:"+c.algorithm+" "+c.value+`\r
`}),a},e.parseCryptoLine=function(n){var i=n.substr(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;var i=n.substr(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,i){var a=e.matchPrefix(n+i,"a=crypto:");return a.map(e.parseCryptoLine)},e.getIceParameters=function(n,i){var a=e.matchPrefix(n+i,"a=ice-ufrag:")[0],c=e.matchPrefix(n+i,"a=ice-pwd:")[0];return a&&c?{usernameFragment:a.substr(12),password:c.substr(10)}:null},e.writeIceParameters=function(n){return"a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`},e.parseRtpParameters=function(n){for(var i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(n),c=a[0].split(" "),u=3;u<c.length;u++){var h=c[u],s=e.matchPrefix(n,"a=rtpmap:"+h+" ")[0];if(s){var l=e.parseRtpMap(s),m=e.matchPrefix(n,"a=fmtp:"+h+" ");switch(l.parameters=m.length?e.parseFmtp(m[0]):{},l.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+h+" ").map(e.parseRtcpFb),i.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(l.name.toUpperCase());break}}}return e.matchPrefix(n,"a=extmap:").forEach(function(y){i.headerExtensions.push(e.parseExtmap(y))}),i},e.writeRtpDescription=function(n,i){var a="";a+="m="+n+" ",a+=i.codecs.length>0?"9":"0",a+=" UDP/TLS/RTP/SAVPF ",a+=i.codecs.map(function(u){return u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType}).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(function(u){a+=e.writeRtpMap(u),a+=e.writeFmtp(u),a+=e.writeRtcpFb(u)});var c=0;return i.codecs.forEach(function(u){u.maxptime>c&&(c=u.maxptime)}),c>0&&(a+="a=maxptime:"+c+`\r
`),a+=`a=rtcp-mux\r
`,i.headerExtensions&&i.headerExtensions.forEach(function(u){a+=e.writeExtmap(u)}),a},e.parseRtpEncodingParameters=function(n){var i=[],a=e.parseRtpParameters(n),c=a.fecMechanisms.indexOf("RED")!==-1,u=a.fecMechanisms.indexOf("ULPFEC")!==-1,h=e.matchPrefix(n,"a=ssrc:").map(function(g){return e.parseSsrcMedia(g)}).filter(function(g){return g.attribute==="cname"}),s=h.length>0&&h[0].ssrc,l,m=e.matchPrefix(n,"a=ssrc-group:FID").map(function(g){var S=g.substr(17).split(" ");return S.map(function(E){return parseInt(E,10)})});m.length>0&&m[0].length>1&&m[0][0]===s&&(l=m[0][1]),a.codecs.forEach(function(g){if(g.name.toUpperCase()==="RTX"&&g.parameters.apt){var S={ssrc:s,codecPayloadType:parseInt(g.parameters.apt,10)};s&&l&&(S.rtx={ssrc:l}),i.push(S),c&&(S=JSON.parse(JSON.stringify(S)),S.fec={ssrc:s,mechanism:u?"red+ulpfec":"red"},i.push(S))}}),i.length===0&&s&&i.push({ssrc:s});var y=e.matchPrefix(n,"b=");return y.length&&(y[0].indexOf("b=TIAS:")===0?y=parseInt(y[0].substr(7),10):y[0].indexOf("b=AS:")===0?y=parseInt(y[0].substr(5),10)*1e3*.95-50*40*8:y=void 0,i.forEach(function(g){g.maxBitrate=y})),i},e.parseRtcpParameters=function(n){var i={},a=e.matchPrefix(n,"a=ssrc:").map(function(h){return e.parseSsrcMedia(h)}).filter(function(h){return h.attribute==="cname"})[0];a&&(i.cname=a.value,i.ssrc=a.ssrc);var c=e.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=c.length>0,i.compound=c.length===0;var u=e.matchPrefix(n,"a=rtcp-mux");return i.mux=u.length>0,i},e.parseMsid=function(n){var i,a=e.matchPrefix(n,"a=msid:");if(a.length===1)return i=a[0].substr(7).split(" "),{stream:i[0],track:i[1]};var c=e.matchPrefix(n,"a=ssrc:").map(function(u){return e.parseSsrcMedia(u)}).filter(function(u){return u.attribute==="msid"});if(c.length>0)return i=c[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(n){var i=e.parseMLine(n),a=e.matchPrefix(n,"a=max-message-size:"),c;a.length>0&&(c=parseInt(a[0].substr(19),10)),isNaN(c)&&(c=65536);var u=e.matchPrefix(n,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substr(12),10),protocol:i.fmt,maxMessageSize:c};var h=e.matchPrefix(n,"a=sctpmap:");if(h.length>0){var s=e.matchPrefix(n,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:c}}},e.writeSctpDescription=function(n,i){var a=[];return n.protocol!=="DTLS/SCTP"?a=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:a=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&a.push("a=max-message-size:"+i.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(n,i,a){var c,u=i!==void 0?i:2;n?c=n:c=e.generateSessionId();var h=a||"thisisadapterortc";return`v=0\r
o=`+h+" "+c+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(n,i,a,c){var u=e.writeRtpDescription(n.kind,i);if(u+=e.writeIceParameters(n.iceGatherer.getLocalParameters()),u+=e.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),a==="offer"?"actpass":"active"),u+="a=mid:"+n.mid+`\r
`,n.direction?u+="a="+n.direction+`\r
`:n.rtpSender&&n.rtpReceiver?u+=`a=sendrecv\r
`:n.rtpSender?u+=`a=sendonly\r
`:n.rtpReceiver?u+=`a=recvonly\r
`:u+=`a=inactive\r
`,n.rtpSender){var h="msid:"+c.id+" "+n.rtpSender.track.id+`\r
`;u+="a="+h,u+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+h,n.sendEncodingParameters[0].rtx&&(u+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+h,u+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return u+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(u+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),u},e.getDirection=function(n,i){for(var a=e.splitLines(n),c=0;c<a.length;c++)switch(a[c]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[c].substr(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(n){var i=e.splitLines(n),a=i[0].split(" ");return a[0].substr(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){var i=e.splitLines(n),a=i[0].substr(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(n){var i=e.matchPrefix(n,"o=")[0],a=i.substr(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;for(var i=e.splitLines(n),a=0;a<i.length;a++)if(i[a].length<2||i[a].charAt(1)!=="=")return!1;return!0},t.exports=e})(sdp);var SDPUtils$1=sdp.exports,SDPUtils=sdp.exports;function fixStatsType(t){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type}function writeMediaSection(t,e,n,i,a){var c=SDPUtils.writeRtpDescription(t.kind,e);if(c+=SDPUtils.writeIceParameters(t.iceGatherer.getLocalParameters()),c+=SDPUtils.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":a||"active"),c+="a=mid:"+t.mid+`\r
`,t.rtpSender&&t.rtpReceiver?c+=`a=sendrecv\r
`:t.rtpSender?c+=`a=sendonly\r
`:t.rtpReceiver?c+=`a=recvonly\r
`:c+=`a=inactive\r
`,t.rtpSender){var u=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=u;var h="msid:"+(i?i.id:"-")+" "+u+`\r
`;c+="a="+h,c+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+h,t.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+h,c+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return c+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+SDPUtils.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+SDPUtils.localCName+`\r
`),c}function filterIceServers(t,e){var n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(function(i){if(i&&(i.urls||i.url)){var a=i.urls||i.url;i.url&&!i.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var c=typeof a=="string";return c&&(a=[a]),a=a.filter(function(u){var h=u.indexOf("turn:")===0&&u.indexOf("transport=udp")!==-1&&u.indexOf("turn:[")===-1&&!n;return h?(n=!0,!0):u.indexOf("stun:")===0&&e>=14393&&u.indexOf("?transport=udp")===-1}),delete i.url,i.urls=c?a[0]:a,!!a.length}})}function getCommonCapabilities(t,e){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(c,u){c=parseInt(c,10);for(var h=0;h<u.length;h++)if(u[h].payloadType===c||u[h].preferredPayloadType===c)return u[h]},a=function(c,u,h,s){var l=i(c.parameters.apt,h),m=i(u.parameters.apt,s);return l&&m&&l.name.toLowerCase()===m.name.toLowerCase()};return t.codecs.forEach(function(c){for(var u=0;u<e.codecs.length;u++){var h=e.codecs[u];if(c.name.toLowerCase()===h.name.toLowerCase()&&c.clockRate===h.clockRate){if(c.name.toLowerCase()==="rtx"&&c.parameters&&h.parameters.apt&&!a(c,h,t.codecs,e.codecs))continue;h=JSON.parse(JSON.stringify(h)),h.numChannels=Math.min(c.numChannels,h.numChannels),n.codecs.push(h),h.rtcpFeedback=h.rtcpFeedback.filter(function(s){for(var l=0;l<c.rtcpFeedback.length;l++)if(c.rtcpFeedback[l].type===s.type&&c.rtcpFeedback[l].parameter===s.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(c){for(var u=0;u<e.headerExtensions.length;u++){var h=e.headerExtensions[u];if(c.uri===h.uri){n.headerExtensions.push(h);break}}}),n}function isActionAllowedInSignalingState(t,e,n){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(n)!==-1}function maybeAddCandidate(t,e){var n=t.getRemoteCandidates().find(function(i){return e.foundation===i.foundation&&e.ip===i.ip&&e.port===i.port&&e.priority===i.priority&&e.protocol===i.protocol&&e.type===i.type});return n||t.addRemoteCandidate(e),!n}function makeError(t,e){var n=new Error(e);return n.name=t,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],n}var rtcpeerconnection=function(t,e){function n(s,l){l.addTrack(s),l.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:s}))}function i(s,l){l.removeTrack(s),l.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:s}))}function a(s,l,m,y){var g=new Event("track");g.track=l,g.receiver=m,g.transceiver={receiver:m},g.streams=y,t.setTimeout(function(){s._dispatchEvent("track",g)})}var c=function(s){var l=this,m=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(g){l[g]=m[g].bind(m)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",s=JSON.parse(JSON.stringify(s||{})),this.usingBundle=s.bundlePolicy==="max-bundle",s.rtcpMuxPolicy==="negotiate")throw makeError("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(s.rtcpMuxPolicy||(s.rtcpMuxPolicy="require"),s.iceTransportPolicy){case"all":case"relay":break;default:s.iceTransportPolicy="all";break}switch(s.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:s.bundlePolicy="balanced";break}if(s.iceServers=filterIceServers(s.iceServers||[],e),this._iceGatherers=[],s.iceCandidatePoolSize)for(var y=s.iceCandidatePoolSize;y>0;y--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:s.iceServers,gatherPolicy:s.iceTransportPolicy}));else s.iceCandidatePoolSize=0;this._config=s,this.transceivers=[],this._sdpSessionId=SDPUtils.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(c.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(c.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),c.prototype.onicecandidate=null,c.prototype.onaddstream=null,c.prototype.ontrack=null,c.prototype.onremovestream=null,c.prototype.onsignalingstatechange=null,c.prototype.oniceconnectionstatechange=null,c.prototype.onconnectionstatechange=null,c.prototype.onicegatheringstatechange=null,c.prototype.onnegotiationneeded=null,c.prototype.ondatachannel=null,c.prototype._dispatchEvent=function(s,l){this._isClosed||(this.dispatchEvent(l),typeof this["on"+s]=="function"&&this["on"+s](l))},c.prototype._emitGatheringStateChange=function(){var s=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",s)},c.prototype.getConfiguration=function(){return this._config},c.prototype.getLocalStreams=function(){return this.localStreams},c.prototype.getRemoteStreams=function(){return this.remoteStreams},c.prototype._createTransceiver=function(s,l){var m=this.transceivers.length>0,y={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:s,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&m)y.iceTransport=this.transceivers[0].iceTransport,y.dtlsTransport=this.transceivers[0].dtlsTransport;else{var g=this._createIceAndDtlsTransports();y.iceTransport=g.iceTransport,y.dtlsTransport=g.dtlsTransport}return l||this.transceivers.push(y),y},c.prototype.addTrack=function(s,l){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var m=this.transceivers.find(function(S){return S.track===s});if(m)throw makeError("InvalidAccessError","Track already exists.");for(var y,g=0;g<this.transceivers.length;g++)!this.transceivers[g].track&&this.transceivers[g].kind===s.kind&&(y=this.transceivers[g]);return y||(y=this._createTransceiver(s.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(l)===-1&&this.localStreams.push(l),y.track=s,y.stream=l,y.rtpSender=new t.RTCRtpSender(s,y.dtlsTransport),y.rtpSender},c.prototype.addStream=function(s){var l=this;if(e>=15025)s.getTracks().forEach(function(y){l.addTrack(y,s)});else{var m=s.clone();s.getTracks().forEach(function(y,g){var S=m.getTracks()[g];y.addEventListener("enabled",function(E){S.enabled=E.enabled})}),m.getTracks().forEach(function(y){l.addTrack(y,m)})}},c.prototype.removeTrack=function(s){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(s instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var l=this.transceivers.find(function(g){return g.rtpSender===s});if(!l)throw makeError("InvalidAccessError","Sender was not created by this connection.");var m=l.stream;l.rtpSender.stop(),l.rtpSender=null,l.track=null,l.stream=null;var y=this.transceivers.map(function(g){return g.stream});y.indexOf(m)===-1&&this.localStreams.indexOf(m)>-1&&this.localStreams.splice(this.localStreams.indexOf(m),1),this._maybeFireNegotiationNeeded()},c.prototype.removeStream=function(s){var l=this;s.getTracks().forEach(function(m){var y=l.getSenders().find(function(g){return g.track===m});y&&l.removeTrack(y)})},c.prototype.getSenders=function(){return this.transceivers.filter(function(s){return!!s.rtpSender}).map(function(s){return s.rtpSender})},c.prototype.getReceivers=function(){return this.transceivers.filter(function(s){return!!s.rtpReceiver}).map(function(s){return s.rtpReceiver})},c.prototype._createIceGatherer=function(s,l){var m=this;if(l&&s>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var y=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(y,"state",{value:"new",writable:!0}),this.transceivers[s].bufferedCandidateEvents=[],this.transceivers[s].bufferCandidates=function(g){var S=!g.candidate||Object.keys(g.candidate).length===0;y.state=S?"completed":"gathering",m.transceivers[s].bufferedCandidateEvents!==null&&m.transceivers[s].bufferedCandidateEvents.push(g)},y.addEventListener("localcandidate",this.transceivers[s].bufferCandidates),y},c.prototype._gather=function(s,l){var m=this,y=this.transceivers[l].iceGatherer;if(!y.onlocalcandidate){var g=this.transceivers[l].bufferedCandidateEvents;this.transceivers[l].bufferedCandidateEvents=null,y.removeEventListener("localcandidate",this.transceivers[l].bufferCandidates),y.onlocalcandidate=function(S){if(!(m.usingBundle&&l>0)){var E=new Event("icecandidate");E.candidate={sdpMid:s,sdpMLineIndex:l};var x=S.candidate,A=!x||Object.keys(x).length===0;if(A)(y.state==="new"||y.state==="gathering")&&(y.state="completed");else{y.state==="new"&&(y.state="gathering"),x.component=1,x.ufrag=y.getLocalParameters().usernameFragment;var F=SDPUtils.writeCandidate(x);E.candidate=Object.assign(E.candidate,SDPUtils.parseCandidate(F)),E.candidate.candidate=F,E.candidate.toJSON=function(){return{candidate:E.candidate.candidate,sdpMid:E.candidate.sdpMid,sdpMLineIndex:E.candidate.sdpMLineIndex,usernameFragment:E.candidate.usernameFragment}}}var D=SDPUtils.getMediaSections(m._localDescription.sdp);A?D[E.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:D[E.candidate.sdpMLineIndex]+="a="+E.candidate.candidate+`\r
`,m._localDescription.sdp=SDPUtils.getDescription(m._localDescription.sdp)+D.join("");var $=m.transceivers.every(function(k){return k.iceGatherer&&k.iceGatherer.state==="completed"});m.iceGatheringState!=="gathering"&&(m.iceGatheringState="gathering",m._emitGatheringStateChange()),A||m._dispatchEvent("icecandidate",E),$&&(m._dispatchEvent("icecandidate",new Event("icecandidate")),m.iceGatheringState="complete",m._emitGatheringStateChange())}},t.setTimeout(function(){g.forEach(function(S){y.onlocalcandidate(S)})},0)}},c.prototype._createIceAndDtlsTransports=function(){var s=this,l=new t.RTCIceTransport(null);l.onicestatechange=function(){s._updateIceConnectionState(),s._updateConnectionState()};var m=new t.RTCDtlsTransport(l);return m.ondtlsstatechange=function(){s._updateConnectionState()},m.onerror=function(){Object.defineProperty(m,"state",{value:"failed",writable:!0}),s._updateConnectionState()},{iceTransport:l,dtlsTransport:m}},c.prototype._disposeIceAndDtlsTransports=function(s){var l=this.transceivers[s].iceGatherer;l&&(delete l.onlocalcandidate,delete this.transceivers[s].iceGatherer);var m=this.transceivers[s].iceTransport;m&&(delete m.onicestatechange,delete this.transceivers[s].iceTransport);var y=this.transceivers[s].dtlsTransport;y&&(delete y.ondtlsstatechange,delete y.onerror,delete this.transceivers[s].dtlsTransport)},c.prototype._transceive=function(s,l,m){var y=getCommonCapabilities(s.localCapabilities,s.remoteCapabilities);l&&s.rtpSender&&(y.encodings=s.sendEncodingParameters,y.rtcp={cname:SDPUtils.localCName,compound:s.rtcpParameters.compound},s.recvEncodingParameters.length&&(y.rtcp.ssrc=s.recvEncodingParameters[0].ssrc),s.rtpSender.send(y)),m&&s.rtpReceiver&&y.codecs.length>0&&(s.kind==="video"&&s.recvEncodingParameters&&e<15019&&s.recvEncodingParameters.forEach(function(g){delete g.rtx}),s.recvEncodingParameters.length?y.encodings=s.recvEncodingParameters:y.encodings=[{}],y.rtcp={compound:s.rtcpParameters.compound},s.rtcpParameters.cname&&(y.rtcp.cname=s.rtcpParameters.cname),s.sendEncodingParameters.length&&(y.rtcp.ssrc=s.sendEncodingParameters[0].ssrc),s.rtpReceiver.receive(y))},c.prototype.setLocalDescription=function(s){var l=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(makeError("TypeError",'Unsupported type "'+s.type+'"'));if(!isActionAllowedInSignalingState("setLocalDescription",s.type,l.signalingState)||l._isClosed)return Promise.reject(makeError("InvalidStateError","Can not set local "+s.type+" in state "+l.signalingState));var m,y;if(s.type==="offer")m=SDPUtils.splitSections(s.sdp),y=m.shift(),m.forEach(function(S,E){var x=SDPUtils.parseRtpParameters(S);l.transceivers[E].localCapabilities=x}),l.transceivers.forEach(function(S,E){l._gather(S.mid,E)});else if(s.type==="answer"){m=SDPUtils.splitSections(l._remoteDescription.sdp),y=m.shift();var g=SDPUtils.matchPrefix(y,"a=ice-lite").length>0;m.forEach(function(S,E){var x=l.transceivers[E],A=x.iceGatherer,F=x.iceTransport,D=x.dtlsTransport,$=x.localCapabilities,k=x.remoteCapabilities,j=SDPUtils.isRejected(S)&&SDPUtils.matchPrefix(S,"a=bundle-only").length===0;if(!j&&!x.rejected){var U=SDPUtils.getIceParameters(S,y),W=SDPUtils.getDtlsParameters(S,y);g&&(W.role="server"),(!l.usingBundle||E===0)&&(l._gather(x.mid,E),F.state==="new"&&F.start(A,U,g?"controlling":"controlled"),D.state==="new"&&D.start(W));var G=getCommonCapabilities($,k);l._transceive(x,G.codecs.length>0,!1)}})}return l._localDescription={type:s.type,sdp:s.sdp},s.type==="offer"?l._updateSignalingState("have-local-offer"):l._updateSignalingState("stable"),Promise.resolve()},c.prototype.setRemoteDescription=function(s){var l=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(makeError("TypeError",'Unsupported type "'+s.type+'"'));if(!isActionAllowedInSignalingState("setRemoteDescription",s.type,l.signalingState)||l._isClosed)return Promise.reject(makeError("InvalidStateError","Can not set remote "+s.type+" in state "+l.signalingState));var m={};l.remoteStreams.forEach(function(F){m[F.id]=F});var y=[],g=SDPUtils.splitSections(s.sdp),S=g.shift(),E=SDPUtils.matchPrefix(S,"a=ice-lite").length>0,x=SDPUtils.matchPrefix(S,"a=group:BUNDLE ").length>0;l.usingBundle=x;var A=SDPUtils.matchPrefix(S,"a=ice-options:")[0];return A?l.canTrickleIceCandidates=A.substr(14).split(" ").indexOf("trickle")>=0:l.canTrickleIceCandidates=!1,g.forEach(function(F,D){var $=SDPUtils.splitLines(F),k=SDPUtils.getKind(F),j=SDPUtils.isRejected(F)&&SDPUtils.matchPrefix(F,"a=bundle-only").length===0,U=$[0].substr(2).split(" ")[2],W=SDPUtils.getDirection(F,S),G=SDPUtils.parseMsid(F),q=SDPUtils.getMid(F)||SDPUtils.generateIdentifier();if(j||k==="application"&&(U==="DTLS/SCTP"||U==="UDP/DTLS/SCTP")){l.transceivers[D]={mid:q,kind:k,protocol:U,rejected:!0};return}!j&&l.transceivers[D]&&l.transceivers[D].rejected&&(l.transceivers[D]=l._createTransceiver(k,!0));var f,o,v,b,T,_,B,ee,V,Z=SDPUtils.parseRtpParameters(F),H,Q;j||(H=SDPUtils.getIceParameters(F,S),Q=SDPUtils.getDtlsParameters(F,S),Q.role="client"),B=SDPUtils.parseRtpEncodingParameters(F);var te=SDPUtils.parseRtcpParameters(F),N=SDPUtils.matchPrefix(F,"a=end-of-candidates",S).length>0,M=SDPUtils.matchPrefix(F,"a=candidate:").map(function(re){return SDPUtils.parseCandidate(re)}).filter(function(re){return re.component===1});if((s.type==="offer"||s.type==="answer")&&!j&&x&&D>0&&l.transceivers[D]&&(l._disposeIceAndDtlsTransports(D),l.transceivers[D].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[D].iceTransport=l.transceivers[0].iceTransport,l.transceivers[D].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[D].rtpSender&&l.transceivers[D].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[D].rtpReceiver&&l.transceivers[D].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),s.type==="offer"&&!j){f=l.transceivers[D]||l._createTransceiver(k),f.mid=q,f.iceGatherer||(f.iceGatherer=l._createIceGatherer(D,x)),M.length&&f.iceTransport.state==="new"&&(N&&(!x||D===0)?f.iceTransport.setRemoteCandidates(M):M.forEach(function(re){maybeAddCandidate(f.iceTransport,re)})),ee=t.RTCRtpReceiver.getCapabilities(k),e<15019&&(ee.codecs=ee.codecs.filter(function(re){return re.name!=="rtx"})),_=f.sendEncodingParameters||[{ssrc:(2*D+2)*1001}];var J=!1;if(W==="sendrecv"||W==="sendonly"){if(J=!f.rtpReceiver,T=f.rtpReceiver||new t.RTCRtpReceiver(f.dtlsTransport,k),J){var O;V=T.track,G&&G.stream==="-"||(G?(m[G.stream]||(m[G.stream]=new t.MediaStream,Object.defineProperty(m[G.stream],"id",{get:function(){return G.stream}})),Object.defineProperty(V,"id",{get:function(){return G.track}}),O=m[G.stream]):(m.default||(m.default=new t.MediaStream),O=m.default)),O&&(n(V,O),f.associatedRemoteMediaStreams.push(O)),y.push([V,T,O])}}else f.rtpReceiver&&f.rtpReceiver.track&&(f.associatedRemoteMediaStreams.forEach(function(re){var Y=re.getTracks().find(function(C){return C.id===f.rtpReceiver.track.id});Y&&i(Y,re)}),f.associatedRemoteMediaStreams=[]);f.localCapabilities=ee,f.remoteCapabilities=Z,f.rtpReceiver=T,f.rtcpParameters=te,f.sendEncodingParameters=_,f.recvEncodingParameters=B,l._transceive(l.transceivers[D],!1,J)}else if(s.type==="answer"&&!j){f=l.transceivers[D],o=f.iceGatherer,v=f.iceTransport,b=f.dtlsTransport,T=f.rtpReceiver,_=f.sendEncodingParameters,ee=f.localCapabilities,l.transceivers[D].recvEncodingParameters=B,l.transceivers[D].remoteCapabilities=Z,l.transceivers[D].rtcpParameters=te,M.length&&v.state==="new"&&((E||N)&&(!x||D===0)?v.setRemoteCandidates(M):M.forEach(function(re){maybeAddCandidate(f.iceTransport,re)})),(!x||D===0)&&(v.state==="new"&&v.start(o,H,"controlling"),b.state==="new"&&b.start(Q));var P=getCommonCapabilities(f.localCapabilities,f.remoteCapabilities),L=P.codecs.filter(function(re){return re.name.toLowerCase()==="rtx"}).length;!L&&f.sendEncodingParameters[0].rtx&&delete f.sendEncodingParameters[0].rtx,l._transceive(f,W==="sendrecv"||W==="recvonly",W==="sendrecv"||W==="sendonly"),T&&(W==="sendrecv"||W==="sendonly")?(V=T.track,G?(m[G.stream]||(m[G.stream]=new t.MediaStream),n(V,m[G.stream]),y.push([V,T,m[G.stream]])):(m.default||(m.default=new t.MediaStream),n(V,m.default),y.push([V,T,m.default]))):delete f.rtpReceiver}}),l._dtlsRole===void 0&&(l._dtlsRole=s.type==="offer"?"active":"passive"),l._remoteDescription={type:s.type,sdp:s.sdp},s.type==="offer"?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(m).forEach(function(F){var D=m[F];if(D.getTracks().length){if(l.remoteStreams.indexOf(D)===-1){l.remoteStreams.push(D);var $=new Event("addstream");$.stream=D,t.setTimeout(function(){l._dispatchEvent("addstream",$)})}y.forEach(function(k){var j=k[0],U=k[1];D.id===k[2].id&&a(l,j,U,[D])})}}),y.forEach(function(F){F[2]||a(l,F[0],F[1],[])}),t.setTimeout(function(){!(l&&l.transceivers)||l.transceivers.forEach(function(F){F.iceTransport&&F.iceTransport.state==="new"&&F.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),F.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},c.prototype.close=function(){this.transceivers.forEach(function(s){s.iceTransport&&s.iceTransport.stop(),s.dtlsTransport&&s.dtlsTransport.stop(),s.rtpSender&&s.rtpSender.stop(),s.rtpReceiver&&s.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},c.prototype._updateSignalingState=function(s){this.signalingState=s;var l=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",l)},c.prototype._maybeFireNegotiationNeeded=function(){var s=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,t.setTimeout(function(){if(s.needNegotiation){s.needNegotiation=!1;var l=new Event("negotiationneeded");s._dispatchEvent("negotiationneeded",l)}},0))},c.prototype._updateIceConnectionState=function(){var s,l={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(y){y.iceTransport&&!y.rejected&&l[y.iceTransport.state]++}),s="new",l.failed>0?s="failed":l.checking>0?s="checking":l.disconnected>0?s="disconnected":l.new>0?s="new":l.connected>0?s="connected":l.completed>0&&(s="completed"),s!==this.iceConnectionState){this.iceConnectionState=s;var m=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",m)}},c.prototype._updateConnectionState=function(){var s,l={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(y){y.iceTransport&&y.dtlsTransport&&!y.rejected&&(l[y.iceTransport.state]++,l[y.dtlsTransport.state]++)}),l.connected+=l.completed,s="new",l.failed>0?s="failed":l.connecting>0?s="connecting":l.disconnected>0?s="disconnected":l.new>0?s="new":l.connected>0&&(s="connected"),s!==this.connectionState){this.connectionState=s;var m=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",m)}},c.prototype.createOffer=function(){var s=this;if(s._isClosed)return Promise.reject(makeError("InvalidStateError","Can not call createOffer after close"));var l=s.transceivers.filter(function(E){return E.kind==="audio"}).length,m=s.transceivers.filter(function(E){return E.kind==="video"}).length,y=arguments[0];if(y){if(y.mandatory||y.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");y.offerToReceiveAudio!==void 0&&(y.offerToReceiveAudio===!0?l=1:y.offerToReceiveAudio===!1?l=0:l=y.offerToReceiveAudio),y.offerToReceiveVideo!==void 0&&(y.offerToReceiveVideo===!0?m=1:y.offerToReceiveVideo===!1?m=0:m=y.offerToReceiveVideo)}for(s.transceivers.forEach(function(E){E.kind==="audio"?(l--,l<0&&(E.wantReceive=!1)):E.kind==="video"&&(m--,m<0&&(E.wantReceive=!1))});l>0||m>0;)l>0&&(s._createTransceiver("audio"),l--),m>0&&(s._createTransceiver("video"),m--);var g=SDPUtils.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.transceivers.forEach(function(E,x){var A=E.track,F=E.kind,D=E.mid||SDPUtils.generateIdentifier();E.mid=D,E.iceGatherer||(E.iceGatherer=s._createIceGatherer(x,s.usingBundle));var $=t.RTCRtpSender.getCapabilities(F);e<15019&&($.codecs=$.codecs.filter(function(j){return j.name!=="rtx"})),$.codecs.forEach(function(j){j.name==="H264"&&j.parameters["level-asymmetry-allowed"]===void 0&&(j.parameters["level-asymmetry-allowed"]="1"),E.remoteCapabilities&&E.remoteCapabilities.codecs&&E.remoteCapabilities.codecs.forEach(function(U){j.name.toLowerCase()===U.name.toLowerCase()&&j.clockRate===U.clockRate&&(j.preferredPayloadType=U.payloadType)})}),$.headerExtensions.forEach(function(j){var U=E.remoteCapabilities&&E.remoteCapabilities.headerExtensions||[];U.forEach(function(W){j.uri===W.uri&&(j.id=W.id)})});var k=E.sendEncodingParameters||[{ssrc:(2*x+1)*1001}];A&&e>=15019&&F==="video"&&!k[0].rtx&&(k[0].rtx={ssrc:k[0].ssrc+1}),E.wantReceive&&(E.rtpReceiver=new t.RTCRtpReceiver(E.dtlsTransport,F)),E.localCapabilities=$,E.sendEncodingParameters=k}),s._config.bundlePolicy!=="max-compat"&&(g+="a=group:BUNDLE "+s.transceivers.map(function(E){return E.mid}).join(" ")+`\r
`),g+=`a=ice-options:trickle\r
`,s.transceivers.forEach(function(E,x){g+=writeMediaSection(E,E.localCapabilities,"offer",E.stream,s._dtlsRole),g+=`a=rtcp-rsize\r
`,E.iceGatherer&&s.iceGatheringState!=="new"&&(x===0||!s.usingBundle)&&(E.iceGatherer.getLocalCandidates().forEach(function(A){A.component=1,g+="a="+SDPUtils.writeCandidate(A)+`\r
`}),E.iceGatherer.state==="completed"&&(g+=`a=end-of-candidates\r
`))});var S=new t.RTCSessionDescription({type:"offer",sdp:g});return Promise.resolve(S)},c.prototype.createAnswer=function(){var s=this;if(s._isClosed)return Promise.reject(makeError("InvalidStateError","Can not call createAnswer after close"));if(!(s.signalingState==="have-remote-offer"||s.signalingState==="have-local-pranswer"))return Promise.reject(makeError("InvalidStateError","Can not call createAnswer in signalingState "+s.signalingState));var l=SDPUtils.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.usingBundle&&(l+="a=group:BUNDLE "+s.transceivers.map(function(g){return g.mid}).join(" ")+`\r
`),l+=`a=ice-options:trickle\r
`;var m=SDPUtils.getMediaSections(s._remoteDescription.sdp).length;s.transceivers.forEach(function(g,S){if(!(S+1>m)){if(g.rejected){g.kind==="application"?g.protocol==="DTLS/SCTP"?l+=`m=application 0 DTLS/SCTP 5000\r
`:l+="m=application 0 "+g.protocol+` webrtc-datachannel\r
`:g.kind==="audio"?l+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:g.kind==="video"&&(l+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),l+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+g.mid+`\r
`;return}if(g.stream){var E;g.kind==="audio"?E=g.stream.getAudioTracks()[0]:g.kind==="video"&&(E=g.stream.getVideoTracks()[0]),E&&e>=15019&&g.kind==="video"&&!g.sendEncodingParameters[0].rtx&&(g.sendEncodingParameters[0].rtx={ssrc:g.sendEncodingParameters[0].ssrc+1})}var x=getCommonCapabilities(g.localCapabilities,g.remoteCapabilities),A=x.codecs.filter(function(F){return F.name.toLowerCase()==="rtx"}).length;!A&&g.sendEncodingParameters[0].rtx&&delete g.sendEncodingParameters[0].rtx,l+=writeMediaSection(g,x,"answer",g.stream,s._dtlsRole),g.rtcpParameters&&g.rtcpParameters.reducedSize&&(l+=`a=rtcp-rsize\r
`)}});var y=new t.RTCSessionDescription({type:"answer",sdp:l});return Promise.resolve(y)},c.prototype.addIceCandidate=function(s){var l=this,m;return s&&!(s.sdpMLineIndex!==void 0||s.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(y,g){if(l._remoteDescription)if(!s||s.candidate==="")for(var S=0;S<l.transceivers.length&&!(!l.transceivers[S].rejected&&(l.transceivers[S].iceTransport.addRemoteCandidate({}),m=SDPUtils.getMediaSections(l._remoteDescription.sdp),m[S]+=`a=end-of-candidates\r
`,l._remoteDescription.sdp=SDPUtils.getDescription(l._remoteDescription.sdp)+m.join(""),l.usingBundle));S++);else{var E=s.sdpMLineIndex;if(s.sdpMid){for(var x=0;x<l.transceivers.length;x++)if(l.transceivers[x].mid===s.sdpMid){E=x;break}}var A=l.transceivers[E];if(A){if(A.rejected)return y();var F=Object.keys(s.candidate).length>0?SDPUtils.parseCandidate(s.candidate):{};if(F.protocol==="tcp"&&(F.port===0||F.port===9)||F.component&&F.component!==1)return y();if((E===0||E>0&&A.iceTransport!==l.transceivers[0].iceTransport)&&!maybeAddCandidate(A.iceTransport,F))return g(makeError("OperationError","Can not add ICE candidate"));var D=s.candidate.trim();D.indexOf("a=")===0&&(D=D.substr(2)),m=SDPUtils.getMediaSections(l._remoteDescription.sdp),m[E]+="a="+(F.type?D:"end-of-candidates")+`\r
`,l._remoteDescription.sdp=SDPUtils.getDescription(l._remoteDescription.sdp)+m.join("")}else return g(makeError("OperationError","Can not add ICE candidate"))}else return g(makeError("InvalidStateError","Can not add ICE candidate without a remote description"));y()})},c.prototype.getStats=function(s){if(s&&s instanceof t.MediaStreamTrack){var l=null;if(this.transceivers.forEach(function(y){y.rtpSender&&y.rtpSender.track===s?l=y.rtpSender:y.rtpReceiver&&y.rtpReceiver.track===s&&(l=y.rtpReceiver)}),!l)throw makeError("InvalidAccessError","Invalid selector.");return l.getStats()}var m=[];return this.transceivers.forEach(function(y){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(g){y[g]&&m.push(y[g].getStats())})}),Promise.all(m).then(function(y){var g=new Map;return y.forEach(function(S){S.forEach(function(E){g.set(E.id,E)})}),g})};var u=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];u.forEach(function(s){var l=t[s];if(l&&l.prototype&&l.prototype.getStats){var m=l.prototype.getStats;l.prototype.getStats=function(){return m.apply(this).then(function(y){var g=new Map;return Object.keys(y).forEach(function(S){y[S].type=fixStatsType(y[S]),g.set(S,y[S])}),g})}}});var h=["createOffer","createAnswer"];return h.forEach(function(s){var l=c.prototype[s];c.prototype[s]=function(){var m=arguments;return typeof m[0]=="function"||typeof m[1]=="function"?l.apply(this,[arguments[2]]).then(function(y){typeof m[0]=="function"&&m[0].apply(null,[y])},function(y){typeof m[1]=="function"&&m[1].apply(null,[y])}):l.apply(this,arguments)}}),h=["setLocalDescription","setRemoteDescription","addIceCandidate"],h.forEach(function(s){var l=c.prototype[s];c.prototype[s]=function(){var m=arguments;return typeof m[1]=="function"||typeof m[2]=="function"?l.apply(this,arguments).then(function(){typeof m[1]=="function"&&m[1].apply(null)},function(y){typeof m[2]=="function"&&m[2].apply(null,[y])}):l.apply(this,arguments)}}),["getStats"].forEach(function(s){var l=c.prototype[s];c.prototype[s]=function(){var m=arguments;return typeof m[1]=="function"?l.apply(this,arguments).then(function(){typeof m[1]=="function"&&m[1].apply(null)}):l.apply(this,arguments)}}),c};function shimGetUserMedia$2(t){const e=t&&t.navigator,n=function(a){return{name:{PermissionDeniedError:"NotAllowedError"}[a.name]||a.name,message:a.message,constraint:a.constraint,toString(){return this.name}}},i=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(a){return i(a).catch(c=>Promise.reject(n(c)))}}function shimGetDisplayMedia$1(t){"getDisplayMedia"in t.navigator&&(!t.navigator.mediaDevices||t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}function shimPeerConnection$1(t,e){if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(a){return a}),t.RTCSessionDescription||(t.RTCSessionDescription=function(a){return a}),e.version<15025)){const i=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set(a){i.set.call(this,a);const c=new Event("enabled");c.enabled=a,this.dispatchEvent(c)}})}t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)&&Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new t.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);const n=rtcpeerconnection(t,e.version);t.RTCPeerConnection=function(a){return a&&a.iceServers&&(a.iceServers=filterIceServers$1(a.iceServers,e.version),log$1("ICE servers after filtering:",a.iceServers)),new n(a)},t.RTCPeerConnection.prototype=n.prototype}function shimReplaceTrack(t){t.RTCRtpSender&&!("replaceTrack"in t.RTCRtpSender.prototype)&&(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)}var edgeShim=Object.freeze(Object.defineProperty({__proto__:null,shimPeerConnection:shimPeerConnection$1,shimReplaceTrack,shimGetUserMedia:shimGetUserMedia$2,shimGetDisplayMedia:shimGetDisplayMedia$1},Symbol.toStringTag,{value:"Module"}));function shimGetUserMedia$1(t,e){const n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(a,c,u){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(a).then(c,u)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const a=function(u,h,s){h in u&&!(s in u)&&(u[s]=u[h],delete u[h])},c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),a(u.audio,"autoGainControl","mozAutoGainControl"),a(u.audio,"noiseSuppression","mozNoiseSuppression")),c(u)},i&&i.prototype.getSettings){const u=i.prototype.getSettings;i.prototype.getSettings=function(){const h=u.apply(this,arguments);return a(h,"mozAutoGainControl","autoGainControl"),a(h,"mozNoiseSuppression","noiseSuppression"),h}}if(i&&i.prototype.applyConstraints){const u=i.prototype.applyConstraints;i.prototype.applyConstraints=function(h){return this.kind==="audio"&&typeof h=="object"&&(h=JSON.parse(JSON.stringify(h)),a(h,"autoGainControl","mozAutoGainControl"),a(h,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[h])}}}}function shimGetDisplayMedia(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||!t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(i)})}function shimOnTrack(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const c=t.RTCPeerConnection.prototype[a],u={[a](){return arguments[0]=new(a==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};t.RTCPeerConnection.prototype[a]=u[a]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[c,u,h]=arguments;return i.apply(this,[c||null]).then(s=>{if(e.version<53&&!u)try{s.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;s.forEach((m,y)=>{s.set(y,Object.assign({},m,{type:n[m.type]||m.type}))})}return s}).then(u,h)}}function shimSenderGetStats(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(c=>c._pc=this),a});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(a=>a._pc=this),i}),wrapPeerConnectionEvent(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){deprecated("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function shimRTCDataChannel(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function shimAddTransceiver(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const i=arguments[1],a=i&&"sendEncodings"in i;a&&i.sendEncodings.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const c=e.apply(this,arguments);if(a){const{sender:u}=c,h=u.getParameters();(!("encodings"in h)||h.encodings.length===1&&Object.keys(h.encodings[0]).length===0)&&(h.encodings=i.sendEncodings,u.sendEncodings=i.sendEncodings,this.setParametersPromises.push(u.setParameters(h).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return c})}function shimGetParameters(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function shimCreateOffer(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function shimCreateAnswer(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var firefoxShim=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack,shimPeerConnection,shimSenderGetStats,shimReceiverGetStats,shimRemoveStream,shimRTCDataChannel,shimAddTransceiver,shimGetParameters,shimCreateOffer,shimCreateAnswer,shimGetUserMedia:shimGetUserMedia$1,shimGetDisplayMedia},Symbol.toStringTag,{value:"Module"}));function shimLocalStreamsAPI(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(a=>e.call(this,a,i)),i.getVideoTracks().forEach(a=>e.call(this,a,i))},t.RTCPeerConnection.prototype.addTrack=function(i,...a){return a&&a.forEach(c=>{this._localStreams?this._localStreams.includes(c)||this._localStreams.push(c):this._localStreams=[c]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const a=n.getTracks();this.getSenders().forEach(c=>{a.includes(c.track)&&this.removeTrack(c)})})}}function shimRemoteStreamsAPI(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const c=new Event("addstream");c.stream=a,this.dispatchEvent(c)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(c=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(c)>=0)return;i._remoteStreams.push(c);const u=new Event("addstream");u.stream=c,i.dispatchEvent(u)})}),e.apply(i,arguments)}}}function shimCallbacksAPI(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,i=e.createAnswer,a=e.setLocalDescription,c=e.setRemoteDescription,u=e.addIceCandidate;e.createOffer=function(l,m){const y=arguments.length>=2?arguments[2]:arguments[0],g=n.apply(this,[y]);return m?(g.then(l,m),Promise.resolve()):g},e.createAnswer=function(l,m){const y=arguments.length>=2?arguments[2]:arguments[0],g=i.apply(this,[y]);return m?(g.then(l,m),Promise.resolve()):g};let h=function(s,l,m){const y=a.apply(this,[s]);return m?(y.then(l,m),Promise.resolve()):y};e.setLocalDescription=h,h=function(s,l,m){const y=c.apply(this,[s]);return m?(y.then(l,m),Promise.resolve()):y},e.setRemoteDescription=h,h=function(s,l,m){const y=u.apply(this,[s]);return m?(y.then(l,m),Promise.resolve()):y},e.addIceCandidate=h}function shimGetUserMedia(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,i=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=a=>i(shimConstraints(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(i,a,c){e.mediaDevices.getUserMedia(i).then(a,c)}.bind(e))}function shimConstraints(t){return t&&t.video!==void 0?Object.assign({},t,{video:compactObject(t.video)}):t}function shimRTCIceServerUrls(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(i,a){if(i&&i.iceServers){const c=[];for(let u=0;u<i.iceServers.length;u++){let h=i.iceServers[u];!h.hasOwnProperty("urls")&&h.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),h=JSON.parse(JSON.stringify(h)),h.urls=h.url,delete h.url,c.push(h)):c.push(i.iceServers[u])}i.iceServers=c}return new e(i,a)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function shimTrackEventTransceiver(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio!="undefined"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const a=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio"),typeof i.offerToReceiveVideo!="undefined"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const c=this.getTransceivers().find(u=>u.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&c?c.direction==="sendrecv"?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":c.direction==="recvonly"&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):i.offerToReceiveVideo===!0&&!c&&this.addTransceiver("video")}return e.apply(this,arguments)}}function shimAudioContext(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var safariShim=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI,shimRemoteStreamsAPI,shimCallbacksAPI,shimGetUserMedia,shimConstraints,shimRTCIceServerUrls,shimTrackEventTransceiver,shimCreateOfferLegacy,shimAudioContext},Symbol.toStringTag,{value:"Module"}));function shimRTCIceCandidate(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substr(2)),i.candidate&&i.candidate.length){const a=new e(i),c=SDPUtils$1.parseCandidate(i.candidate),u=Object.assign(a,c);return u.toJSON=function(){return{candidate:u.candidate,sdpMid:u.sdpMid,sdpMLineIndex:u.sdpMLineIndex,usernameFragment:u.usernameFragment}},u}return new e(i)},t.RTCIceCandidate.prototype=e.prototype,wrapPeerConnectionEvent(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function shimMaxMessageSize(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp=="undefined"?null:this._sctp}});const n=function(h){if(!h||!h.sdp)return!1;const s=SDPUtils$1.splitSections(h.sdp);return s.shift(),s.some(l=>{const m=SDPUtils$1.parseMLine(l);return m&&m.kind==="application"&&m.protocol.indexOf("SCTP")!==-1})},i=function(h){const s=h.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(s===null||s.length<2)return-1;const l=parseInt(s[1],10);return l!==l?-1:l},a=function(h){let s=65536;return e.browser==="firefox"&&(e.version<57?h===-1?s=16384:s=2147483637:e.version<60?s=e.version===57?65535:65536:s=2147483637),s},c=function(h,s){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const m=SDPUtils$1.matchPrefix(h.sdp,"a=max-message-size:");return m.length>0?l=parseInt(m[0].substr(19),10):e.browser==="firefox"&&s!==-1&&(l=2147483637),l},u=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:s}=this.getConfiguration();s==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp=="undefined"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const s=i(arguments[0]),l=a(s),m=c(arguments[0],s);let y;l===0&&m===0?y=Number.POSITIVE_INFINITY:l===0||m===0?y=Math.max(l,m):y=Math.min(l,m);const g={};Object.defineProperty(g,"maxMessageSize",{get(){return y}}),this._sctp=g}return u.apply(this,arguments)}}function shimSendThrowTypeError(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(i,a){const c=i.send;i.send=function(){const h=arguments[0],s=h.length||h.size||h.byteLength;if(i.readyState==="open"&&a.sctp&&s>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return c.apply(i,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const a=n.apply(this,arguments);return e(a,this),a},wrapPeerConnectionEvent(t,"datachannel",i=>(e(i.channel,i.target),i))}function shimConnectionState(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const c=a.target;if(c._lastConnectionState!==c.connectionState){c._lastConnectionState=c.connectionState;const u=new Event("connectionstatechange",a);c.dispatchEvent(u)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function removeExtmapAllowMixed(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const c=a.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&a instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:a.type,sdp:c}):a.sdp=c}return n.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var commonShim=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate,shimMaxMessageSize,shimSendThrowTypeError,shimConnectionState,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty},Symbol.toStringTag,{value:"Module"}));function adapterFactory({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=log$1,i=detectBrowser(t),a={browserDetails:i,commonShim,extractVersion,disableLog,disableWarnings};switch(i.browser){case"chrome":if(!chromeShim||!shimPeerConnection$2||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),a;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),a;n("adapter.js shimming chrome."),a.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(t,i),shimGetUserMedia$3(t,i),shimMediaStream(t),shimPeerConnection$2(t,i),shimOnTrack$1(t),shimAddTrackRemoveTrack(t,i),shimGetSendersWithDtmf(t),shimGetStats(t),shimSenderReceiverGetStats(t),fixNegotiationNeeded(t,i),shimRTCIceCandidate(t),shimConnectionState(t),shimMaxMessageSize(t,i),shimSendThrowTypeError(t),removeExtmapAllowMixed(t,i);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),a;n("adapter.js shimming firefox."),a.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(t,i),shimGetUserMedia$1(t,i),shimPeerConnection(t,i),shimOnTrack(t),shimRemoveStream(t),shimSenderGetStats(t),shimReceiverGetStats(t),shimRTCDataChannel(t),shimAddTransceiver(t),shimGetParameters(t),shimCreateOffer(t),shimCreateAnswer(t),shimRTCIceCandidate(t),shimConnectionState(t),shimMaxMessageSize(t,i),shimSendThrowTypeError(t);break;case"edge":if(!edgeShim||!shimPeerConnection$1||!e.shimEdge)return n("MS edge shim is not included in this adapter release."),a;n("adapter.js shimming edge."),a.browserShim=edgeShim,shimGetUserMedia$2(t),shimGetDisplayMedia$1(t),shimPeerConnection$1(t,i),shimReplaceTrack(t),shimMaxMessageSize(t,i),shimSendThrowTypeError(t);break;case"safari":if(!safariShim||!e.shimSafari)return n("Safari shim is not included in this adapter release."),a;n("adapter.js shimming safari."),a.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(t,i),shimRTCIceServerUrls(t),shimCreateOfferLegacy(t),shimCallbacksAPI(t),shimLocalStreamsAPI(t),shimRemoteStreamsAPI(t),shimTrackEventTransceiver(t),shimGetUserMedia(t),shimAudioContext(t),shimRTCIceCandidate(t),shimMaxMessageSize(t,i),shimSendThrowTypeError(t),removeExtmapAllowMixed(t,i);break;default:n("Unsupported browser!");break}return a}adapterFactory({window:typeof window=="undefined"?void 0:window});var version={};Object.defineProperty(version,"__esModule",{value:!0});version.protocolVersion=version.version=void 0;version.version="0.12.2";version.protocolVersion=3;var __awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(t,e,n,i){function a(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(m){try{l(i.next(m))}catch(y){u(y)}}function s(m){try{l(i.throw(m))}catch(y){u(y)}}function l(m){m.done?c(m.value):a(m.value).then(h,s)}l((i=i.apply(t,e||[])).next())})},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(SignalClient,"__esModule",{value:!0});SignalClient.WSSignalClient=void 0;const loglevel_1=__importDefault(loglevel.exports),livekit_rtc_1=livekit_rtc,errors_1=errors,version_1=version;class WSSignalClient{constructor(e=!1){this.isConnected=!1,this.useJSON=e}join(e,n,i){return __awaiter(this,void 0,void 0,function*(){return yield this.connect(e,n,{autoSubscribe:i==null?void 0:i.autoSubscribe})})}reconnect(e,n){return __awaiter(this,void 0,void 0,function*(){yield this.connect(e,n,{reconnect:!0})})}connect(e,n,i){e=e.replace(/\/$/,""),e+="/rtc";let a=`?access_token=${n}&protocol=${version_1.protocolVersion}&sdk=js&version=${version_1.version}`;return i.reconnect&&(a+="&reconnect=1"),i.autoSubscribe!==void 0&&(a+=`&auto_subscribe=${i.autoSubscribe?"1":"0"}`),new Promise((c,u)=>{loglevel_1.default.debug("connecting to",e+a),this.ws=void 0;const h=new WebSocket(e+a);h.binaryType="arraybuffer",h.onerror=s=>__awaiter(this,void 0,void 0,function*(){if(!this.ws){try{const l=yield fetch(`http${e.substr(2)}/validate${a}`);if(l.ok)u(new errors_1.ConnectionError("Internal error"));else{const m=yield l.text();u(new errors_1.ConnectionError(m))}}catch{u(new errors_1.ConnectionError("server was not reachable"))}return}this.handleWSError(s)}),h.onopen=()=>{this.ws=h,i.reconnect&&(this.isConnected=!0,c())},h.onmessage=s=>{let l;if(typeof s.data=="string"){const m=JSON.parse(s.data);l=livekit_rtc_1.SignalResponse.fromJSON(m)}else if(s.data instanceof ArrayBuffer)l=livekit_rtc_1.SignalResponse.decode(new Uint8Array(s.data));else{loglevel_1.default.error("could not decode websocket message",typeof s.data);return}if(!this.isConnected){l.join?(this.isConnected=!0,c(l.join)):u(new errors_1.ConnectionError("did not receive join response"));return}this.handleSignalResponse(l)},h.onclose=s=>{!this.isConnected||(loglevel_1.default.debug("websocket connection closed",s.reason),this.isConnected=!1,this.onClose&&this.onClose(s.reason))}})}close(){var e;this.isConnected=!1,this.ws&&(this.ws.onclose=null),(e=this.ws)===null||e===void 0||e.close()}sendOffer(e){loglevel_1.default.debug("sending offer",e),this.sendRequest({offer:toProtoSessionDescription(e)})}sendAnswer(e){loglevel_1.default.debug("sending answer"),this.sendRequest({answer:toProtoSessionDescription(e)})}sendIceCandidate(e,n){loglevel_1.default.debug("sending ice candidate",e),this.sendRequest({trickle:{candidateInit:JSON.stringify(e),target:n}})}sendMuteTrack(e,n){this.sendRequest({mute:{sid:e,muted:n}})}sendAddTrack(e){this.sendRequest({addTrack:livekit_rtc_1.AddTrackRequest.fromPartial(e)})}sendUpdateTrackSettings(e){this.sendRequest({trackSetting:e})}sendUpdateSubscription(e){this.sendRequest({subscription:e})}sendSetSimulcastLayers(e,n){this.sendRequest({simulcast:{trackSid:e,layers:n}})}sendLeave(){this.sendRequest(livekit_rtc_1.SignalRequest.fromPartial({leave:{}}))}sendRequest(e){if(!this.ws)throw new errors_1.ConnectionError("cannot send signal request before connected");this.useJSON?this.ws.send(JSON.stringify(livekit_rtc_1.SignalRequest.toJSON(e))):this.ws.send(livekit_rtc_1.SignalRequest.encode(e).finish())}handleSignalResponse(e){if(e.answer){const n=fromProtoSessionDescription(e.answer);this.onAnswer&&this.onAnswer(n)}else if(e.offer){const n=fromProtoSessionDescription(e.offer);this.onOffer&&this.onOffer(n)}else if(e.trickle){const n=JSON.parse(e.trickle.candidateInit);this.onTrickle&&this.onTrickle(n,e.trickle.target)}else e.update?this.onParticipantUpdate&&this.onParticipantUpdate(e.update.participants):e.trackPublished?this.onLocalTrackPublished&&this.onLocalTrackPublished(e.trackPublished):e.speakersChanged?this.onSpeakersChanged&&this.onSpeakersChanged(e.speakersChanged.speakers):e.leave?this.onLeave&&this.onLeave():e.mute?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(e.mute.sid,e.mute.muted):loglevel_1.default.warn("unsupported message",e)}handleWSError(e){loglevel_1.default.error("websocket error",e)}}SignalClient.WSSignalClient=WSSignalClient;function fromProtoSessionDescription(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function toProtoSessionDescription(t){return{sdp:t.sdp,type:t.type}}var options={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(e){e.trace="trace",e.debug="debug",e.info="info",e.warn="warn",e.error="error",e.silent="silent"}(t.LogLevel||(t.LogLevel={}))})(options);(function(t){var e=commonjsGlobal&&commonjsGlobal.__awaiter||function(k,j,U,W){function G(q){return q instanceof U?q:new U(function(f){f(q)})}return new(U||(U=Promise))(function(q,f){function o(T){try{b(W.next(T))}catch(_){f(_)}}function v(T){try{b(W.throw(T))}catch(_){f(_)}}function b(T){T.done?q(T.value):G(T.value).then(o,v)}b((W=W.apply(k,j||[])).next())})},n=commonjsGlobal&&commonjsGlobal.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(t,"__esModule",{value:!0}),t.createLocalTracks=t.createLocalScreenTracks=t.createLocalAudioTrack=t.createLocalVideoTrack=t.connect=t.version=void 0;const i=n(loglevel.exports),a=SignalClient,c=options,u=errors,h=n(Room),s=n(LocalAudioTrack$1),l=n(LocalTrack$1),m=n(LocalVideoTrack$1),y=options$1,g=Track;var S=version;Object.defineProperty(t,"version",{enumerable:!0,get:function(){return S.version}});function E(k,j,U){var W;return e(this,void 0,void 0,function*(){U||(U={}),U.logLevel||(U.logLevel=c.LogLevel.info),U.audio===void 0&&(U.audio=!1),U.video===void 0&&(U.video=!1),i.default.setLevel(U.logLevel);const G=(W=U.rtcConfig)!==null&&W!==void 0?W:{};U.iceServers&&(G.iceServers=U.iceServers);const q=new a.WSSignalClient,f=new h.default(q,G);yield f.connect(k,j,{autoSubscribe:U==null?void 0:U.autoSubscribe});let{tracks:o}=U;if(o||(U.audio||U.video)&&(o=yield D({audio:U.audio,video:U.video})),o)for(let v=0;v<o.length;v+=1){const b=o[v],T={};b.kind===g.Track.Kind.Video.toString()||b.kind===g.Track.Kind.Video?(T.videoCodec=U==null?void 0:U.videoCodec,T.videoEncoding=U==null?void 0:U.videoEncoding,T.simulcast=U==null?void 0:U.simulcast):(b.kind===g.Track.Kind.Audio.toString()||b.kind===g.Track.Kind.Audio)&&(T.audioBitrate=U.audioBitrate),yield f.localParticipant.publishTrack(b,T)}return f})}t.connect=E;function x(k){return e(this,void 0,void 0,function*(){return(yield D({audio:!1,video:k}))[0]})}t.createLocalVideoTrack=x;function A(k){return e(this,void 0,void 0,function*(){return(yield D({audio:k,video:!1}))[0]})}t.createLocalAudioTrack=A;function F(k){var j;return e(this,void 0,void 0,function*(){k===void 0&&(k={}),k.name===void 0&&(k.name="screen"),k.resolution===void 0&&(k.resolution=y.VideoPresets.fhd.resolution);const U=yield navigator.mediaDevices.getDisplayMedia({audio:(j=k.audio)!==null&&j!==void 0?j:!1,video:{width:k.resolution.width,height:k.resolution.height}}),W=U.getVideoTracks();if(W.length===0)throw new u.TrackInvalidError("no video track found");const G=[new m.default(W[0],k.name)];return U.getAudioTracks().length>0&&G.push(new s.default(U.getAudioTracks()[0],k.name)),G})}t.createLocalScreenTracks=F;function D(k){return e(this,void 0,void 0,function*(){k||(k={}),k.audio===void 0&&(k.audio={});const j=l.default.constraintsForOptions(k);return(yield navigator.mediaDevices.getUserMedia(j)).getTracks().map(W=>{const G=W.kind==="audio";let q=G?k.audio:k.video;(typeof q=="boolean"||!q)&&(q={});let f;const o=G?j.audio:j.video;return typeof o!="boolean"&&(f=o),$(W,q==null?void 0:q.name,f)})})}t.createLocalTracks=D;function $(k,j,U){switch(k.kind){case"audio":return new s.default(k,j,U);case"video":return new m.default(k,j,U);default:throw new u.TrackInvalidError(`unsupported track type: ${k.kind}`)}}})(livekit);var types={};Object.defineProperty(types,"__esModule",{value:!0});(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(k,j,U,W){W===void 0&&(W=U),Object.defineProperty(k,W,{enumerable:!0,get:function(){return j[U]}})}:function(k,j,U,W){W===void 0&&(W=U),k[W]=j[U]}),n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(k,j){Object.defineProperty(k,"default",{enumerable:!0,value:j})}:function(k,j){k.default=j}),i=commonjsGlobal&&commonjsGlobal.__importStar||function(k){if(k&&k.__esModule)return k;var j={};if(k!=null)for(var U in k)U!=="default"&&Object.prototype.hasOwnProperty.call(k,U)&&e(j,k,U);return n(j,k),j},a=commonjsGlobal&&commonjsGlobal.__exportStar||function(k,j){for(var U in k)U!=="default"&&!Object.prototype.hasOwnProperty.call(j,U)&&e(j,k,U)},c=commonjsGlobal&&commonjsGlobal.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(t,"__esModule",{value:!0}),t.VideoQuality=t.TrackPublication=t.RemoteTrackPublication=t.RemoteVideoTrack=t.RemoteAudioTrack=t.LocalTrackPublication=t.LocalTrack=t.LocalVideoTrack=t.LocalAudioTrack=t.LocalParticipant=t.RemoteParticipant=t.Participant=t.DataPacket_Kind=t.RoomState=t.Room=void 0;const u=livekit_models;Object.defineProperty(t,"DataPacket_Kind",{enumerable:!0,get:function(){return u.DataPacket_Kind}});const h=livekit_rtc;Object.defineProperty(t,"VideoQuality",{enumerable:!0,get:function(){return h.VideoQuality}});const s=c(LocalParticipant$1);t.LocalParticipant=s.default;const l=c(Participant$1);t.Participant=l.default;const m=c(RemoteParticipant$1);t.RemoteParticipant=m.default;const y=i(Room);t.Room=y.default,Object.defineProperty(t,"RoomState",{enumerable:!0,get:function(){return y.RoomState}});const g=c(LocalAudioTrack$1);t.LocalAudioTrack=g.default;const S=c(LocalTrack$1);t.LocalTrack=S.default;const E=c(LocalTrackPublication$1);t.LocalTrackPublication=E.default;const x=c(LocalVideoTrack$1);t.LocalVideoTrack=x.default;const A=c(RemoteAudioTrack$1);t.RemoteAudioTrack=A.default;const F=c(RemoteTrackPublication$1);t.RemoteTrackPublication=F.default;const D=c(RemoteVideoTrack$1);t.RemoteVideoTrack=D.default;const $=c(TrackPublication$1);t.TrackPublication=$.default,a(livekit,t),a(options,t),a(errors,t),a(events$1,t),a(options$1,t),a(Track,t),a(types,t),a(version,t)})(dist);/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var faCheckCircle={prefix:"fas",iconName:"check-circle",icon:[512,512,[],"f058","M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"]},faChevronDown={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"]},faChevronUp={prefix:"fas",iconName:"chevron-up",icon:[448,512,[],"f077","M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"]},faCommentAlt={prefix:"fas",iconName:"comment-alt",icon:[512,512,[],"f27a","M448 0H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v84c0 9.8 11.2 15.5 19.1 9.7L304 416h144c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64z"]},faCompressAlt={prefix:"fas",iconName:"compress-alt",icon:[448,512,[],"f422","M4.686 427.314L104 328l-32.922-31.029C55.958 281.851 66.666 256 88.048 256h112C213.303 256 224 266.745 224 280v112c0 21.382-25.803 32.09-40.922 16.971L152 376l-99.314 99.314c-6.248 6.248-16.379 6.248-22.627 0L4.686 449.941c-6.248-6.248-6.248-16.379 0-22.627zM443.314 84.686L344 184l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C234.697 256 224 245.255 224 232V120c0-21.382 25.803-32.09 40.922-16.971L296 136l99.314-99.314c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.248 6.248 6.248 16.379 0 22.627z"]},faDesktop={prefix:"fas",iconName:"desktop",icon:[576,512,[],"f108","M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"]},faExpandAlt={prefix:"fas",iconName:"expand-alt",icon:[448,512,[],"f424","M212.686 315.314L120 408l32.922 31.029c15.12 15.12 4.412 40.971-16.97 40.971h-112C10.697 480 0 469.255 0 456V344c0-21.382 25.803-32.09 40.922-16.971L72 360l92.686-92.686c6.248-6.248 16.379-6.248 22.627 0l25.373 25.373c6.249 6.248 6.249 16.378 0 22.627zm22.628-118.628L328 104l-32.922-31.029C279.958 57.851 290.666 32 312.048 32h112C437.303 32 448 42.745 448 56v112c0 21.382-25.803 32.09-40.922 16.971L376 152l-92.686 92.686c-6.248 6.248-16.379 6.248-22.627 0l-25.373-25.373c-6.249-6.248-6.249-16.378 0-22.627z"]},faMicrophone={prefix:"fas",iconName:"microphone",icon:[352,512,[],"f130","M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"]},faMicrophoneSlash={prefix:"fas",iconName:"microphone-slash",icon:[640,512,[],"f131","M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"]},faPaperPlane={prefix:"fas",iconName:"paper-plane",icon:[512,512,[],"f1d8","M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"]},faPhoneSlash={prefix:"fas",iconName:"phone-slash",icon:[640,512,[],"f3dd","M268.2 381.4l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48c-10.7 4.6-16.5 16.1-13.9 27.5l24 104c2.5 10.8 12.1 18.6 23.4 18.6 100.7 0 193.7-32.4 269.7-86.9l-80-61.8c-10.9 6.5-22.1 12.7-33.6 18.1zm365.6 76.7L475.1 335.5C537.9 256.4 576 156.9 576 48c0-11.2-7.7-20.9-18.6-23.4l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-12.2 26.1-27.9 50.3-46 72.8L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3z"]},faQuestion={prefix:"fas",iconName:"question",icon:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"]},faSync={prefix:"fas",iconName:"sync",icon:[512,512,[],"f021","M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"]},faTh={prefix:"fas",iconName:"th",icon:[512,512,[],"f00a","M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"]},faThLarge={prefix:"fas",iconName:"th-large",icon:[512,512,[],"f009","M296 32h192c13.255 0 24 10.745 24 24v160c0 13.255-10.745 24-24 24H296c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24zm-80 0H24C10.745 32 0 42.745 0 56v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zM0 296v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm296 184h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H296c-13.255 0-24 10.745-24 24v160c0 13.255 10.745 24 24 24z"]},faTimes={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]},faUserFriends={prefix:"fas",iconName:"user-friends",icon:[640,512,[],"f500","M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"]},faVideo={prefix:"fas",iconName:"video",icon:[576,512,[],"f03d","M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"]},faVideoSlash={prefix:"fas",iconName:"video-slash",icon:[640,512,[],"f4e2","M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"]},faVolumeUp={prefix:"fas",iconName:"volume-up",icon:[576,512,[],"f028","M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"]};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var faCircle={prefix:"far",iconName:"circle",icon:[512,512,[],"f111","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"]};/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function ownKeys$2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function _objectSpread2$2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$2(Object(n),!0).forEach(function(i){_defineProperty$2(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _typeof$2(t){return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(t)}function _classCallCheck$1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass$1(t,e,n){return e&&_defineProperties$1(t.prototype,e),n&&_defineProperties$1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _defineProperty$2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray$1(t,e)||_nonIterableRest()}function _toConsumableArray$1(t){return _arrayWithoutHoles$1(t)||_iterableToArray$1(t)||_unsupportedIterableToArray$1(t)||_nonIterableSpread$1()}function _arrayWithoutHoles$1(t){if(Array.isArray(t))return _arrayLikeToArray$1(t)}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArray$1(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _iterableToArrayLimit(t,e){var n=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],a=!0,c=!1,u,h;try{for(n=n.call(t);!(a=(u=n.next()).done)&&(i.push(u.value),!(e&&i.length===e));a=!0);}catch(s){c=!0,h=s}finally{try{!a&&n.return!=null&&n.return()}finally{if(c)throw h}}return i}}function _unsupportedIterableToArray$1(t,e){if(!!t){if(typeof t=="string")return _arrayLikeToArray$1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$1(t,e)}}function _arrayLikeToArray$1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var noop=function t(){},_WINDOW={},_DOCUMENT={},_MUTATION_OBSERVER=null,_PERFORMANCE={mark:noop,measure:noop};try{typeof window!="undefined"&&(_WINDOW=window),typeof document!="undefined"&&(_DOCUMENT=document),typeof MutationObserver!="undefined"&&(_MUTATION_OBSERVER=MutationObserver),typeof performance!="undefined"&&(_PERFORMANCE=performance)}catch(t){}var _ref=_WINDOW.navigator||{},_ref$userAgent=_ref.userAgent,userAgent=_ref$userAgent===void 0?"":_ref$userAgent,WINDOW=_WINDOW,DOCUMENT=_DOCUMENT,MUTATION_OBSERVER=_MUTATION_OBSERVER,PERFORMANCE=_PERFORMANCE;WINDOW.document;var IS_DOM=!!DOCUMENT.documentElement&&!!DOCUMENT.head&&typeof DOCUMENT.addEventListener=="function"&&typeof DOCUMENT.createElement=="function",IS_IE=~userAgent.indexOf("MSIE")||~userAgent.indexOf("Trident/"),NAMESPACE_IDENTIFIER="___FONT_AWESOME___",UNITS_IN_GRID=16,DEFAULT_FAMILY_PREFIX="fa",DEFAULT_REPLACEMENT_CLASS="svg-inline--fa",DATA_FA_I2SVG="data-fa-i2svg",DATA_FA_PSEUDO_ELEMENT="data-fa-pseudo-element",DATA_FA_PSEUDO_ELEMENT_PENDING="data-fa-pseudo-element-pending",DATA_PREFIX="data-prefix",DATA_ICON="data-icon",HTML_CLASS_I2SVG_BASE_CLASS="fontawesome-i2svg",MUTATION_APPROACH_ASYNC="async",TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS=["HTML","HEAD","STYLE","SCRIPT"],PRODUCTION$1=function(){try{return!0}catch{return!1}}(),PREFIX_TO_STYLE={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},STYLE_TO_PREFIX={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},PREFIX_TO_LONG_STYLE={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},LONG_STYLE_TO_PREFIX={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},ICON_SELECTION_SYNTAX_PATTERN=/fa[srltdbk\-\ ]/,LAYERS_TEXT_CLASSNAME="fa-layers-text",FONT_FAMILY_PATTERN=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,FONT_WEIGHT_TO_PREFIX={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},oneToTen=[1,2,3,4,5,6,7,8,9,10],oneToTwenty=oneToTen.concat([11,12,13,14,15,16,17,18,19,20]),ATTRIBUTES_WATCHED_FOR_MUTATION=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],DUOTONE_CLASSES={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},RESERVED_CLASSES=[].concat(_toConsumableArray$1(Object.keys(STYLE_TO_PREFIX)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",DUOTONE_CLASSES.GROUP,DUOTONE_CLASSES.SWAP_OPACITY,DUOTONE_CLASSES.PRIMARY,DUOTONE_CLASSES.SECONDARY]).concat(oneToTen.map(function(t){return"".concat(t,"x")})).concat(oneToTwenty.map(function(t){return"w-".concat(t)})),initial=WINDOW.FontAwesomeConfig||{};function getAttrConfig(t){var e=DOCUMENT.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function coerce(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(DOCUMENT&&typeof DOCUMENT.querySelector=="function"){var attrs=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];attrs.forEach(function(t){var e=_slicedToArray(t,2),n=e[0],i=e[1],a=coerce(getAttrConfig(n));a!=null&&(initial[i]=a)})}var _default={familyPrefix:DEFAULT_FAMILY_PREFIX,styleDefault:"solid",replacementClass:DEFAULT_REPLACEMENT_CLASS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},_config=_objectSpread2$2(_objectSpread2$2({},_default),initial);_config.autoReplaceSvg||(_config.observeMutations=!1);var config={};Object.keys(_config).forEach(function(t){Object.defineProperty(config,t,{enumerable:!0,set:function(n){_config[t]=n,_onChangeCb.forEach(function(i){return i(config)})},get:function(){return _config[t]}})});WINDOW.FontAwesomeConfig=config;var _onChangeCb=[];function onChange(t){return _onChangeCb.push(t),function(){_onChangeCb.splice(_onChangeCb.indexOf(t),1)}}var d=UNITS_IN_GRID,meaninglessTransform={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function insertCss(t){if(!(!t||!IS_DOM)){var e=DOCUMENT.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=DOCUMENT.head.childNodes,i=null,a=n.length-1;a>-1;a--){var c=n[a],u=(c.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(u)>-1&&(i=c)}return DOCUMENT.head.insertBefore(e,i),t}}var idPool="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function nextUniqueId(){for(var t=12,e="";t-- >0;)e+=idPool[Math.random()*62|0];return e}function toArray(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function classArray(t){return t.classList?toArray(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function htmlEscape(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinAttributes(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(htmlEscape(t[n]),'" ')},"").trim()}function joinStyles(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function transformIsMeaningful(t){return t.size!==meaninglessTransform.size||t.x!==meaninglessTransform.x||t.y!==meaninglessTransform.y||t.rotate!==meaninglessTransform.rotate||t.flipX||t.flipY}function transformForSvg(t){var e=t.transform,n=t.containerWidth,i=t.iconWidth,a={transform:"translate(".concat(n/2," 256)")},c="translate(".concat(e.x*32,", ").concat(e.y*32,") "),u="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),h="rotate(".concat(e.rotate," 0 0)"),s={transform:"".concat(c," ").concat(u," ").concat(h)},l={transform:"translate(".concat(i/2*-1," -256)")};return{outer:a,inner:s,path:l}}function transformForCss(t){var e=t.transform,n=t.width,i=n===void 0?UNITS_IN_GRID:n,a=t.height,c=a===void 0?UNITS_IN_GRID:a,u=t.startCentered,h=u===void 0?!1:u,s="";return h&&IS_IE?s+="translate(".concat(e.x/d-i/2,"em, ").concat(e.y/d-c/2,"em) "):h?s+="translate(calc(-50% + ".concat(e.x/d,"em), calc(-50% + ").concat(e.y/d,"em)) "):s+="translate(".concat(e.x/d,"em, ").concat(e.y/d,"em) "),s+="scale(".concat(e.size/d*(e.flipX?-1:1),", ").concat(e.size/d*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var baseStyles=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function css(){var t=DEFAULT_FAMILY_PREFIX,e=DEFAULT_REPLACEMENT_CLASS,n=config.familyPrefix,i=config.replacementClass,a=baseStyles;if(n!==t||i!==e){var c=new RegExp("\\.".concat(t,"\\-"),"g"),u=new RegExp("\\--".concat(t,"\\-"),"g"),h=new RegExp("\\.".concat(e),"g");a=a.replace(c,".".concat(n,"-")).replace(u,"--".concat(n,"-")).replace(h,".".concat(i))}return a}var _cssInserted=!1;function ensureCss(){config.autoAddCss&&!_cssInserted&&(insertCss(css()),_cssInserted=!0)}var InjectCSS={mixout:function t(){return{dom:{css,insertCss:ensureCss}}},hooks:function t(){return{beforeDOMElementCreation:function(){ensureCss()},beforeI2svg:function(){ensureCss()}}}},w=WINDOW||{};w[NAMESPACE_IDENTIFIER]||(w[NAMESPACE_IDENTIFIER]={});w[NAMESPACE_IDENTIFIER].styles||(w[NAMESPACE_IDENTIFIER].styles={});w[NAMESPACE_IDENTIFIER].hooks||(w[NAMESPACE_IDENTIFIER].hooks={});w[NAMESPACE_IDENTIFIER].shims||(w[NAMESPACE_IDENTIFIER].shims=[]);var namespace=w[NAMESPACE_IDENTIFIER],functions=[],listener=function t(){DOCUMENT.removeEventListener("DOMContentLoaded",t),loaded=1,functions.map(function(e){return e()})},loaded=!1;IS_DOM&&(loaded=(DOCUMENT.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DOCUMENT.readyState),loaded||DOCUMENT.addEventListener("DOMContentLoaded",listener));function domready(t){!IS_DOM||(loaded?setTimeout(t,0):functions.push(t))}function toHtml(t){var e=t.tag,n=t.attributes,i=n===void 0?{}:n,a=t.children,c=a===void 0?[]:a;return typeof t=="string"?htmlEscape(t):"<".concat(e," ").concat(joinAttributes(i),">").concat(c.map(toHtml).join(""),"</").concat(e,">")}function iconFromMapping(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var bindInternal4=function t(e,n){return function(i,a,c,u){return e.call(n,i,a,c,u)}},reduce=function t(e,n,i,a){var c=Object.keys(e),u=c.length,h=a!==void 0?bindInternal4(n,a):n,s,l,m;for(i===void 0?(s=1,m=e[c[0]]):(s=0,m=i);s<u;s++)l=c[s],m=h(m,e[l],l,e);return m};function ucs2decode(t){for(var e=[],n=0,i=t.length;n<i;){var a=t.charCodeAt(n++);if(a>=55296&&a<=56319&&n<i){var c=t.charCodeAt(n++);(c&64512)==56320?e.push(((a&1023)<<10)+(c&1023)+65536):(e.push(a),n--)}else e.push(a)}return e}function toHex(t){var e=ucs2decode(t);return e.length===1?e[0].toString(16):null}function codePointAt(t,e){var n=t.length,i=t.charCodeAt(e),a;return i>=55296&&i<=56319&&n>e+1&&(a=t.charCodeAt(e+1),a>=56320&&a<=57343)?(i-55296)*1024+a-56320+65536:i}function normalizeIcons(t){return Object.keys(t).reduce(function(e,n){var i=t[n],a=!!i.icon;return a?e[i.iconName]=i.icon:e[n]=i,e},{})}function defineIcons(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.skipHooks,a=i===void 0?!1:i,c=normalizeIcons(e);typeof namespace.hooks.addPack=="function"&&!a?namespace.hooks.addPack(t,normalizeIcons(e)):namespace.styles[t]=_objectSpread2$2(_objectSpread2$2({},namespace.styles[t]||{}),c),t==="fas"&&defineIcons("fa",e)}var styles=namespace.styles,shims=namespace.shims,LONG_STYLE=Object.values(PREFIX_TO_LONG_STYLE),_defaultUsablePrefix=null,_byUnicode={},_byLigature={},_byOldName={},_byOldUnicode={},_byAlias={},PREFIXES=Object.keys(PREFIX_TO_STYLE);function isReserved(t){return~RESERVED_CLASSES.indexOf(t)}function getIconName(t,e){var n=e.split("-"),i=n[0],a=n.slice(1).join("-");return i===t&&a!==""&&!isReserved(a)?a:null}var build=function t(){var e=function(c){return reduce(styles,function(u,h,s){return u[s]=reduce(h,c,{}),u},{})};_byUnicode=e(function(a,c,u){if(c[3]&&(a[c[3]]=u),c[2]){var h=c[2].filter(function(s){return typeof s=="number"});h.forEach(function(s){a[s.toString(16)]=u})}return a}),_byLigature=e(function(a,c,u){if(a[u]=u,c[2]){var h=c[2].filter(function(s){return typeof s=="string"});h.forEach(function(s){a[s]=u})}return a}),_byAlias=e(function(a,c,u){var h=c[2];return a[u]=u,h.forEach(function(s){a[s]=u}),a});var n="far"in styles||config.autoFetchSvg,i=reduce(shims,function(a,c){var u=c[0],h=c[1],s=c[2];return h==="far"&&!n&&(h="fas"),typeof u=="string"&&(a.names[u]={prefix:h,iconName:s}),typeof u=="number"&&(a.unicodes[u.toString(16)]={prefix:h,iconName:s}),a},{names:{},unicodes:{}});_byOldName=i.names,_byOldUnicode=i.unicodes,_defaultUsablePrefix=getCanonicalPrefix(config.styleDefault)};onChange(function(t){_defaultUsablePrefix=getCanonicalPrefix(t.styleDefault)});build();function byUnicode(t,e){return(_byUnicode[t]||{})[e]}function byLigature(t,e){return(_byLigature[t]||{})[e]}function byAlias(t,e){return(_byAlias[t]||{})[e]}function byOldName(t){return _byOldName[t]||{prefix:null,iconName:null}}function byOldUnicode(t){var e=_byOldUnicode[t],n=byUnicode("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function getDefaultUsablePrefix(){return _defaultUsablePrefix}var emptyCanonicalIcon=function t(){return{prefix:null,iconName:null,rest:[]}};function getCanonicalPrefix(t){var e=PREFIX_TO_STYLE[t],n=STYLE_TO_PREFIX[t]||STYLE_TO_PREFIX[e],i=t in namespace.styles?t:null;return n||i||null}function getCanonicalIcon(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.skipLookups,i=n===void 0?!1:n,a=null,c=t.reduce(function(u,h){var s=getIconName(config.familyPrefix,h);if(styles[h]?(h=LONG_STYLE.includes(h)?LONG_STYLE_TO_PREFIX[h]:h,a=h,u.prefix=h):PREFIXES.indexOf(h)>-1?(a=h,u.prefix=getCanonicalPrefix(h)):s?u.iconName=s:h!==config.replacementClass&&u.rest.push(h),!i&&u.prefix&&u.iconName){var l=a==="fa"?byOldName(u.iconName):{},m=byAlias(u.prefix,u.iconName);l.prefix&&(a=null),u.iconName=l.iconName||m||u.iconName,u.prefix=l.prefix||u.prefix,u.prefix==="far"&&!styles.far&&styles.fas&&!config.autoFetchSvg&&(u.prefix="fas")}return u},emptyCanonicalIcon());return(c.prefix==="fa"||a==="fa")&&(c.prefix=getDefaultUsablePrefix()||"fas"),c}var Library=function(){function t(){_classCallCheck$1(this,t),this.definitions={}}return _createClass$1(t,[{key:"add",value:function(){for(var n=this,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];var u=a.reduce(this._pullDefinitions,{});Object.keys(u).forEach(function(h){n.definitions[h]=_objectSpread2$2(_objectSpread2$2({},n.definitions[h]||{}),u[h]),defineIcons(h,u[h]);var s=PREFIX_TO_LONG_STYLE[h];s&&defineIcons(s,u[h]),build()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,i){var a=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(a).map(function(c){var u=a[c],h=u.prefix,s=u.iconName,l=u.icon,m=l[2];n[h]||(n[h]={}),m.length>0&&m.forEach(function(y){typeof y=="string"&&(n[h][y]=l)}),n[h][s]=l}),n}}]),t}(),_plugins=[],_hooks={},providers={},defaultProviderKeys=Object.keys(providers);function registerPlugins(t,e){var n=e.mixoutsTo;return _plugins=t,_hooks={},Object.keys(providers).forEach(function(i){defaultProviderKeys.indexOf(i)===-1&&delete providers[i]}),_plugins.forEach(function(i){var a=i.mixout?i.mixout():{};if(Object.keys(a).forEach(function(u){typeof a[u]=="function"&&(n[u]=a[u]),_typeof$2(a[u])==="object"&&Object.keys(a[u]).forEach(function(h){n[u]||(n[u]={}),n[u][h]=a[u][h]})}),i.hooks){var c=i.hooks();Object.keys(c).forEach(function(u){_hooks[u]||(_hooks[u]=[]),_hooks[u].push(c[u])})}i.provides&&i.provides(providers)}),n}function chainHooks(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var c=_hooks[t]||[];return c.forEach(function(u){e=u.apply(null,[e].concat(i))}),e}function callHooks(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var a=_hooks[t]||[];a.forEach(function(c){c.apply(null,n)})}function callProvided(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return providers[t]?providers[t].apply(null,e):void 0}function findIconDefinition(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||getDefaultUsablePrefix();if(!!e)return e=byAlias(n,e)||e,iconFromMapping(library.definitions,n,e)||iconFromMapping(namespace.styles,n,e)}var library=new Library,noAuto=function t(){config.autoReplaceSvg=!1,config.observeMutations=!1,callHooks("noAuto")},dom={i2svg:function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return IS_DOM?(callHooks("beforeI2svg",e),callProvided("pseudoElements2svg",e),callProvided("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;config.autoReplaceSvg===!1&&(config.autoReplaceSvg=!0),config.observeMutations=!0,domready(function(){autoReplace({autoReplaceSvgRoot:n}),callHooks("watch",e)})}},parse={icon:function t(e){if(e===null)return null;if(_typeof$2(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:byAlias(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],i=getCanonicalPrefix(e[0]);return{prefix:i,iconName:byAlias(i,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(config.familyPrefix,"-"))>-1||e.match(ICON_SELECTION_SYNTAX_PATTERN))){var a=getCanonicalIcon(e.split(" "),{skipLookups:!0});return{prefix:a.prefix||getDefaultUsablePrefix(),iconName:byAlias(a.prefix,a.iconName)||a.iconName}}if(typeof e=="string"){var c=getDefaultUsablePrefix();return{prefix:c,iconName:byAlias(c,e)||e}}}},api={noAuto,config,dom,parse,library,findIconDefinition,toHtml},autoReplace=function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,i=n===void 0?DOCUMENT:n;(Object.keys(namespace.styles).length>0||config.autoFetchSvg)&&IS_DOM&&config.autoReplaceSvg&&api.dom.i2svg({node:i})};function domVariants(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(i){return toHtml(i)})}}),Object.defineProperty(t,"node",{get:function(){if(!!IS_DOM){var i=DOCUMENT.createElement("div");return i.innerHTML=t.html,i.children}}}),t}function asIcon(t){var e=t.children,n=t.main,i=t.mask,a=t.attributes,c=t.styles,u=t.transform;if(transformIsMeaningful(u)&&n.found&&!i.found){var h=n.width,s=n.height,l={x:h/s/2,y:.5};a.style=joinStyles(_objectSpread2$2(_objectSpread2$2({},c),{},{"transform-origin":"".concat(l.x+u.x/16,"em ").concat(l.y+u.y/16,"em")}))}return[{tag:"svg",attributes:a,children:e}]}function asSymbol(t){var e=t.prefix,n=t.iconName,i=t.children,a=t.attributes,c=t.symbol,u=c===!0?"".concat(e,"-").concat(config.familyPrefix,"-").concat(n):c;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread2$2(_objectSpread2$2({},a),{},{id:u}),children:i}]}]}function makeInlineSvgAbstract(t){var e=t.icons,n=e.main,i=e.mask,a=t.prefix,c=t.iconName,u=t.transform,h=t.symbol,s=t.title,l=t.maskId,m=t.titleId,y=t.extra,g=t.watchable,S=g===void 0?!1:g,E=i.found?i:n,x=E.width,A=E.height,F=a==="fak",D=[config.replacementClass,c?"".concat(config.familyPrefix,"-").concat(c):""].filter(function(q){return y.classes.indexOf(q)===-1}).filter(function(q){return q!==""||!!q}).concat(y.classes).join(" "),$={children:[],attributes:_objectSpread2$2(_objectSpread2$2({},y.attributes),{},{"data-prefix":a,"data-icon":c,class:D,role:y.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(x," ").concat(A)})},k=F&&!~y.classes.indexOf("fa-fw")?{width:"".concat(x/A*16*.0625,"em")}:{};S&&($.attributes[DATA_FA_I2SVG]=""),s&&($.children.push({tag:"title",attributes:{id:$.attributes["aria-labelledby"]||"title-".concat(m||nextUniqueId())},children:[s]}),delete $.attributes.title);var j=_objectSpread2$2(_objectSpread2$2({},$),{},{prefix:a,iconName:c,main:n,mask:i,maskId:l,transform:u,symbol:h,styles:_objectSpread2$2(_objectSpread2$2({},k),y.styles)}),U=i.found&&n.found?callProvided("generateAbstractMask",j)||{children:[],attributes:{}}:callProvided("generateAbstractIcon",j)||{children:[],attributes:{}},W=U.children,G=U.attributes;return j.children=W,j.attributes=G,h?asSymbol(j):asIcon(j)}function makeLayersTextAbstract(t){var e=t.content,n=t.width,i=t.height,a=t.transform,c=t.title,u=t.extra,h=t.watchable,s=h===void 0?!1:h,l=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},u.attributes),c?{title:c}:{}),{},{class:u.classes.join(" ")});s&&(l[DATA_FA_I2SVG]="");var m=_objectSpread2$2({},u.styles);transformIsMeaningful(a)&&(m.transform=transformForCss({transform:a,startCentered:!0,width:n,height:i}),m["-webkit-transform"]=m.transform);var y=joinStyles(m);y.length>0&&(l.style=y);var g=[];return g.push({tag:"span",attributes:l,children:[e]}),c&&g.push({tag:"span",attributes:{class:"sr-only"},children:[c]}),g}function makeLayersCounterAbstract(t){var e=t.content,n=t.title,i=t.extra,a=_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),c=joinStyles(i.styles);c.length>0&&(a.style=c);var u=[];return u.push({tag:"span",attributes:a,children:[e]}),n&&u.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),u}var styles$1=namespace.styles;function asFoundIcon(t){var e=t[0],n=t[1],i=t.slice(4),a=_slicedToArray(i,1),c=a[0],u=null;return Array.isArray(c)?u={tag:"g",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.GROUP)},children:[{tag:"path",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.SECONDARY),fill:"currentColor",d:c[0]}},{tag:"path",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.PRIMARY),fill:"currentColor",d:c[1]}}]}:u={tag:"path",attributes:{fill:"currentColor",d:c}},{found:!0,width:e,height:n,icon:u}}var missingIconResolutionMixin={found:!1,width:512,height:512};function maybeNotifyMissing(t,e){!PRODUCTION$1&&!config.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function findIcon(t,e){var n=e;return e==="fa"&&config.styleDefault!==null&&(e=getDefaultUsablePrefix()),new Promise(function(i,a){if(callProvided("missingIconAbstract"),n==="fa"){var c=byOldName(t)||{};t=c.iconName||t,e=c.prefix||e}if(t&&e&&styles$1[e]&&styles$1[e][t]){var u=styles$1[e][t];return i(asFoundIcon(u))}maybeNotifyMissing(t,e),i(_objectSpread2$2(_objectSpread2$2({},missingIconResolutionMixin),{},{icon:config.showMissingIcons&&t?callProvided("missingIconAbstract")||{}:{}}))})}var noop$1=function t(){},p=config.measurePerformance&&PERFORMANCE&&PERFORMANCE.mark&&PERFORMANCE.measure?PERFORMANCE:{mark:noop$1,measure:noop$1},preamble='FA "6.0.0"',begin=function t(e){return p.mark("".concat(preamble," ").concat(e," begins")),function(){return end(e)}},end=function t(e){p.mark("".concat(preamble," ").concat(e," ends")),p.measure("".concat(preamble," ").concat(e),"".concat(preamble," ").concat(e," begins"),"".concat(preamble," ").concat(e," ends"))},perf={begin,end},noop$2=function t(){};function isWatched(t){var e=t.getAttribute?t.getAttribute(DATA_FA_I2SVG):null;return typeof e=="string"}function hasPrefixAndIcon(t){var e=t.getAttribute?t.getAttribute(DATA_PREFIX):null,n=t.getAttribute?t.getAttribute(DATA_ICON):null;return e&&n}function hasBeenReplaced(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(config.replacementClass)}function getMutator(){if(config.autoReplaceSvg===!0)return mutators.replace;var t=mutators[config.autoReplaceSvg];return t||mutators.replace}function createElementNS(t){return DOCUMENT.createElementNS("http://www.w3.org/2000/svg",t)}function createElement(t){return DOCUMENT.createElement(t)}function convertSVG(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,i=n===void 0?t.tag==="svg"?createElementNS:createElement:n;if(typeof t=="string")return DOCUMENT.createTextNode(t);var a=i(t.tag);Object.keys(t.attributes||[]).forEach(function(u){a.setAttribute(u,t.attributes[u])});var c=t.children||[];return c.forEach(function(u){a.appendChild(convertSVG(u,{ceFn:i}))}),a}function nodeAsComment(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var mutators={replace:function t(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(a){n.parentNode.insertBefore(convertSVG(a),n)}),n.getAttribute(DATA_FA_I2SVG)===null&&config.keepOriginalSource){var i=DOCUMENT.createComment(nodeAsComment(n));n.parentNode.replaceChild(i,n)}else n.remove()},nest:function t(e){var n=e[0],i=e[1];if(~classArray(n).indexOf(config.replacementClass))return mutators.replace(e);var a=new RegExp("".concat(config.familyPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var c=i[0].attributes.class.split(" ").reduce(function(h,s){return s===config.replacementClass||s.match(a)?h.toSvg.push(s):h.toNode.push(s),h},{toNode:[],toSvg:[]});i[0].attributes.class=c.toSvg.join(" "),c.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",c.toNode.join(" "))}var u=i.map(function(h){return toHtml(h)}).join(`
`);n.setAttribute(DATA_FA_I2SVG,""),n.innerHTML=u}};function performOperationSync(t){t()}function perform(t,e){var n=typeof e=="function"?e:noop$2;if(t.length===0)n();else{var i=performOperationSync;config.mutateApproach===MUTATION_APPROACH_ASYNC&&(i=WINDOW.requestAnimationFrame||performOperationSync),i(function(){var a=getMutator(),c=perf.begin("mutate");t.map(a),c(),n()})}}var disabled=!1;function disableObservation(){disabled=!0}function enableObservation(){disabled=!1}var mo=null;function observe$1(t){if(!!MUTATION_OBSERVER&&!!config.observeMutations){var e=t.treeCallback,n=e===void 0?noop$2:e,i=t.nodeCallback,a=i===void 0?noop$2:i,c=t.pseudoElementsCallback,u=c===void 0?noop$2:c,h=t.observeMutationsRoot,s=h===void 0?DOCUMENT:h;mo=new MUTATION_OBSERVER(function(l){if(!disabled){var m=getDefaultUsablePrefix();toArray(l).forEach(function(y){if(y.type==="childList"&&y.addedNodes.length>0&&!isWatched(y.addedNodes[0])&&(config.searchPseudoElements&&u(y.target),n(y.target)),y.type==="attributes"&&y.target.parentNode&&config.searchPseudoElements&&u(y.target.parentNode),y.type==="attributes"&&isWatched(y.target)&&~ATTRIBUTES_WATCHED_FOR_MUTATION.indexOf(y.attributeName))if(y.attributeName==="class"&&hasPrefixAndIcon(y.target)){var g=getCanonicalIcon(classArray(y.target)),S=g.prefix,E=g.iconName;y.target.setAttribute(DATA_PREFIX,S||m),E&&y.target.setAttribute(DATA_ICON,E)}else hasBeenReplaced(y.target)&&a(y.target)})}}),IS_DOM&&mo.observe(s,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function disconnect(){!mo||mo.disconnect()}function styleParser(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(i,a){var c=a.split(":"),u=c[0],h=c.slice(1);return u&&h.length>0&&(i[u]=h.join(":").trim()),i},{})),n}function classParser(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"",a=getCanonicalIcon(classArray(t));return a.prefix||(a.prefix=getDefaultUsablePrefix()),e&&n&&(a.prefix=e,a.iconName=n),a.iconName&&a.prefix||a.prefix&&i.length>0&&(a.iconName=byLigature(a.prefix,t.innerText)||byUnicode(a.prefix,toHex(t.innerText))),a}function attributesParser(t){var e=toArray(t.attributes).reduce(function(a,c){return a.name!=="class"&&a.name!=="style"&&(a[c.name]=c.value),a},{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return config.autoA11y&&(n?e["aria-labelledby"]="".concat(config.replacementClass,"-title-").concat(i||nextUniqueId()):(e["aria-hidden"]="true",e.focusable="false")),e}function blankMeta(){return{iconName:null,title:null,titleId:null,prefix:null,transform:meaninglessTransform,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function parseMeta(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=classParser(t),i=n.iconName,a=n.prefix,c=n.rest,u=attributesParser(t),h=chainHooks("parseNodeAttributes",{},t),s=e.styleParser?styleParser(t):[];return _objectSpread2$2({iconName:i,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:a,transform:meaninglessTransform,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:c,styles:s,attributes:u}},h)}var styles$2=namespace.styles;function generateMutation(t){var e=config.autoReplaceSvg==="nest"?parseMeta(t,{styleParser:!1}):parseMeta(t);return~e.extra.classes.indexOf(LAYERS_TEXT_CLASSNAME)?callProvided("generateLayersText",t,e):callProvided("generateSvgReplacementMutation",t,e)}function onTree(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!IS_DOM)return Promise.resolve();var n=DOCUMENT.documentElement.classList,i=function(y){return n.add("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(y))},a=function(y){return n.remove("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(y))},c=config.autoFetchSvg?Object.keys(PREFIX_TO_STYLE):Object.keys(styles$2),u=[".".concat(LAYERS_TEXT_CLASSNAME,":not([").concat(DATA_FA_I2SVG,"])")].concat(c.map(function(m){return".".concat(m,":not([").concat(DATA_FA_I2SVG,"])")})).join(", ");if(u.length===0)return Promise.resolve();var h=[];try{h=toArray(t.querySelectorAll(u))}catch{}if(h.length>0)i("pending"),a("complete");else return Promise.resolve();var s=perf.begin("onTree"),l=h.reduce(function(m,y){try{var g=generateMutation(y);g&&m.push(g)}catch(S){PRODUCTION$1||S.name==="MissingIcon"&&console.error(S)}return m},[]);return new Promise(function(m,y){Promise.all(l).then(function(g){perform(g,function(){i("active"),i("complete"),a("pending"),typeof e=="function"&&e(),s(),m()})}).catch(function(g){s(),y(g)})})}function onNode(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;generateMutation(t).then(function(n){n&&perform([n],e)})}function resolveIcons(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=(e||{}).icon?e:findIconDefinition(e||{}),a=n.mask;return a&&(a=(a||{}).icon?a:findIconDefinition(a||{})),t(i,_objectSpread2$2(_objectSpread2$2({},n),{},{mask:a}))}}var render$1=function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.transform,a=i===void 0?meaninglessTransform:i,c=n.symbol,u=c===void 0?!1:c,h=n.mask,s=h===void 0?null:h,l=n.maskId,m=l===void 0?null:l,y=n.title,g=y===void 0?null:y,S=n.titleId,E=S===void 0?null:S,x=n.classes,A=x===void 0?[]:x,F=n.attributes,D=F===void 0?{}:F,$=n.styles,k=$===void 0?{}:$;if(!!e){var j=e.prefix,U=e.iconName,W=e.icon;return domVariants(_objectSpread2$2({type:"icon"},e),function(){return callHooks("beforeDOMElementCreation",{iconDefinition:e,params:n}),config.autoA11y&&(g?D["aria-labelledby"]="".concat(config.replacementClass,"-title-").concat(E||nextUniqueId()):(D["aria-hidden"]="true",D.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(W),mask:s?asFoundIcon(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:j,iconName:U,transform:_objectSpread2$2(_objectSpread2$2({},meaninglessTransform),a),symbol:u,title:g,maskId:m,titleId:E,extra:{attributes:D,styles:k,classes:A}})})}},ReplaceElements={mixout:function t(){return{icon:resolveIcons(render$1)}},hooks:function t(){return{mutationObserverCallbacks:function(n){return n.treeCallback=onTree,n.nodeCallback=onNode,n}}},provides:function t(e){e.i2svg=function(n){var i=n.node,a=i===void 0?DOCUMENT:i,c=n.callback,u=c===void 0?function(){}:c;return onTree(a,u)},e.generateSvgReplacementMutation=function(n,i){var a=i.iconName,c=i.title,u=i.titleId,h=i.prefix,s=i.transform,l=i.symbol,m=i.mask,y=i.maskId,g=i.extra;return new Promise(function(S,E){Promise.all([findIcon(a,h),m.iconName?findIcon(m.iconName,m.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(x){var A=_slicedToArray(x,2),F=A[0],D=A[1];S([n,makeInlineSvgAbstract({icons:{main:F,mask:D},prefix:h,iconName:a,transform:s,symbol:l,maskId:y,title:c,titleId:u,extra:g,watchable:!0})])}).catch(E)})},e.generateAbstractIcon=function(n){var i=n.children,a=n.attributes,c=n.main,u=n.transform,h=n.styles,s=joinStyles(h);s.length>0&&(a.style=s);var l;return transformIsMeaningful(u)&&(l=callProvided("generateAbstractTransformGrouping",{main:c,transform:u,containerWidth:c.width,iconWidth:c.width})),i.push(l||c.icon),{children:i,attributes:a}}}},Layers={mixout:function t(){return{layer:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.classes,c=a===void 0?[]:a;return domVariants({type:"layer"},function(){callHooks("beforeDOMElementCreation",{assembler:n,params:i});var u=[];return n(function(h){Array.isArray(h)?h.map(function(s){u=u.concat(s.abstract)}):u=u.concat(h.abstract)}),[{tag:"span",attributes:{class:["".concat(config.familyPrefix,"-layers")].concat(_toConsumableArray$1(c)).join(" ")},children:u}]})}}}},LayersCounter={mixout:function t(){return{counter:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.title,c=a===void 0?null:a,u=i.classes,h=u===void 0?[]:u,s=i.attributes,l=s===void 0?{}:s,m=i.styles,y=m===void 0?{}:m;return domVariants({type:"counter",content:n},function(){return callHooks("beforeDOMElementCreation",{content:n,params:i}),makeLayersCounterAbstract({content:n.toString(),title:c,extra:{attributes:l,styles:y,classes:["".concat(config.familyPrefix,"-layers-counter")].concat(_toConsumableArray$1(h))}})})}}}},LayersText={mixout:function t(){return{text:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,c=a===void 0?meaninglessTransform:a,u=i.title,h=u===void 0?null:u,s=i.classes,l=s===void 0?[]:s,m=i.attributes,y=m===void 0?{}:m,g=i.styles,S=g===void 0?{}:g;return domVariants({type:"text",content:n},function(){return callHooks("beforeDOMElementCreation",{content:n,params:i}),makeLayersTextAbstract({content:n,transform:_objectSpread2$2(_objectSpread2$2({},meaninglessTransform),c),title:h,extra:{attributes:y,styles:S,classes:["".concat(config.familyPrefix,"-layers-text")].concat(_toConsumableArray$1(l))}})})}}},provides:function t(e){e.generateLayersText=function(n,i){var a=i.title,c=i.transform,u=i.extra,h=null,s=null;if(IS_IE){var l=parseInt(getComputedStyle(n).fontSize,10),m=n.getBoundingClientRect();h=m.width/l,s=m.height/l}return config.autoA11y&&!a&&(u.attributes["aria-hidden"]="true"),Promise.resolve([n,makeLayersTextAbstract({content:n.innerHTML,width:h,height:s,transform:c,title:a,extra:u,watchable:!0})])}}},CLEAN_CONTENT_PATTERN=new RegExp('"',"ug"),SECONDARY_UNICODE_RANGE=[1105920,1112319];function hexValueFromContent(t){var e=t.replace(CLEAN_CONTENT_PATTERN,""),n=codePointAt(e,0),i=n>=SECONDARY_UNICODE_RANGE[0]&&n<=SECONDARY_UNICODE_RANGE[1],a=e.length===2?e[0]===e[1]:!1;return{value:toHex(a?e[0]:e),isSecondary:i||a}}function replaceForPosition(t,e){var n="".concat(DATA_FA_PSEUDO_ELEMENT_PENDING).concat(e.replace(":","-"));return new Promise(function(i,a){if(t.getAttribute(n)!==null)return i();var c=toArray(t.children),u=c.filter(function(U){return U.getAttribute(DATA_FA_PSEUDO_ELEMENT)===e})[0],h=WINDOW.getComputedStyle(t,e),s=h.getPropertyValue("font-family").match(FONT_FAMILY_PATTERN),l=h.getPropertyValue("font-weight"),m=h.getPropertyValue("content");if(u&&!s)return t.removeChild(u),i();if(s&&m!=="none"&&m!==""){var y=h.getPropertyValue("content"),g=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(s[2])?STYLE_TO_PREFIX[s[2].toLowerCase()]:FONT_WEIGHT_TO_PREFIX[l],S=hexValueFromContent(y),E=S.value,x=S.isSecondary,A=s[0].startsWith("FontAwesome"),F=byUnicode(g,E),D=F;if(A){var $=byOldUnicode(E);$.iconName&&$.prefix&&(F=$.iconName,g=$.prefix)}if(F&&!x&&(!u||u.getAttribute(DATA_PREFIX)!==g||u.getAttribute(DATA_ICON)!==D)){t.setAttribute(n,D),u&&t.removeChild(u);var k=blankMeta(),j=k.extra;j.attributes[DATA_FA_PSEUDO_ELEMENT]=e,findIcon(F,g).then(function(U){var W=makeInlineSvgAbstract(_objectSpread2$2(_objectSpread2$2({},k),{},{icons:{main:U,mask:emptyCanonicalIcon()},prefix:g,iconName:D,extra:j,watchable:!0})),G=DOCUMENT.createElement("svg");e==="::before"?t.insertBefore(G,t.firstChild):t.appendChild(G),G.outerHTML=W.map(function(q){return toHtml(q)}).join(`
`),t.removeAttribute(n),i()}).catch(a)}else i()}else i()})}function replace(t){return Promise.all([replaceForPosition(t,"::before"),replaceForPosition(t,"::after")])}function processable(t){return t.parentNode!==document.head&&!~TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(DATA_FA_PSEUDO_ELEMENT)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function searchPseudoElements(t){if(!!IS_DOM)return new Promise(function(e,n){var i=toArray(t.querySelectorAll("*")).filter(processable).map(replace),a=perf.begin("searchPseudoElements");disableObservation(),Promise.all(i).then(function(){a(),enableObservation(),e()}).catch(function(){a(),enableObservation(),n()})})}var PseudoElements={hooks:function t(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=searchPseudoElements,n}}},provides:function t(e){e.pseudoElements2svg=function(n){var i=n.node,a=i===void 0?DOCUMENT:i;config.searchPseudoElements&&searchPseudoElements(a)}}},_unwatched=!1,MutationObserver$1={mixout:function t(){return{dom:{unwatch:function(){disableObservation(),_unwatched=!0}}}},hooks:function t(){return{bootstrap:function(){observe$1(chainHooks("mutationObserverCallbacks",{}))},noAuto:function(){disconnect()},watch:function(n){var i=n.observeMutationsRoot;_unwatched?enableObservation():observe$1(chainHooks("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},parseTransformString=function t(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(i,a){var c=a.toLowerCase().split("-"),u=c[0],h=c.slice(1).join("-");if(u&&h==="h")return i.flipX=!0,i;if(u&&h==="v")return i.flipY=!0,i;if(h=parseFloat(h),isNaN(h))return i;switch(u){case"grow":i.size=i.size+h;break;case"shrink":i.size=i.size-h;break;case"left":i.x=i.x-h;break;case"right":i.x=i.x+h;break;case"up":i.y=i.y-h;break;case"down":i.y=i.y+h;break;case"rotate":i.rotate=i.rotate+h;break}return i},n)},PowerTransforms={mixout:function t(){return{parse:{transform:function(n){return parseTransformString(n)}}}},hooks:function t(){return{parseNodeAttributes:function(n,i){var a=i.getAttribute("data-fa-transform");return a&&(n.transform=parseTransformString(a)),n}}},provides:function t(e){e.generateAbstractTransformGrouping=function(n){var i=n.main,a=n.transform,c=n.containerWidth,u=n.iconWidth,h={transform:"translate(".concat(c/2," 256)")},s="translate(".concat(a.x*32,", ").concat(a.y*32,") "),l="scale(".concat(a.size/16*(a.flipX?-1:1),", ").concat(a.size/16*(a.flipY?-1:1),") "),m="rotate(".concat(a.rotate," 0 0)"),y={transform:"".concat(s," ").concat(l," ").concat(m)},g={transform:"translate(".concat(u/2*-1," -256)")},S={outer:h,inner:y,path:g};return{tag:"g",attributes:_objectSpread2$2({},S.outer),children:[{tag:"g",attributes:_objectSpread2$2({},S.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:_objectSpread2$2(_objectSpread2$2({},i.icon.attributes),S.path)}]}]}}}},ALL_SPACE={x:0,y:0,width:"100%",height:"100%"};function fillBlack(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function deGroup(t){return t.tag==="g"?t.children:[t]}var Masks={hooks:function t(){return{parseNodeAttributes:function(n,i){var a=i.getAttribute("data-fa-mask"),c=a?getCanonicalIcon(a.split(" ").map(function(u){return u.trim()})):emptyCanonicalIcon();return c.prefix||(c.prefix=getDefaultUsablePrefix()),n.mask=c,n.maskId=i.getAttribute("data-fa-mask-id"),n}}},provides:function t(e){e.generateAbstractMask=function(n){var i=n.children,a=n.attributes,c=n.main,u=n.mask,h=n.maskId,s=n.transform,l=c.width,m=c.icon,y=u.width,g=u.icon,S=transformForSvg({transform:s,containerWidth:y,iconWidth:l}),E={tag:"rect",attributes:_objectSpread2$2(_objectSpread2$2({},ALL_SPACE),{},{fill:"white"})},x=m.children?{children:m.children.map(fillBlack)}:{},A={tag:"g",attributes:_objectSpread2$2({},S.inner),children:[fillBlack(_objectSpread2$2({tag:m.tag,attributes:_objectSpread2$2(_objectSpread2$2({},m.attributes),S.path)},x))]},F={tag:"g",attributes:_objectSpread2$2({},S.outer),children:[A]},D="mask-".concat(h||nextUniqueId()),$="clip-".concat(h||nextUniqueId()),k={tag:"mask",attributes:_objectSpread2$2(_objectSpread2$2({},ALL_SPACE),{},{id:D,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[E,F]},j={tag:"defs",children:[{tag:"clipPath",attributes:{id:$},children:deGroup(g)},k]};return i.push(j,{tag:"rect",attributes:_objectSpread2$2({fill:"currentColor","clip-path":"url(#".concat($,")"),mask:"url(#".concat(D,")")},ALL_SPACE)}),{children:i,attributes:a}}}},MissingIconIndicator={provides:function t(e){var n=!1;WINDOW.matchMedia&&(n=WINDOW.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],a={fill:"currentColor"},c={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},a),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var u=_objectSpread2$2(_objectSpread2$2({},c),{},{attributeName:"opacity"}),h={tag:"circle",attributes:_objectSpread2$2(_objectSpread2$2({},a),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||h.children.push({tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},c),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},u),{},{values:"1;0;1;1;0;1;"})}),i.push(h),i.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},a),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},u),{},{values:"1;0;0;0;0;1;"})}]}),n||i.push({tag:"path",attributes:_objectSpread2$2(_objectSpread2$2({},a),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:_objectSpread2$2(_objectSpread2$2({},u),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},SvgSymbols={hooks:function t(){return{parseNodeAttributes:function(n,i){var a=i.getAttribute("data-fa-symbol"),c=a===null?!1:a===""?!0:a;return n.symbol=c,n}}}},plugins=[InjectCSS,ReplaceElements,Layers,LayersCounter,LayersText,PseudoElements,MutationObserver$1,PowerTransforms,Masks,MissingIconIndicator,SvgSymbols];registerPlugins(plugins,{mixoutsTo:api});api.noAuto;api.config;api.library;api.dom;var parse$1=api.parse;api.findIconDefinition;api.toHtml;var icon=api.icon;api.layer;api.text;api.counter;function ownKeys$1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function _objectSpread2$1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(n),!0).forEach(function(i){_defineProperty$1(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _typeof$1(t){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(t)}function _defineProperty$1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _objectWithoutPropertiesLoose$2(t,e){if(t==null)return{};var n={},i=Object.keys(t),a,c;for(c=0;c<i.length;c++)a=i[c],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function _objectWithoutProperties$1(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$2(t,e),i,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(a=0;a<c.length;a++)i=c[a],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(n[i]=t[i]))}return n}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _iterableToArray(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _unsupportedIterableToArray(t,e){if(!!t){if(typeof t=="string")return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(t,e)}}function _arrayLikeToArray(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function classList(t){var e,n=t.beat,i=t.fade,a=t.beatFade,c=t.bounce,u=t.shake,h=t.flash,s=t.spin,l=t.spinPulse,m=t.spinReverse,y=t.pulse,g=t.fixedWidth,S=t.inverse,E=t.border,x=t.listItem,A=t.flip,F=t.size,D=t.rotation,$=t.pull,k=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":a,"fa-bounce":c,"fa-shake":u,"fa-flash":h,"fa-spin":s,"fa-spin-reverse":m,"fa-spin-pulse":l,"fa-pulse":y,"fa-fw":g,"fa-inverse":S,"fa-border":E,"fa-li":x,"fa-flip-horizontal":A==="horizontal"||A==="both","fa-flip-vertical":A==="vertical"||A==="both"},_defineProperty$1(e,"fa-".concat(F),typeof F!="undefined"&&F!==null),_defineProperty$1(e,"fa-rotate-".concat(D),typeof D!="undefined"&&D!==null&&D!==0),_defineProperty$1(e,"fa-pull-".concat($),typeof $!="undefined"&&$!==null),_defineProperty$1(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(k).map(function(j){return k[j]?j:null}).filter(function(j){return j})}function _isNumerical(t){return t=t-0,t===t}function camelize(t){return _isNumerical(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var _excluded$1=["style"];function capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)}function styleToObject(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),a=camelize(n.slice(0,i)),c=n.slice(i+1).trim();return a.startsWith("webkit")?e[capitalize(a)]=c:e[a]=c,e},{})}function convert(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(s){return convert(t,s)}),a=Object.keys(e.attributes||{}).reduce(function(s,l){var m=e.attributes[l];switch(l){case"class":s.attrs.className=m,delete e.attributes.class;break;case"style":s.attrs.style=styleToObject(m);break;default:l.indexOf("aria-")===0||l.indexOf("data-")===0?s.attrs[l.toLowerCase()]=m:s.attrs[camelize(l)]=m}return s},{attrs:{}}),c=n.style,u=c===void 0?{}:c,h=_objectWithoutProperties$1(n,_excluded$1);return a.attrs.style=_objectSpread2$1(_objectSpread2$1({},a.attrs.style),u),t.apply(void 0,[e.tag,_objectSpread2$1(_objectSpread2$1({},a.attrs),h)].concat(_toConsumableArray(i)))}var PRODUCTION=!1;try{PRODUCTION=!0}catch(t){}function log(){if(!PRODUCTION&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function normalizeIconArgs(t){if(t&&_typeof$1(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(parse$1.icon)return parse$1.icon(t);if(t===null)return null;if(t&&_typeof$1(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function objectWithKey(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?_defineProperty$1({},t,e):{}}var _excluded=["forwardedRef"];function FontAwesomeIcon(t){var e=t.forwardedRef,n=_objectWithoutProperties$1(t,_excluded),i=n.icon,a=n.mask,c=n.symbol,u=n.className,h=n.title,s=n.titleId,l=n.maskId,m=normalizeIconArgs(i),y=objectWithKey("classes",[].concat(_toConsumableArray(classList(n)),_toConsumableArray(u.split(" ")))),g=objectWithKey("transform",typeof n.transform=="string"?parse$1.transform(n.transform):n.transform),S=objectWithKey("mask",normalizeIconArgs(a)),E=icon(m,_objectSpread2$1(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},y),g),S),{},{symbol:c,title:h,titleId:s,maskId:l}));if(!E)return log("Could not find icon",m),null;var x=E.abstract,A={ref:e};return Object.keys(n).forEach(function(F){FontAwesomeIcon.defaultProps.hasOwnProperty(F)||(A[F]=n[F])}),convertCurry(x[0],A)}FontAwesomeIcon.displayName="FontAwesomeIcon";FontAwesomeIcon.propTypes={beat:PropTypes.bool,border:PropTypes.bool,bounce:PropTypes.bool,className:PropTypes.string,fade:PropTypes.bool,flash:PropTypes.bool,mask:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),maskId:PropTypes.string,fixedWidth:PropTypes.bool,inverse:PropTypes.bool,flip:PropTypes.oneOf(["horizontal","vertical","both"]),icon:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),listItem:PropTypes.bool,pull:PropTypes.oneOf(["right","left"]),pulse:PropTypes.bool,rotation:PropTypes.oneOf([0,90,180,270]),shake:PropTypes.bool,size:PropTypes.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:PropTypes.bool,spinPulse:PropTypes.bool,spinReverse:PropTypes.bool,symbol:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),title:PropTypes.string,titleId:PropTypes.string,transform:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),swapOpacity:PropTypes.bool};FontAwesomeIcon.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var convertCurry=convert.bind(null,React$1.createElement),BOX_CLASS="tippy-box",CONTENT_CLASS="tippy-content",BACKDROP_CLASS="tippy-backdrop",ARROW_CLASS="tippy-arrow",SVG_ARROW_CLASS="tippy-svg-arrow",TOUCH_OPTIONS={passive:!0,capture:!0},TIPPY_DEFAULT_APPEND_TO=function t(){return document.body};function getValueAtIndexOrReturn(t,e,n){if(Array.isArray(t)){var i=t[e];return i==null?Array.isArray(n)?n[e]:n:i}return t}function isType(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function invokeWithArgsOrReturn(t,e){return typeof t=="function"?t.apply(void 0,e):t}function debounce(t,e){if(e===0)return t;var n;return function(i){clearTimeout(n),n=setTimeout(function(){t(i)},e)}}function splitBySpaces(t){return t.split(/\s+/).filter(Boolean)}function normalizeToArray(t){return[].concat(t)}function pushIfUnique(t,e){t.indexOf(e)===-1&&t.push(e)}function unique(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function getBasePlacement(t){return t.split("-")[0]}function arrayFrom(t){return[].slice.call(t)}function removeUndefinedProps(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function div(){return document.createElement("div")}function isElement(t){return["Element","Fragment"].some(function(e){return isType(t,e)})}function isNodeList(t){return isType(t,"NodeList")}function isMouseEvent(t){return isType(t,"MouseEvent")}function isReferenceElement(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function getArrayOfElements(t){return isElement(t)?[t]:isNodeList(t)?arrayFrom(t):Array.isArray(t)?t:arrayFrom(document.querySelectorAll(t))}function setTransitionDuration(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function setVisibilityState(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function getOwnerDocument(t){var e,n=normalizeToArray(t),i=n[0];return i!=null&&(e=i.ownerDocument)!=null&&e.body?i.ownerDocument:document}function isCursorOutsideInteractiveBorder(t,e){var n=e.clientX,i=e.clientY;return t.every(function(a){var c=a.popperRect,u=a.popperState,h=a.props,s=h.interactiveBorder,l=getBasePlacement(u.placement),m=u.modifiersData.offset;if(!m)return!0;var y=l==="bottom"?m.top.y:0,g=l==="top"?m.bottom.y:0,S=l==="right"?m.left.x:0,E=l==="left"?m.right.x:0,x=c.top-i+y>s,A=i-c.bottom-g>s,F=c.left-n+S>s,D=n-c.right-E>s;return x||A||F||D})}function updateTransitionEndListener(t,e,n){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(a){t[i](a,n)})}function actualContains(t,e){for(var n=e;n;){var i;if(t.contains(n))return!0;n=n.getRootNode==null||(i=n.getRootNode())==null?void 0:i.host}return!1}var currentInput={isTouch:!1},lastMouseMoveTime=0;function onDocumentTouchStart(){currentInput.isTouch||(currentInput.isTouch=!0,window.performance&&document.addEventListener("mousemove",onDocumentMouseMove))}function onDocumentMouseMove(){var t=performance.now();t-lastMouseMoveTime<20&&(currentInput.isTouch=!1,document.removeEventListener("mousemove",onDocumentMouseMove)),lastMouseMoveTime=t}function onWindowBlur(){var t=document.activeElement;if(isReferenceElement(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function bindGlobalEventListeners(){document.addEventListener("touchstart",onDocumentTouchStart,TOUCH_OPTIONS),window.addEventListener("blur",onWindowBlur)}var isBrowser$2=typeof window!="undefined"&&typeof document!="undefined",isIE11=isBrowser$2?!!window.msCrypto:!1,pluginProps={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},renderProps={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function t(){},onBeforeUpdate:function t(){},onCreate:function t(){},onDestroy:function t(){},onHidden:function t(){},onHide:function t(){},onMount:function t(){},onShow:function t(){},onShown:function t(){},onTrigger:function t(){},onUntrigger:function t(){},onClickOutside:function t(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pluginProps,renderProps),defaultKeys=Object.keys(defaultProps),setDefaultProps=function t(e){var n=Object.keys(e);n.forEach(function(i){defaultProps[i]=e[i]})};function getExtendedPassedProps(t){var e=t.plugins||[],n=e.reduce(function(i,a){var c=a.name,u=a.defaultValue;if(c){var h;i[c]=t[c]!==void 0?t[c]:(h=defaultProps[c])!=null?h:u}return i},{});return Object.assign({},t,n)}function getDataAttributeProps(t,e){var n=e?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:e}))):defaultKeys,i=n.reduce(function(a,c){var u=(t.getAttribute("data-tippy-"+c)||"").trim();if(!u)return a;if(c==="content")a[c]=u;else try{a[c]=JSON.parse(u)}catch{a[c]=u}return a},{});return i}function evaluateProps(t,e){var n=Object.assign({},e,{content:invokeWithArgsOrReturn(e.content,[t])},e.ignoreAttributes?{}:getDataAttributeProps(t,e.plugins));return n.aria=Object.assign({},defaultProps.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var innerHTML=function t(){return"innerHTML"};function dangerouslySetInnerHTML(t,e){t[innerHTML()]=e}function createArrowElement(t){var e=div();return t===!0?e.className=ARROW_CLASS:(e.className=SVG_ARROW_CLASS,isElement(t)?e.appendChild(t):dangerouslySetInnerHTML(e,t)),e}function setContent(t,e){isElement(e.content)?(dangerouslySetInnerHTML(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?dangerouslySetInnerHTML(t,e.content):t.textContent=e.content)}function getChildren(t){var e=t.firstElementChild,n=arrayFrom(e.children);return{box:e,content:n.find(function(i){return i.classList.contains(CONTENT_CLASS)}),arrow:n.find(function(i){return i.classList.contains(ARROW_CLASS)||i.classList.contains(SVG_ARROW_CLASS)}),backdrop:n.find(function(i){return i.classList.contains(BACKDROP_CLASS)})}}function render(t){var e=div(),n=div();n.className=BOX_CLASS,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=div();i.className=CONTENT_CLASS,i.setAttribute("data-state","hidden"),setContent(i,t.props),e.appendChild(n),n.appendChild(i),a(t.props,t.props);function a(c,u){var h=getChildren(e),s=h.box,l=h.content,m=h.arrow;u.theme?s.setAttribute("data-theme",u.theme):s.removeAttribute("data-theme"),typeof u.animation=="string"?s.setAttribute("data-animation",u.animation):s.removeAttribute("data-animation"),u.inertia?s.setAttribute("data-inertia",""):s.removeAttribute("data-inertia"),s.style.maxWidth=typeof u.maxWidth=="number"?u.maxWidth+"px":u.maxWidth,u.role?s.setAttribute("role",u.role):s.removeAttribute("role"),(c.content!==u.content||c.allowHTML!==u.allowHTML)&&setContent(l,t.props),u.arrow?m?c.arrow!==u.arrow&&(s.removeChild(m),s.appendChild(createArrowElement(u.arrow))):s.appendChild(createArrowElement(u.arrow)):m&&s.removeChild(m)}return{popper:e,onUpdate:a}}render.$$tippy=!0;var idCounter=1,mouseMoveListeners=[],mountedInstances=[];function createTippy(t,e){var n=evaluateProps(t,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(e)))),i,a,c,u=!1,h=!1,s=!1,l=!1,m,y,g,S=[],E=debounce(ae,n.interactiveDebounce),x,A=idCounter++,F=null,D=unique(n.plugins),$={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},k={id:A,reference:t,popper:div(),popperInstance:F,props:n,state:$,plugins:D,clearDelayTimeouts:ce,setProps:X,setContent:K,show:se,hide:fe,hideWithInteractivity:pe,enable:Te,disable:ke,unmount:ue,destroy:Ce};if(!n.render)return k;var j=n.render(k),U=j.popper,W=j.onUpdate;U.setAttribute("data-tippy-root",""),U.id="tippy-"+k.id,k.popper=U,t._tippy=k,U._tippy=k;var G=D.map(function(ie){return ie.fn(k)}),q=t.hasAttribute("aria-expanded");return C(),H(),ee(),V("onCreate",[k]),n.showOnCreate&&ye(),U.addEventListener("mouseenter",function(){k.props.interactive&&k.state.isVisible&&k.clearDelayTimeouts()}),U.addEventListener("mouseleave",function(){k.props.interactive&&k.props.trigger.indexOf("mouseenter")>=0&&T().addEventListener("mousemove",E)}),k;function f(){var ie=k.props.touch;return Array.isArray(ie)?ie:[ie,0]}function o(){return f()[0]==="hold"}function v(){var ie;return!!((ie=k.props.render)!=null&&ie.$$tippy)}function b(){return x||t}function T(){var ie=b().parentNode;return ie?getOwnerDocument(ie):document}function _(){return getChildren(U)}function B(ie){return k.state.isMounted&&!k.state.isVisible||currentInput.isTouch||m&&m.type==="focus"?0:getValueAtIndexOrReturn(k.props.delay,ie?0:1,defaultProps.delay)}function ee(ie){ie===void 0&&(ie=!1),U.style.pointerEvents=k.props.interactive&&!ie?"":"none",U.style.zIndex=""+k.props.zIndex}function V(ie,ge,xe){if(xe===void 0&&(xe=!0),G.forEach(function(Pe){Pe[ie]&&Pe[ie].apply(Pe,ge)}),xe){var Ie;(Ie=k.props)[ie].apply(Ie,ge)}}function Z(){var ie=k.props.aria;if(!!ie.content){var ge="aria-"+ie.content,xe=U.id,Ie=normalizeToArray(k.props.triggerTarget||t);Ie.forEach(function(Pe){var De=Pe.getAttribute(ge);if(k.state.isVisible)Pe.setAttribute(ge,De?De+" "+xe:xe);else{var Me=De&&De.replace(xe,"").trim();Me?Pe.setAttribute(ge,Me):Pe.removeAttribute(ge)}})}}function H(){if(!(q||!k.props.aria.expanded)){var ie=normalizeToArray(k.props.triggerTarget||t);ie.forEach(function(ge){k.props.interactive?ge.setAttribute("aria-expanded",k.state.isVisible&&ge===b()?"true":"false"):ge.removeAttribute("aria-expanded")})}}function Q(){T().removeEventListener("mousemove",E),mouseMoveListeners=mouseMoveListeners.filter(function(ie){return ie!==E})}function te(ie){if(!(currentInput.isTouch&&(s||ie.type==="mousedown"))){var ge=ie.composedPath&&ie.composedPath()[0]||ie.target;if(!(k.props.interactive&&actualContains(U,ge))){if(normalizeToArray(k.props.triggerTarget||t).some(function(xe){return actualContains(xe,ge)})){if(currentInput.isTouch||k.state.isVisible&&k.props.trigger.indexOf("click")>=0)return}else V("onClickOutside",[k,ie]);k.props.hideOnClick===!0&&(k.clearDelayTimeouts(),k.hide(),h=!0,setTimeout(function(){h=!1}),k.state.isMounted||O())}}}function N(){s=!0}function M(){s=!1}function J(){var ie=T();ie.addEventListener("mousedown",te,!0),ie.addEventListener("touchend",te,TOUCH_OPTIONS),ie.addEventListener("touchstart",M,TOUCH_OPTIONS),ie.addEventListener("touchmove",N,TOUCH_OPTIONS)}function O(){var ie=T();ie.removeEventListener("mousedown",te,!0),ie.removeEventListener("touchend",te,TOUCH_OPTIONS),ie.removeEventListener("touchstart",M,TOUCH_OPTIONS),ie.removeEventListener("touchmove",N,TOUCH_OPTIONS)}function P(ie,ge){re(ie,function(){!k.state.isVisible&&U.parentNode&&U.parentNode.contains(U)&&ge()})}function L(ie,ge){re(ie,ge)}function re(ie,ge){var xe=_().box;function Ie(Pe){Pe.target===xe&&(updateTransitionEndListener(xe,"remove",Ie),ge())}if(ie===0)return ge();updateTransitionEndListener(xe,"remove",y),updateTransitionEndListener(xe,"add",Ie),y=Ie}function Y(ie,ge,xe){xe===void 0&&(xe=!1);var Ie=normalizeToArray(k.props.triggerTarget||t);Ie.forEach(function(Pe){Pe.addEventListener(ie,ge,xe),S.push({node:Pe,eventType:ie,handler:ge,options:xe})})}function C(){o()&&(Y("touchstart",I,{passive:!0}),Y("touchend",ne,{passive:!0})),splitBySpaces(k.props.trigger).forEach(function(ie){if(ie!=="manual")switch(Y(ie,I),ie){case"mouseenter":Y("mouseleave",ne);break;case"focus":Y(isIE11?"focusout":"blur",oe);break;case"focusin":Y("focusout",oe);break}})}function z(){S.forEach(function(ie){var ge=ie.node,xe=ie.eventType,Ie=ie.handler,Pe=ie.options;ge.removeEventListener(xe,Ie,Pe)}),S=[]}function I(ie){var ge,xe=!1;if(!(!k.state.isEnabled||ve(ie)||h)){var Ie=((ge=m)==null?void 0:ge.type)==="focus";m=ie,x=ie.currentTarget,H(),!k.state.isVisible&&isMouseEvent(ie)&&mouseMoveListeners.forEach(function(Pe){return Pe(ie)}),ie.type==="click"&&(k.props.trigger.indexOf("mouseenter")<0||u)&&k.props.hideOnClick!==!1&&k.state.isVisible?xe=!0:ye(ie),ie.type==="click"&&(u=!xe),xe&&!Ie&&Ee(ie)}}function ae(ie){var ge=ie.target,xe=b().contains(ge)||U.contains(ge);if(!(ie.type==="mousemove"&&xe)){var Ie=_e().concat(U).map(function(Pe){var De,Me=Pe._tippy,je=(De=Me.popperInstance)==null?void 0:De.state;return je?{popperRect:Pe.getBoundingClientRect(),popperState:je,props:n}:null}).filter(Boolean);isCursorOutsideInteractiveBorder(Ie,ie)&&(Q(),Ee(ie))}}function ne(ie){var ge=ve(ie)||k.props.trigger.indexOf("click")>=0&&u;if(!ge){if(k.props.interactive){k.hideWithInteractivity(ie);return}Ee(ie)}}function oe(ie){k.props.trigger.indexOf("focusin")<0&&ie.target!==b()||k.props.interactive&&ie.relatedTarget&&U.contains(ie.relatedTarget)||Ee(ie)}function ve(ie){return currentInput.isTouch?o()!==ie.type.indexOf("touch")>=0:!1}function de(){Se();var ie=k.props,ge=ie.popperOptions,xe=ie.placement,Ie=ie.offset,Pe=ie.getReferenceClientRect,De=ie.moveTransition,Me=v()?getChildren(U).arrow:null,je=Pe?{getBoundingClientRect:Pe,contextElement:Pe.contextElement||b()}:t,qe={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(me){var le=me.state;if(v()){var Re=_(),Oe=Re.box;["placement","reference-hidden","escaped"].forEach(function(Le){Le==="placement"?Oe.setAttribute("data-placement",le.placement):le.attributes.popper["data-popper-"+Le]?Oe.setAttribute("data-"+Le,""):Oe.removeAttribute("data-"+Le)}),le.attributes.popper={}}}},be=[{name:"offset",options:{offset:Ie}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!De}},qe];v()&&Me&&be.push({name:"arrow",options:{element:Me,padding:3}}),be.push.apply(be,(ge==null?void 0:ge.modifiers)||[]),k.popperInstance=createPopper(je,U,Object.assign({},ge,{placement:xe,onFirstUpdate:g,modifiers:be}))}function Se(){k.popperInstance&&(k.popperInstance.destroy(),k.popperInstance=null)}function we(){var ie=k.props.appendTo,ge,xe=b();k.props.interactive&&ie===TIPPY_DEFAULT_APPEND_TO||ie==="parent"?ge=xe.parentNode:ge=invokeWithArgsOrReturn(ie,[xe]),ge.contains(U)||ge.appendChild(U),k.state.isMounted=!0,de()}function _e(){return arrayFrom(U.querySelectorAll("[data-tippy-root]"))}function ye(ie){k.clearDelayTimeouts(),ie&&V("onTrigger",[k,ie]),J();var ge=B(!0),xe=f(),Ie=xe[0],Pe=xe[1];currentInput.isTouch&&Ie==="hold"&&Pe&&(ge=Pe),ge?i=setTimeout(function(){k.show()},ge):k.show()}function Ee(ie){if(k.clearDelayTimeouts(),V("onUntrigger",[k,ie]),!k.state.isVisible){O();return}if(!(k.props.trigger.indexOf("mouseenter")>=0&&k.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(ie.type)>=0&&u)){var ge=B(!1);ge?a=setTimeout(function(){k.state.isVisible&&k.hide()},ge):c=requestAnimationFrame(function(){k.hide()})}}function Te(){k.state.isEnabled=!0}function ke(){k.hide(),k.state.isEnabled=!1}function ce(){clearTimeout(i),clearTimeout(a),cancelAnimationFrame(c)}function X(ie){if(!k.state.isDestroyed){V("onBeforeUpdate",[k,ie]),z();var ge=k.props,xe=evaluateProps(t,Object.assign({},ge,removeUndefinedProps(ie),{ignoreAttributes:!0}));k.props=xe,C(),ge.interactiveDebounce!==xe.interactiveDebounce&&(Q(),E=debounce(ae,xe.interactiveDebounce)),ge.triggerTarget&&!xe.triggerTarget?normalizeToArray(ge.triggerTarget).forEach(function(Ie){Ie.removeAttribute("aria-expanded")}):xe.triggerTarget&&t.removeAttribute("aria-expanded"),H(),ee(),W&&W(ge,xe),k.popperInstance&&(de(),_e().forEach(function(Ie){requestAnimationFrame(Ie._tippy.popperInstance.forceUpdate)})),V("onAfterUpdate",[k,ie])}}function K(ie){k.setProps({content:ie})}function se(){var ie=k.state.isVisible,ge=k.state.isDestroyed,xe=!k.state.isEnabled,Ie=currentInput.isTouch&&!k.props.touch,Pe=getValueAtIndexOrReturn(k.props.duration,0,defaultProps.duration);if(!(ie||ge||xe||Ie)&&!b().hasAttribute("disabled")&&(V("onShow",[k],!1),k.props.onShow(k)!==!1)){if(k.state.isVisible=!0,v()&&(U.style.visibility="visible"),ee(),J(),k.state.isMounted||(U.style.transition="none"),v()){var De=_(),Me=De.box,je=De.content;setTransitionDuration([Me,je],0)}g=function(){var be;if(!(!k.state.isVisible||l)){if(l=!0,U.offsetHeight,U.style.transition=k.props.moveTransition,v()&&k.props.animation){var he=_(),me=he.box,le=he.content;setTransitionDuration([me,le],Pe),setVisibilityState([me,le],"visible")}Z(),H(),pushIfUnique(mountedInstances,k),(be=k.popperInstance)==null||be.forceUpdate(),V("onMount",[k]),k.props.animation&&v()&&L(Pe,function(){k.state.isShown=!0,V("onShown",[k])})}},we()}}function fe(){var ie=!k.state.isVisible,ge=k.state.isDestroyed,xe=!k.state.isEnabled,Ie=getValueAtIndexOrReturn(k.props.duration,1,defaultProps.duration);if(!(ie||ge||xe)&&(V("onHide",[k],!1),k.props.onHide(k)!==!1)){if(k.state.isVisible=!1,k.state.isShown=!1,l=!1,u=!1,v()&&(U.style.visibility="hidden"),Q(),O(),ee(!0),v()){var Pe=_(),De=Pe.box,Me=Pe.content;k.props.animation&&(setTransitionDuration([De,Me],Ie),setVisibilityState([De,Me],"hidden"))}Z(),H(),k.props.animation?v()&&P(Ie,k.unmount):k.unmount()}}function pe(ie){T().addEventListener("mousemove",E),pushIfUnique(mouseMoveListeners,E),E(ie)}function ue(){k.state.isVisible&&k.hide(),k.state.isMounted&&(Se(),_e().forEach(function(ie){ie._tippy.unmount()}),U.parentNode&&U.parentNode.removeChild(U),mountedInstances=mountedInstances.filter(function(ie){return ie!==k}),k.state.isMounted=!1,V("onHidden",[k]))}function Ce(){k.state.isDestroyed||(k.clearDelayTimeouts(),k.unmount(),z(),delete t._tippy,k.state.isDestroyed=!0,V("onDestroy",[k]))}}function tippy$1(t,e){e===void 0&&(e={});var n=defaultProps.plugins.concat(e.plugins||[]);bindGlobalEventListeners();var i=Object.assign({},e,{plugins:n}),a=getArrayOfElements(t),c=a.reduce(function(u,h){var s=h&&createTippy(h,i);return s&&u.push(s),u},[]);return isElement(t)?c[0]:c}tippy$1.defaultProps=defaultProps;tippy$1.setDefaultProps=setDefaultProps;tippy$1.currentInput=currentInput;Object.assign({},applyStyles,{effect:function t(e){var n=e.state,i={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,i.popper),n.styles=i,n.elements.arrow&&Object.assign(n.elements.arrow.style,i.arrow)}});tippy$1.setDefaultProps({render});function _objectWithoutPropertiesLoose$1(t,e){if(t==null)return{};var n={},i=Object.keys(t),a,c;for(c=0;c<i.length;c++)a=i[c],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}var isBrowser$1=typeof window!="undefined"&&typeof document!="undefined";function preserveRef(t,e){t&&(typeof t=="function"&&t(e),{}.hasOwnProperty.call(t,"current")&&(t.current=e))}function ssrSafeCreateDiv(){return isBrowser$1&&document.createElement("div")}function toDataAttributes(t){var e={"data-placement":t.placement};return t.referenceHidden&&(e["data-reference-hidden"]=""),t.escaped&&(e["data-escaped"]=""),e}function deepEqual(t,e){if(t===e)return!0;if(typeof t=="object"&&t!=null&&typeof e=="object"&&e!=null){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(e.hasOwnProperty(n)){if(!deepEqual(t[n],e[n]))return!1}else return!1;return!0}else return!1}function uniqueByShape(t){var e=[];return t.forEach(function(n){e.find(function(i){return deepEqual(n,i)})||e.push(n)}),e}function deepPreserveProps(t,e){var n,i;return Object.assign({},e,{popperOptions:Object.assign({},t.popperOptions,e.popperOptions,{modifiers:uniqueByShape([].concat(((n=t.popperOptions)==null?void 0:n.modifiers)||[],((i=e.popperOptions)==null?void 0:i.modifiers)||[]))})})}var useIsomorphicLayoutEffect=isBrowser$1?react.exports.useLayoutEffect:react.exports.useEffect;function useMutableBox(t){var e=react.exports.useRef();return e.current||(e.current=typeof t=="function"?t():t),e.current}function updateClassName(t,e,n){n.split(/\s+/).forEach(function(i){i&&t.classList[e](i)})}var classNamePlugin={name:"className",defaultValue:"",fn:function t(e){var n=e.popper.firstElementChild,i=function(){var h;return!!((h=e.props.render)!=null&&h.$$tippy)};function a(){e.props.className&&!i()||updateClassName(n,"add",e.props.className)}function c(){i()&&updateClassName(n,"remove",e.props.className)}return{onCreate:a,onBeforeUpdate:c,onAfterUpdate:a}}};function TippyGenerator(t){function e(n){var i=n.children,a=n.content,c=n.visible,u=n.singleton,h=n.render,s=n.reference,l=n.disabled,m=l===void 0?!1:l,y=n.ignoreAttributes,g=y===void 0?!0:y;n.__source,n.__self;var S=_objectWithoutPropertiesLoose$1(n,["children","content","visible","singleton","render","reference","disabled","ignoreAttributes","__source","__self"]),E=c!==void 0,x=u!==void 0,A=react.exports.useState(!1),F=A[0],D=A[1],$=react.exports.useState({}),k=$[0],j=$[1],U=react.exports.useState(),W=U[0],G=U[1],q=useMutableBox(function(){return{container:ssrSafeCreateDiv(),renders:1}}),f=Object.assign({ignoreAttributes:g},S,{content:q.container});E&&(f.trigger="manual",f.hideOnClick=!1),x&&(m=!0);var o=f,v=f.plugins||[];h&&(o=Object.assign({},f,{plugins:x&&u.data!=null?[].concat(v,[{fn:function(){return{onTrigger:function(B,ee){var V=u.data.children.find(function(Z){var H=Z.instance;return H.reference===ee.currentTarget});B.state.$$activeSingletonInstance=V.instance,G(V.content)}}}}]):v,render:function(){return{popper:q.container}}}));var b=[s].concat(i?[i.type]:[]);return useIsomorphicLayoutEffect(function(){var T=s;s&&s.hasOwnProperty("current")&&(T=s.current);var _=t(T||q.ref||ssrSafeCreateDiv(),Object.assign({},o,{plugins:[classNamePlugin].concat(f.plugins||[])}));return q.instance=_,m&&_.disable(),c&&_.show(),x&&u.hook({instance:_,content:a,props:o,setSingletonContent:G}),D(!0),function(){_.destroy(),u==null||u.cleanup(_)}},b),useIsomorphicLayoutEffect(function(){var T;if(q.renders===1){q.renders++;return}var _=q.instance;_.setProps(deepPreserveProps(_.props,o)),(T=_.popperInstance)==null||T.forceUpdate(),m?_.disable():_.enable(),E&&(c?_.show():_.hide()),x&&u.hook({instance:_,content:a,props:o,setSingletonContent:G})}),useIsomorphicLayoutEffect(function(){var T;if(!!h){var _=q.instance;_.setProps({popperOptions:Object.assign({},_.props.popperOptions,{modifiers:[].concat((((T=_.props.popperOptions)==null?void 0:T.modifiers)||[]).filter(function(B){var ee=B.name;return ee!=="$$tippyReact"}),[{name:"$$tippyReact",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ee){var V,Z=ee.state,H=(V=Z.modifiersData)==null?void 0:V.hide;(k.placement!==Z.placement||k.referenceHidden!==(H==null?void 0:H.isReferenceHidden)||k.escaped!==(H==null?void 0:H.hasPopperEscaped))&&j({placement:Z.placement,referenceHidden:H==null?void 0:H.isReferenceHidden,escaped:H==null?void 0:H.hasPopperEscaped}),Z.attributes.popper={}}}])})})}},[k.placement,k.referenceHidden,k.escaped].concat(b)),jsxs(Fragment,{children:[i?react.exports.cloneElement(i,{ref:function(_){q.ref=_,preserveRef(i.ref,_)}}):null,F&&reactDom.exports.createPortal(h?h(toDataAttributes(k),W,q.instance):a,q.container)]})}return e}var forwardRef=function(t,e){return react.exports.forwardRef(function(i,a){var c=i.children,u=_objectWithoutPropertiesLoose$1(i,["children"]);return jsx(t,bt(ft({},Object.assign({},e,u)),{children:c?react.exports.cloneElement(c,{ref:function(s){preserveRef(a,s),preserveRef(c.ref,s)}}):null}))})},index$1=forwardRef(TippyGenerator(tippy$1)),Tippy=index$1,tippy="",main={},uaParser_min={exports:{}};(function(t,e){(function(n,i){var a="0.7.31",c="",u="?",h="function",s="undefined",l="object",m="string",y="major",g="model",S="name",E="type",x="vendor",A="version",F="architecture",D="console",$="mobile",k="tablet",j="smarttv",U="wearable",W="embedded",G=255,q="Amazon",f="Apple",o="ASUS",v="BlackBerry",b="Browser",T="Chrome",_="Edge",B="Firefox",ee="Google",V="Huawei",Z="LG",H="Microsoft",Q="Motorola",te="Opera",N="Samsung",M="Sony",J="Xiaomi",O="Zebra",P="Facebook",L=function(ye,Ee){var Te={};for(var ke in ye)Ee[ke]&&Ee[ke].length%2===0?Te[ke]=Ee[ke].concat(ye[ke]):Te[ke]=ye[ke];return Te},re=function(ye){for(var Ee={},Te=0;Te<ye.length;Te++)Ee[ye[Te].toUpperCase()]=ye[Te];return Ee},Y=function(ye,Ee){return typeof ye===m?C(Ee).indexOf(C(ye))!==-1:!1},C=function(ye){return ye.toLowerCase()},z=function(ye){return typeof ye===m?ye.replace(/[^\d\.]/g,c).split(".")[0]:i},I=function(ye,Ee){if(typeof ye===m)return ye=ye.replace(/^\s\s*/,c).replace(/\s\s*$/,c),typeof Ee===s?ye:ye.substring(0,G)},ae=function(ye,Ee){for(var Te=0,ke,ce,X,K,se,fe;Te<Ee.length&&!se;){var pe=Ee[Te],ue=Ee[Te+1];for(ke=ce=0;ke<pe.length&&!se;)if(se=pe[ke++].exec(ye),se)for(X=0;X<ue.length;X++)fe=se[++ce],K=ue[X],typeof K===l&&K.length>0?K.length===2?typeof K[1]==h?this[K[0]]=K[1].call(this,fe):this[K[0]]=K[1]:K.length===3?typeof K[1]===h&&!(K[1].exec&&K[1].test)?this[K[0]]=fe?K[1].call(this,fe,K[2]):i:this[K[0]]=fe?fe.replace(K[1],K[2]):i:K.length===4&&(this[K[0]]=fe?K[3].call(this,fe.replace(K[1],K[2])):i):this[K]=fe||i;Te+=2}},ne=function(ye,Ee){for(var Te in Ee)if(typeof Ee[Te]===l&&Ee[Te].length>0){for(var ke=0;ke<Ee[Te].length;ke++)if(Y(Ee[Te][ke],ye))return Te===u?i:Te}else if(Y(Ee[Te],ye))return Te===u?i:Te;return ye},oe={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ve={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},de={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[A,[S,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[A,[S,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[S,A],[/opios[\/ ]+([\w\.]+)/i],[A,[S,te+" Mini"]],[/\bopr\/([\w\.]+)/i],[A,[S,te]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[S,A],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[A,[S,"UC"+b]],[/\bqbcore\/([\w\.]+)/i],[A,[S,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[A,[S,"WeChat"]],[/konqueror\/([\w\.]+)/i],[A,[S,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[A,[S,"IE"]],[/yabrowser\/([\w\.]+)/i],[A,[S,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[S,/(.+)/,"$1 Secure "+b],A],[/\bfocus\/([\w\.]+)/i],[A,[S,B+" Focus"]],[/\bopt\/([\w\.]+)/i],[A,[S,te+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[A,[S,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[A,[S,"Dolphin"]],[/coast\/([\w\.]+)/i],[A,[S,te+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[A,[S,"MIUI "+b]],[/fxios\/([-\w\.]+)/i],[A,[S,B]],[/\bqihu|(qi?ho?o?|360)browser/i],[[S,"360 "+b]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[S,/(.+)/,"$1 "+b],A],[/(comodo_dragon)\/([\w\.]+)/i],[[S,/_/g," "],A],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[S,A],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[S],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[S,P],A],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[S,A],[/\bgsa\/([\w\.]+) .*safari\//i],[A,[S,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[A,[S,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[S,T+" WebView"],A],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[A,[S,"Android "+b]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[S,A],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[A,[S,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[A,S],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[S,[A,ne,oe]],[/(webkit|khtml)\/([\w\.]+)/i],[S,A],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[S,"Netscape"],A],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[A,[S,B+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[S,A]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[F,"amd64"]],[/(ia32(?=;))/i],[[F,C]],[/((?:i[346]|x)86)[;\)]/i],[[F,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[F,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[F,"armhf"]],[/windows (ce|mobile); ppc;/i],[[F,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[F,/ower/,c,C]],[/(sun4\w)[;\)]/i],[[F,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[F,C]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[g,[x,N],[E,k]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[g,[x,N],[E,$]],[/\((ip(?:hone|od)[\w ]*);/i],[g,[x,f],[E,$]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[g,[x,f],[E,k]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[g,[x,V],[E,k]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[g,[x,V],[E,$]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[g,/_/g," "],[x,J],[E,$]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[g,/_/g," "],[x,J],[E,k]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[g,[x,"OPPO"],[E,$]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[g,[x,"Vivo"],[E,$]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[g,[x,"Realme"],[E,$]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[g,[x,Q],[E,$]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[g,[x,Q],[E,k]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[g,[x,Z],[E,k]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[g,[x,Z],[E,$]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[g,[x,"Lenovo"],[E,k]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[g,/_/g," "],[x,"Nokia"],[E,$]],[/(pixel c)\b/i],[g,[x,ee],[E,k]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[g,[x,ee],[E,$]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[g,[x,M],[E,$]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[g,"Xperia Tablet"],[x,M],[E,k]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[g,[x,"OnePlus"],[E,$]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[g,[x,q],[E,k]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[g,/(.+)/g,"Fire Phone $1"],[x,q],[E,$]],[/(playbook);[-\w\),; ]+(rim)/i],[g,x,[E,k]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[g,[x,v],[E,$]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[g,[x,o],[E,k]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[g,[x,o],[E,$]],[/(nexus 9)/i],[g,[x,"HTC"],[E,k]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[x,[g,/_/g," "],[E,$]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[g,[x,"Acer"],[E,k]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[g,[x,"Meizu"],[E,$]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[g,[x,"Sharp"],[E,$]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[x,g,[E,$]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[x,g,[E,k]],[/(surface duo)/i],[g,[x,H],[E,k]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[g,[x,"Fairphone"],[E,$]],[/(u304aa)/i],[g,[x,"AT&T"],[E,$]],[/\bsie-(\w*)/i],[g,[x,"Siemens"],[E,$]],[/\b(rct\w+) b/i],[g,[x,"RCA"],[E,k]],[/\b(venue[\d ]{2,7}) b/i],[g,[x,"Dell"],[E,k]],[/\b(q(?:mv|ta)\w+) b/i],[g,[x,"Verizon"],[E,k]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[g,[x,"Barnes & Noble"],[E,k]],[/\b(tm\d{3}\w+) b/i],[g,[x,"NuVision"],[E,k]],[/\b(k88) b/i],[g,[x,"ZTE"],[E,k]],[/\b(nx\d{3}j) b/i],[g,[x,"ZTE"],[E,$]],[/\b(gen\d{3}) b.+49h/i],[g,[x,"Swiss"],[E,$]],[/\b(zur\d{3}) b/i],[g,[x,"Swiss"],[E,k]],[/\b((zeki)?tb.*\b) b/i],[g,[x,"Zeki"],[E,k]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[x,"Dragon Touch"],g,[E,k]],[/\b(ns-?\w{0,9}) b/i],[g,[x,"Insignia"],[E,k]],[/\b((nxa|next)-?\w{0,9}) b/i],[g,[x,"NextBook"],[E,k]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[x,"Voice"],g,[E,$]],[/\b(lvtel\-)?(v1[12]) b/i],[[x,"LvTel"],g,[E,$]],[/\b(ph-1) /i],[g,[x,"Essential"],[E,$]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[g,[x,"Envizen"],[E,k]],[/\b(trio[-\w\. ]+) b/i],[g,[x,"MachSpeed"],[E,k]],[/\btu_(1491) b/i],[g,[x,"Rotor"],[E,k]],[/(shield[\w ]+) b/i],[g,[x,"Nvidia"],[E,k]],[/(sprint) (\w+)/i],[x,g,[E,$]],[/(kin\.[onetw]{3})/i],[[g,/\./g," "],[x,H],[E,$]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[g,[x,O],[E,k]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[g,[x,O],[E,$]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[x,g,[E,D]],[/droid.+; (shield) bui/i],[g,[x,"Nvidia"],[E,D]],[/(playstation [345portablevi]+)/i],[g,[x,M],[E,D]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[g,[x,H],[E,D]],[/smart-tv.+(samsung)/i],[x,[E,j]],[/hbbtv.+maple;(\d+)/i],[[g,/^/,"SmartTV"],[x,N],[E,j]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[x,Z],[E,j]],[/(apple) ?tv/i],[x,[g,f+" TV"],[E,j]],[/crkey/i],[[g,T+"cast"],[x,ee],[E,j]],[/droid.+aft(\w)( bui|\))/i],[g,[x,q],[E,j]],[/\(dtv[\);].+(aquos)/i],[g,[x,"Sharp"],[E,j]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[x,I],[g,I],[E,j]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[E,j]],[/((pebble))app/i],[x,g,[E,U]],[/droid.+; (glass) \d/i],[g,[x,ee],[E,U]],[/droid.+; (wt63?0{2,3})\)/i],[g,[x,O],[E,U]],[/(quest( 2)?)/i],[g,[x,P],[E,U]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[x,[E,W]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[g,[E,$]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[g,[E,k]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[E,k]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[E,$]],[/(android[-\w\. ]{0,9});.+buil/i],[g,[x,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[A,[S,_+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[A,[S,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[S,A],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[A,S]],os:[[/microsoft (windows) (vista|xp)/i],[S,A],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[S,[A,ne,ve]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[S,"Windows"],[A,ne,ve]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[A,/_/g,"."],[S,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[S,"Mac OS"],[A,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[A,S],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[S,A],[/\(bb(10);/i],[A,[S,v]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[A,[S,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[A,[S,B+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[A,[S,"webOS"]],[/crkey\/([\d\.]+)/i],[A,[S,T+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[S,"Chromium OS"],A],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[S,A],[/(sunos) ?([\w\.\d]*)/i],[[S,"Solaris"],A],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[S,A]]},Se=function(ye,Ee){if(typeof ye===l&&(Ee=ye,ye=i),!(this instanceof Se))return new Se(ye,Ee).getResult();var Te=ye||(typeof n!==s&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:c),ke=Ee?L(de,Ee):de;return this.getBrowser=function(){var ce={};return ce[S]=i,ce[A]=i,ae.call(ce,Te,ke.browser),ce.major=z(ce.version),ce},this.getCPU=function(){var ce={};return ce[F]=i,ae.call(ce,Te,ke.cpu),ce},this.getDevice=function(){var ce={};return ce[x]=i,ce[g]=i,ce[E]=i,ae.call(ce,Te,ke.device),ce},this.getEngine=function(){var ce={};return ce[S]=i,ce[A]=i,ae.call(ce,Te,ke.engine),ce},this.getOS=function(){var ce={};return ce[S]=i,ce[A]=i,ae.call(ce,Te,ke.os),ce},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Te},this.setUA=function(ce){return Te=typeof ce===m&&ce.length>G?I(ce,G):ce,this},this.setUA(Te),this};Se.VERSION=a,Se.BROWSER=re([S,A,y]),Se.CPU=re([F]),Se.DEVICE=re([g,x,E,D,$,j,k,U,W]),Se.ENGINE=Se.OS=re([S,A]),t.exports&&(e=t.exports=Se),e.UAParser=Se;var we=typeof n!==s&&(n.jQuery||n.Zepto);if(we&&!we.ua){var _e=new Se;we.ua=_e.getResult(),we.ua.get=function(){return _e.getUA()},we.ua.set=function(ye){_e.setUA(ye);var Ee=_e.getResult();for(var Te in Ee)we.ua[Te]=Ee[Te]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser_min,uaParser_min.exports);Object.defineProperty(main,"__esModule",{value:!0});function _interopDefault(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var React=react.exports,React__default=_interopDefault(React),UAParser=uaParser_min.exports,UA=new UAParser,browser=UA.getBrowser();UA.getCPU();var device=UA.getDevice(),engine=UA.getEngine(),os=UA.getOS(),ua=UA.getUA(),setDefaults=function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return e||n},getNavigatorInstance=function t(){return typeof window!="undefined"&&(window.navigator||navigator)?window.navigator||navigator:!1},isIOS13Check=function t(e){var n=getNavigatorInstance();return n&&n.platform&&(n.platform.indexOf(e)!==-1||n.platform==="MacIntel"&&n.maxTouchPoints>1&&!window.MSStream)};function _typeof(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _extends(){return _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends.apply(this,arguments)}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,i)}return n}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(n,!0).forEach(function(i){_defineProperty(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _inherits(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(t)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},_setPrototypeOf(t,e)}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var n={},i=Object.keys(t),a,c;for(c=0;c<i.length;c++)a=i[c],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function _objectWithoutProperties(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose(t,e),i,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(a=0;a<c.length;a++)i=c[a],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(n[i]=t[i]))}return n}function _assertThisInitialized(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,e){return e&&(typeof e=="object"||typeof e=="function")?e:_assertThisInitialized(t)}var DeviceTypes={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Browser:void 0},BrowserTypes={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},OsTypes={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},initialData={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},checkType=function t(e){switch(e){case DeviceTypes.Mobile:return{isMobile:!0};case DeviceTypes.Tablet:return{isTablet:!0};case DeviceTypes.SmartTv:return{isSmartTV:!0};case DeviceTypes.Console:return{isConsole:!0};case DeviceTypes.Wearable:return{isWearable:!0};case DeviceTypes.Browser:return{isBrowser:!0};default:return initialData}},broPayload=function t(e,n,i,a,c){return{isBrowser:e,browserMajorVersion:setDefaults(n.major),browserFullVersion:setDefaults(n.version),browserName:setDefaults(n.name),engineName:setDefaults(i.name),engineVersion:setDefaults(i.version),osName:setDefaults(a.name),osVersion:setDefaults(a.version),userAgent:setDefaults(c)}},mobilePayload=function t(e,n,i,a){return _objectSpread2({},e,{vendor:setDefaults(n.vendor),model:setDefaults(n.model),os:setDefaults(i.name),osVersion:setDefaults(i.version),ua:setDefaults(a)})},stvPayload=function t(e,n,i,a){return{isSmartTV:e,engineName:setDefaults(n.name),engineVersion:setDefaults(n.version),osName:setDefaults(i.name),osVersion:setDefaults(i.version),userAgent:setDefaults(a)}},consolePayload=function t(e,n,i,a){return{isConsole:e,engineName:setDefaults(n.name),engineVersion:setDefaults(n.version),osName:setDefaults(i.name),osVersion:setDefaults(i.version),userAgent:setDefaults(a)}},wearPayload=function t(e,n,i,a){return{isWearable:e,engineName:setDefaults(n.name),engineVersion:setDefaults(n.version),osName:setDefaults(i.name),osVersion:setDefaults(i.version),userAgent:setDefaults(a)}},type=checkType(device.type);function deviceDetect(){var t=type.isBrowser,e=type.isMobile,n=type.isTablet,i=type.isSmartTV,a=type.isConsole,c=type.isWearable;if(t)return broPayload(t,browser,engine,os,ua);if(i)return stvPayload(i,engine,os,ua);if(a)return consolePayload(a,engine,os,ua);if(e||n)return mobilePayload(type,device,os,ua);if(c)return wearPayload(c,engine,os,ua)}var isMobileType=function t(){return device.type===DeviceTypes.Mobile},isTabletType=function t(){return device.type===DeviceTypes.Tablet},isMobileAndTabletType=function t(){switch(device.type){case DeviceTypes.Mobile:case DeviceTypes.Tablet:return!0;default:return!1}},isEdgeChromiumType=function t(){return typeof ua=="string"&&ua.indexOf("Edg/")!==-1},isSmartTVType=function t(){return device.type===DeviceTypes.SmartTv},isBrowserType=function t(){return device.type===DeviceTypes.Browser},isWearableType=function t(){return device.type===DeviceTypes.Wearable},isConsoleType=function t(){return device.type===DeviceTypes.Console},isAndroidType=function t(){return os.name===OsTypes.Android},isWindowsType=function t(){return os.name===OsTypes.Windows},isMacOsType=function t(){return os.name===OsTypes.MAC_OS},isWinPhoneType=function t(){return os.name===OsTypes.WindowsPhone},isIOSType=function t(){return os.name===OsTypes.IOS},isChromeType=function t(){return browser.name===BrowserTypes.Chrome},isFirefoxType=function t(){return browser.name===BrowserTypes.Firefox},isChromiumType=function t(){return browser.name===BrowserTypes.Chromium},isEdgeType=function t(){return browser.name===BrowserTypes.Edge},isYandexType=function t(){return browser.name===BrowserTypes.Yandex},isSafariType=function t(){return browser.name===BrowserTypes.Safari||browser.name===BrowserTypes.MobileSafari},isMobileSafariType=function t(){return browser.name===BrowserTypes.MobileSafari},isOperaType=function t(){return browser.name===BrowserTypes.Opera},isIEType=function t(){return browser.name===BrowserTypes.InternetExplorer||browser.name===BrowserTypes.Ie},isMIUIType=function t(){return browser.name===BrowserTypes.MIUI},isSamsungBrowserType=function t(){return browser.name===BrowserTypes.SamsungBrowser},isElectronType=function t(){var e=getNavigatorInstance(),n=e&&e.userAgent&&e.userAgent.toLowerCase();return typeof n=="string"?/electron/.test(n):!1},getIOS13=function t(){var e=getNavigatorInstance();return e&&(/iPad|iPhone|iPod/.test(e.platform)||e.platform==="MacIntel"&&e.maxTouchPoints>1)&&!window.MSStream},getIPad13=function t(){return isIOS13Check("iPad")},getIphone13=function t(){return isIOS13Check("iPhone")},getIPod13=function t(){return isIOS13Check("iPod")},getBrowserFullVersion=function t(){return setDefaults(browser.version)},getBrowserVersion=function t(){return setDefaults(browser.major)},getOsVersion=function t(){return setDefaults(os.version)},getOsName=function t(){return setDefaults(os.name)},getBrowserName=function t(){return setDefaults(browser.name)},getMobileVendor=function t(){return setDefaults(device.vendor)},getMobileModel=function t(){return setDefaults(device.model)},getEngineName=function t(){return setDefaults(engine.name)},getEngineVersion=function t(){return setDefaults(engine.version)},getUseragent=function t(){return setDefaults(ua)},getDeviceType=function t(){return setDefaults(device.type,"browser")},isSmartTV=isSmartTVType(),isConsole=isConsoleType(),isWearable=isWearableType(),isMobileSafari=isMobileSafariType()||getIPad13(),isChromium=isChromiumType(),isMobile=isMobileAndTabletType()||getIPad13(),isMobileOnly=isMobileType(),isTablet=isTabletType()||getIPad13(),isBrowser=isBrowserType(),isDesktop=isBrowserType(),isAndroid=isAndroidType(),isWinPhone=isWinPhoneType(),isIOS=isIOSType()||getIPad13(),isChrome=isChromeType(),isFirefox=isFirefoxType(),isSafari=isSafariType(),isOpera=isOperaType(),isIE=isIEType(),osVersion=getOsVersion(),osName=getOsName(),fullBrowserVersion=getBrowserFullVersion(),browserVersion=getBrowserVersion(),browserName=getBrowserName(),mobileVendor=getMobileVendor(),mobileModel=getMobileModel(),engineName=getEngineName(),engineVersion=getEngineVersion(),getUA=getUseragent(),isEdge=isEdgeType()||isEdgeChromiumType(),isYandex=isYandexType(),deviceType=getDeviceType(),isIOS13=getIOS13(),isIPad13=getIPad13(),isIPhone13=getIphone13(),isIPod13=getIPod13(),isElectron=isElectronType(),isEdgeChromium=isEdgeChromiumType(),isLegacyEdge=isEdgeType()&&!isEdgeChromiumType(),isWindows=isWindowsType(),isMacOs=isMacOsType(),isMIUI=isMIUIType(),isSamsungBrowser=isSamsungBrowserType(),AndroidView=function t(e){var n=e.renderWithFragment,i=e.children,a=e.viewClassName,c=e.style,u=_objectWithoutProperties(e,["renderWithFragment","children","viewClassName","style"]);return isAndroid?n?React__default.createElement(React.Fragment,null,i):React__default.createElement("div",_extends({className:a,style:c},u),i):null},BrowserView=function t(e){var n=e.renderWithFragment,i=e.children,a=e.viewClassName,c=e.style,u=_objectWithoutProperties(e,["renderWithFragment","children","viewClassName","style"]);return isBrowser?n?React__default.createElement(React.Fragment,null,i):React__default.createElement("div",_extends({className:a,style:c},u),i):null},IEView=function t(e){var n=e.renderWithFragment,i=e.children,a=e.viewClassName,c=e.style,u=_objectWithoutProperties(e,["renderWithFragment","children","viewClassName","style"]);return isIE?n?React__default.createElement(React.Fragment,null,i):React__default.createElement("div",_extends({className:a,style:c},u),i):null},IOSView=function t(e){var n=e.renderWithFragment,i=e.children,a=e.viewClassName,c=e.style,u=_objectWithoutProperties(e,["renderWithFragment","children","viewClassName","style"]);return isIOS?n?React__default.createElement(React.Fragment,null,i):React__default.createElement("div",_extends({className:a,style:c},u),i):null},MobileView=function t(e){var n=e.renderWithFragment,i=e.children,a=e.viewClassName,c=e.style,u=_objectWithoutProperties(e,["renderWithFragment","children","viewClassName","style"]);return isMobile?n?React__default.createElement(React.Fragment,null,i):React__default.createElement("div",_extends({className:a,style:c},u),i):null},TabletView=function t(e){var n=e.renderWithFragment,i=e.children,a=e.viewClassName,c=e.style,u=_objectWithoutProperties(e,["renderWithFragment","children","viewClassName","style"]);return isTablet?n?React__default.createElement(React.Fragment,null,i):React__default.createElement("div",_extends({className:a,style:c},u),i):null},WinPhoneView=function t(e){var n=e.renderWithFragment,i=e.children,a=e.viewClassName,c=e.style,u=_objectWithoutProperties(e,["renderWithFragment","children","viewClassName","style"]);return isWinPhone?n?React__default.createElement(React.Fragment,null,i):React__default.createElement("div",_extends({className:a,style:c},u),i):null},MobileOnlyView=function t(e){var n=e.renderWithFragment,i=e.children,a=e.viewClassName,c=e.style,u=_objectWithoutProperties(e,["renderWithFragment","children","viewClassName","style"]);return isMobileOnly?n?React__default.createElement(React.Fragment,null,i):React__default.createElement("div",_extends({className:a,style:c},u),i):null},SmartTVView=function t(e){var n=e.renderWithFragment,i=e.children,a=e.viewClassName,c=e.style,u=_objectWithoutProperties(e,["renderWithFragment","children","viewClassName","style"]);return isSmartTV?n?React__default.createElement(React.Fragment,null,i):React__default.createElement("div",_extends({className:a,style:c},u),i):null},ConsoleView=function t(e){var n=e.renderWithFragment,i=e.children,a=e.viewClassName,c=e.style,u=_objectWithoutProperties(e,["renderWithFragment","children","viewClassName","style"]);return isConsole?n?React__default.createElement(React.Fragment,null,i):React__default.createElement("div",_extends({className:a,style:c},u),i):null},WearableView=function t(e){var n=e.renderWithFragment,i=e.children,a=e.viewClassName,c=e.style,u=_objectWithoutProperties(e,["renderWithFragment","children","viewClassName","style"]);return isWearable?n?React__default.createElement(React.Fragment,null,i):React__default.createElement("div",_extends({className:a,style:c},u),i):null},CustomView=function t(e){var n=e.renderWithFragment,i=e.children,a=e.viewClassName,c=e.style,u=e.condition,h=_objectWithoutProperties(e,["renderWithFragment","children","viewClassName","style","condition"]);return u?n?React__default.createElement(React.Fragment,null,i):React__default.createElement("div",_extends({className:a,style:c},h),i):null};function withOrientationChange(t){return function(e){_inherits(n,e);function n(i){var a;return _classCallCheck(this,n),a=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,i)),a.isEventListenerAdded=!1,a.handleOrientationChange=a.handleOrientationChange.bind(_assertThisInitialized(a)),a.onOrientationChange=a.onOrientationChange.bind(_assertThisInitialized(a)),a.onPageLoad=a.onPageLoad.bind(_assertThisInitialized(a)),a.state={isLandscape:!1,isPortrait:!1},a}return _createClass(n,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var a=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:a===0,isLandscape:a===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window=="undefined"?"undefined":_typeof(window))!==void 0&&isMobile&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return React__default.createElement(t,_extends({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),n}(React__default.Component)}main.AndroidView=AndroidView;main.BrowserTypes=BrowserTypes;main.BrowserView=BrowserView;main.ConsoleView=ConsoleView;main.CustomView=CustomView;main.IEView=IEView;main.IOSView=IOSView;main.MobileOnlyView=MobileOnlyView;main.MobileView=MobileView;main.OsTypes=OsTypes;main.SmartTVView=SmartTVView;main.TabletView=TabletView;main.WearableView=WearableView;main.WinPhoneView=WinPhoneView;main.browserName=browserName;main.browserVersion=browserVersion;main.deviceDetect=deviceDetect;main.deviceType=deviceType;main.engineName=engineName;main.engineVersion=engineVersion;main.fullBrowserVersion=fullBrowserVersion;main.getUA=getUA;main.isAndroid=isAndroid;main.isBrowser=isBrowser;main.isChrome=isChrome;main.isChromium=isChromium;main.isConsole=isConsole;main.isDesktop=isDesktop;main.isEdge=isEdge;main.isEdgeChromium=isEdgeChromium;main.isElectron=isElectron;main.isFirefox=isFirefox;main.isIE=isIE;main.isIOS=isIOS;main.isIOS13=isIOS13;main.isIPad13=isIPad13;main.isIPhone13=isIPhone13;main.isIPod13=isIPod13;main.isLegacyEdge=isLegacyEdge;main.isMIUI=isMIUI;main.isMacOs=isMacOs;var isMobile_1=main.isMobile=isMobile;main.isMobileOnly=isMobileOnly;main.isMobileSafari=isMobileSafari;main.isOpera=isOpera;main.isSafari=isSafari;main.isSamsungBrowser=isSamsungBrowser;main.isSmartTV=isSmartTV;main.isTablet=isTablet;main.isWearable=isWearable;main.isWinPhone=isWinPhone;main.isWindows=isWindows;main.isYandex=isYandex;main.mobileModel=mobileModel;main.mobileVendor=mobileVendor;main.osName=osName;main.osVersion=osVersion;main.withOrientationChange=withOrientationChange;var key={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},webkit=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],moz=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],ms=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],document$1=typeof window!="undefined"&&typeof window.document!="undefined"?window.document:{},vendor="fullscreenEnabled"in document$1&&Object.keys(key)||webkit[0]in document$1&&webkit||moz[0]in document$1&&moz||ms[0]in document$1&&ms||[],fscreen={requestFullscreen:function(t){return t[vendor[key.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[vendor[key.requestFullscreen]]},get exitFullscreen(){return document$1[vendor[key.exitFullscreen]].bind(document$1)},get fullscreenPseudoClass(){return":"+vendor[key.fullscreen]},addEventListener:function(t,e,n){return document$1.addEventListener(vendor[key[t]],e,n)},removeEventListener:function(t,e,n){return document$1.removeEventListener(vendor[key[t]],e,n)},get fullscreenEnabled(){return Boolean(document$1[vendor[key.fullscreenEnabled]])},set fullscreenEnabled(t){},get fullscreenElement(){return document$1[vendor[key.fullscreenElement]]},set fullscreenElement(t){},get onfullscreenchange(){return document$1[("on"+vendor[key.fullscreenchange]).toLowerCase()]},set onfullscreenchange(t){return document$1[("on"+vendor[key.fullscreenchange]).toLowerCase()]=t},get onfullscreenerror(){return document$1[("on"+vendor[key.fullscreenerror]).toLowerCase()]},set onfullscreenerror(t){return document$1[("on"+vendor[key.fullscreenerror]).toLowerCase()]=t}},fscreen$1=fscreen;function useFullScreenHandle(){var t=react.exports.useState(!1),e=t[0],n=t[1],i=react.exports.useRef(null);react.exports.useEffect(function(){var u=function(){n(fscreen$1.fullscreenElement===i.current)};return fscreen$1.addEventListener("fullscreenchange",u),function(){return fscreen$1.removeEventListener("fullscreenchange",u)}},[]);var a=react.exports.useCallback(function(){if(fscreen$1.fullscreenElement)return fscreen$1.exitFullscreen().then(function(){return fscreen$1.requestFullscreen(i.current)});if(i.current)return fscreen$1.requestFullscreen(i.current)},[]),c=react.exports.useCallback(function(){return fscreen$1.fullscreenElement===i.current?fscreen$1.exitFullscreen():Promise.resolve()},[]);return react.exports.useMemo(function(){return{active:e,enter:a,exit:c,node:i}},[e,a,c])}var FullScreen=function t(e){var n=e.handle,i=e.onChange,a=e.children,c=e.className,u=[];return c&&u.push(c),u.push("fullscreen"),n.active&&u.push("fullscreen-enabled"),react.exports.useEffect(function(){i&&i(n.active,n)},[n.active]),jsx("div",{className:u.join(" "),ref:n.node,style:n.active?{height:"100%",width:"100%"}:void 0,children:a})},observerMap=new Map,RootIds=new WeakMap,rootId=0,unsupportedValue=void 0;function getRootId(t){return t?(RootIds.has(t)||(rootId+=1,RootIds.set(t,rootId.toString())),RootIds.get(t)):"0"}function optionsToId(t){return Object.keys(t).sort().filter(function(e){return t[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?getRootId(t.root):t[e])}).toString()}function createObserver(t){var e=optionsToId(t),n=observerMap.get(e);if(!n){var i=new Map,a,c=new IntersectionObserver(function(u){u.forEach(function(h){var s,l=h.isIntersecting&&a.some(function(m){return h.intersectionRatio>=m});t.trackVisibility&&typeof h.isVisible=="undefined"&&(h.isVisible=l),(s=i.get(h.target))==null||s.forEach(function(m){m(l,h)})})},t);a=c.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:c,elements:i},observerMap.set(e,n)}return n}function observe(t,e,n,i){if(n===void 0&&(n={}),i===void 0&&(i=unsupportedValue),typeof window.IntersectionObserver=="undefined"&&i!==void 0){var a=t.getBoundingClientRect();return e(i,{isIntersecting:i,target:t,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),function(){}}var c=createObserver(n),u=c.id,h=c.observer,s=c.elements,l=s.get(t)||[];return s.has(t)||s.set(t,l),l.push(e),h.observe(t),function(){l.splice(l.indexOf(e),1),l.length===0&&(s.delete(t),h.unobserve(t)),s.size===0&&(h.disconnect(),observerMap.delete(u))}}function useInView(t){var e=t===void 0?{}:t,n=e.threshold,i=e.delay,a=e.trackVisibility,c=e.rootMargin,u=e.root,h=e.triggerOnce,s=e.skip,l=e.initialInView,m=e.fallbackInView,y=react.exports.useRef(),g=react.exports.useState({inView:!!l}),S=g[0],E=g[1],x=react.exports.useCallback(function(F){y.current!==void 0&&(y.current(),y.current=void 0),!s&&F&&(y.current=observe(F,function(D,$){E({inView:D,entry:$}),$.isIntersecting&&h&&y.current&&(y.current(),y.current=void 0)},{root:u,rootMargin:c,threshold:n,trackVisibility:a,delay:i},m))},[Array.isArray(n)?n.toString():n,u,c,h,s,a,m,i]);react.exports.useEffect(function(){!y.current&&S.entry&&!h&&!s&&E({inView:!!l})});var A=[x,S.inView,S.entry];return A.ref=A[0],A.inView=A[1],A.entry=A[2],A}var vectorly_filters={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(self,function(){return function(){var n={553:function(u){var h=function(s){var l,m=Object.prototype,y=m.hasOwnProperty,g=typeof Symbol=="function"?Symbol:{},S=g.iterator||"@@iterator",E=g.asyncIterator||"@@asyncIterator",x=g.toStringTag||"@@toStringTag";function A(N,M,J){return Object.defineProperty(N,M,{value:J,enumerable:!0,configurable:!0,writable:!0}),N[M]}try{A({},"")}catch{A=function(M,J,O){return M[J]=O}}function F(N,M,J,O){var P=M&&M.prototype instanceof G?M:G,L=Object.create(P.prototype),re=new H(O||[]);return L._invoke=function(Y,C,z){var I=$;return function(ae,ne){if(I===j)throw new Error("Generator is already running");if(I===U){if(ae==="throw")throw ne;return te()}for(z.method=ae,z.arg=ne;;){var oe=z.delegate;if(oe){var ve=ee(oe,z);if(ve){if(ve===W)continue;return ve}}if(z.method==="next")z.sent=z._sent=z.arg;else if(z.method==="throw"){if(I===$)throw I=U,z.arg;z.dispatchException(z.arg)}else z.method==="return"&&z.abrupt("return",z.arg);I=j;var de=D(Y,C,z);if(de.type==="normal"){if(I=z.done?U:k,de.arg===W)continue;return{value:de.arg,done:z.done}}de.type==="throw"&&(I=U,z.method="throw",z.arg=de.arg)}}}(N,J,re),L}function D(N,M,J){try{return{type:"normal",arg:N.call(M,J)}}catch(O){return{type:"throw",arg:O}}}s.wrap=F;var $="suspendedStart",k="suspendedYield",j="executing",U="completed",W={};function G(){}function q(){}function f(){}var o={};A(o,S,function(){return this});var v=Object.getPrototypeOf,b=v&&v(v(Q([])));b&&b!==m&&y.call(b,S)&&(o=b);var T=f.prototype=G.prototype=Object.create(o);function _(N){["next","throw","return"].forEach(function(M){A(N,M,function(J){return this._invoke(M,J)})})}function B(N,M){function J(P,L,re,Y){var C=D(N[P],N,L);if(C.type!=="throw"){var z=C.arg,I=z.value;return I&&typeof I=="object"&&y.call(I,"__await")?M.resolve(I.__await).then(function(ae){J("next",ae,re,Y)},function(ae){J("throw",ae,re,Y)}):M.resolve(I).then(function(ae){z.value=ae,re(z)},function(ae){return J("throw",ae,re,Y)})}Y(C.arg)}var O;this._invoke=function(P,L){function re(){return new M(function(Y,C){J(P,L,Y,C)})}return O=O?O.then(re,re):re()}}function ee(N,M){var J=N.iterator[M.method];if(J===l){if(M.delegate=null,M.method==="throw"){if(N.iterator.return&&(M.method="return",M.arg=l,ee(N,M),M.method==="throw"))return W;M.method="throw",M.arg=new TypeError("The iterator does not provide a 'throw' method")}return W}var O=D(J,N.iterator,M.arg);if(O.type==="throw")return M.method="throw",M.arg=O.arg,M.delegate=null,W;var P=O.arg;return P?P.done?(M[N.resultName]=P.value,M.next=N.nextLoc,M.method!=="return"&&(M.method="next",M.arg=l),M.delegate=null,W):P:(M.method="throw",M.arg=new TypeError("iterator result is not an object"),M.delegate=null,W)}function V(N){var M={tryLoc:N[0]};1 in N&&(M.catchLoc=N[1]),2 in N&&(M.finallyLoc=N[2],M.afterLoc=N[3]),this.tryEntries.push(M)}function Z(N){var M=N.completion||{};M.type="normal",delete M.arg,N.completion=M}function H(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(V,this),this.reset(!0)}function Q(N){if(N){var M=N[S];if(M)return M.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var J=-1,O=function P(){for(;++J<N.length;)if(y.call(N,J))return P.value=N[J],P.done=!1,P;return P.value=l,P.done=!0,P};return O.next=O}}return{next:te}}function te(){return{value:l,done:!0}}return q.prototype=f,A(T,"constructor",f),A(f,"constructor",q),q.displayName=A(f,x,"GeneratorFunction"),s.isGeneratorFunction=function(N){var M=typeof N=="function"&&N.constructor;return!!M&&(M===q||(M.displayName||M.name)==="GeneratorFunction")},s.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,f):(N.__proto__=f,A(N,x,"GeneratorFunction")),N.prototype=Object.create(T),N},s.awrap=function(N){return{__await:N}},_(B.prototype),A(B.prototype,E,function(){return this}),s.AsyncIterator=B,s.async=function(N,M,J,O,P){P===void 0&&(P=Promise);var L=new B(F(N,M,J,O),P);return s.isGeneratorFunction(M)?L:L.next().then(function(re){return re.done?re.value:L.next()})},_(T),A(T,x,"Generator"),A(T,S,function(){return this}),A(T,"toString",function(){return"[object Generator]"}),s.keys=function(N){var M=[];for(var J in N)M.push(J);return M.reverse(),function O(){for(;M.length;){var P=M.pop();if(P in N)return O.value=P,O.done=!1,O}return O.done=!0,O}},s.values=Q,H.prototype={constructor:H,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(Z),!N)for(var M in this)M.charAt(0)==="t"&&y.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=l)},stop:function(){this.done=!0;var N=this.tryEntries[0].completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var M=this;function J(C,z){return L.type="throw",L.arg=N,M.next=C,z&&(M.method="next",M.arg=l),!!z}for(var O=this.tryEntries.length-1;O>=0;--O){var P=this.tryEntries[O],L=P.completion;if(P.tryLoc==="root")return J("end");if(P.tryLoc<=this.prev){var re=y.call(P,"catchLoc"),Y=y.call(P,"finallyLoc");if(re&&Y){if(this.prev<P.catchLoc)return J(P.catchLoc,!0);if(this.prev<P.finallyLoc)return J(P.finallyLoc)}else if(re){if(this.prev<P.catchLoc)return J(P.catchLoc,!0)}else{if(!Y)throw new Error("try statement without catch or finally");if(this.prev<P.finallyLoc)return J(P.finallyLoc)}}}},abrupt:function(N,M){for(var J=this.tryEntries.length-1;J>=0;--J){var O=this.tryEntries[J];if(O.tryLoc<=this.prev&&y.call(O,"finallyLoc")&&this.prev<O.finallyLoc){var P=O;break}}P&&(N==="break"||N==="continue")&&P.tryLoc<=M&&M<=P.finallyLoc&&(P=null);var L=P?P.completion:{};return L.type=N,L.arg=M,P?(this.method="next",this.next=P.finallyLoc,W):this.complete(L)},complete:function(N,M){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&M&&(this.next=M),W},finish:function(N){for(var M=this.tryEntries.length-1;M>=0;--M){var J=this.tryEntries[M];if(J.finallyLoc===N)return this.complete(J.completion,J.afterLoc),Z(J),W}},catch:function(N){for(var M=this.tryEntries.length-1;M>=0;--M){var J=this.tryEntries[M];if(J.tryLoc===N){var O=J.completion;if(O.type==="throw"){var P=O.arg;Z(J)}return P}}throw new Error("illegal catch attempt")},delegateYield:function(N,M,J){return this.delegate={iterator:Q(N),resultName:M,nextLoc:J},this.method==="next"&&(this.arg=l),W}},s}(u.exports);try{regeneratorRuntime=h}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=h:Function("r","regeneratorRuntime = r")(h)}},757:function(u,h,s){u.exports=s(553)},706:function(u,h,s){function l(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function m(){return l()?(self.isWorker=!0,self):(window.isWorker=!1,window)}function y(C){return l()?C instanceof OffscreenCanvasRenderingContext2D:C instanceof CanvasRenderingContext2D}s.d(h,{uL:function(){return E},Th:function(){return S},yb:function(){return g},Hy:function(){return re},ZS:function(){return Y}});var g=function(C,z){let I;typeof C=="string"&&(C=document.getElementById(C));let ae=1;if(z.use_webgl1==="true"?I=C.getContext("webgl",{antialias:!1,premultipliedAlpha:!1}):(I=C.getContext("webgl2",{antialias:!1,premultipliedAlpha:!1}),ae=2,I||(ae=1,I=C.getContext("webgl",{antialias:!1,premultipliedAlpha:!1}))),I.getExtension("WEBGL_draw_buffers")?I.disable_multi_draw=z.disable_multi_draw||!1:I.disable_multi_draw=!0,I.extensions={},I.getVersion=function(){return ae},I.getVersion()===1){if(z.float_type==="float32"){if(I.extensions.EXT_FLOAT=I.getExtension("OES_texture_float"),!I.extensions.EXT_FLOAT)throw new Error("Extension not found: OES_texture_float");I.extensions.EXT_FLOAT_LINEAR=I.getExtension("OES_texture_float_linear"),I.extensions.EXT_FLOAT_LINEAR,I.texture_format=I.RGBA,I.texture_type=I.FLOAT}else{if(I.extensions.EXT_FLOAT=I.getExtension("OES_texture_half_float"),!I.extensions.EXT_FLOAT)throw new Error("Extension not found: OES_texture_half_float");I.extensions.EXT_FLOAT_LINEAR=I.getExtension("OES_texture_half_float_linear"),I.extensions.EXT_FLOAT_LINEAR,I.texture_format=I.RGBA,I.texture_type=I.extensions.EXT_FLOAT.HALF_FLOAT_OES}if(!I.disable_multi_draw&&(I.extensions.WEBGL_draw_buffers=I.getExtension("WEBGL_draw_buffers"),!I.extensions.WEBGL_draw_buffers))throw new Error("Extension not found: WEBGL_draw_buffers")}else{if(I.extensions.EXT_FLOAT=I.getExtension("EXT_color_buffer_float"),!I.extensions.EXT_FLOAT)throw new Error("Extension not found: EXT_color_buffer_float");z.float_type==="float32"?(I.extensions.EXT_FLOAT_LINEAR=I.getExtension("OES_texture_float_linear"),I.texture_format=I.RGBA32F,I.texture_type=I.FLOAT):(I.extensions.EXT_FLOAT_LINEAR=I.getExtension("OES_texture_half_float_linear"),I.texture_format=I.RGBA16F,I.texture_type=I.FLOAT)}return I.getVersion()===1?(I.getCOLOR_ATTACHMENT=function(ne=0){return I.disable_multi_draw?I.COLOR_ATTACHMENT0:I.extensions.WEBGL_draw_buffers.COLOR_ATTACHMENT0_WEBGL+ne},I.getDrawBuffers=function(ne=[I.getCOLOR_ATTACHMENT(0)]){I.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(ne)}):(I.getCOLOR_ATTACHMENT=function(ne=0){return I.COLOR_ATTACHMENT0+ne},I.getDrawBuffers=function(ne=[I.getCOLOR_ATTACHMENT(0)]){I.drawBuffers(ne)}),m().gl=I,I.canvas.w=I.canvas.width,I.canvas.h=I.canvas.height,I.clearCanvas=function(){I.clearColor(0,0,0,1),I.viewport(0,0,I.drawingBufferWidth,I.drawingBufferHeight),I.clear(I.COLOR_BUFFER_BIT|I.DEPTH_BUFFER_BIT|I.STENCIL_BUFFER_BIT)},I.input={h:z.h,w:z.w},I.render_scale={h:1,w:1},I.viewport(0,0,C.width,C.height),I.createAndCompileShader=function(ne,oe){let ve=I.createShader(ne);if(I.shaderSource(ve,oe),I.compileShader(ve),!I.getShaderParameter(ve,I.COMPILE_STATUS))throw new Error(I.getShaderInfoLog(ve));return ve},I.createAndLinkProgram=function(ne,oe){let ve=I.createProgram();if(I.attachShader(ve,ne),I.attachShader(ve,oe),I.linkProgram(ve),!I.getProgramParameter(ve,I.LINK_STATUS))throw new Error(I.getProgramInfoLog(ve));return ve},I.resizeCanvasToDisplaySize=function(ne,oe){return(C.width!==ne||C.height!==oe)&&(C.width=ne,C.height=oe,!0)},I.resizeRenderSize=function(ne,oe,ve){let de=ve*I.input.w,Se=ve*I.input.h;de=ne>de?ne:de,Se=oe>Se?oe:Se,I.render_scale={w:ne/de,h:oe/Se},I.resizeCanvasToDisplaySize(de,Se)},I.log=function(ne){},I},S=class{constructor(C,z,I,ae){this.gl=C,this.network=z,this.frameBuffer=I,this.renderSize={w:ae.w,h:ae.h},this.metrics={"Render Size":this.renderSize,"Original Size":C.input,"Upscale Factor":z.upscaleFactor,FPS:0},this.setProperties(ae)}setProperties(C={w:1278,h:720,disableVideoToCanvas:!1}){const z=this;C.disableVideoToCanvas!==!0&&this.frameBuffer.setInputFrameCanvas(),C.w===void 0&&(C.w=this.network.upscaleFactor*this.gl.input.w),C.h===void 0&&(C.h=this.network.upscaleFactor*this.gl.input.h),this.renderSize=C,this.gl.resizeRenderSize(C.w,C.h,this.network.upscaleFactor),this.frameBuffer.inputTex!==null&&setTimeout(()=>{z.network.renderRGB(z.gl.render_scale)}),z.metrics["Render Size"]=C}setInputSize(C={w:426,h:240},z=null){this.gl.input={w:C.w,h:C.h},this.network.resetTextureBuffers(),this.setProperties(z||this.renderSize)}async resetNetwork(C){this.frameBuffer.clearall(),this.network=await async function(z={name:"",version:"",tag:"",token:""},I,ae){let ne=null,oe=null;try{oe=await Y(z.name,z.tag,z.version,z.token)}catch(ve){throw console.error("%cParameter load failed:","background:black; color: yellow"),new Error(ve)}if(!oe)throw console.error("%cParameter load failed:","background:black; color: yellow"),new Error("");try{ne=await re(z.name,z.token),ne=new ne(I,ae,oe)}catch(ve){throw console.error("%cNetwork load failed:","background:black; color: yellow"),new Error(ve)}return ne}({name:C.name,version:C.version,tag:C.tag},this.gl,this.network.frameBuffer),this.frameBuffer=this.network.frameBuffer,this.gl=this.network.gl,this.setProperties(this.renderSize)}changeNetwork(C){this.network=C,this.frameBuffer=this.network.frameBuffer,this.gl=this.network.gl}async loadBitmap(C){const z=this.frameBuffer;this.network,z.setInputImage(C),await this.render()}loadImage(C){const z=new Image;z.src=C;const I=this.frameBuffer,ae=this,ne=this.network;z.onload=async function(){I.setInputImage(z),await ae.render(),ne.getImageBytes()}}async render(C){const z=this.gl,I=this.network;z.clearColor(0,0,0,1),z.viewport(0,0,z.drawingBufferWidth,z.drawingBufferHeight),I.initialized&&await I.initialized,await I.feedForward(z.render_scale,C),z.flush()}},E=class{constructor(C){this.gl=C,this.iterations=0,this.textures=[{},{}],this.frame_buffers=[{},{}],this.inputTex=null,this.inputCanvas=null,this.frame_difference=0}drawToCanvas(){const C=this.gl;C.bindFramebuffer(C.FRAMEBUFFER,null)}setBuffer(C){const z=this.gl,I=this.iterations%2*this.frame_difference;z.bindFramebuffer(z.FRAMEBUFFER,this.frame_buffers[I][C])}setInputFrameCanvas(){m(),y(this.inputCanvas)||(this.inputCanvas=function(C,z){if(l())return new OffscreenCanvas(C,z);{const I=document.createElement("canvas");return I.width=C,I.height=z,I}}(this.gl.input.w,this.gl.input.h).getContext("2d")),this.inputCanvas.canvas.width=this.gl.input.w,this.inputCanvas.canvas.height=this.gl.input.h}videoToCanvas(C){return this.inputCanvas.drawImage(C,0,0,this.gl.input.w,this.gl.input.h),this.inputCanvas.canvas}getInputTexture(){const C=this.gl;if(this.inputTex===null){let z=C.createTexture();this.inputTex=this._setTextureSize(z,C.input.w,C.input.h)}return this.inputTex}setInputImage(C){this.input=C;const z=this.gl;y(this.inputCanvas)&&z.getVersion()===1&&(C=this.videoToCanvas(C));let I=this.getInputTexture();z.bindTexture(z.TEXTURE_2D,I),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST),z.texImage2D(z.TEXTURE_2D,0,z.texture_format,z.RGBA,z.texture_type,C);for(let ae=0;ae<=this.frame_difference;ae++)this.textures[ae].INPUT=[I]}setImageAsTexture(C,z){const I=this.gl;let ae=I.createTexture();I.bindTexture(I.TEXTURE_2D,ae),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.NEAREST),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.NEAREST),I.texImage2D(I.TEXTURE_2D,0,I.texture_format,I.RGBA,I.texture_type,C);for(let ne=0;ne<=this.frame_difference;ne++)this.textures[ne][z]=[ae]}createBufferWithTextures(C,z,I=1,ae=null){const ne=this.gl;for(let oe=0;oe<=this.frame_difference;oe++){const ve=ne.createFramebuffer();this.frame_buffers[oe][C]=ve,ne.bindFramebuffer(ne.FRAMEBUFFER,ve);const de=[];this.textures[oe][C]=null;for(let Se=0;Se<z;++Se){let we=this.createAndSetupTexture(ae);we=this._setTextureSize(we,ne.input.w*I,ne.input.h*I),de.push(we),ne.bindTexture(ne.TEXTURE_2D,we),ne.texImage2D(ne.TEXTURE_2D,0,ne.texture_format,ne.input.w*I,ne.input.h*I,0,ne.RGBA,ne.texture_type,null),ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.getCOLOR_ATTACHMENT(Se),ne.TEXTURE_2D,we,0)}this.textures[oe][C]=de}}createBufferWithTextures2(C,z,I,ae,ne={}){const oe=this.gl;if(I<=0||ae<=0)throw new Error("Texture width and height must be greater than 0");let ve=ne.format||oe.RGBA,de=ne.minFilter||oe.NEAREST,Se=ne.magFilter||oe.NEAREST,we=ne.type||oe.texture_type||oe.UNSIGNED_BYTE,_e=ne.internalFormat||oe.texture_format||oe.RGBA;for(let ye=0;ye<=this.frame_difference;ye++){const Ee=oe.createFramebuffer();this.frame_buffers[ye][C]=Ee,oe.bindFramebuffer(oe.FRAMEBUFFER,Ee);const Te=[];this.textures[ye][C]=null;for(let ke=0;ke<z;++ke){let ce;oe.getVersion()===1?ce=this.createTexture_webgl1(_e,I,ae,ve,we,de,Se):(_e===oe.RGBA&&(_e=oe.RGBA8),ce=this.createTexture_webgl2(_e,I,ae,de,Se)),oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.getCOLOR_ATTACHMENT(ke),oe.TEXTURE_2D,ce,0),Te.push(ce)}this.textures[ye][C]=Te}}getTextureSize(C,z=0,I=0){if(!this.textures[z][C][I])throw new Error(`Failed to get resolution of textures for layer: ${C} at index: ${index}`);return this.textures[z][C][I].size}createTexture_webgl2(C,z,I,ae,ne){ae=ae||gl.NEAREST,ne=ne||gl.NEAREST,C=C||gl.texture_format||gl.RGBA;let oe=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,oe),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,ae),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,ne),gl.texStorage2D(gl.TEXTURE_2D,1,C,z,I),oe=this._setTextureSize(oe,z,I),oe}createTexture_webgl1(C,z,I,ae,ne,oe,ve){ae=ae||gl.RGBA,oe=oe||gl.NEAREST,ve=ve||gl.NEAREST,ne=ne||gl.texture_type||gl.UNSIGNED_BYTE,C=C||gl.texture_format||gl.RGBA;let de=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,de),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,oe),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,ve),gl.texImage2D(gl.TEXTURE_2D,0,C,z,I,0,ae,ne,null),de=this._setTextureSize(de,z,I),de}createFloatTextureFromArrayBuffer(C,z,I,ae,ne,oe,ve,de){oe=oe||gl.RGBA,ve=ve||gl.NEAREST,de=de||gl.NEAREST,ne=ne||gl.texture_type||gl.UNSIGNED_BYTE,z=z||gl.texture_format||gl.RGBA;const Se=new Float32Array(C);let we=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,we),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,ve),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,de),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA32F,I,ae,0,gl.RGBA,gl.FLOAT,Se),we=this._setTextureSize(we,I,ae),we}_setTextureSize(C,z,I){return z>0&&I>0&&(C.size={},C.size.width=z,C.size.height=I),C}setBufferForLayer(C,z){for(let I=0;I<=this.frame_difference;I++){const ae=gl.createFramebuffer();this.frame_buffers[I][C]=ae,gl.bindFramebuffer(gl.FRAMEBUFFER,ae);for(let ne=0;ne<z.length;ne++)gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.getCOLOR_ATTACHMENT(ne),gl.TEXTURE_2D,z[ne],0);this.textures[I][C]=z}}getTexture(C){const z=this.iterations%2*this.frame_difference;return this.textures[z][C]}getLastFrameTexture(C){const z=1-this.iterations%2;return this.textures[z][C]}clearall(){Object.keys(this.textures[0]).forEach(C=>{for(let z=0;z<=this.frame_difference;z++){this.gl.deleteFramebuffer(this.frame_buffers[z][C]),this.frame_buffers[z][C]=null;for(let I=0;I<this.textures[z][C].length;++I)this.gl.deleteTexture(this.textures[z][C][I]),this.textures[z][C][I]=null}}),this.gl.deleteTexture(this.inputTex),this.inputTex=null,this.inputCanvas=null,this.frame_buffers=[{},{}],this.textures=[{},{}],this.gl.clearCanvas()}createAndSetupTexture(C=null){const z=this.gl;z.extensions.EXT_FLOAT_LINEAR||(C=null),C===null&&(C=z.NEAREST);const I=z.createTexture();return z.bindTexture(z.TEXTURE_2D,I),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST),I}};s(435);var x=s(618),A=s(443),F=s.n(A),D=s(595),$=s.n(D),k=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||k!==void 0&&k,j="URLSearchParams"in k,U="Symbol"in k&&"iterator"in Symbol,W="FileReader"in k&&"Blob"in k&&function(){try{return new Blob,!0}catch{return!1}}(),G="FormData"in k,q="ArrayBuffer"in k;if(q)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(C){return C&&f.indexOf(Object.prototype.toString.call(C))>-1};function v(C){if(typeof C!="string"&&(C=String(C)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(C)||C==="")throw new TypeError('Invalid character in header field name: "'+C+'"');return C.toLowerCase()}function b(C){return typeof C!="string"&&(C=String(C)),C}function T(C){var z={next:function(){var I=C.shift();return{done:I===void 0,value:I}}};return U&&(z[Symbol.iterator]=function(){return z}),z}function _(C){this.map={},C instanceof _?C.forEach(function(z,I){this.append(I,z)},this):Array.isArray(C)?C.forEach(function(z){this.append(z[0],z[1])},this):C&&Object.getOwnPropertyNames(C).forEach(function(z){this.append(z,C[z])},this)}function B(C){if(C.bodyUsed)return Promise.reject(new TypeError("Already read"));C.bodyUsed=!0}function ee(C){return new Promise(function(z,I){C.onload=function(){z(C.result)},C.onerror=function(){I(C.error)}})}function V(C){var z=new FileReader,I=ee(z);return z.readAsArrayBuffer(C),I}function Z(C){if(C.slice)return C.slice(0);var z=new Uint8Array(C.byteLength);return z.set(new Uint8Array(C)),z.buffer}function H(){return this.bodyUsed=!1,this._initBody=function(C){var z;this.bodyUsed=this.bodyUsed,this._bodyInit=C,C?typeof C=="string"?this._bodyText=C:W&&Blob.prototype.isPrototypeOf(C)?this._bodyBlob=C:G&&FormData.prototype.isPrototypeOf(C)?this._bodyFormData=C:j&&URLSearchParams.prototype.isPrototypeOf(C)?this._bodyText=C.toString():q&&W&&(z=C)&&DataView.prototype.isPrototypeOf(z)?(this._bodyArrayBuffer=Z(C.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):q&&(ArrayBuffer.prototype.isPrototypeOf(C)||o(C))?this._bodyArrayBuffer=Z(C):this._bodyText=C=Object.prototype.toString.call(C):this._bodyText="",this.headers.get("content-type")||(typeof C=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):j&&URLSearchParams.prototype.isPrototypeOf(C)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},W&&(this.blob=function(){var C=B(this);if(C)return C;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?B(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(V)}),this.text=function(){var C,z,I,ae=B(this);if(ae)return ae;if(this._bodyBlob)return C=this._bodyBlob,I=ee(z=new FileReader),z.readAsText(C),I;if(this._bodyArrayBuffer)return Promise.resolve(function(ne){for(var oe=new Uint8Array(ne),ve=new Array(oe.length),de=0;de<oe.length;de++)ve[de]=String.fromCharCode(oe[de]);return ve.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},G&&(this.formData=function(){return this.text().then(N)}),this.json=function(){return this.text().then(JSON.parse)},this}_.prototype.append=function(C,z){C=v(C),z=b(z);var I=this.map[C];this.map[C]=I?I+", "+z:z},_.prototype.delete=function(C){delete this.map[v(C)]},_.prototype.get=function(C){return C=v(C),this.has(C)?this.map[C]:null},_.prototype.has=function(C){return this.map.hasOwnProperty(v(C))},_.prototype.set=function(C,z){this.map[v(C)]=b(z)},_.prototype.forEach=function(C,z){for(var I in this.map)this.map.hasOwnProperty(I)&&C.call(z,this.map[I],I,this)},_.prototype.keys=function(){var C=[];return this.forEach(function(z,I){C.push(I)}),T(C)},_.prototype.values=function(){var C=[];return this.forEach(function(z){C.push(z)}),T(C)},_.prototype.entries=function(){var C=[];return this.forEach(function(z,I){C.push([I,z])}),T(C)},U&&(_.prototype[Symbol.iterator]=_.prototype.entries);var Q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function te(C,z){if(!(this instanceof te))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var I,ae,ne=(z=z||{}).body;if(C instanceof te){if(C.bodyUsed)throw new TypeError("Already read");this.url=C.url,this.credentials=C.credentials,z.headers||(this.headers=new _(C.headers)),this.method=C.method,this.mode=C.mode,this.signal=C.signal,ne||C._bodyInit==null||(ne=C._bodyInit,C.bodyUsed=!0)}else this.url=String(C);if(this.credentials=z.credentials||this.credentials||"same-origin",!z.headers&&this.headers||(this.headers=new _(z.headers)),this.method=(ae=(I=z.method||this.method||"GET").toUpperCase(),Q.indexOf(ae)>-1?ae:I),this.mode=z.mode||this.mode||null,this.signal=z.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ne)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(ne),!(this.method!=="GET"&&this.method!=="HEAD"||z.cache!=="no-store"&&z.cache!=="no-cache")){var oe=/([?&])_=[^&]*/;oe.test(this.url)?this.url=this.url.replace(oe,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function N(C){var z=new FormData;return C.trim().split("&").forEach(function(I){if(I){var ae=I.split("="),ne=ae.shift().replace(/\+/g," "),oe=ae.join("=").replace(/\+/g," ");z.append(decodeURIComponent(ne),decodeURIComponent(oe))}}),z}function M(C,z){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');z||(z={}),this.type="default",this.status=z.status===void 0?200:z.status,this.ok=this.status>=200&&this.status<300,this.statusText=z.statusText===void 0?"":""+z.statusText,this.headers=new _(z.headers),this.url=z.url||"",this._initBody(C)}te.prototype.clone=function(){return new te(this,{body:this._bodyInit})},H.call(te.prototype),H.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},M.error=function(){var C=new M(null,{status:0,statusText:""});return C.type="error",C};var J=[301,302,303,307,308];M.redirect=function(C,z){if(J.indexOf(z)===-1)throw new RangeError("Invalid status code");return new M(null,{status:z,headers:{location:C}})};var O=k.DOMException;try{new O}catch{(O=function(z,I){this.message=z,this.name=I;var ae=Error(z);this.stack=ae.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function P(C,z){return new Promise(function(I,ae){var ne=new te(C,z);if(ne.signal&&ne.signal.aborted)return ae(new O("Aborted","AbortError"));var oe=new XMLHttpRequest;function ve(){oe.abort()}oe.onload=function(){var de,Se,we={status:oe.status,statusText:oe.statusText,headers:(de=oe.getAllResponseHeaders()||"",Se=new _,de.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(ye){return ye.indexOf(`
`)===0?ye.substr(1,ye.length):ye}).forEach(function(ye){var Ee=ye.split(":"),Te=Ee.shift().trim();if(Te){var ke=Ee.join(":").trim();Se.append(Te,ke)}}),Se)};we.url="responseURL"in oe?oe.responseURL:we.headers.get("X-Request-URL");var _e="response"in oe?oe.response:oe.responseText;setTimeout(function(){I(new M(_e,we))},0)},oe.onerror=function(){setTimeout(function(){ae(new TypeError("Network request failed"))},0)},oe.ontimeout=function(){setTimeout(function(){ae(new TypeError("Network request failed"))},0)},oe.onabort=function(){setTimeout(function(){ae(new O("Aborted","AbortError"))},0)},oe.open(ne.method,function(de){try{return de===""&&k.location.href?k.location.href:de}catch{return de}}(ne.url),!0),ne.credentials==="include"?oe.withCredentials=!0:ne.credentials==="omit"&&(oe.withCredentials=!1),"responseType"in oe&&(W?oe.responseType="blob":q&&ne.headers.get("Content-Type")&&ne.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(oe.responseType="arraybuffer")),!z||typeof z.headers!="object"||z.headers instanceof _?ne.headers.forEach(function(de,Se){oe.setRequestHeader(Se,de)}):Object.getOwnPropertyNames(z.headers).forEach(function(de){oe.setRequestHeader(de,b(z.headers[de]))}),ne.signal&&(ne.signal.addEventListener("abort",ve),oe.onreadystatechange=function(){oe.readyState===4&&ne.signal.removeEventListener("abort",ve)}),oe.send(ne._bodyInit===void 0?null:ne._bodyInit)})}P.polyfill=!0,k.fetch||(k.fetch=P,k.Headers=_,k.Request=te,k.Response=M);const L=m();let re=async(C,z={})=>{let I,ae=((z=z||{}).path||s.p)+`models/${C}.js`;var ne;return z.token&&(ae=ae+"?"+z.token),L.vectorlyBasePath=z.path||s.p,C==="background_selfie"&&(I=(async()=>{let oe;if(L.tflite)oe=L.tflite;else{let ve=L.vectorlyBasePath||"";try{if(x.feature.simd!==!0)throw new Error("SIMD feature check is false");oe=await F()({basePath:ve})}catch{oe=await $()({basePath:ve})}}return oe})()),L.isWorker?importScripts(ae):await(ne=ae,new Promise((oe,ve)=>{const de="$importModule$"+Math.random().toString(32).slice(2),Se=document.createElement("script"),we=()=>{delete window[de],Se.onerror=null,Se.onload=null,Se.remove(),URL.revokeObjectURL(Se.src),Se.src=""};Se.defer="defer",Se.type="module",Se.onerror=()=>{ve(new Error(`Failed to import: ${ne}`)),we()},Se.onload=()=>{oe(window[de]),we()};const _e=function(Ee){const Te=document.createElement("a");return Te.setAttribute("href",Ee),Te.cloneNode(!1).href}(ne),ye=new Blob([`import * as m from "${_e}"; window.${de} = m;`],{type:"text/javascript"});Se.src=URL.createObjectURL(ye),document.head.appendChild(Se)})),C==="background_selfie"&&(L.tflite=await I),L.vectorly.models[C]},Y=async(C,z,I,ae)=>{if(ae=ae||{},C==="background_selfie"){let ne=(ae.path||s.p)+`./data/${C}/${z}_v${I}.tflite`;ae.token&&(ne=ne+"?"+ae.token);const oe=await fetch(ne);if(!oe.ok)throw Error(`Response fetching "${ne}": ${oe.statusText}`);return{model:await oe.arrayBuffer()}}if(C==="background_webgl2"||C==="background_webgl"||C==="background_webgl_unet"){let ne=(ae.path||s.p)+`./data/${C}/${z}_v${I}.json`,oe=(ae.path||s.p)+`./data/${C}/${z}_v${I}.weights`;ae.token&&(ne+="?"+ae.token,oe+="?"+ae.token);const[ve,de]=await Promise.all([fetch(ne),fetch(oe)]),[Se,we]=await Promise.all([ve.json(),de.arrayBuffer()]),_e=JSON.parse(JSON.stringify(Se)),ye=new Float32Array(we),Ee=Object.keys(Se),Te=["weights","biases"];Se[Ee[0]].debugImage&&Te.push("debugImage");for(let ke of Ee)for(let ce of Te){let[X,K]=Se[ke][ce];_e[ke][ce]=ye.slice(K,K+X)}return _e}{let ne=(ae.path||s.p)+`./data/${C}/${z}_v${I}.json`;return ae.token&&(ne=ne+"?"+ae.token),await(await fetch(ne)).json()}}},435:function(u){u.exports=["cnn_demo","residual_3k_3x","residual_4k_2x","residual_5k_2x","residual_5k_3x","denoise_10k_1x","background_selfie","background_webgl_unet","background_webgl","background_webgl2","upscaler_4krgb_2x"]},443:function(u){var h,s=(h=(h=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(l){var m,y,g=(l=l||{})!==void 0?l:{};g.ready=new Promise(function(X,K){m=X,y=K});var S,E={};for(S in g)g.hasOwnProperty(S)&&(E[S]=g[S]);var x,A,F,D="./this.program",$=function(X,K){throw K};x=typeof window=="object",A=typeof importScripts=="function",F=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";var k,j,U="";(x||A)&&(A?U=self.location.href:typeof document!="undefined"&&document.currentScript&&(U=document.currentScript.src),h&&(U=h),U=U.indexOf("blob:")!==0?U.substr(0,U.lastIndexOf("/")+1):"",A&&(j=function(X){var K=new XMLHttpRequest;return K.open("GET",X,!1),K.responseType="arraybuffer",K.send(null),new Uint8Array(K.response)}),k=function(X,K,se){var fe=new XMLHttpRequest;fe.open("GET",X,!0),fe.responseType="arraybuffer",fe.onload=function(){fe.status==200||fe.status==0&&fe.response?K(fe.response):se()},fe.onerror=se,fe.send(null)});var W,G=g.print||console.log.bind(console),q=g.printErr||console.warn.bind(console);for(S in E)E.hasOwnProperty(S)&&(g[S]=E[S]);E=null,g.arguments&&g.arguments,g.thisProgram&&(D=g.thisProgram),g.quit&&($=g.quit),g.wasmBinary&&(W=g.wasmBinary);var f,o=g.noExitRuntime||!0;typeof WebAssembly!="object"&&P("no native wasm support detected");var v,b,T,_,B=!1,ee=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function V(X,K,se){for(var fe=K+se,pe=K;X[pe]&&!(pe>=fe);)++pe;if(pe-K>16&&X.subarray&&ee)return ee.decode(X.subarray(K,pe));for(var ue="";K<pe;){var Ce=X[K++];if(128&Ce){var ie=63&X[K++];if((224&Ce)!=192){var ge=63&X[K++];if((Ce=(240&Ce)==224?(15&Ce)<<12|ie<<6|ge:(7&Ce)<<18|ie<<12|ge<<6|63&X[K++])<65536)ue+=String.fromCharCode(Ce);else{var xe=Ce-65536;ue+=String.fromCharCode(55296|xe>>10,56320|1023&xe)}}else ue+=String.fromCharCode((31&Ce)<<6|ie)}else ue+=String.fromCharCode(Ce)}return ue}function Z(X){v=X,g.HEAP8=b=new Int8Array(X),g.HEAP16=new Int16Array(X),g.HEAP32=_=new Int32Array(X),g.HEAPU8=T=new Uint8Array(X),g.HEAPU16=new Uint16Array(X),g.HEAPU32=new Uint32Array(X),g.HEAPF32=new Float32Array(X),g.HEAPF64=new Float64Array(X)}g.INITIAL_MEMORY;var H,Q=[],te=[],N=[],M=[];te.push({func:function(){Ee()}});var J=0,O=null;function P(X){g.onAbort&&g.onAbort(X),q(X+=""),B=!0,X="abort("+X+"). Build with -s ASSERTIONS=1 for more info.";var K=new WebAssembly.RuntimeError(X);throw y(K),K}function L(X,K){return String.prototype.startsWith?X.startsWith(K):X.indexOf(K)===0}function re(X){return L(X,"data:application/octet-stream;base64,")}function Y(X){return L(X,"file://")}g.preloadedImages={},g.preloadedAudios={};var C,z,I="./tflite/tflite-simd.wasm";function ae(X){try{if(X==I&&W)return new Uint8Array(W);if(j)return j(X);throw"both async and sync fetching of the wasm failed"}catch(K){P(K)}}function ne(X){for(;X.length>0;){var K=X.shift();if(typeof K!="function"){var se=K.func;typeof se=="number"?K.arg===void 0?H.get(se)():H.get(se)(K.arg):se(K.arg===void 0?null:K.arg)}else K(g)}}function oe(X){return _[Te()>>2]=X,X}function ve(X){try{return f.grow(X-v.byteLength+65535>>>16),Z(f.buffer),1}catch{}}re(I)||(C=I,I=g.locateFile?g.locateFile(C,U):(U=g.basePath||U)+C),z=F?function(){var X=process.hrtime();return 1e3*X[0]+X[1]/1e6}:typeof dateNow!="undefined"?dateNow:function(){return performance.now()};var de={};function Se(){if(!Se.strings){var X={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:D||"./this.program"};for(var K in de)X[K]=de[K];var se=[];for(var K in X)se.push(K+"="+X[K]);Se.strings=se}return Se.strings}var we,_e={mappings:{},buffers:[null,[],[]],printChar:function(X,K){var se=_e.buffers[X];K===0||K===10?((X===1?G:q)(V(se,0)),se.length=0):se.push(K)},varargs:void 0,get:function(){return _e.varargs+=4,_[_e.varargs-4>>2]},getStr:function(X){var K=function(se,fe){return se?V(T,se,void 0):""}(X);return K},get64:function(X,K){return X}},ye={a:function(){P()},n:function(X,K){var se;if(X===0)se=Date.now();else{if(X!==1&&X!==4)return oe(28),-1;se=z()}return _[K>>2]=se/1e3|0,_[K+4>>2]=se%1e3*1e3*1e3|0,0},i:function(X,K){P("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},e:function(X,K){P("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(X,K,se){T.copyWithin(X,K,K+se)},m:function(X){var K,se=T.length,fe=2147483648;if(X>fe)return!1;for(var pe=1;pe<=4;pe*=2){var ue=se*(1+.2/pe);if(ue=Math.min(ue,X+100663296),ve(Math.min(fe,((K=Math.max(X,ue))%65536>0&&(K+=65536-K%65536),K))))return!0}return!1},o:function(X){for(var K=z();z()-K<X;);},p:function(X,K){var se=0;return Se().forEach(function(fe,pe){var ue=K+se;_[X+4*pe>>2]=ue,function(Ce,ie,ge){for(var xe=0;xe<Ce.length;++xe)b[ie++>>0]=Ce.charCodeAt(xe);b[ie>>0]=0}(fe,ue),se+=fe.length+1}),0},g:function(X,K){var se=Se();_[X>>2]=se.length;var fe=0;return se.forEach(function(pe){fe+=pe.length+1}),_[K>>2]=fe,0},j:function(X){(function(K,se){o||(g.onExit&&g.onExit(K),B=!0),$(K,new ke(K))})(X)},h:function(X){return 0},k:function(X,K,se,fe,pe){},c:function(X,K,se,fe){for(var pe=0,ue=0;ue<se;ue++){for(var Ce=_[K+8*ue>>2],ie=_[K+(8*ue+4)>>2],ge=0;ge<ie;ge++)_e.printChar(X,T[Ce+ge]);pe+=ie}return _[fe>>2]=pe,0},d:function(){return 6},f:function(){return 28},b:function(X){switch(X){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return typeof navigator=="object"&&navigator.hardwareConcurrency||1}return oe(28),-1}},Ee=(function(){var X={a:ye};function K(pe,ue){var Ce=pe.exports;g.asm=Ce,Z((f=g.asm.q).buffer),H=g.asm.D,function(ie){if(J--,g.monitorRunDependencies&&g.monitorRunDependencies(J),J==0&&O){var ge=O;O=null,ge()}}()}function se(pe){K(pe.instance)}function fe(pe){return function(){if(!W&&(x||A)){if(typeof fetch=="function"&&!Y(I))return fetch(I,{credentials:"same-origin"}).then(function(ue){if(!ue.ok)throw"failed to load wasm binary file at '"+I+"'";return ue.arrayBuffer()}).catch(function(){return ae(I)});if(k)return new Promise(function(ue,Ce){k(I,function(ie){ue(new Uint8Array(ie))},Ce)})}return Promise.resolve().then(function(){return ae(I)})}().then(function(ue){return WebAssembly.instantiate(ue,X)}).then(pe,function(ue){q("failed to asynchronously prepare wasm: "+ue),P(ue)})}if(J++,g.monitorRunDependencies&&g.monitorRunDependencies(J),g.instantiateWasm)try{return g.instantiateWasm(X,K)}catch(pe){return q("Module.instantiateWasm callback failed with error: "+pe),!1}(W||typeof WebAssembly.instantiateStreaming!="function"||re(I)||Y(I)||typeof fetch!="function"?fe(se):fetch(I,{credentials:"same-origin"}).then(function(pe){return WebAssembly.instantiateStreaming(pe,X).then(se,function(ue){return q("wasm streaming compile failed: "+ue),q("falling back to ArrayBuffer instantiation"),fe(se)})})).catch(y)}(),g.___wasm_call_ctors=function(){return(Ee=g.___wasm_call_ctors=g.asm.r).apply(null,arguments)}),Te=(g._getModelBufferMemoryOffset=function(){return(g._getModelBufferMemoryOffset=g.asm.s).apply(null,arguments)},g._getInputMemoryOffset=function(){return(g._getInputMemoryOffset=g.asm.t).apply(null,arguments)},g._getInputHeight=function(){return(g._getInputHeight=g.asm.u).apply(null,arguments)},g._getInputWidth=function(){return(g._getInputWidth=g.asm.v).apply(null,arguments)},g._getInputChannelCount=function(){return(g._getInputChannelCount=g.asm.w).apply(null,arguments)},g._getOutputMemoryOffset=function(){return(g._getOutputMemoryOffset=g.asm.x).apply(null,arguments)},g._getOutputHeight=function(){return(g._getOutputHeight=g.asm.y).apply(null,arguments)},g._getOutputWidth=function(){return(g._getOutputWidth=g.asm.z).apply(null,arguments)},g._getOutputChannelCount=function(){return(g._getOutputChannelCount=g.asm.A).apply(null,arguments)},g._loadModel=function(){return(g._loadModel=g.asm.B).apply(null,arguments)},g._runInference=function(){return(g._runInference=g.asm.C).apply(null,arguments)},g.___errno_location=function(){return(Te=g.___errno_location=g.asm.E).apply(null,arguments)});function ke(X){this.name="ExitStatus",this.message="Program terminated with exit("+X+")",this.status=X}function ce(X){function K(){we||(we=!0,g.calledRun=!0,B||(ne(te),ne(N),m(g),g.onRuntimeInitialized&&g.onRuntimeInitialized(),function(){if(g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;)se=g.postRun.shift(),M.unshift(se);var se;ne(M)}()))}J>0||(function(){if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)se=g.preRun.shift(),Q.unshift(se);var se;ne(Q)}(),J>0||(g.setStatus?(g.setStatus("Running..."),setTimeout(function(){setTimeout(function(){g.setStatus("")},1),K()},1)):K()))}if(O=function X(){we||ce(),we||(O=X)},g.run=ce,g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);g.preInit.length>0;)g.preInit.pop()();return ce(),l.ready});u.exports=s},595:function(u){var h,s=(h=(h=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(l){var m,y,g=(l=l||{})!==void 0?l:{};g.ready=new Promise(function(X,K){m=X,y=K});var S,E={};for(S in g)g.hasOwnProperty(S)&&(E[S]=g[S]);var x,A,F,D="./this.program",$=function(X,K){throw K};x=typeof window=="object",A=typeof importScripts=="function",F=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";var k,j,U="";(x||A)&&(A?U=self.location.href:typeof document!="undefined"&&document.currentScript&&(U=document.currentScript.src),h&&(U=h),U=U.indexOf("blob:")!==0?U.substr(0,U.lastIndexOf("/")+1):"",A&&(j=function(X){var K=new XMLHttpRequest;return K.open("GET",X,!1),K.responseType="arraybuffer",K.send(null),new Uint8Array(K.response)}),k=function(X,K,se){var fe=new XMLHttpRequest;fe.open("GET",X,!0),fe.responseType="arraybuffer",fe.onload=function(){fe.status==200||fe.status==0&&fe.response?K(fe.response):se()},fe.onerror=se,fe.send(null)});var W,G=g.print||console.log.bind(console),q=g.printErr||console.warn.bind(console);for(S in E)E.hasOwnProperty(S)&&(g[S]=E[S]);E=null,g.arguments&&g.arguments,g.thisProgram&&(D=g.thisProgram),g.quit&&($=g.quit),g.wasmBinary&&(W=g.wasmBinary);var f,o=g.noExitRuntime||!0;typeof WebAssembly!="object"&&P("no native wasm support detected");var v,b,T,_,B=!1,ee=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function V(X,K,se){for(var fe=K+se,pe=K;X[pe]&&!(pe>=fe);)++pe;if(pe-K>16&&X.subarray&&ee)return ee.decode(X.subarray(K,pe));for(var ue="";K<pe;){var Ce=X[K++];if(128&Ce){var ie=63&X[K++];if((224&Ce)!=192){var ge=63&X[K++];if((Ce=(240&Ce)==224?(15&Ce)<<12|ie<<6|ge:(7&Ce)<<18|ie<<12|ge<<6|63&X[K++])<65536)ue+=String.fromCharCode(Ce);else{var xe=Ce-65536;ue+=String.fromCharCode(55296|xe>>10,56320|1023&xe)}}else ue+=String.fromCharCode((31&Ce)<<6|ie)}else ue+=String.fromCharCode(Ce)}return ue}function Z(X){v=X,g.HEAP8=b=new Int8Array(X),g.HEAP16=new Int16Array(X),g.HEAP32=_=new Int32Array(X),g.HEAPU8=T=new Uint8Array(X),g.HEAPU16=new Uint16Array(X),g.HEAPU32=new Uint32Array(X),g.HEAPF32=new Float32Array(X),g.HEAPF64=new Float64Array(X)}g.INITIAL_MEMORY;var H,Q=[],te=[],N=[],M=[];te.push({func:function(){Ee()}});var J=0,O=null;function P(X){g.onAbort&&g.onAbort(X),q(X+=""),B=!0,X="abort("+X+"). Build with -s ASSERTIONS=1 for more info.";var K=new WebAssembly.RuntimeError(X);throw y(K),K}function L(X,K){return String.prototype.startsWith?X.startsWith(K):X.indexOf(K)===0}function re(X){return L(X,"data:application/octet-stream;base64,")}function Y(X){return L(X,"file://")}g.preloadedImages={},g.preloadedAudios={};var C,z,I="./tflite/tflite.wasm";function ae(X){try{if(X==I&&W)return new Uint8Array(W);if(j)return j(X);throw"both async and sync fetching of the wasm failed"}catch(K){P(K)}}function ne(X){for(;X.length>0;){var K=X.shift();if(typeof K!="function"){var se=K.func;typeof se=="number"?K.arg===void 0?H.get(se)():H.get(se)(K.arg):se(K.arg===void 0?null:K.arg)}else K(g)}}function oe(X){return _[Te()>>2]=X,X}function ve(X){try{return f.grow(X-v.byteLength+65535>>>16),Z(f.buffer),1}catch{}}re(I)||(C=I,I=g.locateFile?g.locateFile(C,U):(U=g.basePath||U)+C),z=F?function(){var X=process.hrtime();return 1e3*X[0]+X[1]/1e6}:typeof dateNow!="undefined"?dateNow:function(){return performance.now()};var de={};function Se(){if(!Se.strings){var X={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:D||"./this.program"};for(var K in de)X[K]=de[K];var se=[];for(var K in X)se.push(K+"="+X[K]);Se.strings=se}return Se.strings}var we,_e={mappings:{},buffers:[null,[],[]],printChar:function(X,K){var se=_e.buffers[X];K===0||K===10?((X===1?G:q)(V(se,0)),se.length=0):se.push(K)},varargs:void 0,get:function(){return _e.varargs+=4,_[_e.varargs-4>>2]},getStr:function(X){var K=function(se,fe){return se?V(T,se,void 0):""}(X);return K},get64:function(X,K){return X}},ye={a:function(){P()},n:function(X,K){var se;if(X===0)se=Date.now();else{if(X!==1&&X!==4)return oe(28),-1;se=z()}return _[K>>2]=se/1e3|0,_[K+4>>2]=se%1e3*1e3*1e3|0,0},i:function(X,K){P("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},e:function(X,K){P("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(X,K,se){T.copyWithin(X,K,K+se)},m:function(X){var K,se=T.length,fe=2147483648;if(X>fe)return!1;for(var pe=1;pe<=4;pe*=2){var ue=se*(1+.2/pe);if(ue=Math.min(ue,X+100663296),ve(Math.min(fe,((K=Math.max(X,ue))%65536>0&&(K+=65536-K%65536),K))))return!0}return!1},o:function(X){for(var K=z();z()-K<X;);},p:function(X,K){var se=0;return Se().forEach(function(fe,pe){var ue=K+se;_[X+4*pe>>2]=ue,function(Ce,ie,ge){for(var xe=0;xe<Ce.length;++xe)b[ie++>>0]=Ce.charCodeAt(xe);b[ie>>0]=0}(fe,ue),se+=fe.length+1}),0},g:function(X,K){var se=Se();_[X>>2]=se.length;var fe=0;return se.forEach(function(pe){fe+=pe.length+1}),_[K>>2]=fe,0},j:function(X){(function(K,se){o||(g.onExit&&g.onExit(K),B=!0),$(K,new ke(K))})(X)},h:function(X){return 0},k:function(X,K,se,fe,pe){},c:function(X,K,se,fe){for(var pe=0,ue=0;ue<se;ue++){for(var Ce=_[K+8*ue>>2],ie=_[K+(8*ue+4)>>2],ge=0;ge<ie;ge++)_e.printChar(X,T[Ce+ge]);pe+=ie}return _[fe>>2]=pe,0},d:function(){return 6},f:function(){return 28},b:function(X){switch(X){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return typeof navigator=="object"&&navigator.hardwareConcurrency||1}return oe(28),-1}},Ee=(function(){var X={a:ye};function K(pe,ue){var Ce=pe.exports;g.asm=Ce,Z((f=g.asm.q).buffer),H=g.asm.D,function(ie){if(J--,g.monitorRunDependencies&&g.monitorRunDependencies(J),J==0&&O){var ge=O;O=null,ge()}}()}function se(pe){K(pe.instance)}function fe(pe){return function(){if(!W&&(x||A)){if(typeof fetch=="function"&&!Y(I))return fetch(I,{credentials:"same-origin"}).then(function(ue){if(!ue.ok)throw"failed to load wasm binary file at '"+I+"'";return ue.arrayBuffer()}).catch(function(){return ae(I)});if(k)return new Promise(function(ue,Ce){k(I,function(ie){ue(new Uint8Array(ie))},Ce)})}return Promise.resolve().then(function(){return ae(I)})}().then(function(ue){return WebAssembly.instantiate(ue,X)}).then(pe,function(ue){q("failed to asynchronously prepare wasm: "+ue),P(ue)})}if(J++,g.monitorRunDependencies&&g.monitorRunDependencies(J),g.instantiateWasm)try{return g.instantiateWasm(X,K)}catch(pe){return q("Module.instantiateWasm callback failed with error: "+pe),!1}(W||typeof WebAssembly.instantiateStreaming!="function"||re(I)||Y(I)||typeof fetch!="function"?fe(se):fetch(I,{credentials:"same-origin"}).then(function(pe){return WebAssembly.instantiateStreaming(pe,X).then(se,function(ue){return q("wasm streaming compile failed: "+ue),q("falling back to ArrayBuffer instantiation"),fe(se)})})).catch(y)}(),g.___wasm_call_ctors=function(){return(Ee=g.___wasm_call_ctors=g.asm.r).apply(null,arguments)}),Te=(g._getModelBufferMemoryOffset=function(){return(g._getModelBufferMemoryOffset=g.asm.s).apply(null,arguments)},g._getInputMemoryOffset=function(){return(g._getInputMemoryOffset=g.asm.t).apply(null,arguments)},g._getInputHeight=function(){return(g._getInputHeight=g.asm.u).apply(null,arguments)},g._getInputWidth=function(){return(g._getInputWidth=g.asm.v).apply(null,arguments)},g._getInputChannelCount=function(){return(g._getInputChannelCount=g.asm.w).apply(null,arguments)},g._getOutputMemoryOffset=function(){return(g._getOutputMemoryOffset=g.asm.x).apply(null,arguments)},g._getOutputHeight=function(){return(g._getOutputHeight=g.asm.y).apply(null,arguments)},g._getOutputWidth=function(){return(g._getOutputWidth=g.asm.z).apply(null,arguments)},g._getOutputChannelCount=function(){return(g._getOutputChannelCount=g.asm.A).apply(null,arguments)},g._loadModel=function(){return(g._loadModel=g.asm.B).apply(null,arguments)},g._runInference=function(){return(g._runInference=g.asm.C).apply(null,arguments)},g.___errno_location=function(){return(Te=g.___errno_location=g.asm.E).apply(null,arguments)});function ke(X){this.name="ExitStatus",this.message="Program terminated with exit("+X+")",this.status=X}function ce(X){function K(){we||(we=!0,g.calledRun=!0,B||(ne(te),ne(N),m(g),g.onRuntimeInitialized&&g.onRuntimeInitialized(),function(){if(g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;)se=g.postRun.shift(),M.unshift(se);var se;ne(M)}()))}J>0||(function(){if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)se=g.preRun.shift(),Q.unshift(se);var se;ne(Q)}(),J>0||(g.setStatus?(g.setStatus("Running..."),setTimeout(function(){setTimeout(function(){g.setStatus("")},1),K()},1)):K()))}if(O=function X(){we||ce(),we||(O=X)},g.run=ce,g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);g.preInit.length>0;)g.preInit.pop()();return ce(),l.ready});u.exports=s},423:function(u,h,s){function l(o){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},l(o)}s.d(h,{default:function(){return f}});var m=s(861),y=s(671),g=s(144),S=s(942),E=s(757),x=s.n(E),A=s(877),F=s(147),D=s(55),$=s(245),k=s(618),j=s(190),U=s.n(j);function W(o,v){var b=Object.keys(o);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(o);v&&(T=T.filter(function(_){return Object.getOwnPropertyDescriptor(o,_).enumerable})),b.push.apply(b,T)}return b}var G=function(o){for(var v=1;v<arguments.length;v++){var b=arguments[v]!=null?arguments[v]:{};v%2?W(Object(b),!0).forEach(function(T){(0,S.Z)(o,T,b[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(b)):W(Object(b)).forEach(function(T){Object.defineProperty(o,T,Object.getOwnPropertyDescriptor(b,T))})}return o}({},k.feature);(0,D.ok)()&&console.log(G),(0,D.ok)()&&console.log("SIMD",k.feature.simd);var q=function(){function o(O,P){(0,y.Z)(this,o),this.times={ref:Date.now()},this.times.init=Date.now()-this.times.ref,this.type="background",this.params=P||{},this.model=P.model||"selfie",this.model_version=P.version,this.enableOffscreen=this.checkSupport(P.offscreen),this.debug=this.params.debug||(0,D.ok)(),this.id=P.id||(0,A.v4)(),this.version=F.i8,this.serverType=this.params.serverType||"",this.defaults={},this.defaults.frameRate=30,this.defaults.segmentationFrameRate=15,this.frameRate=P.frameRate||this.defaults.frameRate,this.segmentationFrameRate=P.segmentationFrameRate||this.defaults.segmentationFrameRate,this.passthrough=P.passthrough||!1,this.serverType!=="production"&&this.serverType!==""||(0,$.EK)(O,P),this.defaultBackground="https://files.vectorly.io/demo/background-filter/images/virtual-background-1.jpg",this.defaultBlurRadius=5,this.background=this.params.background||this.defaultBackground,this.blurRadius=this.params.blurRadius||this.defaultBlurRadius,this.error=null,this.loadP=this.loadCore(this.enableOffscreen);try{this.input=this._getInput(O),this.inputClone=this.input?this.input.clone():null,this.registerInputListeners(),this.log("Input to BackgroundFilter is",this.input),this.video=this.video||this._initVideo(),this.video.id="vid-"+this.id,this.processorP=this._initializeCoreNetwork(),this.outputP=this._createNewStream()}catch(L){throw this.error=L,L}}var v,b,T,_,B,ee,V,Z,H,Q,te,N,M,J;return(0,g.Z)(o,[{key:"loadCore",value:(J=(0,m.Z)(x().mark(function O(P){return x().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return this.times.load_core_start=Date.now()-this.times.ref,L.next=3,(0,$.Zq)(P);case 3:return this.vectorlyCore=L.sent,L.abrupt("return",!0);case 5:case"end":return L.stop()}},O,this)})),function(O){return J.apply(this,arguments)})},{key:"checkSupport",value:function(O){var P=Boolean(HTMLCanvasElement.prototype.transferControlToOffscreen);return O==null?P:O===!0||O==="true"?(P||console.warn("transferControlToOffscreen is not supported but params.offscreen is set to ".concat(O,"; Set params.offscreen to null to default to offscreen if supported")),!0):(this.log("params.offscreen is ".concat(O,"; running on main thread")),!1)}},{key:"registerInputListeners",value:function(){var O,P=this,L=this.input,re=this.originalInput;if(L instanceof MediaStream){re instanceof MediaStream?O=re.getVideoTracks():re instanceof MediaStreamTrack&&(O=[re]);var Y=[];this.log("Input tracks in registerInputListeners",O,re);for(var C=0;C<O.length;C++){var z=O[C];this.log(C,"tracks",z.id),Y.push(z.id),z.addEventListener("ended",function(){P.log("In listener",P.stop),P.stop()})}var I=this;MediaStreamTrack.prototype._stop=MediaStreamTrack.prototype._stop||MediaStreamTrack.prototype.stop,MediaStreamTrack.prototype._iter=(MediaStreamTrack.prototype._iter||-1)+1;var ae=MediaStreamTrack.prototype._stop,ne=MediaStreamTrack.prototype._inputFilterMap||{};Y.forEach(function(oe){ne[oe]=ne[oe]||[],ne[oe].push(I)}),MediaStreamTrack.prototype._inputFilterMap=ne,MediaStreamTrack.prototype._iter===0&&(MediaStreamTrack.prototype.stop=function(){var oe=arguments;I.log("in proto",oe,this,I,Y),ae.call(this);var ve=MediaStreamTrack.prototype._inputFilterMap[this.id];ve&&ve.forEach(function(de){de.stop()})})}}},{key:"_getInput",value:function(O){if(this.log("_getInput",O),O instanceof MediaStream){this.originalInput=O;var P=this.originalInput.getVideoTracks()[0];this.frameRate=(this.params.frameRate?Math.min(this.params.frameRate,P.getSettings().frameRate):P.getSettings().frameRate)||this.defaults.frameRate,this.segmentationFrameRate=Math.min(this.frameRate,this.params.segmentationFrameRate||this.defaults.segmentationFrameRate);var L=Math.ceil(this.frameRate/this.segmentationFrameRate);return this.segmentationFrameRate=this.frameRate/L,this.log("_getInput ======= Original input fps is",P.getSettings().frameRate,P.getSettings()),O.clone()}if(O instanceof MediaStreamTrack){if(O.kind==="video"){this.originalInput=O;var re=this.originalInput;this.frameRate=(this.params.frameRate?Math.min(this.params.frameRate,re.getSettings().frameRate):re.getSettings().frameRate)||this.defaults.frameRate,this.segmentationFrameRate=Math.min(this.frameRate,this.params.segmentationFrameRate||this.defaults.segmentationFrameRate);var Y=Math.ceil(this.frameRate/this.segmentationFrameRate);return this.segmentationFrameRate=this.frameRate/Y,this.log("_getInput ======= Original input fps is",re.getSettings().frameRate,re.getSettings()),new MediaStream([O.clone()])}var C="Input to BackgroundFilter is: ".concat(O,"; Expected input.kind to be video but it is ").concat(O.kind);throw console.error(C),new Error(C)}if(O instanceof HTMLMediaElement)return O.captureStream?O.captureStream():O.mozCaptureStream?O.mozCaptureStream():(this.video=O,null);var z;try{z=O.constructor.name}catch{z=l(O)}var I="In _getInput; input is of invalid type: type ".concat(z," - ").concat(O);throw console.error(I),new Error(I)}},{key:"_initializeCoreNetwork",value:(M=(0,m.Z)(x().mark(function O(){var P,L,re;return x().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return this.times.init_core_start=Date.now()-this.times.ref,Y.next=3,(0,D.uF)(this.video);case 3:return P=Y.sent,Y.next=6,this.loadP;case 6:return this.times.load_core_done=Date.now()-this.times.ref,Y.next=9,(0,$.$A)(this.model);case 9:if(Y.sent){Y.next=12;break}throw new Error("model ".concat(this.model," is not supported"));case 12:return Y.t0=this.vectorlyCore,Y.t1=this.video,Y.t2=this.input,Y.t3=this.params.token,Y.t4=this.id,Y.t5=(0,$.PD)(this.model),Y.t6=Math.ceil(this.frameRate/this.segmentationFrameRate),Y.next=21,this._getBackground(this.background);case 21:return Y.t7=Y.sent,Y.t8={passthrough:!1,skipFactor:Y.t6,background:Y.t7},Y.t9={w:P.width,h:P.height},Y.t10=this.debug,Y.t11=this.frameRate,Y.t12=this.serverType,Y.t13={stream:Y.t2,token:Y.t3,id:Y.t4,networkParams:Y.t5,networkOptions:Y.t8,renderSize:Y.t9,debug:Y.t10,framerate:Y.t11,debugRender:!1,container:"disable",serverType:Y.t12,analyticsEnabled:!1},L=new Y.t0(Y.t1,Y.t13),this.log(L,L.initialized),Y.next=32,L.initialized;case 32:if(re=Y.sent,this.log("In _initializeCoreNetwork",re,L),this.times.init_core_end=Date.now()-this.times.ref,re!==!1){Y.next=38;break}throw this.log("Initialized is",this.initialized,L.error),new Error(L.error);case 38:return L.canvas.style.visibility="hidden",Y.abrupt("return",{canvas:L.renderCanvas||L.canvas,processor:L});case 40:case"end":return Y.stop()}},O,this)})),function(){return M.apply(this,arguments)})},{key:"_getBackground",value:(N=(0,m.Z)(x().mark(function O(P){var L,re,Y,C,z;return x().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(P!=="blur"){I.next=4;break}return I.abrupt("return",{type:"blur",radius:this.blurRadius});case 4:if(P!=="binary"&&P!=="transparent"){I.next=8;break}return I.abrupt("return",{type:P});case 8:if(P&&typeof P!="string"){I.next=18;break}return P?(re=P,U()(re)&&(re=document.URL.substr(0,document.URL.lastIndexOf("/"))+"/"+re)):(re=this.defaultBackground,console.warn("in background is not given; Setting to defaultBackground",this.defaultBackground)),I.next=12,(0,$.po)(re);case 12:return Y=I.sent,I.next=15,createImageBitmap(Y);case 15:L=I.sent,I.next=31;break;case 18:if(!(P instanceof HTMLImageElement)){I.next=27;break}return I.next=21,(0,$.po)(P);case 21:return I.next=23,createImageBitmap(P);case 23:return C=I.sent,I.abrupt("return",{type:"virtual",image:C});case 27:return I.next=29,createImageBitmap(P);case 29:return z=I.sent,I.abrupt("return",{type:"virtual",image:z});case 31:return I.abrupt("return",{type:"virtual",image:L});case 32:case"end":return I.stop()}},O,this)})),function(O){return N.apply(this,arguments)})},{key:"_getBlurRadius",value:function(O){return(!O||O<1)&&(console.warn("in blurRadius:",O,"should be greater than equal to 1; Setting to defaultBlurRadius",this.defaultBlurRadius),O=this.defaultBlurRadius),{type:"blur",radius:O}}},{key:"changeBackground",value:(te=(0,m.Z)(x().mark(function O(P){var L,re,Y;return x().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return this.log("Change background to",P,"from",this.background),C.prev=1,C.next=4,this.processorP;case 4:return L=C.sent,re=L.processor,C.next=8,this._getBackground(P);case 8:return Y=C.sent,C.next=11,re.updateNetworkOptions({background:Y});case 11:this.background=P,C.next=18;break;case 14:throw C.prev=14,C.t0=C.catch(1),console.error(C.t0),C.t0;case 18:case"end":return C.stop()}},O,this,[[1,14]])})),function(O){return te.apply(this,arguments)})},{key:"requestFrameRate",value:(Q=(0,m.Z)(x().mark(function O(P){var L,re,Y,C,z,I;return x().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return L=P.frameRate,re=P.segmentationFrameRate,this.log("Change frameRate to",L,"from",this.frameRate),ae.prev=2,ae.next=5,this.processorP;case 5:return Y=ae.sent,C=Y.processor,this.frameRate=L||this.frameRate||this.defaults.frameRate,this.segmentationFrameRate=Math.min(this.frameRate,re||this.segmentationFrameRate||this.defaults.segmentationFrameRate),z=Math.ceil(this.frameRate/this.segmentationFrameRate),this.segmentationFrameRate=this.frameRate/z,ae.next=13,C.updateNetworkOptions({framerate:this.frameRate,skipFactor:z});case 13:if(!C.glHandle||C.glHandle.framerate===this.frameRate){ae.next=20;break}return this.log(C.glHandle.framerate,this.frameRate),this.frameRate=C.glHandle.framerate,I=Math.ceil(this.frameRate/this.segmentationFrameRate),this.segmentationFrameRate=this.frameRate/I,ae.next=20,C.updateNetworkOptions({framerate:this.frameRate,skipFactor:I});case 20:return ae.abrupt("return",{frameRate:this.frameRate,segmentationFrameRate:this.segmentationFrameRate});case 23:throw ae.prev=23,ae.t0=ae.catch(2),console.error(ae.t0),ae.t0;case 27:case"end":return ae.stop()}},O,this,[[2,23]])})),function(O){return Q.apply(this,arguments)})},{key:"changeBlurRadius",value:(H=(0,m.Z)(x().mark(function O(P){var L,re;return x().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.prev=0,Y.next=3,this.processorP;case 3:return L=Y.sent,re=L.processor,this.log("Change blur radius to",P,"from",this.blurRadius),Y.next=8,re.updateNetworkOptions({background:this._getBlurRadius(P)});case 8:this.blurRadius=P,Y.next=15;break;case 11:throw Y.prev=11,Y.t0=Y.catch(0),console.error(Y.t0),Y.t0;case 15:case"end":return Y.stop()}},O,this,[[0,11]])})),function(O){return H.apply(this,arguments)})},{key:"_createNewStream",value:(Z=(0,m.Z)(x().mark(function O(){var P,L,re;return x().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.prev=0,Y.next=3,this.processorP;case 3:return P=Y.sent,L=P.canvas,re=P.processor,this.canvas=L,this.processor=re,this.processOutput=L.captureStream(),this.output=this.processOutput,Y.abrupt("return",this.output);case 13:throw Y.prev=13,Y.t0=Y.catch(0),console.error("ERROR in createNewStream",Y.t0),Y.t0;case 17:case"end":return Y.stop()}},O,this,[[0,13]])})),function(){return Z.apply(this,arguments)})},{key:"_getOrCreateOutput",value:(V=(0,m.Z)(x().mark(function O(){var P;return x().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,this.outputP;case 2:if((P=L.sent).getVideoTracks()[0].readyState!=="ended"){L.next=9;break}return this.outputP=this._createNewStream(),L.next=8,this.outputP;case 8:P=L.sent;case 9:return L.abrupt("return",P);case 10:case"end":return L.stop()}},O,this)})),function(){return V.apply(this,arguments)})},{key:"getOutput",value:(ee=(0,m.Z)(x().mark(function O(){var P;return x().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,L.next=3,this._getOrCreateOutput();case 3:return P=L.sent,L.abrupt("return",P);case 7:throw L.prev=7,L.t0=L.catch(0),console.error(this.error),L.t0;case 11:case"end":return L.stop()}},O,this,[[0,7]])})),function(){return ee.apply(this,arguments)})},{key:"getOutputTrack",value:(B=(0,m.Z)(x().mark(function O(){var P;return x().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,L.next=3,this._getOrCreateOutput();case 3:return P=L.sent,L.abrupt("return",P.getVideoTracks()[0]);case 7:throw L.prev=7,L.t0=L.catch(0),console.error(this.error),L.t0;case 11:case"end":return L.stop()}},O,this,[[0,7]])})),function(){return B.apply(this,arguments)})},{key:"disable",value:(_=(0,m.Z)(x().mark(function O(){return x().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,this.processorP;case 2:if(!this.passthrough||!this.input.active){P.next=7;break}return P.next=5,this.processor.updateNetworkOptions({passthrough:!0});case 5:P.next=9;break;case 7:this.processor.disable(),this.output=this.inputClone;case 9:return this.video.style.visibility="hidden",P.abrupt("return",this.output);case 11:case"end":return P.stop()}},O,this)})),function(){return _.apply(this,arguments)})},{key:"enable",value:(T=(0,m.Z)(x().mark(function O(){return x().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,this.processorP;case 2:if(!this.passthrough||!this.input.active){P.next=7;break}return P.next=5,this.processor.updateNetworkOptions({passthrough:!1});case 5:P.next=8;break;case 7:this.processor.enable();case 8:return this.output=this.processOutput,this.canvas.style.visibility="hidden",P.abrupt("return",this.output);case 11:case"end":return P.stop()}},O,this)})),function(){return T.apply(this,arguments)})},{key:"_initVideo",value:function(){var O=document.createElement("video");return O.style.visibility="hidden",O.style.display="none",O.id="vid-"+this.id,O.setAttribute("playsinline",null),O.setAttribute("autoplay",null),O.srcObject=this.input,document.body.appendChild(O),(0,D.yA)(O)||O.play(),O}},{key:"_getVideoTrack",value:function(O){return O instanceof MediaStream?O.getVideoTracks()[0]:O instanceof MediaStreamTrack?O.kind==="video"?O:void console.warn("Error in _getVideoTrack; input.kind expected to be video but is",O.kind):void 0}},{key:"_isSameTrack",value:function(O,P){var L=this._getVideoTrack(O),re=this._getVideoTrack(P);return L&&re&&L.id===re.id}},{key:"changeInput",value:(b=(0,m.Z)(x().mark(function O(P){var L,re,Y=arguments;return x().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(L=Y.length>1&&Y[1]!==void 0&&Y[1],!this._isSameTrack(P,this.originalInput)){C.next=4;break}return console.warn("changeInput called with same input as the one current filter is using; returning without changing"),C.abrupt("return");case 4:return L&&this.stop(),this.input=this._getInput(P),C.next=8,this.processorP;case 8:return this.input&&(this.inputClone=this.input?this.input.clone():null,this.video.srcObject=this.input,this.processor.updateStream&&this.processor.updateStream(this.input)),this.registerInputListeners(),C.next=12,(0,D.uF)(this.video);case 12:re=C.sent,this.processor.setRenderSize({w:re.width,h:re.height});case 14:case"end":return C.stop()}},O,this)})),function(O){return b.apply(this,arguments)})},{key:"stop",value:function(){var O=this.input.getVideoTracks();this.log("Stopping input tracks",this.input,O);for(var P=0;P<O.length;++P)O[P]._stop();if(this.originalInput){if(this.log("Original Input",this.originalInput),this.originalInput instanceof MediaStreamTrack)this.originalInput._stop();else if(this.originalInput instanceof MediaStream){O=this.originalInput.getTracks(),this.log("Stopping originalInput",this.originalInput,O);for(var L=0;L<O.length;++L)O[L]._stop()}}O=this.inputClone.getVideoTracks(),this.log("Stopping",this.inputClone,O,this.inputClone.getTracks());for(var re=0;re<O.length;++re)O[re]._stop()}},{key:"destroy",value:(v=(0,m.Z)(x().mark(function O(){var P,L,re,Y;return x().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,this.processorP;case 2:P=C.sent,(L=P.processor).glHandle&&L.glHandle.destroy(),(re=document.getElementById("canv-"+L.id))&&re.remove(),(Y=document.getElementById("vid-"+this.id))&&Y.remove();case 9:case"end":return C.stop()}},O,this)})),function(){return v.apply(this,arguments)})},{key:"log",value:function(){this.debug&&console.log.apply(null,arguments)}}]),o}();q.isSupported=(0,m.Z)(x().mark(function o(){var v;return x().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,$.Gb)();case 2:return v=b.sent,b.abrupt("return",v);case 4:case"end":return b.stop()}},o)})),q.isModelSupported=function(){var o=(0,m.Z)(x().mark(function v(b){var T;return x().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,$.$A)(b);case 2:return T=_.sent,_.abrupt("return",T);case 4:case"end":return _.stop()}},v)}));return function(v){return o.apply(this,arguments)}}(),q.checkPerformance=$.$_;var f=q},720:function(u,h,s){s.d(h,{default:function(){return v}});var l=s(861),m=s(671),y=s(144),g=s(757),S=s.n(g),E=s(877),x=s(147),A=s(55),F=s(245),D=s(190),$=s.n(D),k=s(907),j=s(181);function U(b){return function(T){if(Array.isArray(T))return(0,k.Z)(T)}(b)||function(T){if(typeof Symbol!="undefined"&&T[Symbol.iterator]!=null||T["@@iterator"]!=null)return Array.from(T)}(b)||(0,j.Z)(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var W=s(942),G=s(885);function q(b,T){var _=Object.keys(b);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(b);T&&(B=B.filter(function(ee){return Object.getOwnPropertyDescriptor(b,ee).enumerable})),_.push.apply(_,B)}return _}function f(b){for(var T=1;T<arguments.length;T++){var _=arguments[T]!=null?arguments[T]:{};T%2?q(Object(_),!0).forEach(function(B){(0,W.Z)(b,B,_[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(_)):q(Object(_)).forEach(function(B){Object.defineProperty(b,B,Object.getOwnPropertyDescriptor(_,B))})}return b}(function(){var b,T,_,B=["_imageBitmapOptions","resizeWidth","resizeHeight","resizeQuality","imageOrientation"],ee=["_Blob","_ImageData","_SVGBlob","_SVGImageElement"],V=["resizeWidth","resizeHeight","resizeQuality","imageOrientation","premultiplyAlpha","colorSpaceConversion"],Z={ResizeQuality:["pixelated","low","medium","high"],ImageOrientation:["none","flipY"]},H={COMMON_HEADER:"Failed to execute 'createImageBitmap': ",INVALID_STATE_IMAGE:"Provided image was in an invalid state.",ARGUMENT_COUNT_1:"At least one argument is required.",ARGUMENT_COUNT_N:"%s is not a valid argument count for any overload",CROP_RECT_ZERO:"The crop rect width passed to createImageBitmap must be nonzero",ALLOCATION_FAILED:"The ImageBitmap could not be allocated.",INVALID_SOURCE:"Argument 1 could not be converted to any of: HTMLImageElement, SVGImageElement, HTMLCanvasElement, HTMLVideoElement, ImageBitmap, Blob, CanvasRenderingContext2D, ImageData.",ENUM:"'%v' is not a valid value for enumeration %e",ALLOCATION:"The ImageBitmap couldn't be allocated."},Q=["HTMLImageElement","SVGImageElement","HTMLVideoElement","HTMLCanvasElement","OffscreenCanvas","ImageBitmap"],te="http://www.w3.org/2000/svg",N="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function M(be){try{return be.slice(0,0),!1}catch{return!0}}var J=new Int32Array(1);function O(be){return Number.isFinite(be)?(J[0]=be,J[0]):NaN}function P(be){var he=O(be);if(isNaN(he))throw new TypeError("Invalid long value");return he}function L(be,he){var me=Object.assign(document.createElement("canvas"),{width:be,height:he}).getContext("2d");if(be&&he&&!function(le){if(le.isContextLost)return le.translate(0,0),!le.isContextLost();var Re=!1;try{le.fillRect(0,0,1,1),Re=le.getImageData(0,0,1,1).data[3]!==0}finally{return le.clearRect(0,0,1,1),Re}}(me))throw new DOMException(H.ALLOCATION,"InvalidStateError");return me}function re(be){return function(he){var me=globalThis[he];return me&&be instanceof me}}var Y=globalThis.createImageBitmap,C=!!Y&&function(){for(var be=arguments.length,he=new Array(be),me=0;me<be;me++)he[me]=arguments[me];return Y.call.apply(Y,[globalThis].concat(he))};function z(be){var he=new Image;return he.src=be,new Promise(function(me,le){he.onload=function(Re){ke(he),me(he)},he.onerror=function(Re){var Oe=new DOMException(H.INVALID_STATE_IMAGE,"InvalidStateError");le(Oe)}})}function I(be){return z(be.getAttribute("href")||be.getAttributeNS("http://www.w3.org/1999/xlink","href"))}var ae=H.COMMON_HEADER;function ne(be,he,me){var le=Z[me],Re=be[he];if(Re!==void 0&&!le.includes(Re)){var Oe=H.ENUM.replace("%v",Re).replace("%e",me);throw new TypeError(Oe)}}function oe(be){for(var he=arguments.length,me=new Array(he>1?he-1:0),le=1;le<he;le++)me[le-1]=arguments[le];var Re,Oe=me.map(O),Le=(0,G.Z)(Oe,4),Fe=Le[0],Ne=Le[1],Be=Le[2],Ue=Le[3],Ae=(me.length===1?me[0]:me[4])||{},We="resizeWidth"in Ae&&P(Ae.resizeWidth),$e="resizeHeight"in Ae&&P(Ae.resizeHeight);ne(Ae,"resizeQuality","ResizeQuality"),ne(Ae,"imageOrientation","ImageOrientation");var ze=arguments.length;if(!ze)throw new TypeError(ae+H.ARGUMENT_COUNT_1);if(ze>2&&ze<5)throw H.ARGUMENT_COUNT_N.replace("%s",ze),new TypeError(ae+err_count_msg);if(ze>=5){if(!Be||!Ue)throw new RangeError(ae+H.CROP_RECT_ZERO);Re={sx:Fe=Fe||0,sy:Ne=Ne||0,sw:Be,sh:Ue}}if(We===0||$e===0){var Xe=ae+H.ALLOCATION_FAILED;throw new DOMException(Xe,"InvalidStateError")}return f({cropRect:Re},Ae)}function ve(be){for(var he=arguments.length,me=new Array(he>1?he-1:0),le=1;le<he;le++)me[le-1]=arguments[le];var Re=me.length;return be.has("_imageBitmapOptions")&&[2,6].includes(Re)?me.slice(0,Re-1):me}function de(be){var he=re(be);return he("HTMLImageElement")?{width:be.naturalWidth,height:be.naturalHeight}:he("HTMLVideoElement")?{width:be.videoWidth,height:be.videoHeight}:he("SVGImageElement")?{width:NaN,height:NaN}:he("HTMLCanvasElement")||he("OffscreenCanvas")||he("ImageBitmap")||he("ImageData")?be:{width:NaN,height:NaN}}function Se(be,he){var me=function(Xe,Ge){var Ve=de(Xe),Je=Ve.width,He=Ve.height,Ze=Ge.resizeWidth,wt=Ge.resizeHeight,ot=Ge.cropRect||{sx:0,sy:0,sw:Je,sh:He},st={dx:0,dy:0,dw:Ze||Math.abs(ot.sw),dh:wt||Math.abs(ot.sh)},Qe=function(kt,Tt,it,at){var et=it.sx,tt=it.sy,Ye=it.sw,Ke=it.sh,ct=at.dx,ut=at.dy,rt=at.dw,nt=at.dh;Ye<0&&(et+=Ye,Ye=Math.abs(Ye)),Ke<0&&(tt+=Ke,Ke=Math.abs(Ke)),rt<0&&(ct+=rt,rt=Math.abs(rt)),nt<0&&(ut+=nt,nt=Math.abs(nt));var lt=Math.max(et,0),pt=Math.min(et+Ye,kt),dt=Math.max(tt,0),ht=Math.min(tt+Ke,Tt),mt=rt/Ye,gt=nt/Ke;return{sx:lt,sy:dt,sw:pt-lt,sh:ht-dt,dx:et<0?ct-et*mt:ct,dy:tt<0?ut-tt*gt:ut,dw:(pt-lt)*mt,dh:(ht-dt)*gt}}(Je,He,ot,st);return Qe.resizeQuality=Ge.resizeQuality,Qe.flipY=Ge.imageOrientation==="flipY",Qe.width=st.dw,Qe.height=st.dh,Qe}(be,he),le=(de(be).height,me.sx),Re=me.sy,Oe=me.sw,Le=me.sh,Fe=me.dx,Ne=me.dy,Be=me.dw,Ue=me.dh,Ae=me.flipY,We=me.resizeQuality,$e=L(me.width,me.height),ze=$e.canvas;return We==="pixelated"?$e.imageSmoothingEnabled=!1:We&&($e.imageSmoothingQuality=We),$e.drawImage(be,le,Re,Oe,Le,Fe,Ne,Be,Ue),Ae&&($e.globalCompositeOperation="copy",$e.setTransform(1,0,0,-1,0,ze.height),$e.drawImage(ze,0,0)),ze}function we(be,he){return _e.apply(this,arguments)}function _e(){return _e=(0,l.Z)(S().mark(function be(he,me){var le,Re;return S().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return le=globalThis.URL.createObjectURL(he),Oe.next=3,z(le);case 3:return Re=Oe.sent,Oe.abrupt("return",(globalThis.URL.revokeObjectURL(he),Se(Re,me)));case 5:case"end":return Oe.stop()}},be)})),_e.apply(this,arguments)}function ye(be,he){return Ee.apply(this,arguments)}function Ee(){return Ee=(0,l.Z)(S().mark(function be(he,me){var le,Re,Oe,Le,Fe,Ne,Be,Ue,Ae,We,$e,ze,Xe,Ge,Ve,Je,He;return S().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return le=me.resizeWidth,Re=me.resizeHeight,Oe=me.resizeQuality,Le=me.imageOrientation,Fe=me.cropRect||{},Ne=Fe.sx||0,Be=Fe.sy||0,Ue=Fe.sw||he.width,Ae=Fe.sh||he.height,We=Ue<0?-1*Ue-Ne:-Ne,$e=Ae<0?-1*Ae-Be:-Be,(ze=L(Math.abs(Ue),Math.abs(Ae))).putImageData(he,We,$e,Ne,Be,Ue,Ae),Xe=Le==="flipY",Ge=le||Xe,le?(Ve=L(le,Re),Oe==="pixelated"?Ve.imageSmoothingEnabled=!1:Ve.imageSmoothingQuality=Oe):(Ve=ze,ze.globalCompositeOperation="copy"),Je=ze.canvas,He=Ve.canvas,Ze.abrupt("return",(Xe&&Ve.setTransform(1,0,0,-1,0,He.height),Ge&&Ve.drawImage(Je,0,0,Je.width,Je.height,0,0,He.width,He.height),He));case 6:case"end":return Ze.stop()}},be)})),Ee.apply(this,arguments)}function Te(){var be=H.COMMON_HEADER+H.INVALID_STATE_IMAGE;throw new DOMException(be,"InvalidStateError")}function ke(be){var he=re(be);if(he("HTMLCanvasElement")||he("OffscreenCanvas")||he("ImageBitmap"))be.width!==0&&be.height!==0||Te();else if(he("HTMLImageElement")||he("HTMLVideoElement")||he("SVGImageElement")){var me=de(be),le=me.width,Re=me.height;le!==0&&Re!==0||Te();var Oe=!1;try{Oe=!L(0,0).createPattern(be,"no-repeat")}catch{return"maybe"}Oe&&Te()}return!0}var ce=!1,X=function(){if(!C){var be=B.concat(ee);return new Set(be)}var he=[se()],me=new Set(he.flat()),le=B.filter(function(Re){return!me.has(Re)});return new Set(le)}(),K=(0,l.Z)(S().mark(function be(){var he,me,le;return S().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(C){Re.next=2;break}return Re.abrupt("return",(ce=!0,X));case 2:return he=[fe(),ue(),ie(),xe()],Re.next=5,Promise.all(he);case 5:return me=Re.sent,le=new Set(me.flat()),Re.abrupt("return",(ee.filter(function(Oe){return!le.has(Oe)}).forEach(function(Oe){return X.add(Oe)}),ce=!0,X));case 8:case"end":return Re.stop()}},be)}))();function se(){var be=[],he={};return V.forEach(function(me){Object.defineProperty(he,me,{get:function(){be.push(me)}})}),C(new ImageData(1,1),he).then(function(me){return me.close()}).catch(function(){}),be.length&&be.push("_imageBitmapOptions"),be}function fe(){return pe.apply(this,arguments)}function pe(){return pe=(0,l.Z)(S().mark(function be(){var he,me;return S().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return he=[],le.next=3,fetch(N).then(function(Re){return Re.ok&&Re.blob()});case 3:return me=le.sent,le.prev=4,le.next=7,C(me);case 7:if(le.t0=le.sent.width,le.t1=le.t0===1,!le.t1){le.next=11;break}he.push("_Blob");case 11:le.next=16;break;case 13:le.prev=13,le.t2=le.catch(4),console.log(le.t2);case 16:return le.abrupt("return",he);case 17:case"end":return le.stop()}},be,null,[[4,13]])})),pe.apply(this,arguments)}function ue(){return Ce.apply(this,arguments)}function Ce(){return Ce=(0,l.Z)(S().mark(function be(){var he,me;return S().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return he=[],me=function(Re,Oe){try{return new ImageData(1,1)}catch{return create2dContext(0,0).createImageData(1,1)}}(),le.prev=1,le.next=4,C(me);case 4:if(le.t0=le.sent.width,le.t1=le.t0===1,!le.t1){le.next=8;break}he.push("_ImageData");case 8:le.next=12;break;case 10:le.prev=10,le.t2=le.catch(1);case 12:return le.abrupt("return",he);case 13:case"end":return le.stop()}},be,null,[[1,10]])})),Ce.apply(this,arguments)}function ie(){return ge.apply(this,arguments)}function ge(){return ge=(0,l.Z)(S().mark(function be(){var he,me;return S().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return he=[],me=new Blob(['<svg width="1" height="1" xmlns="'.concat(te,`">
      <rect width="1" height="1"/>
    </svg>`)],{type:"image/svg+xml"}),le.prev=1,le.next=4,C(me);case 4:if(le.t0=le.sent.width,le.t1=le.t0===1,!le.t1){le.next=8;break}he.push("_SVGBlob");case 8:le.next=12;break;case 10:le.prev=10,le.t2=le.catch(1);case 12:return le.abrupt("return",he);case 13:case"end":return le.stop()}},be,null,[[1,10]])})),ge.apply(this,arguments)}function xe(){return Ie.apply(this,arguments)}function Ie(){return Ie=(0,l.Z)(S().mark(function be(){var he,me,le,Re,Oe;return S().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(he=[],"SVGImageElement"in globalThis){Le.next=3;break}return Le.abrupt("return",he);case 3:me=function(Fe){return new Promise(function(Ne){return setTimeout(Ne,Fe)})},(le=document.createElementNS(te,"image")).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",N),Re=function(){try{return ke(le),!1}catch{return!0}},Oe=0;case 7:return Le.next=9,me(10);case 9:if(Re()&&++Oe<300){Le.next=7;break}case 10:return Le.prev=10,Le.next=13,C(le);case 13:he.push("_SVGImageElement"),Le.next=19;break;case 16:Le.prev=16,Le.t0=Le.catch(10),console.error(Le.t0);case 19:return Le.abrupt("return",he);case 20:case"end":return Le.stop()}},be,null,[[10,16]])})),Ie.apply(this,arguments)}function Pe(be,he,me){var le=re(me);return le("Blob")&&(be.has("_Blob")||(me!=null&&me.type,be.has("_SVGBlob")))?!0:!(!le("ImageData")||!be.has("_ImageData"))||!(!le("SVGImageElement")||!be.has("_SVGImageElement"))||!!Object.keys(he).some(function(Re){return be.has(Re)})}function De(be,he){if(ce)return!1;var me=re(be);return["Blob","ImageData","SVGImageElement"].some(me)}var Me=function(be){return Object.getOwnPropertyDescriptor(HTMLCanvasElement.prototype,be)};function je(){throw new TypeError("Illegal Constructor")}function qe(be){return be instanceof globalThis.ImageBitmap?be:C?C(be):function(he){return he instanceof HTMLCanvasElement||(he=Se(he)),Object.setPrototypeOf(he,je.prototype),he}(be)}je.prototype=Object.create((T={close:function(){Me("width").set.call(this,0),Me("height").set.call(this,0)},get width(){return Me("width").get.call(this)},get height(){return Me("height").get.call(this)}},(_={})[b=Symbol.toStringTag]=_[b]||{},_[b].get=function(){return"ImageBitmap"},function(be,he){for(var me in he)(Oe=he[me]).configurable=Oe.enumerable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(be,me,Oe);if(Object.getOwnPropertySymbols)for(var le=Object.getOwnPropertySymbols(he),Re=0;Re<le.length;Re++){var Oe,Le=le[Re];(Oe=he[Le]).configurable=Oe.enumerable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(be,Le,Oe)}}(T,_),T)),C||(globalThis.ImageBitmap=je),globalThis.createImageBitmap=function(){var be=(0,l.Z)(S().mark(function he(me){var le,Re,Oe,Le,Fe,Ne,Be,Ue=arguments;return S().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:for(le=Ue.length,Re=new Array(le>1?le-1:0),Oe=1;Oe<le;Oe++)Re[Oe-1]=Ue[Oe];if(Le=oe.apply(void 0,Ue),!De(me)){Ae.next=8;break}return Ae.next=5,K;case 5:Ae.t0=Ae.sent,Ae.next=9;break;case 8:Ae.t0=X;case 9:if((Fe=Ae.t0).size!==0){Ae.next=12;break}return Ae.abrupt("return",C.apply(void 0,Ue));case 12:if(!C||Pe(Fe,Le,me)){Ae.next=14;break}return Ae.abrupt("return",C.apply(void 0,U(ve.apply(void 0,[Fe].concat(Array.prototype.slice.call(Ue))))));case 14:if(Ne=re(me),!Q.some(Ne)){Ae.next=26;break}if(ke(me),Ae.t1=Ne("SVGImageElement"),!Ae.t1){Ae.next=22;break}return Ae.next=21,I(me);case 21:me=Ae.sent;case 22:Ne("HTMLImageElement")&&(me.naturalWidth||me.naturalHeight||Le.resizeWidth&&Le.resizeHeight||Te()),Be=Se(me,Le),Ae.next=38;break;case 26:if(!Ne("Blob")){Ae.next=32;break}return Ae.next=29,we(me,Le);case 29:Be=Ae.sent,Ae.next=38;break;case 32:if(Ae.t2=Ne("ImageData"),!Ae.t2){Ae.next=38;break}return M(me.data.buffer)&&Te(),Ae.next=37,ye(me,Le);case 37:Be=Ae.sent;case 38:if(Be){Ae.next=40;break}throw new TypeError(H.INVALID_SOURCE);case 40:return Ae.next=42,qe(Be);case 42:return Ae.abrupt("return",Ae.sent);case 43:case"end":return Ae.stop()}},he)}));return function(he){return be.apply(this,arguments)}}(),globalThis.createImageBitmap._original=C})();var o=function(){function b(){(0,m.Z)(this,b)}var T,_,B,ee,V,Z,H,Q,te,N,M,J;return(0,y.Z)(b,[{key:"load",value:(J=(0,l.Z)(S().mark(function O(P){return S().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return console.log("Loading params",P),this.params=P||{},this.model=P.model||"selfie",this.model_version=P.version,this.debug=this.params.debug||(0,A.ok)(),this.id=P.id||(0,E.v4)(),this.version=x.i8,this.serverType=this.params.serverType||"",this.defaults={},this.defaults.frameRate=30,this.defaults.segmentationFrameRate=15,this.frameRate=P.frameRate||this.defaults.frameRate,this.segmentationFrameRate=P.segmentationFrameRate||this.defaults.segmentationFrameRate,this.passthrough=P.passthrough||!1,this.serverType!=="production"&&this.serverType!==""||(0,F.EK)(null,P),this.defaultBackground="https://files.vectorly.io/demo/background-filter/images/virtual-background-1.jpg",this.defaultBlurRadius=5,this.background=this.params.background||this.defaultBackground,this.blurRadius=this.params.blurRadius||this.defaultBlurRadius,this.error=null,this.loadP=this.loadCoreModule(),this.inputSize=P.inputSize||{w:100,h:100},parseInt(this.inputSize.w)&&parseInt(this.inputSize.h)||console.warn("INVALID inputSize parameter set as",P.inputSize,"; Defaulting to {w: 100, h: 100}"),this.canvas=P.canvas||this._initCanvas(),L.prev=24,this.processorP=this._initializeCoreNetwork(),L.abrupt("return",this.processorP);case 29:throw L.prev=29,L.t0=L.catch(24),this.error=L.t0,L.t0;case 33:case"end":return L.stop()}},O,this,[[24,29]])})),function(O){return J.apply(this,arguments)})},{key:"loadCoreModule",value:(M=(0,l.Z)(S().mark(function O(){return S().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,F.Zq)(!1,!0);case 2:return this.vectorlyCore=P.sent,console.log("VectorlyCore",this.vectorlyCore),P.abrupt("return",!0);case 5:case"end":return P.stop()}},O,this)})),function(){return M.apply(this,arguments)})},{key:"_initVideo",value:function(){var O=document.createElement("video");return O.style.visibility="hidden",O.style.display="none",O.id="vid-"+this.id,O.setAttribute("playsinline",null),O.setAttribute("autoplay",null),this.input&&(O.srcObject=this.input),document.body.appendChild(O),(0,A.yA)(O)||O.play(),O}},{key:"_initializeCoreNetwork",value:(N=(0,l.Z)(S().mark(function O(){var P,L,re;return S().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,this.loadP;case 2:return P=new this.vectorlyCore,Y.t0=P,Y.t1=this.params.token,Y.t2=this.inputSize.w,Y.t3=this.inputSize.h,Y.t4=this.id,Y.t5=(0,F.PD)(this.model),Y.t6=Math.ceil(this.frameRate/this.segmentationFrameRate),Y.next=12,this._getBackground(this.background);case 12:return Y.t7=Y.sent,Y.t8={passthrough:!1,skipFactor:Y.t6,background:Y.t7},Y.t9=this.inputSize,Y.t10=this.debug,Y.t11=this.canvas,Y.t12=this.serverType,Y.t13={token:Y.t1,w:Y.t2,h:Y.t3,id:Y.t4,networkParams:Y.t5,networkOptions:Y.t8,renderSize:Y.t9,debug:Y.t10,canvas:Y.t11,serverType:Y.t12,analyticsEnabled:!1},L=Y.t0.load.call(Y.t0,Y.t13),console.log(P,L),Y.next=23,L;case 23:if(re=Y.sent,this.processor=P,console.log("In _initializeCoreNetwork",re,P),re!==!1){Y.next=29;break}throw console.log("Initialized is",this.initialized,P.error),new Error(P.error);case 29:return Y.abrupt("return",{canvas:this.canvas,processor:P});case 30:case"end":return Y.stop()}},O,this)})),function(){return N.apply(this,arguments)})},{key:"_initCanvas",value:function(){var O=document.createElement("canvas");return O.id="canv-"+this.id,O.style.display="none",O}},{key:"setInputSize",value:(te=(0,l.Z)(S().mark(function O(P){return S().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,this.processorP;case 2:return L.next=4,this.processor.updateInputResolution(P);case 4:return L.next=6,this.processor.updateRenderResolution(P);case 6:case"end":return L.stop()}},O,this)})),function(O){return te.apply(this,arguments)})},{key:"setInput",value:(Q=(0,l.Z)(S().mark(function O(P){return S().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,this.processorP;case 2:return L.next=4,this.processor.setInput(P);case 4:case"end":return L.stop()}},O,this)})),function(O){return Q.apply(this,arguments)})},{key:"render",value:(H=(0,l.Z)(S().mark(function O(){return S().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,this.processorP;case 2:return P.next=4,this.processor.render();case 4:case"end":return P.stop()}},O,this)})),function(){return H.apply(this,arguments)})},{key:"getOutputBitmap",value:(Z=(0,l.Z)(S().mark(function O(){var P;return S().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,createImageBitmap(this.canvas);case 2:return P=L.sent,L.abrupt("return",P);case 4:case"end":return L.stop()}},O,this)})),function(){return Z.apply(this,arguments)})},{key:"getOutput",value:(V=(0,l.Z)(S().mark(function O(){var P;return S().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,this._getOrCreateOutput();case 2:return P=L.sent,L.abrupt("return",P);case 4:case"end":return L.stop()}},O,this)})),function(){return V.apply(this,arguments)})},{key:"_getOrCreateOutput",value:(ee=(0,l.Z)(S().mark(function O(){var P;return S().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,this.processorP;case 2:if(this.output&&(P=this.output.getVideoTracks()[0]),this.output&&(!P||P.readyState!=="ended")){L.next=8;break}return this.outputP=this._createNewStream(),L.next=7,this.outputP;case 7:this.output=L.sent;case 8:return L.abrupt("return",this.output);case 9:case"end":return L.stop()}},O,this)})),function(){return ee.apply(this,arguments)})},{key:"_createNewStream",value:(B=(0,l.Z)(S().mark(function O(){var P;return S().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.prev=0,L.next=3,this.processorP;case 3:return this.processOutput=this.canvas.captureStream(),P=this.processOutput,L.abrupt("return",P);case 8:throw L.prev=8,L.t0=L.catch(0),console.error("ERROR in createNewStream",L.t0),L.t0;case 12:case"end":return L.stop()}},O,this,[[0,8]])})),function(){return B.apply(this,arguments)})},{key:"_getBackground",value:(_=(0,l.Z)(S().mark(function O(P){var L;return S().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(P!=="blur"){re.next=4;break}return re.abrupt("return",{type:"blur",radius:this.blurRadius});case 4:if(P!=="binary"&&P!=="transparent"){re.next=8;break}return re.abrupt("return",{type:P});case 8:if(P){re.next=13;break}L=this.defaultBackground,console.warn("in background is not given; Setting to defaultBackground",this.defaultBackground),re.next=29;break;case 13:if(typeof P!="string"){re.next=18;break}L=P,$()(P)&&(L=document.URL.substr(0,document.URL.lastIndexOf("/"))+"/"+P),re.next=29;break;case 18:if(!(P instanceof HTMLImageElement)){re.next=26;break}return re.next=21,(0,F.po)(P);case 21:return re.next=23,createImageBitmap(P);case 23:L=re.sent,re.next=29;break;case 26:return re.next=28,createImageBitmap(P);case 28:L=re.sent;case 29:return re.abrupt("return",{type:"virtual",image:L});case 30:case"end":return re.stop()}},O,this)})),function(O){return _.apply(this,arguments)})},{key:"changeBackground",value:(T=(0,l.Z)(S().mark(function O(P){return S().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return console.log("Change background to",P,"from",this.background),L.prev=1,L.next=4,this.processorP;case 4:return L.t0=this.processor,L.next=7,this._getBackground(P);case 7:return L.t1=L.sent,L.t2={background:L.t1},L.next=11,L.t0.updateNetworkOptions.call(L.t0,L.t2);case 11:this.background=P,L.next=18;break;case 14:throw L.prev=14,L.t3=L.catch(1),console.error(L.t3),L.t3;case 18:case"end":return L.stop()}},O,this,[[1,14]])})),function(O){return T.apply(this,arguments)})}]),b}(),v=o},245:function(u,h,s){s.d(h,{$A:function(){return b},$_:function(){return ee},PD:function(){return v},EK:function(){return Z},Gb:function(){return f},Zq:function(){return G},po:function(){return _}});var l=s(861),m=s(757),y=s.n(m),g=s(877);function S(H,Q,te,N){return new(te||(te=Promise))(function(M,J){function O(re){try{L(N.next(re))}catch(Y){J(Y)}}function P(re){try{L(N.throw(re))}catch(Y){J(Y)}}function L(re){var Y;re.done?M(re.value):(Y=re.value,Y instanceof te?Y:new te(function(C){C(Y)})).then(O,P)}L((N=N.apply(H,Q||[])).next())})}const E=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","radeon r9 200","sgx 543","sgx543"],x=H=>H.toLowerCase().replace(/^angle ?\((.+)\)*$/,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,""),A=typeof window=="undefined",F=(()=>{if(A)return;const{userAgent:H,platform:Q,maxTouchPoints:te}=window.navigator,N=/(iphone|ipod|ipad)/i.test(H),M=Q==="iPad"||Q==="MacIntel"&&te>0&&!window.MSStream;return{isIpad:M,isMobile:/android/i.test(H)||N||M,isSafari12:/Version\/12.+Safari/.test(H)}})(),D=[],$=[],k=(H,Q)=>{if(H===Q)return 0;const te=H;H.length>Q.length&&(H=Q,Q=te);let N=H.length,M=Q.length;for(;N>0&&H.charCodeAt(~-N)===Q.charCodeAt(~-M);)N--,M--;let J,O=0;for(;O<N&&H.charCodeAt(O)===Q.charCodeAt(O);)O++;if(N-=O,M-=O,N===0)return M;let P,L,re=0,Y=0,C=0;for(;Y<N;)$[Y]=H.charCodeAt(O+Y),D[Y]=++Y;for(;C<M;)for(J=Q.charCodeAt(O+C),P=C++,re=C,Y=0;Y<N;Y++)L=J===$[Y]?P:P+1,P=D[Y],re=D[Y]=P>re?L>re?re+1:L:L>P?P+1:L;return re},j=({mobileTiers:H=[0,15,30,60],desktopTiers:Q=[0,15,30,60],override:te={},glContext:N,failIfMajorPerformanceCaveat:M=!1,benchmarksURL:J="https://unpkg.com/detect-gpu@3.1.27/dist/benchmarks"}={})=>S(void 0,void 0,void 0,function*(){const O={};if(A)return{tier:0,type:"SSR"};const{isIpad:P=!!(F!=null&&F.isIpad),isMobile:L=!!(F!=null&&F.isMobile),screenSize:re=window.screen,loadBenchmarks:Y=_e=>S(void 0,void 0,void 0,function*(){const ye=yield fetch(`${J}/${_e}`).then(Ee=>Ee.json());return ye.shift(),ye})}=te;let{renderer:C}=te;const z=(_e,ye,Ee,Te,ke)=>({device:ke,fps:Te,gpu:Ee,isMobile:L,tier:_e,type:ye});let I,ae="";if(C)C=x(C),I=[C];else{const _e=N||((Ee,Te=!1)=>{const ke={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:Te,powerPreference:"high-performance",stencil:!1};Ee&&delete ke.powerPreference;const ce=window.document.createElement("canvas"),X=ce.getContext("webgl",ke)||ce.getContext("experimental-webgl",ke);return X!=null?X:void 0})(F==null?void 0:F.isSafari12,M);if(!_e)return z(0,"WEBGL_UNSUPPORTED");const ye=_e.getExtension("WEBGL_debug_renderer_info");if(ye&&(C=_e.getParameter(ye.UNMASKED_RENDERER_WEBGL)),!C)return z(1,"FALLBACK");ae=C,C=x(C),I=((Ee,Te,ke)=>Te==="apple gpu"?((ce,X,K)=>{let se=[X];if(K){const fe=`
      precision highp float;
      attribute vec3 aPosition;
      varying float vvv;
      void main() {
        vvv = 0.31622776601683794;
        gl_Position = vec4(aPosition, 1.0);
      }
    `,pe=`
      precision highp float;
      varying float vvv;
      void main() {
        vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
        enc = fract(enc);
        enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
        gl_FragColor = enc;
      }
    `,ue=ce.createShader(35633),Ce=ce.createShader(35632),ie=ce.createProgram();if(Ce&&ue&&ie){ce.shaderSource(ue,fe),ce.shaderSource(Ce,pe),ce.compileShader(ue),ce.compileShader(Ce),ce.attachShader(ie,ue),ce.attachShader(ie,Ce),ce.linkProgram(ie),ce.detachShader(ie,ue),ce.detachShader(ie,Ce),ce.deleteShader(ue),ce.deleteShader(Ce),ce.useProgram(ie);const ge=ce.createBuffer();ce.bindBuffer(34962,ge),ce.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const xe=ce.getAttribLocation(ie,"aPosition");ce.vertexAttribPointer(xe,3,5126,!1,0,0),ce.enableVertexAttribArray(xe),ce.clearColor(1,1,1,1),ce.clear(16384),ce.viewport(0,0,1,1),ce.drawArrays(4,0,3);const Ie=new Uint8Array(4);ce.readPixels(0,0,1,1,6408,5121,Ie),ce.deleteProgram(ie),ce.deleteBuffer(ge),se={801621810:F!=null&&F.isIpad?["apple a12x gpu"]:["apple a11 gpu","apple a12 gpu","apple a13 gpu","apple a14 gpu"],8016218135:F!=null&&F.isIpad?["apple a9x gpu","apple a10 gpu","apple a10x gpu"]:["apple a9 gpu","apple a10 gpu"]}[Ie.join("")]||se}}return se})(Ee,Te,ke):[Te])(_e,C,L)}const ne=(yield Promise.all(I.map(_e=>S(void 0,void 0,void 0,function*(){const ye=(Pe=>{const De=L?["adreno","apple","mali-t","mali","nvidia","powervr"]:["intel","amd","radeon","nvidia","geforce"];for(const Me of De)if(Pe.includes(Me))return Me})(_e);if(!ye)return;const Ee=`${L?"m":"d"}-${ye}.json`,Te=O[Ee]=O[Ee]||Y(Ee);let ke;try{ke=yield Te}catch{return}const ce=(Pe=>{var De;const Me=(Pe=Pe.replace(/\([^)]+\)/,"")).match(/\d+/)||Pe.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(De=Me==null?void 0:Me.join("").replace(/\W|amd/g,""))!==null&&De!==void 0?De:""})(_e),X=ye==="apple";let K=ke.filter(([,Pe])=>Pe===ce);K.length||(K=ke.filter(([Pe])=>Pe.includes(_e)));const se=K.length;if(se===0)return;let fe,[pe,,,ue]=se>1?K.map(Pe=>[Pe,k(_e,Pe[0])]).sort(([,Pe],[,De])=>Pe-De)[0][0]:K[0],Ce=Number.MAX_VALUE;const{devicePixelRatio:ie}=window,ge=re.width*ie*(re.height*ie);X&&L&&(ue=ue.filter(([,,,Pe])=>{var De;return((De=Pe==null?void 0:Pe.indexOf(P?"ipad":"iphone"))!==null&&De!==void 0?De:-1)>-1}));for(const Pe of ue){const[De,Me]=Pe,je=De*Me,qe=Math.abs(ge-je);qe<Ce&&(Ce=qe,fe=Pe)}if(!fe)return;const[,,xe,Ie]=fe;return[Ce,xe,pe,Ie]})))).filter(_e=>!!_e);if(!ne.length){const _e=E.find(ye=>C.includes(ye));return _e?z(0,"BLOCKLISTED",_e):z(1,"FALLBACK",`${C} (${ae})`)}const[,oe,ve,de]=ne.sort(([_e=Number.MAX_VALUE],[ye=Number.MAX_VALUE])=>_e-ye)[0];if(oe===-1)return z(0,"BLOCKLISTED",ve,oe,de);const Se=L?H:Q;let we=0;for(let _e=0;_e<Se.length;_e++)oe>=Se[_e]&&(we=_e);return z(we,"BENCHMARK",ve,oe,de)});var U=s(618),W=s(161);function G(H){return q.apply(this,arguments)}function q(){return q=(0,l.Z)(y().mark(function H(Q){var te,N=arguments;return y().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if((N.length>1&&N[1]!==void 0&&N[1])!==!0){M.next=6;break}return M.next=4,Promise.resolve().then(s.bind(s,841));case 4:return te=M.sent,M.abrupt("return",te.default.core);case 6:if(Q!==!0){M.next=13;break}return M.next=9,Promise.resolve().then(s.bind(s,886));case 9:case 15:return te=M.sent,M.abrupt("return",te.default);case 13:return M.next=15,Promise.resolve().then(s.bind(s,296));case 17:case"end":return M.stop()}},H)})),q.apply(this,arguments)}function f(){return o.apply(this,arguments)}function o(){return(o=(0,l.Z)(y().mark(function H(){var Q;return y().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return(Q={}).wasm=U.support(),Q.simd=U.feature.simd,Q.webgl=(0,W.HR)(),Q.webgl2=(0,W.W8)(),Q.offscreen=Boolean(HTMLCanvasElement.prototype.transferControlToOffscreen),te.next=8,j();case 8:if(Q.gpu=te.sent,Q.gpu.hwaccel=Q.gpu.tier>0,Q.wasm&&Q.webgl){te.next=14;break}return te.abrupt("return",!1);case 14:return te.abrupt("return",Q);case 15:case"end":return te.stop()}},H)}))).apply(this,arguments)}function v(H){if(H==="selfie")return{name:"background_selfie",tag:"general",version:"0"};if(H==="selfie_v2")return{name:"background_selfie",tag:"general",version:"1"};if(H==="webgl_unet")return{name:"background_webgl_unet",tag:"general",version:"2"};if(H==="webgl")return{name:"background_webgl",tag:"general",version:"1"};if(H==="webgl_v2")return{name:"background_webgl2",tag:"general",version:"1"};throw new Error("params.model passed is invalid",H)}function b(H){return T.apply(this,arguments)}function T(){return(T=(0,l.Z)(y().mark(function H(Q){var te,N,M;return y().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,f();case 2:if(te=J.sent,Q!=="selfie"&&Q!=="selfie_v2"){J.next=8;break}return N=te.wasm&&(te.webgl||te.webgl2),J.abrupt("return",N);case 8:if(Q!=="webgl_unet"&&Q!=="webgl"&&Q!=="webgl_v2"){J.next=13;break}return M=te.webgl2,J.abrupt("return",M);case 13:throw new Error("params.model passed is invalid",Q);case 14:case"end":return J.stop()}},H)}))).apply(this,arguments)}function _(H){return B.apply(this,arguments)}function B(){return B=(0,l.Z)(y().mark(function H(Q){var te;return y().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return te=function(M,J,O){if(typeof O=="string"){var P=document.createElement("img");return P.crossOrigin="anonymous",P.addEventListener("load",function(){M(P)}),P.src&&P.complete?P.complete&&M(P):P.src=O,{img:P,src:O}}if(O instanceof HTMLImageElement){var L=O,re=O.src;return L.addEventListener("load",function(){M(L)}),L.complete?L.naturalWidth===0?J("Image is empty"):M(L):L.src=O,{img:L,src:re}}},N.abrupt("return",new Promise(function(M,J){te(M,J,Q)}));case 2:case"end":return N.stop()}},H)})),B.apply(this,arguments)}function ee(H){return V.apply(this,arguments)}function V(){return V=(0,l.Z)(y().mark(function H(Q){return y().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.abrupt("return",new Promise(function(N,M){function J(L,re){return O.apply(this,arguments)}function O(){return O=(0,l.Z)(y().mark(function L(re,Y){return y().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return re=re||720,Y=Y||"https://cdn.vectorly.io/public-demos/videocall-720p.jpg",C.abrupt("return",new Promise(function(z){var I=document.createElement("img");I.display="none",I.crossOrigin="anonymous",I.onload=function(){var ae=re*I.naturalWidth/I.naturalHeight;createImageBitmap(I,{resizeWidth:ae,resizeHeight:re,resizeQuality:"high"}).then(function(ne){z({img:I,imgBmp:ne})}).catch(function(ne){console.warn(ne),createImageBitmap(I).then(function(oe){z({img:I,imgBmp:oe})})})},I.src=Y}));case 3:case"end":return C.stop()}},L)})),O.apply(this,arguments)}function P(){return P=(0,l.Z)(y().mark(function L(){var re,Y,C,z,I,ae,ne,oe,ve,de,Se;return y().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return re=Number(Q.timeout)||2e3,Y=Number(Q.height)||720,C=f(),z=C&&C.offscreen,we.next=6,G(z);case 6:return I=we.sent,we.next=9,J(Y);case 9:return ae=we.sent,ne=ae.img,oe=ae.imgBmp,ve=new I(ne,{stream:oe,token:Q.token,id:(0,g.v4)(),networkParams:v(Q.model||"selfie"),networkOptions:{background:{type:"blur",radius:5}},renderSize:{w:oe.width,h:oe.height},debug:!1,debugRender:!1,container:"disable",serverType:Q.serverType,enabled:!1,reqHandle:{useRAF:!0}}),we.next=15,ve.initialized;case 15:if(we.sent){we.next=20;break}return console.log("Error in initialization"),M(ve.error),we.abrupt("return");case 20:ve.canvas.style.visibility="hidden",console.log("processor is initialized"),ve.on("start",function(){de=Date.now()}),ve.on("stop",function(){Se=Date.now(),console.log("Metrics",ve.metrics),console.log("time diff",de,Se,Se-de),N({inputSize:"".concat(oe.width,"x").concat(oe.height),frameCount:ve.metrics.frameCount,time:Se-de,fps:ve.metrics.frameCount/(Se-de)*1e3})}),ve.on("error",function(_e){console.error("error",_e),M(_e)}),ve.enable(),setTimeout(function(){ve.disable(),ne.style.visibility="hidden"},re);case 27:case"end":return we.stop()}},L)})),P.apply(this,arguments)}Q=Q||{};try{(function(){P.apply(this,arguments)})()}catch(L){console.log("HIGH LEVEL ERROR",L),M(L)}}));case 1:case"end":return te.stop()}},H)})),V.apply(this,arguments)}function Z(H,Q){if(!f())throw new Error("Browser not supported");if(H&&!(H instanceof MediaStream||H instanceof MediaStreamTrack||H instanceof HTMLVideoElement))throw new TypeError("Input is not a MediaStream, MediaStreamTrack or HTML5 Video Element. See https://cdn.vectorly.io/ai-filters/docs/latest/BackgroundFilter.html for proper setup instructions");if(!Q.token)throw new Error("Vectorly token not defined. Please check https://cdn.vectorly.io/ai-filters/docs/latest/BackgroundFilter.html for proper setup instructions");if(typeof Q.token!="string")throw new Error("Token parameter is not a string. Please check https://cdn.vectorly.io/ai-filters/docs/latest/BackgroundFilter.html for proper setup instructions");if(Q.background!==void 0&&typeof Q.background!="string"&&![HTMLImageElement,HTMLVideoElement,ImageBitmap,ImageData,HTMLCanvasElement].some(function(te){return Q.background instanceof te}))throw new TypeError("Background is not a valid type (Image / Video / Bitmap / Canvas etc...) See https://cdn.vectorly.io/ai-filters/docs/latest/BackgroundFilter.html for proper setup instructions")}},886:function(u,h,s){s.r(h),s.d(h,{default:function(){return b}});var l=s(861),m=s(942),y=s(671),g=s(144),S=s(757),E=s.n(S),x=s(885),A=s(877),F=s(55),D=s(477),$=s.n(D);function k(){return $()('!function(){var e={553:function(e){var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new I(n||[]);return o._invoke=function(e,t,r){var n=l;return function(a,o){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===a)throw o;return P()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var s=A(i,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=f(e,t,r);if("normal"===u.type){if(n=r.done?d:h,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=d,r.method="throw",r.arg=u.arg)}}}(e,r,i),o}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",h="suspendedYield",p="executing",d="completed",g={};function m(){}function y(){}function _(){}var w={};u(w,o,(function(){return this}));var E=Object.getPrototypeOf,T=E&&E(E(S([])));T&&T!==r&&n.call(T,o)&&(w=T);var b=_.prototype=m.prototype=Object.create(w);function v(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,o,i,s){var u=f(e[a],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,s)}))}s(u.arg)}var a;this._invoke=function(e,n){function o(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(o,o):o()}}function A(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return g}var a=f(n,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function S(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:P}}function P(){return{value:t,done:!0}}return y.prototype=_,u(b,"constructor",_),u(_,"constructor",y),y.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(x.prototype),u(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new x(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},757:function(e,t,r){r(553)},435:function(e){e.exports=["cnn_demo","residual_3k_3x","residual_4k_2x","residual_5k_2x","residual_5k_3x","denoise_10k_1x","background_selfie","background_webgl_unet","background_webgl","background_webgl2","upscaler_4krgb_2x"]},443:function(e){var t,r=(t=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var r,n,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,t){r=e,n=t}));var o,i={};for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);var s,u,c,f=[],l="./this.program",h=function(e,t){throw t};s="object"==typeof window,u="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;var p,d,g="";(s||u)&&(u?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),t&&(g=t),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",u&&(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var m,y=a.print||console.log.bind(console),_=a.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);i=null,a.arguments&&(f=a.arguments),a.thisProgram&&(l=a.thisProgram),a.quit&&(h=a.quit),a.wasmBinary&&(m=a.wasmBinary);var w,E=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&D("no native wasm support detected");var T,b,v,x,A=!1,R="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(e,t,r){for(var n=t+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.subarray&&R)return R.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var u=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|u:(7&i)<<18|s<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var c=i-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o}function I(e){T=e,a.HEAP8=b=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=x=new Int32Array(e),a.HEAPU8=v=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var S,P=[],k=[],B=[],L=[];k.push({func:function(){Z()}});var U=0,C=null,F=null;function D(e){a.onAbort&&a.onAbort(e),_(e+=""),A=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function M(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}function N(e){return M(e,"data:application/octet-stream;base64,")}function X(e){return M(e,"file://")}a.preloadedImages={},a.preloadedAudios={};var G,W,j="./tflite/tflite-simd.wasm";function H(e){try{if(e==j&&m)return new Uint8Array(m);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}catch(e){D(e)}}function z(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?S.get(r)():S.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(a)}}function $(e){return x[ee()>>2]=e,e}function q(e){try{return w.grow(e-T.byteLength+65535>>>16),I(w.buffer),1}catch(e){}}N(j)||(G=j,j=a.locateFile?a.locateFile(G,g):(g=a.basePath||g)+G),W=c?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var V={};function Y(){if(!Y.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(var t in V)e[t]=V[t];var r=[];for(var t in e)r.push(t+"="+e[t]);Y.strings=r}return Y.strings}var J,K={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var r=K.buffers[e];0===t||10===t?((1===e?y:_)(O(r,0)),r.length=0):r.push(t)},varargs:void 0,get:function(){return K.varargs+=4,x[K.varargs-4>>2]},getStr:function(e){var t=function(e,t){return e?O(v,e,void 0):""}(e);return t},get64:function(e,t){return e}},Q={a:function(){D()},n:function(e,t){var r;if(0===e)r=Date.now();else{if(1!==e&&4!==e)return $(28),-1;r=W()}return x[t>>2]=r/1e3|0,x[t+4>>2]=r%1e3*1e3*1e3|0,0},i:function(e,t){D("To use dlopen, you need to use Emscripten\'s linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},e:function(e,t){D("To use dlopen, you need to use Emscripten\'s linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(e,t,r){v.copyWithin(e,t,t+r)},m:function(e){var t,r=v.length,n=2147483648;if(e>n)return!1;for(var a=1;a<=4;a*=2){var o=r*(1+.2/a);if(o=Math.min(o,e+100663296),q(Math.min(n,((t=Math.max(e,o))%65536>0&&(t+=65536-t%65536),t))))return!0}return!1},o:function(e){for(var t=W();W()-t<e;);},p:function(e,t){var r=0;return Y().forEach((function(n,a){var o=t+r;x[e+4*a>>2]=o,function(e,t,r){for(var n=0;n<e.length;++n)b[t++>>0]=e.charCodeAt(n);b[t>>0]=0}(n,o),r+=n.length+1})),0},g:function(e,t){var r=Y();x[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),x[t>>2]=n,0},j:function(e){!function(e,t){E||(a.onExit&&a.onExit(e),A=!0),h(e,new te(e))}(e)},h:function(e){return 0},k:function(e,t,r,n,a){},c:function(e,t,r,n){for(var a=0,o=0;o<r;o++){for(var i=x[t+8*o>>2],s=x[t+(8*o+4)>>2],u=0;u<s;u++)K.printChar(e,v[i+u]);a+=s}return x[n>>2]=a,0},d:function(){return 6},f:function(){return 28},b:function(e){switch(e){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return $(28),-1}},Z=(function(){var e={a:Q};function t(e,t){var r=e.exports;a.asm=r,I((w=a.asm.q).buffer),S=a.asm.D,function(e){if(U--,a.monitorRunDependencies&&a.monitorRunDependencies(U),0==U&&(null!==C&&(clearInterval(C),C=null),F)){var t=F;F=null,t()}}()}function r(e){t(e.instance)}function o(t){return function(){if(!m&&(s||u)){if("function"==typeof fetch&&!X(j))return fetch(j,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at \'"+j+"\'";return e.arrayBuffer()})).catch((function(){return H(j)}));if(p)return new Promise((function(e,t){p(j,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return H(j)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){_("failed to asynchronously prepare wasm: "+e),D(e)}))}if(U++,a.monitorRunDependencies&&a.monitorRunDependencies(U),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}(m||"function"!=typeof WebAssembly.instantiateStreaming||N(j)||X(j)||"function"!=typeof fetch?o(r):fetch(j,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),o(r)}))}))).catch(n)}(),a.___wasm_call_ctors=function(){return(Z=a.___wasm_call_ctors=a.asm.r).apply(null,arguments)}),ee=(a._getModelBufferMemoryOffset=function(){return(a._getModelBufferMemoryOffset=a.asm.s).apply(null,arguments)},a._getInputMemoryOffset=function(){return(a._getInputMemoryOffset=a.asm.t).apply(null,arguments)},a._getInputHeight=function(){return(a._getInputHeight=a.asm.u).apply(null,arguments)},a._getInputWidth=function(){return(a._getInputWidth=a.asm.v).apply(null,arguments)},a._getInputChannelCount=function(){return(a._getInputChannelCount=a.asm.w).apply(null,arguments)},a._getOutputMemoryOffset=function(){return(a._getOutputMemoryOffset=a.asm.x).apply(null,arguments)},a._getOutputHeight=function(){return(a._getOutputHeight=a.asm.y).apply(null,arguments)},a._getOutputWidth=function(){return(a._getOutputWidth=a.asm.z).apply(null,arguments)},a._getOutputChannelCount=function(){return(a._getOutputChannelCount=a.asm.A).apply(null,arguments)},a._loadModel=function(){return(a._loadModel=a.asm.B).apply(null,arguments)},a._runInference=function(){return(a._runInference=a.asm.C).apply(null,arguments)},a.___errno_location=function(){return(ee=a.___errno_location=a.asm.E).apply(null,arguments)});function te(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function re(e){function t(){J||(J=!0,a.calledRun=!0,A||(z(k),z(B),r(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),L.unshift(e);var e;z(L)}()))}e=e||f,U>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),P.unshift(e);var e;z(P)}(),U>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t()))}if(F=function e(){J||re(),J||(F=e)},a.run=re,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return re(),e.ready});e.exports=r},595:function(e){var t,r=(t=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var r,n,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,t){r=e,n=t}));var o,i={};for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);var s,u,c,f=[],l="./this.program",h=function(e,t){throw t};s="object"==typeof window,u="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;var p,d,g="";(s||u)&&(u?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),t&&(g=t),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",u&&(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var m,y=a.print||console.log.bind(console),_=a.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);i=null,a.arguments&&(f=a.arguments),a.thisProgram&&(l=a.thisProgram),a.quit&&(h=a.quit),a.wasmBinary&&(m=a.wasmBinary);var w,E=a.noExitRuntime||!0;"object"!=typeof WebAssembly&&D("no native wasm support detected");var T,b,v,x,A=!1,R="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function O(e,t,r){for(var n=t+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.subarray&&R)return R.decode(e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var u=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|u:(7&i)<<18|s<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var c=i-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o}function I(e){T=e,a.HEAP8=b=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=x=new Int32Array(e),a.HEAPU8=v=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}a.INITIAL_MEMORY;var S,P=[],k=[],B=[],L=[];k.push({func:function(){Z()}});var U=0,C=null,F=null;function D(e){a.onAbort&&a.onAbort(e),_(e+=""),A=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function M(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}function N(e){return M(e,"data:application/octet-stream;base64,")}function X(e){return M(e,"file://")}a.preloadedImages={},a.preloadedAudios={};var G,W,j="./tflite/tflite.wasm";function H(e){try{if(e==j&&m)return new Uint8Array(m);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}catch(e){D(e)}}function z(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?S.get(r)():S.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(a)}}function $(e){return x[ee()>>2]=e,e}function q(e){try{return w.grow(e-T.byteLength+65535>>>16),I(w.buffer),1}catch(e){}}N(j)||(G=j,j=a.locateFile?a.locateFile(G,g):(g=a.basePath||g)+G),W=c?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var V={};function Y(){if(!Y.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(var t in V)e[t]=V[t];var r=[];for(var t in e)r.push(t+"="+e[t]);Y.strings=r}return Y.strings}var J,K={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var r=K.buffers[e];0===t||10===t?((1===e?y:_)(O(r,0)),r.length=0):r.push(t)},varargs:void 0,get:function(){return K.varargs+=4,x[K.varargs-4>>2]},getStr:function(e){var t=function(e,t){return e?O(v,e,void 0):""}(e);return t},get64:function(e,t){return e}},Q={a:function(){D()},n:function(e,t){var r;if(0===e)r=Date.now();else{if(1!==e&&4!==e)return $(28),-1;r=W()}return x[t>>2]=r/1e3|0,x[t+4>>2]=r%1e3*1e3*1e3|0,0},i:function(e,t){D("To use dlopen, you need to use Emscripten\'s linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},e:function(e,t){D("To use dlopen, you need to use Emscripten\'s linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(e,t,r){v.copyWithin(e,t,t+r)},m:function(e){var t,r=v.length,n=2147483648;if(e>n)return!1;for(var a=1;a<=4;a*=2){var o=r*(1+.2/a);if(o=Math.min(o,e+100663296),q(Math.min(n,((t=Math.max(e,o))%65536>0&&(t+=65536-t%65536),t))))return!0}return!1},o:function(e){for(var t=W();W()-t<e;);},p:function(e,t){var r=0;return Y().forEach((function(n,a){var o=t+r;x[e+4*a>>2]=o,function(e,t,r){for(var n=0;n<e.length;++n)b[t++>>0]=e.charCodeAt(n);b[t>>0]=0}(n,o),r+=n.length+1})),0},g:function(e,t){var r=Y();x[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),x[t>>2]=n,0},j:function(e){!function(e,t){E||(a.onExit&&a.onExit(e),A=!0),h(e,new te(e))}(e)},h:function(e){return 0},k:function(e,t,r,n,a){},c:function(e,t,r,n){for(var a=0,o=0;o<r;o++){for(var i=x[t+8*o>>2],s=x[t+(8*o+4)>>2],u=0;u<s;u++)K.printChar(e,v[i+u]);a+=s}return x[n>>2]=a,0},d:function(){return 6},f:function(){return 28},b:function(e){switch(e){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return $(28),-1}},Z=(function(){var e={a:Q};function t(e,t){var r=e.exports;a.asm=r,I((w=a.asm.q).buffer),S=a.asm.D,function(e){if(U--,a.monitorRunDependencies&&a.monitorRunDependencies(U),0==U&&(null!==C&&(clearInterval(C),C=null),F)){var t=F;F=null,t()}}()}function r(e){t(e.instance)}function o(t){return function(){if(!m&&(s||u)){if("function"==typeof fetch&&!X(j))return fetch(j,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at \'"+j+"\'";return e.arrayBuffer()})).catch((function(){return H(j)}));if(p)return new Promise((function(e,t){p(j,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return H(j)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){_("failed to asynchronously prepare wasm: "+e),D(e)}))}if(U++,a.monitorRunDependencies&&a.monitorRunDependencies(U),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return _("Module.instantiateWasm callback failed with error: "+e),!1}(m||"function"!=typeof WebAssembly.instantiateStreaming||N(j)||X(j)||"function"!=typeof fetch?o(r):fetch(j,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),o(r)}))}))).catch(n)}(),a.___wasm_call_ctors=function(){return(Z=a.___wasm_call_ctors=a.asm.r).apply(null,arguments)}),ee=(a._getModelBufferMemoryOffset=function(){return(a._getModelBufferMemoryOffset=a.asm.s).apply(null,arguments)},a._getInputMemoryOffset=function(){return(a._getInputMemoryOffset=a.asm.t).apply(null,arguments)},a._getInputHeight=function(){return(a._getInputHeight=a.asm.u).apply(null,arguments)},a._getInputWidth=function(){return(a._getInputWidth=a.asm.v).apply(null,arguments)},a._getInputChannelCount=function(){return(a._getInputChannelCount=a.asm.w).apply(null,arguments)},a._getOutputMemoryOffset=function(){return(a._getOutputMemoryOffset=a.asm.x).apply(null,arguments)},a._getOutputHeight=function(){return(a._getOutputHeight=a.asm.y).apply(null,arguments)},a._getOutputWidth=function(){return(a._getOutputWidth=a.asm.z).apply(null,arguments)},a._getOutputChannelCount=function(){return(a._getOutputChannelCount=a.asm.A).apply(null,arguments)},a._loadModel=function(){return(a._loadModel=a.asm.B).apply(null,arguments)},a._runInference=function(){return(a._runInference=a.asm.C).apply(null,arguments)},a.___errno_location=function(){return(ee=a.___errno_location=a.asm.E).apply(null,arguments)});function te(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function re(e){function t(){J||(J=!0,a.calledRun=!0,A||(z(k),z(B),r(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),L.unshift(e);var e;z(L)}()))}e=e||f,U>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),P.unshift(e);var e;z(P)}(),U>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t()))}if(F=function e(){J||re(),J||(F=e)},a.run=re,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return re(),e.ready});e.exports=r},618:function(e){"use strict";function t(e,t){if(!c)return!1;const n=e.buffer;let a=l.get(n);if(null==a){if((a=r.validate(n))&&t)try{new r.Instance(new r.Module(n)).exports[0]()}catch(e){a=!1}l.set(n,a)}return a}const r=WebAssembly,n=(...e)=>Uint8Array.of(0,97,115,109,1,0,0,0,...e),a=(...e)=>Uint32Array.of(1836278016,1,...e),o=(...e)=>a(1610679297,33751040,...e,40239360,259),i=(...e)=>n(1,4,1,96,0,0,3,2,1,0,...e,11,0,10,4,110,97,109,101,2,3,1,0,0),s=(...e)=>Uint16Array.of(24832,28019,1,0,1025,24577,0,515,1,...e),u=(...e)=>s(...e,2842,4096,28164,28001,357,260,256,560,259,0),c="object"==typeof r,f=e=>c&&"function"==typeof e,l=new WeakMap,h=a(1610679553,58589440,117440770,805372165,101318656,1107297281,268438272,1835101700,17039717,36700416,259),p=s(773,1,2561,269,11,65,65,65,3068,2816,2560,28164,28001,613,259,0),d=a(1610679297,33751040,134873089,100664833,185276736),g=n(2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1,0,8,4,110,97,109,101,2,1,0),m=Uint16Array.of(24832,28019,1,0,1537,24577,512,32639,515,1,2058,1537,16640,16640,2816,2560,28164,28001,613,259,0),y=u(3082,2561,17152,0,0,252),_=u(2058,1537,16640,49152),w=o(101318657,301990913,268438272,1835101700,17039717),E=i(5,4,1,3,1,1,10,7,1,5,0,254,3,0),T=o(84344833,6357249,17369600,4259847,186257917,1845758464),b=i(10,7,1,5,0,208,112,26);e.exports={support:(e=1)=>c&&t(Uint32Array.of(1836278016,e)),get supportStreaming(){return f(r.instantiateStreaming)},feature:{get bigInt(){return t(h,!0)},get bulk(){return t(p)},get exceptions(){return t(d)},get mutableGlobal(){return t(g)},get multiValue(){return t(m)},get saturateConversions(){return t(y)},get signExtensions(){return t(_)},get tailCall(){return t(w)},get threads(){return t(E)},get simd(){return t(T)},get references(){return t(b)},get typeReflection(){return f(r.Memory.type)},get funcReferences(){return f(r.Function)}}}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",function(){"use strict";function e(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function t(){return e()?(self.isWorker=!0,self):(window.isWorker=!1,window)}function n(t){return e()?t instanceof OffscreenCanvasRenderingContext2D:t instanceof CanvasRenderingContext2D}var a=function(e,r){let n;"string"==typeof e&&(e=document.getElementById(e));let a=1;if("true"===r.use_webgl1?n=e.getContext("webgl",{antialias:!1,premultipliedAlpha:!1}):(n=e.getContext("webgl2",{antialias:!1,premultipliedAlpha:!1}),a=2,n||(a=1,n=e.getContext("webgl",{antialias:!1,premultipliedAlpha:!1}))),n.getExtension("WEBGL_draw_buffers")?n.disable_multi_draw=r.disable_multi_draw||!1:n.disable_multi_draw=!0,n.extensions={},n.getVersion=function(){return a},1===n.getVersion()){if("float32"===r.float_type){if(n.extensions.EXT_FLOAT=n.getExtension("OES_texture_float"),!n.extensions.EXT_FLOAT)throw new Error("Extension not found: OES_texture_float");n.extensions.EXT_FLOAT_LINEAR=n.getExtension("OES_texture_float_linear"),n.extensions.EXT_FLOAT_LINEAR,n.texture_format=n.RGBA,n.texture_type=n.FLOAT}else{if(n.extensions.EXT_FLOAT=n.getExtension("OES_texture_half_float"),!n.extensions.EXT_FLOAT)throw new Error("Extension not found: OES_texture_half_float");n.extensions.EXT_FLOAT_LINEAR=n.getExtension("OES_texture_half_float_linear"),n.extensions.EXT_FLOAT_LINEAR,n.texture_format=n.RGBA,n.texture_type=n.extensions.EXT_FLOAT.HALF_FLOAT_OES}if(!n.disable_multi_draw&&(n.extensions.WEBGL_draw_buffers=n.getExtension("WEBGL_draw_buffers"),!n.extensions.WEBGL_draw_buffers))throw new Error("Extension not found: WEBGL_draw_buffers")}else{if(n.extensions.EXT_FLOAT=n.getExtension("EXT_color_buffer_float"),!n.extensions.EXT_FLOAT)throw new Error("Extension not found: EXT_color_buffer_float");"float32"===r.float_type?(n.extensions.EXT_FLOAT_LINEAR=n.getExtension("OES_texture_float_linear"),n.texture_format=n.RGBA32F,n.texture_type=n.FLOAT):(n.extensions.EXT_FLOAT_LINEAR=n.getExtension("OES_texture_half_float_linear"),n.texture_format=n.RGBA16F,n.texture_type=n.FLOAT)}return 1===n.getVersion()?(n.getCOLOR_ATTACHMENT=function(e=0){return n.disable_multi_draw?n.COLOR_ATTACHMENT0:n.extensions.WEBGL_draw_buffers.COLOR_ATTACHMENT0_WEBGL+e},n.getDrawBuffers=function(e=[n.getCOLOR_ATTACHMENT(0)]){n.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(e)}):(n.getCOLOR_ATTACHMENT=function(e=0){return n.COLOR_ATTACHMENT0+e},n.getDrawBuffers=function(e=[n.getCOLOR_ATTACHMENT(0)]){n.drawBuffers(e)}),t().gl=n,n.canvas.w=n.canvas.width,n.canvas.h=n.canvas.height,n.clearCanvas=function(){n.clearColor(0,0,0,1),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT)},n.input={h:r.h,w:r.w},n.render_scale={h:1,w:1},n.viewport(0,0,e.width,e.height),n.createAndCompileShader=function(e,t){let r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS))throw new Error(n.getShaderInfoLog(r));return r},n.createAndLinkProgram=function(e,t){let r=n.createProgram();if(n.attachShader(r,e),n.attachShader(r,t),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw new Error(n.getProgramInfoLog(r));return r},n.resizeCanvasToDisplaySize=function(t,r){return(e.width!==t||e.height!==r)&&(e.width=t,e.height=r,!0)},n.resizeRenderSize=function(e,t,r){let a=r*n.input.w,o=r*n.input.h;a=e>a?e:a,o=t>o?t:o,n.render_scale={w:e/a,h:t/o},n.resizeCanvasToDisplaySize(a,o)},n.log=function(e){},n};r(435);var o=r(618),i=r(443),s=r.n(i),u=r(595),c=r.n(u),f="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==f&&f,l="URLSearchParams"in f,h="Symbol"in f&&"iterator"in Symbol,p="FileReader"in f&&"Blob"in f&&function(){try{return new Blob,!0}catch(e){return!1}}(),d="FormData"in f,g="ArrayBuffer"in f;if(g)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=ArrayBuffer.isView||function(e){return e&&m.indexOf(Object.prototype.toString.call(e))>-1};function _(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\\-#$%&\'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError(\'Invalid character in header field name: "\'+e+\'"\');return e.toLowerCase()}function w(e){return"string"!=typeof e&&(e=String(e)),e}function E(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return h&&(t[Symbol.iterator]=function(){return t}),t}function T(e){this.map={},e instanceof T?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function b(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function x(e){var t=new FileReader,r=v(t);return t.readAsArrayBuffer(e),r}function A(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:p&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:d&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:l&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():g&&p&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=A(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):g&&(ArrayBuffer.prototype.isPrototypeOf(e)||y(e))?this._bodyArrayBuffer=A(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p&&(this.blob=function(){var e=b(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(x)}),this.text=function(){var e,t,r,n=b(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=v(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}T.prototype.append=function(e,t){e=_(e),t=w(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},T.prototype.delete=function(e){delete this.map[_(e)]},T.prototype.get=function(e){return e=_(e),this.has(e)?this.map[e]:null},T.prototype.has=function(e){return this.map.hasOwnProperty(_(e))},T.prototype.set=function(e,t){this.map[_(e)]=w(t)},T.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},T.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),E(e)},T.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),E(e)},T.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),E(e)},h&&(T.prototype[Symbol.iterator]=T.prototype.entries);var O=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function I(e,t){if(!(this instanceof I))throw new TypeError(\'Please use the "new" operator, this DOM object constructor cannot be called as a function.\');var r,n,a=(t=t||{}).body;if(e instanceof I){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new T(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new T(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),O.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(a),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function S(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\\+/g," "),a=r.join("=").replace(/\\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(a))}})),t}function P(e,t){if(!(this instanceof P))throw new TypeError(\'Please use the "new" operator, this DOM object constructor cannot be called as a function.\');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new T(t.headers),this.url=t.url||"",this._initBody(e)}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})},R.call(I.prototype),R.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new T(this.headers),url:this.url})},P.error=function(){var e=new P(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];P.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new P(null,{status:t,headers:{location:e}})};var B=f.DOMException;try{new B}catch(e){(B=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),B.prototype.constructor=B}function L(e,t){return new Promise((function(r,n){var a=new I(e,t);if(a.signal&&a.signal.aborted)return n(new B("Aborted","AbortError"));var o=new XMLHttpRequest;function i(){o.abort()}o.onload=function(){var e,t,n={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new T,e.replace(/\\r?\\n[\\t ]+/g," ").split("\\r").map((function(e){return 0===e.indexOf("\\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var a=r.join(":").trim();t.append(n,a)}})),t)};n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var a="response"in o?o.response:o.responseText;setTimeout((function(){r(new P(a,n))}),0)},o.onerror=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},o.onabort=function(){setTimeout((function(){n(new B("Aborted","AbortError"))}),0)},o.open(a.method,function(e){try{return""===e&&f.location.href?f.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?o.withCredentials=!0:"omit"===a.credentials&&(o.withCredentials=!1),"responseType"in o&&(p?o.responseType="blob":g&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(o.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof T?a.headers.forEach((function(e,t){o.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){o.setRequestHeader(e,w(t.headers[e]))})),a.signal&&(a.signal.addEventListener("abort",i),o.onreadystatechange=function(){4===o.readyState&&a.signal.removeEventListener("abort",i)}),o.send(void 0===a._bodyInit?null:a._bodyInit)}))}L.polyfill=!0,f.fetch||(f.fetch=L,f.Headers=T,f.Request=I,f.Response=P);const U=t();let C=async(e,t={})=>{let n,a=((t=t||{}).path||r.p)+`models/${e}.js`;var i;return t.token&&(a=a+"?"+t.token),U.vectorlyBasePath=t.path||r.p,"background_selfie"===e&&(n=(async()=>{let e;if(U.tflite)e=U.tflite;else{let t=U.vectorlyBasePath||"";try{if(!0!==o.feature.simd)throw new Error("SIMD feature check is false");e=await s()({basePath:t})}catch(r){e=await c()({basePath:t})}}return e})()),U.isWorker?importScripts(a):await(i=a,new Promise(((e,t)=>{const r="$importModule$"+Math.random().toString(32).slice(2),n=document.createElement("script"),a=()=>{delete window[r],n.onerror=null,n.onload=null,n.remove(),URL.revokeObjectURL(n.src),n.src=""};n.defer="defer",n.type="module",n.onerror=()=>{t(new Error(`Failed to import: ${i}`)),a()},n.onload=()=>{e(window[r]),a()};const o=function(e){const t=document.createElement("a");return t.setAttribute("href",e),t.cloneNode(!1).href}(i),s=new Blob([`import * as m from "${o}"; window.${r} = m;`],{type:"text/javascript"});n.src=URL.createObjectURL(s),document.head.appendChild(n)}))),"background_selfie"===e&&(U.tflite=await n),U.vectorly.models[e]},F=async(e,t,n,a)=>{if(a=a||{},"background_selfie"===e){let o=(a.path||r.p)+`./data/${e}/${t}_v${n}.tflite`;a.token&&(o=o+"?"+a.token);const i=await fetch(o);if(!i.ok)throw Error(`Response fetching "${o}": ${i.statusText}`);return{model:await i.arrayBuffer()}}if("background_webgl2"===e||"background_webgl"===e||"background_webgl_unet"===e){let o=(a.path||r.p)+`./data/${e}/${t}_v${n}.json`,i=(a.path||r.p)+`./data/${e}/${t}_v${n}.weights`;a.token&&(o+="?"+a.token,i+="?"+a.token);const[s,u]=await Promise.all([fetch(o),fetch(i)]),[c,f]=await Promise.all([s.json(),u.arrayBuffer()]),l=JSON.parse(JSON.stringify(c)),h=new Float32Array(f),p=Object.keys(c),d=["weights","biases"];c[p[0]].debugImage&&d.push("debugImage");for(let e of p)for(let t of d){let[r,n]=c[e][t];l[e][t]=h.slice(n,n+r)}return l}{let o=(a.path||r.p)+`./data/${e}/${t}_v${n}.json`;a.token&&(o=o+"?"+a.token);const i=await fetch(o);return await i.json()}};function D(e,t){const{cmd:r,msgId:n}=e,a="w-"+r;"render"===r?(self.postMessage({cmd:a,msgId:n,ret:t},[t.bitmap]),t.bitmap.close()):self.postMessage({cmd:a,msgId:n,ret:t})}r(757),self.glWorker=new class{constructor(){}async preloadBackground(e){if("string"==typeof e.background)try{let t=await fetch(e.background);return self.preloadedBackground=await t.blob(),!0}catch(t){return console.warn(`Vectorly: unable to load ${e.background} as a background image`),!1}else if(e.background instanceof ImageBitmap)return self.preloadedBackground=e.background,!0}async getNetwork(e){const{name:t,token:r}=e;this.NetworkClass=await C(t,r)}async getParameters(e){const{name:t,tag:r,version:n,token:a}=e;this.networkParams={name:t,tag:r,version:n},this.networkParameters=await F(t,r,n,a)}async initWebGLContext(e){const{canvas:t,options:r}=e;return this.gl=new a(t,r),!0}async render(e){const{inputImage:t}=e;return this.frameBuffer&&this.frameBuffer.setInputImage(t),this.renderer&&await this.renderer.render(),t.close(),{bitmap:await createImageBitmap(this.gl.canvas)}}async instantiateNetwork(r){if(this.networkOptions=r.networkOptions,this.gl)return this.frameBuffer=new class{constructor(e){this.gl=e,this.iterations=0,this.textures=[{},{}],this.frame_buffers=[{},{}],this.inputTex=null,this.inputCanvas=null,this.frame_difference=0}drawToCanvas(){const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)}setBuffer(e){const t=this.gl,r=this.iterations%2*this.frame_difference;t.bindFramebuffer(t.FRAMEBUFFER,this.frame_buffers[r][e])}setInputFrameCanvas(){t(),n(this.inputCanvas)||(this.inputCanvas=function(t,r){if(e())return new OffscreenCanvas(t,r);{const e=document.createElement("canvas");return e.width=t,e.height=r,e}}(this.gl.input.w,this.gl.input.h).getContext("2d")),this.inputCanvas.canvas.width=this.gl.input.w,this.inputCanvas.canvas.height=this.gl.input.h}videoToCanvas(e){return this.inputCanvas.drawImage(e,0,0,this.gl.input.w,this.gl.input.h),this.inputCanvas.canvas}getInputTexture(){const e=this.gl;if(null===this.inputTex){let t=e.createTexture();this.inputTex=this._setTextureSize(t,e.input.w,e.input.h)}return this.inputTex}setInputImage(e){this.input=e;const t=this.gl;n(this.inputCanvas)&&1===t.getVersion()&&(e=this.videoToCanvas(e));let r=this.getInputTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.texture_format,t.RGBA,t.texture_type,e);for(let e=0;e<=this.frame_difference;e++)this.textures[e].INPUT=[r]}setImageAsTexture(e,t){const r=this.gl;let n=r.createTexture();r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.texture_format,r.RGBA,r.texture_type,e);for(let e=0;e<=this.frame_difference;e++)this.textures[e][t]=[n]}createBufferWithTextures(e,t,r=1,n=null){const a=this.gl;for(let o=0;o<=this.frame_difference;o++){const i=a.createFramebuffer();this.frame_buffers[o][e]=i,a.bindFramebuffer(a.FRAMEBUFFER,i);const s=[];this.textures[o][e]=null;for(let e=0;e<t;++e){let t=this.createAndSetupTexture(n);t=this._setTextureSize(t,a.input.w*r,a.input.h*r),s.push(t),a.bindTexture(a.TEXTURE_2D,t),a.texImage2D(a.TEXTURE_2D,0,a.texture_format,a.input.w*r,a.input.h*r,0,a.RGBA,a.texture_type,null),a.framebufferTexture2D(a.FRAMEBUFFER,a.getCOLOR_ATTACHMENT(e),a.TEXTURE_2D,t,0)}this.textures[o][e]=s}}createBufferWithTextures2(e,t,r,n,a={}){const o=this.gl;if(r<=0||n<=0)throw new Error("Texture width and height must be greater than 0");let i=a.format||o.RGBA,s=a.minFilter||o.NEAREST,u=a.magFilter||o.NEAREST,c=a.type||o.texture_type||o.UNSIGNED_BYTE,f=a.internalFormat||o.texture_format||o.RGBA;for(let a=0;a<=this.frame_difference;a++){const l=o.createFramebuffer();this.frame_buffers[a][e]=l,o.bindFramebuffer(o.FRAMEBUFFER,l);const h=[];this.textures[a][e]=null;for(let e=0;e<t;++e){let t;1===o.getVersion()?t=this.createTexture_webgl1(f,r,n,i,c,s,u):(f===o.RGBA&&(f=o.RGBA8),t=this.createTexture_webgl2(f,r,n,s,u)),o.framebufferTexture2D(o.FRAMEBUFFER,o.getCOLOR_ATTACHMENT(e),o.TEXTURE_2D,t,0),h.push(t)}this.textures[a][e]=h}}getTextureSize(e,t=0,r=0){if(!this.textures[t][e][r])throw new Error(`Failed to get resolution of textures for layer: ${e} at index: ${index}`);return this.textures[t][e][r].size}createTexture_webgl2(e,t,r,n,a){n=n||gl.NEAREST,a=a||gl.NEAREST,e=e||gl.texture_format||gl.RGBA;let o=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,o),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,n),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,a),gl.texStorage2D(gl.TEXTURE_2D,1,e,t,r),o=this._setTextureSize(o,t,r),o}createTexture_webgl1(e,t,r,n,a,o,i){n=n||gl.RGBA,o=o||gl.NEAREST,i=i||gl.NEAREST,a=a||gl.texture_type||gl.UNSIGNED_BYTE,e=e||gl.texture_format||gl.RGBA;let s=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,s),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,o),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,i),gl.texImage2D(gl.TEXTURE_2D,0,e,t,r,0,n,a,null),s=this._setTextureSize(s,t,r),s}createFloatTextureFromArrayBuffer(e,t,r,n,a,o,i,s){o=o||gl.RGBA,i=i||gl.NEAREST,s=s||gl.NEAREST,a=a||gl.texture_type||gl.UNSIGNED_BYTE,t=t||gl.texture_format||gl.RGBA;const u=new Float32Array(e);let c=gl.createTexture();return gl.bindTexture(gl.TEXTURE_2D,c),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,i),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,s),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA32F,r,n,0,gl.RGBA,gl.FLOAT,u),c=this._setTextureSize(c,r,n),c}_setTextureSize(e,t,r){return t>0&&r>0&&(e.size={},e.size.width=t,e.size.height=r),e}setBufferForLayer(e,t){for(let r=0;r<=this.frame_difference;r++){const n=gl.createFramebuffer();this.frame_buffers[r][e]=n,gl.bindFramebuffer(gl.FRAMEBUFFER,n);for(let e=0;e<t.length;e++)gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.getCOLOR_ATTACHMENT(e),gl.TEXTURE_2D,t[e],0);this.textures[r][e]=t}}getTexture(e){const t=this.iterations%2*this.frame_difference;return this.textures[t][e]}getLastFrameTexture(e){const t=1-this.iterations%2;return this.textures[t][e]}clearall(){Object.keys(this.textures[0]).forEach((e=>{for(let t=0;t<=this.frame_difference;t++){this.gl.deleteFramebuffer(this.frame_buffers[t][e]),this.frame_buffers[t][e]=null;for(let r=0;r<this.textures[t][e].length;++r)this.gl.deleteTexture(this.textures[t][e][r]),this.textures[t][e][r]=null}})),this.gl.deleteTexture(this.inputTex),this.inputTex=null,this.inputCanvas=null,this.frame_buffers=[{},{}],this.textures=[{},{}],this.gl.clearCanvas()}createAndSetupTexture(e=null){const t=this.gl;t.extensions.EXT_FLOAT_LINEAR||(e=null),null===e&&(e=t.NEAREST);const r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),r}}(this.gl),this.networkOptions.networkParams=this.networkParams,this.networkInstance=new this.NetworkClass(this.gl,this.frameBuffer,this.networkParameters,this.networkOptions),this.initialized=this.networkInstance.initialized,await this.initialized,!0;throw Error(`this.gl is ${this.gl}: maybe called instantiateNetwork without calling initWebGLContext?`)}async initRenderer(e){return this.renderInputSize=e.renderInputSize,this.renderer=new class{constructor(e,t,r,n){this.gl=e,this.network=t,this.frameBuffer=r,this.renderSize={w:n.w,h:n.h},this.metrics={"Render Size":this.renderSize,"Original Size":e.input,"Upscale Factor":t.upscaleFactor,FPS:0},this.setProperties(n)}setProperties(e={w:1278,h:720,disableVideoToCanvas:!1}){const t=this;!0!==e.disableVideoToCanvas&&this.frameBuffer.setInputFrameCanvas(),void 0===e.w&&(e.w=this.network.upscaleFactor*this.gl.input.w),void 0===e.h&&(e.h=this.network.upscaleFactor*this.gl.input.h),this.renderSize=e,this.gl.resizeRenderSize(e.w,e.h,this.network.upscaleFactor),null!==this.frameBuffer.inputTex&&setTimeout((()=>{t.network.renderRGB(t.gl.render_scale)})),t.metrics["Render Size"]=e}setInputSize(e={w:426,h:240},t=null){this.gl.input={w:e.w,h:e.h},this.network.resetTextureBuffers(),this.setProperties(t||this.renderSize)}async resetNetwork(e){this.frameBuffer.clearall(),this.network=await async function(e={name:"",version:"",tag:"",token:""},t,r){let n=null,a=null;try{a=await F(e.name,e.tag,e.version,e.token)}catch(e){throw console.error("%cParameter load failed:","background:black; color: yellow"),new Error(e)}if(!a)throw console.error("%cParameter load failed:","background:black; color: yellow"),new Error("");try{const o=C(e.name,e.token);n=await o,n=new n(t,r,a)}catch(e){throw console.error("%cNetwork load failed:","background:black; color: yellow"),new Error(e)}return n}({name:e.name,version:e.version,tag:e.tag},this.gl,this.network.frameBuffer),this.frameBuffer=this.network.frameBuffer,this.gl=this.network.gl,this.setProperties(this.renderSize)}changeNetwork(e){this.network=e,this.frameBuffer=this.network.frameBuffer,this.gl=this.network.gl}async loadBitmap(e){const t=this.frameBuffer;this.network,t.setInputImage(e),await this.render()}loadImage(e){const t=new Image;t.src=e;const r=this.frameBuffer,n=this,a=this.network;t.onload=async function(){r.setInputImage(t),await n.render(),a.getImageBytes()}}async render(e){const t=this.gl,r=this.network;t.clearColor(0,0,0,1),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),r.initialized&&await r.initialized,await r.feedForward(t.render_scale,e),t.flush()}}(this.gl,this.networkInstance,this.frameBuffer,this.renderInputSize),!0}async setRenderSize(e){this.renderInputSize=e.renderInputSize,this.renderer&&this.renderer.setProperties(this.renderInputSize)}async setInputSize(e){this.inputSize=e.inputSize,this.renderer&&this.renderer.setInputSize(this.inputSize)}async changeNetwork(e){this.networkOptions=e.networkOptions,this.gl&&(this.frameBuffer&&this.frameBuffer.clearall(),this.networkOptions.networkParams=this.networkParams,this.networkInstance=new this.NetworkClass(this.gl,this.frameBuffer,this.networkParameters,this.networkOptions),this.renderer.changeNetwork(this.networkInstance))}async updateOptions(e){const{update:t}=e;await this.networkInstance.updateOptions(t)}},self.onmessage=async function(e){const{cmd:t,params:r}=e.data;if(self.glWorker[t]&&"function"==typeof self.glWorker[t])try{const n=await self.glWorker[t](r);D(e.data,n)}catch(t){console.error("Caught error",t),D(e.data,{error:t.toString()})}else console.error(`No function ${t} for glWorker`),D(e.data,{error:`No function ${t} for glWorker`})}}()}();',"Worker",void 0,void 0)}var j=function(){function T(V){(0,y.Z)(this,T),this.worker=new k,this.id=V.id||(0,A.v4)(),this.framerate=V.framerate}var _,B,ee;return(0,g.Z)(T,[{key:"destroy",value:function(){this.worker&&this.worker.terminate()}},{key:"preloadBackground",value:(ee=(0,l.Z)(E().mark(function V(Z){var H;return E().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(Z){Q.next=2;break}return Q.abrupt("return",!1);case 2:return typeof Z=="string"?H=this.sendMessageToWorker("preloadBackground",{background:Z}).retValP:(this.preloaded=Z,H=this.sendMessageToWorker("preloadBackground",{background:Z},[Z]).retValP),Q.abrupt("return",H);case 4:case"end":return Q.stop()}},V,this)})),function(V){return ee.apply(this,arguments)})},{key:"getParameters",value:function(V,Z,H,Q){return this.sendMessageToWorker("getParameters",{name:V,tag:Z,version:H,token:Q}).retValP}},{key:"getNetwork",value:function(V,Z){return this.sendMessageToWorker("getNetwork",{name:V,token:Z}).retValP}},{key:"initWebGLContext",value:function(V,Z){return this.sendMessageToWorker("initWebGLContext",{canvas:V,options:Z},[V]).retValP}},{key:"initRenderer",value:function(V){return this.sendMessageToWorker("initRenderer",{renderInputSize:V}).retValP}},{key:"setRenderSize",value:function(V){return this.sendMessageToWorker("setRenderSize",{renderInputSize:V}).retValP}},{key:"setInputSize",value:function(V){return this.sendMessageToWorker("setInputSize",{inputSize:V}).retValP}},{key:"instantiateNetwork",value:function(V){return typeof V.background.image!="string"&&delete V.background.image,this.sendMessageToWorker("instantiateNetwork",{networkOptions:V}).retValP}},{key:"changeNetwork",value:function(V){return this.sendMessageToWorker("changeNetwork",{networkOptions:V}).retValP}},{key:"updateOptions",value:function(V){return V.framerate&&(this.framerate=Math.min(V.framerate||24,this.trackFrameRate)),V.background&&V.background.image instanceof ImageBitmap?this.sendMessageToWorker("updateOptions",{update:V},[V.background.image]):this.sendMessageToWorker("updateOptions",{update:V})}},{key:"_getImageCapture",value:function(V){var Z;if(V instanceof MediaStream)Z=V;else{if(!(V instanceof HTMLVideoElement))throw new Error("input in _getImageCapture is neither MediaStream nor HTMLVideoElement: ".concat(V));Z=V.captureStream()}var H=Z.getVideoTracks(),Q=(0,x.Z)(H,1)[0];(0,F.ok)()&&console.log("In _getImageCapture",Q);var te=document.createElement("video");return te.width=Q.getSettings().width,te.height=Q.getSettings().height,te.srcObject=Z,te.play(),this.video=te,this.trackFrameRate=Q.getSettings().frameRate,this.framerate=Math.min(this.framerate||24,this.trackFrameRate),this.lastRenderTime=Date.now(),te}},{key:"_setInput",value:function(V){(0,F.ok)()&&console.log("imageCapInstance",this.imageCapInstance),V instanceof ImageBitmap?this.imageBitmap=V:this.imageCapInstance=this._getImageCapture(V)}},{key:"render",value:(B=(0,l.Z)(E().mark(function V(Z){var H,Q,te,N;return E().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!this.imageCapInstance&&!this.imageBitmap){M.next=27;break}if(M.prev=1,M.t0=this.imageBitmap,M.t0){M.next=7;break}return M.next=6,createImageBitmap(this.video);case 6:M.t0=M.sent;case 7:if(H=M.t0,(0,F.ok)()&&console.log("grabFrame.then",this,H),!((Q=Math.round(1e3/this.framerate)-(Date.now()-this.lastRenderTime))>0)){M.next=13;break}return M.next=13,new Promise(function(J){setTimeout(J,Q)});case 13:if(this.lastRenderTime=Date.now(),!Z.passthrough){M.next=16;break}return M.abrupt("return",new Promise(function(J){J({bitmap:H})}));case 16:return te=this.sendMessageToWorker("render",{inputImage:H},[H]),N=te.retValP,H.close(),M.abrupt("return",N);case 21:return M.prev=21,M.t1=M.catch(1),(0,F.ok)()&&console.error("in render",M.t1),M.abrupt("return",!1);case 25:M.next=29;break;case 27:return(0,F.ok)()&&console.error("this.imageCapInstance",this.imageCapInstance),M.abrupt("return",!1);case 29:case"end":return M.stop()}},V,this,[[1,21]])})),function(V){return B.apply(this,arguments)})},{key:"sendMessageToWorker",value:function(V,Z){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];(0,F.ok)()&&V!=="render"&&console.log("sendMessageToWorker",V,Z,H);var Q=(0,A.v4)(),te=this.getWorkerMessage(V,Q);return this.worker.postMessage({cmd:V,msgId:Q,params:Z},H),{msgId:Q,retValP:te}}},{key:"getWorkerMessage",value:(_=(0,l.Z)(E().mark(function V(Z,H){var Q;return E().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Q=this.worker,te.abrupt("return",new Promise(function(N,M){var J="w-"+Z,O=new AbortController;Q.addEventListener("message",function(P){if((0,F.ok)()&&Z!=="render"&&console.log("Message event",P),P.data.cmd===J&&P.data.msgId===H){if((0,F.ok)()&&Z!=="render"&&console.log("Aborting",P.data),P.data.ret&&P.data.ret.error)M(P.data.ret.error);else{var L=P.data.ret===void 0||P.data.ret;(0,F.ok)()&&Z!=="render"&&console.log("resolving",P.data,L),N(L)}O.abort()}},{signal:O.signal})}));case 2:case"end":return te.stop()}},V,this)})),function(V,Z){return _.apply(this,arguments)})}]),T}(),U=j,W=s(33),G=s(820);function q(T,_){(_==null||_>T.length)&&(_=T.length);for(var B=0,ee=new Array(_);B<_;B++)ee[B]=T[B];return ee}function f(T,_){var B=Object.keys(T);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(T);_&&(ee=ee.filter(function(V){return Object.getOwnPropertyDescriptor(T,V).enumerable})),B.push.apply(B,ee)}return B}function o(T){for(var _=1;_<arguments.length;_++){var B=arguments[_]!=null?arguments[_]:{};_%2?f(Object(B),!0).forEach(function(ee){(0,m.Z)(T,ee,B[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(B)):f(Object(B)).forEach(function(ee){Object.defineProperty(T,ee,Object.getOwnPropertyDescriptor(B,ee))})}return T}var v=function(){function T(N,M){(0,y.Z)(this,T),(0,F.ok)()&&console.log("Initialized upscaler with",N);var J=M;this.video=N,this.stream=J.stream,this.id=J.id||(0,A.v4)(),this.videoParent=N.parentNode,this.token=J.token,this.serverType=J.serverType,this.webgl,this.framerate=J.framerate,this.fixaspectratio=J.fixaspectratio||!0,this.passthrough=!1,this.inputChangePreHook=J.inputChangePreHook||function(){return!0},this.renderSize=J.renderSize,J.container==="disable"?this.container=null:this.container=J.container||N.parentNode,(0,F.ok)()&&console.log("Container is",this.container),this.container&&(this.container.style.background="black",this.container.style.resize="both",this.container.style.overflow="hidden",this.ro=this.getResizeObserver(this.setRenderSize.bind(this)),this.ro.observe(this.container)),this.margin={top:0,left:0},this.use_webgl1=J.use_webgl1||"false",this.float_type=J.float_type||"float16",this.scale=J.scale||3,J.networkParams=J.networkParams||{},this.networkParams={name:"residual_3k_3x",tag:"general",version:"2.1"},this.networkParams=Object.assign(this.networkParams,J.networkParams),this.networkOptions=J.networkOptions||{},(J.network||J.tag||J.version)&&(this.networkParams.name=J.network||this.networkParams.name,this.networkParams.tag=J.tag||this.networkParams.tag,this.networkParams.name==="residual_3k_3x"?this.networkParams.version=J.version||J.networkParams.version||"2.1":this.networkParams.version=J.version||J.networkParams.version||"0"),J.network==="residual_3k"?this.networkParams={name:"residual_3k_3x",tag:"general",version:"2.1"}:J.network==="residual_5k"&&(this.networkParams={name:"residual_5k_3x",tag:"general",version:"0"}),(0,F.ok)()&&console.log("Loading Upscaling network ".concat(this.networkParams.name," - tag - ").concat(this.networkParams.tag,"  - version ").concat(this.networkParams.version)),this.glHandle=new U({id:this.id,framerate:this.framerate});var O=this.initCanvas(),P=O.canvas,L=O.offscreen;this.canvas=P,this.offscreen=L,this.instantiateP=this.instantiateNetwork(),this.setupMetrics(),this.initEvents(),this.reqHandle={noDelay:!1,useRAF:!("requestVideoFrameCallback"in HTMLVideoElement.prototype)},this.reqHandle.noDelay=!0,J.reqHandle=J.reqHandle||{},this.reqHandle=o(o({},this.reqHandle),J.reqHandle),this.enabled=J.enabled===void 0||Boolean(J.enabled),this.enabled?this.enable():this.disable(),this.isPlaying=!1,this.playerInitTime=Date.now(),this.initialized=this.initializeNetwork(N),this.error=null,this.analyticsEnabled=!1,this.updateInterval=J.updateInterval||5e3,this.debug=J.debug===!0,this.debugRender=J.debugRender===!0,this.initAnalytics()}var _,B,ee,V,Z,H,Q,te;return(0,g.Z)(T,[{key:"initAnalytics",value:(te=(0,l.Z)(E().mark(function N(){return E().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:case"end":return M.stop()}},N)})),function(){return te.apply(this,arguments)})},{key:"trackEventListener",value:function(N){var M=this;return function(){M.debug&&console.log("TrackEventListener",N),M.trackAnalytics(N+" Event",{upscale:M.enabled,type:M.events[N].type,currentTime:M.video.currentTime})}}},{key:"trackAnalytics",value:function(N,M){this.debug&&console.log("Tracking",N,M)}},{key:"updateStream",value:function(N){this.stream=N,this.glHandle._setInput(this.stream)}},{key:"setupMetrics",value:function(){this.prv=performance.now(),this.frames={rendered:{sinceTimestamp:0,total:0},video:{total:0}},this.metrics={renderSize:{w:1278,h:720},originalSize:{w:this.video.videoWidth,h:this.video.videoHeight},upscaleFactor:this.scale,droppedFrames:0,fps:0,upscaledFrames:0,videoFrames:0}}},{key:"changeNetwork",value:(Q=(0,l.Z)(E().mark(function N(M){var J,O;return E().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return this.debug&&console.log("Changing network from",this.networkParams,"to",M),this.networkParams.name=M.name||this.networkParams.name,this.networkParams.tag=M.tag||this.networkParams.tag,this.networkParams.version=M.version||this.networkParams.version,P.next=6,(0,F.re)(this.networkParams,this.token,this.serverType);case 6:return J=P.sent,P.prev=7,O=this.glHandle.getParameters(this.networkParams.name,this.networkParams.tag,this.networkParams.version,J),P.next=11,this.glHandle.getNetwork(this.networkParams.name,J);case 11:return this.NetworkClass=P.sent,P.next=14,O;case 14:return this.networkParameters=P.sent,P.next=17,this.glHandle.changeNetwork(this.networkOptions);case 17:this.renderSize&&this.setRenderSize(this.renderSize),this.render(),P.next=26;break;case 21:P.prev=21,P.t0=P.catch(7),console.error("Error fetching network parameters and model or changing model",P.t0),document.dispatchEvent(this.events.error),this.disable();case 26:case"end":return P.stop()}},N,this,[[7,21]])})),function(N){return Q.apply(this,arguments)})},{key:"instantiateNetwork",value:(H=(0,l.Z)(E().mark(function N(){var M,J,O;return E().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,F.re)(this.networkParams,this.token,this.serverType);case 2:return M=P.sent,P.prev=3,J=this.glHandle.preloadBackground(this.networkOptions.background.image),O=this.glHandle.getParameters(this.networkParams.name,this.networkParams.tag,this.networkParams.version,M),P.next=8,this.glHandle.getNetwork(this.networkParams.name,M);case 8:return this.NetworkClass=P.sent,P.next=11,O;case 11:return this.networkParameters=P.sent,P.next=14,J;case 14:P.sent||this.networkOptions.background.type!=="virtual"||console.warn("Unable to load ".concat(this.networkOptions.background.image," as background image")),this.container?this.container.insertBefore(this.canvas,this.video.nextSibling):document.body.appendChild(this.canvas),P.next=27;break;case 19:throw P.prev=19,P.t0=P.catch(3),console.error("Error in instantiateNetwork",P.t0),document.dispatchEvent(this.events.error),this.initialized=!1,this.error=P.t0,this.disable(),P.t0;case 27:case"end":return P.stop()}},N,this,[[3,19]])})),function(){return H.apply(this,arguments)})},{key:"disable",value:function(){var N=this.video;N.style.height="100%",N.style.width="100%",this.canvas.style.visibility="hidden",N.style.visibility="visible",this.enabled=!1,this.trackAnalytics("Disabled",{upscale:this.enabled})}},{key:"enable",value:function(){this.video.style.visibility="hidden",this.canvas.style.visibility="hidden",this.enabled=!0,this.debug&&console.log("isPlaying",(0,F.yA)(this.video)),this.metrics.frameCount=0,(0,F.yA)(this.video)&&this.render(),this.trackAnalytics("Enabled",{upscale:this.enabled})}},{key:"initEvents",value:function(){var N={};this.eventList=["load","error","stop","start"],this.eventList.forEach(function(M){N[M]=new Event("vectorly-upscaler-"+M)}),this.events=N}},{key:"on",value:function(N,M){return document.addEventListener("vectorly-upscaler-"+N,M),this}},{key:"getResizeObserver",value:function(N){return new W.Z(function(M){var J,O=function(Y,C){var z=typeof Symbol!="undefined"&&Y[Symbol.iterator]||Y["@@iterator"];if(!z){if(Array.isArray(Y)||(z=function(de,Se){if(de){if(typeof de=="string")return q(de,Se);var we=Object.prototype.toString.call(de).slice(8,-1);return we==="Object"&&de.constructor&&(we=de.constructor.name),we==="Map"||we==="Set"?Array.from(de):we==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(we)?q(de,Se):void 0}}(Y))||C&&Y&&typeof Y.length=="number"){z&&(Y=z);var I=0,ae=function(){};return{s:ae,n:function(){return I>=Y.length?{done:!0}:{done:!1,value:Y[I++]}},e:function(de){throw de},f:ae}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ne,oe=!0,ve=!1;return{s:function(){z=z.call(Y)},n:function(){var de=z.next();return oe=de.done,de},e:function(de){ve=!0,ne=de},f:function(){try{oe||z.return==null||z.return()}finally{if(ve)throw ne}}}}(M);try{for(O.s();!(J=O.n()).done;){var P=J.value.contentRect,L=P.width,re=P.height;N({w:L,h:re})}}catch(Y){O.e(Y)}finally{O.f()}})}},{key:"setRenderSize",value:function(N){var M=this.renderSize;this.debug&&console.log("Setting renderSize","w",N.w,"h",N.h),this.renderSize=N;var J=this.canvas;if(this.videoSize&&this.fixaspectratio){this.debug&&console.log("video",this.videoSize,"size",N);var O=this.videoSize.width/this.videoSize.height,P={},L={top:0,left:0,w:N.w,h:N.h};P.w=Math.round(N.h*O),P.h=Math.round(N.w/O),this.debug&&console.log("Expected w h",{w:P.w,h:N.h},{w:N.w,h:P.h}),P.w>N.w?(L.w=N.w,L.h=P.h,L.top=(N.h-L.h)/2):P.h>N.h&&(L.w=P.w,L.h=N.h,L.left=(N.w-L.w)/2),this.margin={left:Math.round(L.left),top:Math.round(L.top)},this.renderInputSize={w:L.w,h:L.h},this.metrics.renderSize=this.renderInputSize,this.debug&&console.log("this.margin",this.margin)}else this.renderInputSize=this.renderSize;this.debug&&console.log("===== IN setRenderSize",this.renderInputSize,this.renderSize,this.renderer),this.renderCanvas&&(this.renderCanvas.width=this.renderInputSize.w,this.renderCanvas.height=this.renderInputSize.h),this.renderer&&(this.glHandle.setRenderSize(this.renderInputSize),J.style.left="".concat(this.margin.left,"px"),J.style.top="".concat(this.margin.top,"px"),this.initialRender(),this.initRenderLoop(),this.trackAnalytics("Render Resize",{renderSize:this.metrics.renderSize,previousRenderSize:M}))}},{key:"setVideoSize",value:function(N){this.debug&&console.log("Setting videoSize to",N,"from",this.videoSize);var M=!1;if(this.videoSize){var J={currentSrc:this.video.currentSrc!==this.videoSrc.currentSrc,srcObject:this.video.srcObject!==this.videoSrc.srcObject};J.currentSrc||J.srcObject?(this.videoSrc={currentSrc:this.video.currentSrc,srcObject:this.video.srcObject},this.reqHandle=this.reqHandle||{},this.reqHandle.useRAF=!0,M=!0):M=N.width!==this.videoSize.width||N.height!==this.videoSize.height}else this.videoSrc={currentSrc:this.video.currentSrc,srcObject:this.video.srcObject},M=!0;if(M){var O=this.inputChangePreHook({before:this.videoSize,after:N},this);this.videoSize=N,this.trackAnalytics("Video Resize",{videoSize:N,previousVideoSize:this.videoSize,resizedProcessed:O}),O?(this.inputSize={w:N.width,h:N.height},this.renderer&&this.glHandle.setInputSize(this.inputSize),this.renderSize&&this.setRenderSize(this.renderSize)):(this.debug&&console.log("not changing as Prehook for inputChange returned",O),this.disable())}}},{key:"initializeNetwork",value:(Z=(0,l.Z)(E().mark(function N(M){var J,O,P,L=this;return E().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.prev=0,this.debug&&console.log("Waiting for",this.canvas.id),J=(0,F.br)("canvas#"+this.canvas.id),O=(0,F.uF)(M),re.next=6,Promise.all([J,O,this.instantiateP]);case 6:return this.debug&&console.log("Found canvas ",this.canvas.id),re.next=9,O;case 9:return P=re.sent,this.setVideoSize(P),M.addEventListener("resize",function(){L.setVideoSize({width:M.videoWidth,height:M.videoHeight}),L.metrics.originalSize={w:M.videoWidth,h:M.videoHeight},M.requestVideoFrameCallback&&M.requestVideoFrameCallback(function(){this.renderAFrame()}.bind(L))}),this.renderSize=this.renderSize||{w:1278,h:720},this.setRenderSize(this.renderSize),re.next=16,this.initializeWebGL();case 16:return re.abrupt("return",!0);case 19:return re.prev=19,re.t0=re.catch(0),this.error=re.t0,re.abrupt("return",!1);case 23:case"end":return re.stop()}},N,this,[[0,19]])})),function(N){return Z.apply(this,arguments)})},{key:"renderAFrame",value:(V=(0,l.Z)(E().mark(function N(M){var J;return E().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return this.debugRender&&(this.lastTime=this.lastTime||Date.now(),this.currentTime=Date.now(),console.log("renderAFrame",M,this.currentTime-this.lastTime),this.lastTime=this.currentTime),O.next=3,this.glHandle.render({passthrough:this.passthrough});case 3:if(J=O.sent){O.next=6;break}return O.abrupt("return",!1);case 6:return this.renderContext&&this.renderContext.transferFromImageBitmap(J.bitmap),J.bitmap.close(),O.abrupt("return",!0);case 9:case"end":return O.stop()}},N,this)})),function(N){return V.apply(this,arguments)})},{key:"initializeWebGL",value:(ee=(0,l.Z)(E().mark(function N(){return E().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return this.debug&&console.log("Initializing WebGL context and network",this.inputSize,this.renderInputSize),M.prev=1,M.next=4,this.glHandle.initWebGLContext(this.offscreen,{h:this.inputSize.h,w:this.inputSize.w,use_webgl1:this.use_webgl1,float_type:this.float_type});case 4:this.gl=M.sent,this.debug&&console.log("this.gl initialized",this.gl.input),M.next=11;break;case 8:M.prev=8,M.t0=M.catch(1),this.gl=null;case 11:if(!this.gl){M.next=29;break}return this.initialized=this.glHandle.instantiateNetwork(this.networkOptions),M.next=15,this.initialized;case 15:return this.frameBuffer=M.sent,M.next=18,this.glHandle.initRenderer(this.renderInputSize);case 18:this.renderer=M.sent,this.debug&&console.log("this.renderer",this.renderer),this.canvas.style.left="".concat(this.margin.left,"px"),this.canvas.style.top="".concat(this.margin.top,"px"),this.debug&&console.log("this.stream",this.stream),this.glHandle._setInput(this.stream),this.initialRender(),this.initVideoEventRender(),this.initRenderLoop(),M.next=31;break;case 29:document.dispatchEvent(this.events.error),this.disable();case 31:case"end":return M.stop()}},N,this,[[1,8]])})),function(){return ee.apply(this,arguments)})},{key:"initRenderLoop",value:function(){var N=this.video;(0,F.yA)(this.video)&&this.render(),N.addEventListener("play",function(){this.render()}.bind(this)),document.dispatchEvent(this.events.load)}},{key:"initialRender",value:function(){var N=this,M=this.video;this.debug&&console.log("Calling Initial Render"),M.readyState===4&&setTimeout(function(){N.renderAFrame()},100),M.requestVideoFrameCallback&&M.requestVideoFrameCallback(function(){if((0,F.yA)(M))return null;this.renderAFrame()}.bind(this))}},{key:"initVideoEventRender",value:function(){var N=this.video;N.oncanplaythrough=function(){this.renderAFrame()}.bind(this),N.onloadeddata=function(){this.renderAFrame()}.bind(this)}},{key:"updateFrameMetrics",value:function(){var N=this.updateInterval||5e3;if(this.frames.rendered.total++,this.frames.rendered.sinceTimestamp++,this.metrics.upscaledFrames++,performance.now()-this.prv>N){this.metrics.fps=JSON.parse(JSON.stringify(this.frames.rendered.sinceTimestamp))/(N/1e3),this.prv=performance.now(),this.frames.rendered.sinceTimestamp=0;var M=this.video,J=M.webkitDecodedFrameCount||M.mozPresentedFrames||M.decodedFrames||M.presentedFrames;J&&(this.frames.video.total=J,this.metrics.videoFrames=J,this.metrics.droppedFrames=this.metrics.videoFrames-this.metrics.upscaledFrames,this.debug&&this.debug&&console.log("currentTime: ".concat(this.video.currentTime,", FPS: ").concat(this.metrics.fps,", Dropped frames: ").concat(this.metrics.droppedFrames,", Video Frame: ").concat(this.metrics.videoFrames,", Rendered frames: ").concat(this.metrics.upscaledFrames)),this.trackAnalytics("Playback Metrics",{FPS:this.metrics.fps,droppedFrames:this.metrics.droppedFrames,videoFrames:this.metrics.videoFrames,upscaledFrames:this.metrics.upscaledFrames,currentTime:this.video.currentTime}))}}},{key:"renderVideoFrame",value:(B=(0,l.Z)(E().mark(function N(M){var J,O,P=this;return E().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(L.prev=0,this.debugRender&&console.log("Calling renderVideoFrame in a loop",M),!this.cancelledRenderers){L.next=7;break}if(!((J=this.cancelledRenderers.indexOf(M))>-1)){L.next=7;break}return delete this.cancelledRenderers[J],L.abrupt("return");case 7:if(!(this.video&&this.frameBuffer&&this.renderer)){L.next=27;break}return L.next=10,this.renderAFrame(M);case 10:if(O=L.sent,this.debug&&console.log("===========Updated",O),O&&(this.updateFrameMetrics(),this.metrics.frameCount+=1),!this.reqHandle.noDelay){L.next=27;break}if(!this.enabled){L.next=25;break}if(!O){L.next=21;break}return L.next=18,this.renderVideoFrame(M);case 18:return L.abrupt("return");case 21:return setTimeout(function(){return P.renderVideoFrame(M)},16),L.abrupt("return");case 23:L.next=27;break;case 25:return document.dispatchEvent(this.events.stop),L.abrupt("return");case 27:(0,F.yA)(this.video)&&this.enabled?(this.debugRender&&console.log("calling requestFrame"),this.requestFrame(this.video,this.renderVideoFrame.bind(this)),this.isPlaying=!0):(this.debugRender&&console.log("STOPPED playing"),document.dispatchEvent(this.events.stop),this.isPlaying=!1),L.next=33;break;case 30:L.prev=30,L.t0=L.catch(0),console.error("Error in renderVideoFrame",L.t0);case 33:case"end":return L.stop()}},N,this,[[0,30]])})),function(N){return B.apply(this,arguments)})},{key:"requestFrame",value:function(N,M){if(this.reqHandle=this.reqHandle||{},this.reqHandle.useRAF){var J=(0,G.U7)(M);this.reqHandle.raf=J}else{var O=N.requestVideoFrameCallback(M);this.reqHandle.video=N,this.reqHandle.rfvc=O}}},{key:"updateNetworkOptions",value:(_=(0,l.Z)(E().mark(function N(M){return E().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,this.glHandle.updateOptions(M);case 2:M.passthrough!==void 0&&(this.passthrough=M.passthrough);case 3:case"end":return J.stop()}},N,this)})),function(N){return _.apply(this,arguments)})},{key:"cancelLastRender",value:function(){if(this.debugRender&&console.log("Canceling last render"),this.reqHandle=this.reqHandle||{},this.reqHandle.noDelay&&this.previousRenderCaller&&(this.cancelledRenderers=this.cancelledRenderers||[],this.cancelledRenderers.push("my-render-".concat(this.previousRenderCaller))),this.reqHandle.rfvc){var N=this.reqHandle,M=N.video,J=N.rfvc;M.cancelVideoFrameCallback(J),this.reqHandle.rfvc=null}if(this.reqHandle.raf){var O=this.reqHandle.raf;(0,G.Wx)(O),this.reqHandle.raf=null}}},{key:"render",value:function(){this.previousRenderCaller=this.renderCaller,this.renderCaller=(this.renderCaller||0)+1,this.debugRender&&console.log("Starting render call with isPlaying",this.isPlaying),this.prv=performance.now(),this.cancelLastRender(),this.renderVideoFrame("my-render-".concat(this.renderCaller)),document.dispatchEvent(this.events.start)}},{key:"initCanvas",value:function(){var N=document.createElement("canvas");N.id="canv-"+this.id,N.style.position="absolute",N.style.left=this.margin.left,N.style.top=this.margin.top;var M=document.createElement("canvas");this.renderContext=M.getContext("bitmaprenderer"),this.renderCanvas=M,window.upscalers=window.upscalers||{},window.upscalers[N.id]=this;var J=N.transferControlToOffscreen();return{canvas:N,offscreen:J}}}]),T}(),b=v},296:function(u,h,s){s.r(h);var l=s(861),m=s(671),y=s(144),g=s(757),S=s.n(g),E=s(706),x=s(33),A=s(55),F=s(877),D=s(820);function $(j,U){(U==null||U>j.length)&&(U=j.length);for(var W=0,G=new Array(U);W<U;W++)G[W]=j[W];return G}var k=function(){function j(b,T){(0,m.Z)(this,j),(0,A.ok)()&&console.log("Initialized upscaler with",b);var _=T;switch(this.video=b,this.id=_.id||(0,F.v4)(),this.videoParent=b.parentNode,this.token=_.token,this.serverType=_.serverType,this.fixaspectratio=_.fixaspectratio||!0,this.inputChangePreHook=_.inputChangePreHook||function(){return!0},this.renderSize=_.renderSize,_.container==="disable"?this.container=null:this.container=_.container||b.parentNode,(0,A.ok)()&&console.log("Container is",this.container),this.container&&(this.container.style.background="black",this.container.style.resize="both",this.container.style.overflow="hidden",this.ro=this.getResizeObserver(this.setRenderSize.bind(this)),this.ro.observe(this.container)),this.margin={top:0,left:0},this.use_webgl1=_.use_webgl1||"false",this.float_type=_.float_type||"float16",this.scale=_.scale||3,_.networkParams=_.networkParams||{},this.networkParams={name:"residual_3k_3x",tag:"general",version:"2.1"},this.networkParams=Object.assign(this.networkParams,_.networkParams),this.networkOptions=_.networkOptions||{},(_.network||_.tag||_.version)&&(this.networkParams.name=_.network||this.networkParams.name,this.networkParams.tag=_.tag||this.networkParams.tag,this.networkParams.name==="residual_3k_3x"?this.networkParams.version=_.version||_.networkParams.version||"2.1":this.networkParams.version=_.version||_.networkParams.version||"0"),_.network==="residual_3k"?this.networkParams={name:"residual_3k_3x",tag:"general",version:"2.1"}:_.network==="residual_5k"&&(this.networkParams={name:"residual_5k_3x",tag:"general",version:"0"}),this.networkParams.name){case"residual_3k_3x":case"residual_5k_3x":case"residual_4k_3x":case"residual_4k_2x":case"residual_10k_1x":case"cnn_demo":this.networkType="upscaler";break;case"background_selfie":case"background_webgl":case"background_webgl2":case"background_webgl_unet":this.networkType="background";break;default:console.warning("INVALID networkType for network with params",this.networkParams),this.networkType="INVALID"}this.canvas=this.initCanvas(),this.instantiateP=this.instantiateNetwork(),this.setupMetrics(),this.initEvents(),this.reqHandle={useRAF:!("requestVideoFrameCallback"in HTMLVideoElement.prototype)},this.enable(),this.isPlaying=!1,this.playerInitTime=Date.now(),this.initialized=this.initializeNetwork(b),this.error=null,this.analyticsEnabled=!1,this.debug=_.debug===!0,this.debugRender=_.debugRender===!0,this.initAnalytics()}var U,W,G,q,f,o,v;return(0,y.Z)(j,[{key:"initAnalytics",value:(v=(0,l.Z)(S().mark(function b(){return S().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:case"end":return T.stop()}},b)})),function(){return v.apply(this,arguments)})},{key:"trackEventListener",value:function(b){var T=this;return function(){T.debug&&console.log("TrackEventListener",b),T.trackAnalytics(b+" Event",{upscale:T.enabled,type:T.events[b].type,currentTime:T.video.currentTime})}}},{key:"trackAnalytics",value:function(b,T){this.debug&&console.log("Tracking",b,T)}},{key:"setupMetrics",value:function(){this.prv=performance.now(),this.frames={rendered:{sinceTimestamp:0,total:0},video:{total:0}},this.metrics={renderSize:{w:1278,h:720},originalSize:{w:this.video.videoWidth,h:this.video.videoHeight},upscaleFactor:this.scale,droppedFrames:0,fps:0,upscaledFrames:0,videoFrames:0}}},{key:"changeNetwork",value:(o=(0,l.Z)(S().mark(function b(T){var _,B;return S().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return this.debug&&console.log("Changing network from",this.networkParams,"to",T),this.networkParams.name=T.name||this.networkParams.name,this.networkParams.tag=T.tag||this.networkParams.tag,this.networkParams.version=T.version||this.networkParams.version,ee.next=6,(0,A.re)(this.networkParams,this.token,this.serverType);case 6:return _=ee.sent,ee.prev=7,B=(0,E.ZS)(this.networkParams.name,this.networkParams.tag,this.networkParams.version,_),ee.next=11,(0,E.Hy)(this.networkParams.name,_);case 11:return this.NetworkClass=ee.sent,ee.next=14,B;case 14:this.networkParameters=ee.sent,this.frameBuffer.clearall(),this.networkOptions.networkParams=this.networkParams,this.networkInstance=new this.NetworkClass(this.gl,this.frameBuffer,this.networkParameters,this.networkOptions),this.renderer.changeNetwork(this.networkInstance),this.renderSize&&this.setRenderSize(this.renderSize),this.render(),ee.next=28;break;case 23:ee.prev=23,ee.t0=ee.catch(7),console.error("Error fetching network parameters and model or changing model",ee.t0),document.dispatchEvent(this.events.error),this.disable();case 28:case"end":return ee.stop()}},b,this,[[7,23]])})),function(b){return o.apply(this,arguments)})},{key:"instantiateNetwork",value:(f=(0,l.Z)(S().mark(function b(){var T,_,B;return S().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(0,A.re)(this.networkParams,this.token,this.serverType);case 2:return T=ee.sent,ee.prev=3,this.networkType==="background"&&this.networkOptions.background&&(_=this.preloadBackground(this.networkOptions.background.image)),B=(0,E.ZS)(this.networkParams.name,this.networkParams.tag,this.networkParams.version,T),ee.next=8,(0,E.Hy)(this.networkParams.name,T);case 8:return this.NetworkClass=ee.sent,ee.next=11,B;case 11:if(this.networkParameters=ee.sent,!_){ee.next=15;break}return ee.next=15,_;case 15:this.container?this.container.insertBefore(this.canvas,this.video.nextSibling):document.body.appendChild(this.canvas),ee.next=26;break;case 18:throw ee.prev=18,ee.t0=ee.catch(3),console.error("Error in instantiateNetwork",ee.t0),document.dispatchEvent(this.events.error),this.initialized=!1,this.error=ee.t0,this.disable(),ee.t0;case 26:case"end":return ee.stop()}},b,this,[[3,18]])})),function(){return f.apply(this,arguments)})},{key:"disable",value:function(){var b=this.video;b.style.height="100%",b.style.width="100%",this.canvas.style.visibility="hidden",b.style.visibility="visible",this.enabled=!1,this.trackAnalytics("Disabled",{upscale:this.enabled})}},{key:"enable",value:function(){this.video.style.visibility="hidden",this.canvas.style.visibility="visible",this.enabled=!0,(0,A.yA)(this.video)&&this.render(),this.trackAnalytics("Enabled",{upscale:this.enabled})}},{key:"initEvents",value:function(){var b={};this.eventList=["load","error","stop","start"],this.eventList.forEach(function(T){b[T]=new Event("vectorly-upscaler-"+T)}),this.events=b}},{key:"on",value:function(b,T){return document.addEventListener("vectorly-upscaler-"+b,T),this}},{key:"getResizeObserver",value:function(b){return new x.Z(function(T){var _,B=function(H,Q){var te=typeof Symbol!="undefined"&&H[Symbol.iterator]||H["@@iterator"];if(!te){if(Array.isArray(H)||(te=function(L,re){if(L){if(typeof L=="string")return $(L,re);var Y=Object.prototype.toString.call(L).slice(8,-1);return Y==="Object"&&L.constructor&&(Y=L.constructor.name),Y==="Map"||Y==="Set"?Array.from(L):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?$(L,re):void 0}}(H))||Q&&H&&typeof H.length=="number"){te&&(H=te);var N=0,M=function(){};return{s:M,n:function(){return N>=H.length?{done:!0}:{done:!1,value:H[N++]}},e:function(L){throw L},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var J,O=!0,P=!1;return{s:function(){te=te.call(H)},n:function(){var L=te.next();return O=L.done,L},e:function(L){P=!0,J=L},f:function(){try{O||te.return==null||te.return()}finally{if(P)throw J}}}}(T);try{for(B.s();!(_=B.n()).done;){var ee=_.value.contentRect,V=ee.width,Z=ee.height;b({w:V,h:Z})}}catch(H){B.e(H)}finally{B.f()}})}},{key:"setRenderSize",value:function(b){var T=this.renderSize;this.debug&&console.log("Setting renderSize","w",b.w,"h",b.h),this.renderSize=b;var _=this.canvas;if(this.videoSize&&this.fixaspectratio){this.debug&&console.log("video",this.videoSize,"size",b);var B=this.videoSize.width/this.videoSize.height,ee={},V={top:0,left:0,w:b.w,h:b.h};ee.w=Math.round(b.h*B),ee.h=Math.round(b.w/B),this.debug&&console.log("Expected w h",{w:ee.w,h:b.h},{w:b.w,h:ee.h}),ee.w>b.w?(V.w=b.w,V.h=ee.h,V.top=(b.h-V.h)/2):ee.h>b.h&&(V.w=ee.w,V.h=b.h,V.left=(b.w-V.w)/2),this.margin={left:Math.round(V.left),top:Math.round(V.top)},this.renderInputSize={w:V.w,h:V.h},this.metrics.renderSize=this.renderInputSize,this.debug&&console.log("this.margin",this.margin)}else this.renderInputSize=this.renderSize;this.debug&&console.log("===== IN setRenderSize",this.renderInputSize,this.renderSize,this.renderer),this.renderer&&(this.renderer.setProperties(this.renderInputSize),_.style.left="".concat(this.margin.left,"px"),_.style.top="".concat(this.margin.top,"px"),this.initialRender(),this.initRenderLoop(),this.trackAnalytics("Render Resize",{renderSize:this.metrics.renderSize,previousRenderSize:T}))}},{key:"setVideoSize",value:function(b){this.debug&&console.log("Setting videoSize to",b,"from",this.videoSize);var T=!1;if(this.videoSize){var _={currentSrc:this.video.currentSrc!==this.videoSrc.currentSrc,srcObject:this.video.srcObject!==this.videoSrc.srcObject};_.currentSrc||_.srcObject?(this.videoSrc={currentSrc:this.video.currentSrc,srcObject:this.video.srcObject},this.reqHandle=this.reqHandle||{},this.reqHandle.useRAF=!0,T=!0):T=b.width!==this.videoSize.width||b.height!==this.videoSize.height}else this.videoSrc={currentSrc:this.video.currentSrc,srcObject:this.video.srcObject},T=!0;if(T){var B=this.inputChangePreHook({before:this.videoSize,after:b},this);this.videoSize=b,this.trackAnalytics("Video Resize",{videoSize:b,previousVideoSize:this.videoSize,resizedProcessed:B}),B?(this.inputSize={w:b.width,h:b.height},this.renderer&&this.renderer.setInputSize(this.inputSize),this.renderSize&&this.setRenderSize(this.renderSize)):(this.debug&&console.log("not changing as Prehook for inputChange returned",B),this.disable())}}},{key:"initializeNetwork",value:(q=(0,l.Z)(S().mark(function b(T){var _,B,ee,V=this;return S().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.prev=0,this.debug&&console.log("Waiting for",this.canvas.id),_=(0,A.br)("canvas#"+this.canvas.id),B=(0,A.uF)(T),Z.next=6,Promise.all([_,B,this.instantiateP]);case 6:return this.debug&&console.log("Found canvas ",this.canvas.id),Z.next=9,B;case 9:return ee=Z.sent,this.setVideoSize(ee),T.addEventListener("resize",function(){V.setVideoSize({width:T.videoWidth,height:T.videoHeight}),V.metrics.originalSize={w:T.videoWidth,h:T.videoHeight},T.requestVideoFrameCallback&&T.requestVideoFrameCallback(function(){this.renderAFrame()}.bind(V))}),this.renderSize=this.renderSize||{w:1278,h:720},this.setRenderSize(this.renderSize),this.initializeWebGL(),Z.abrupt("return",!0);case 18:return Z.prev=18,Z.t0=Z.catch(0),this.error=Z.t0,Z.abrupt("return",!1);case 22:case"end":return Z.stop()}},b,this,[[0,18]])})),function(b){return q.apply(this,arguments)})},{key:"renderAFrame",value:function(){this.frameBuffer&&this.frameBuffer.setInputImage(this.video),this.renderer&&this.renderer.render()}},{key:"initializeWebGL",value:(G=(0,l.Z)(S().mark(function b(){return S().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:this.debug&&console.log("Initializing WebGL context and network",this.inputSize,this.renderInputSize);try{this.gl=new E.yb(this.canvas.id,{h:this.inputSize.h,w:this.inputSize.w,use_webgl1:this.use_webgl1,float_type:this.float_type}),this.debug&&console.log("this.gl initialized",this.gl.input)}catch(_){console.warn("Error in intializing WebGLContext",_),this.gl=null}if(!this.gl){T.next=17;break}return this.frameBuffer=new E.uL(this.gl),this.networkOptions.networkParams=this.networkParams,this.networkInstance=new this.NetworkClass(this.gl,this.frameBuffer,this.networkParameters,this.networkOptions),this.initialized=this.networkInstance.initialized,T.next=9,this.initialized;case 9:this.renderer=new E.Th(this.gl,this.networkInstance,this.frameBuffer,this.renderInputSize),this.canvas.style.left="".concat(this.margin.left,"px"),this.canvas.style.top="".concat(this.margin.top,"px"),this.initialRender(),this.initVideoEventRender(),this.initRenderLoop(),T.next=19;break;case 17:document.dispatchEvent(this.events.error),this.disable();case 19:case"end":return T.stop()}},b,this)})),function(){return G.apply(this,arguments)})},{key:"initRenderLoop",value:function(){var b=this.video;(0,A.yA)(this.video)&&this.render(),b.addEventListener("play",function(){this.render()}.bind(this)),document.dispatchEvent(this.events.load)}},{key:"initialRender",value:function(){var b=this,T=this.video;this.debug&&console.log("Calling Initial Render"),T.readyState===4&&setTimeout(function(){b.renderAFrame()},100),T.requestVideoFrameCallback&&T.requestVideoFrameCallback(function(){if((0,A.yA)(T))return null;this.renderAFrame()}.bind(this))}},{key:"initVideoEventRender",value:function(){var b=this.video;b.oncanplaythrough=function(){this.renderAFrame()}.bind(this),b.onloadeddata=function(){this.renderAFrame()}.bind(this)}},{key:"updateFrameMetrics",value:function(){if(this.frames.rendered.total++,this.frames.rendered.sinceTimestamp++,this.metrics.upscaledFrames++,performance.now()-this.prv>1e4){this.metrics.fps=JSON.parse(JSON.stringify(this.frames.rendered.sinceTimestamp)),this.prv=performance.now(),this.frames.rendered.sinceTimestamp=0;var b=this.video,T=b.webkitDecodedFrameCount||b.mozPresentedFrames||b.decodedFrames||b.presentedFrames;T&&(this.frames.video.total=T,this.metrics.videoFrames=T,this.metrics.droppedFrames=this.metrics.videoFrames-this.metrics.upscaledFrames,this.debug&&console.log("currentTime: ".concat(this.video.currentTime,", FPS: ").concat(this.metrics.fps,", Dropped frames: ").concat(this.metrics.droppedFrames,", Video Frame: ").concat(this.metrics.videoFrames,", Rendered frames: ").concat(this.metrics.upscaledFrames)),this.trackAnalytics("Playback Metrics",{FPS:this.metrics.fps,droppedFrames:this.metrics.droppedFrames,videoFrames:this.metrics.videoFrames,upscaledFrames:this.metrics.upscaledFrames,currentTime:this.video.currentTime}))}}},{key:"renderVideoFrame",value:function(b){try{this.debugRender&&console.log("Calling renderVideoFrame in a loop",b),this.video&&this.frameBuffer&&this.renderer&&(this.renderAFrame(),this.updateFrameMetrics()),(0,A.yA)(this.video)&&this.enabled?(this.debugRender&&console.log("calling requestFrame"),this.requestFrame(this.video,this.renderVideoFrame.bind(this)),this.isPlaying=!0):(this.debugRender&&console.log("STOPPED playing"),document.dispatchEvent(this.events.stop),this.isPlaying=!1)}catch(T){console.error("Error in renderVideoFrame",T)}}},{key:"requestFrame",value:function(b,T){if(this.reqHandle=this.reqHandle||{},this.reqHandle.useRAF){var _=(0,D.U7)(T);this.reqHandle.raf=_}else{var B=b.requestVideoFrameCallback(T);this.reqHandle.video=b,this.reqHandle.rfvc=B}}},{key:"updateNetworkOptions",value:(W=(0,l.Z)(S().mark(function b(T){return S().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,this.networkInstance.updateOptions(T);case 2:case"end":return _.stop()}},b,this)})),function(b){return W.apply(this,arguments)})},{key:"cancelLastRender",value:function(){if(this.debugRender&&console.log("Canceling last render"),this.reqHandle=this.reqHandle||{},this.reqHandle.rfvc){var b=this.reqHandle,T=b.video,_=b.rfvc;T.cancelVideoFrameCallback(_),this.reqHandle.rfvc=null}if(this.reqHandle.raf){var B=this.reqHandle.raf;(0,D.Wx)(B),this.reqHandle.raf=null}}},{key:"preloadBackground",value:(U=(0,l.Z)(S().mark(function b(T){var _;return S().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(B.prev=0,typeof T!="string"){B.next=9;break}return B.next=4,fetch(T);case 4:return _=B.sent,B.next=7,_.blob();case 7:return self.preloadedBackground=B.sent,B.abrupt("return",!0);case 9:B.next=15;break;case 11:return B.prev=11,B.t0=B.catch(0),console.warn("Vectorly: unable to load ".concat(T," as a background image")),B.abrupt("return",!1);case 15:case"end":return B.stop()}},b,null,[[0,11]])})),function(b){return U.apply(this,arguments)})},{key:"render",value:function(){this.renderCaller=(this.renderCaller||0)+1,this.debugRender&&console.log("Starting render call with isPlaying",this.isPlaying),this.prv=performance.now(),this.cancelLastRender(),this.renderVideoFrame("my-render-".concat(this.renderCaller)),document.dispatchEvent(this.events.start)}},{key:"initCanvas",value:function(){var b=document.createElement("canvas");return b.id="canv-"+this.id,b.style.position="absolute",b.style.left=this.margin.left,b.style.top=this.margin.top,window.upscalers=window.upscalers||{},window.upscalers[b.id]=this,b}}]),j}();h.default=k},55:function(u,h,s){s.d(h,{br:function(){return g},uF:function(){return S},yA:function(){return E},re:function(){return D},Qy:function(){return $},ok:function(){return k}});var l=s(861),m=s(757),y=s.n(m);function g(j){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e5;return new Promise(function(W,G){var q=document.querySelector(j),f=setTimeout(function(){G("waitForElement failed for"+j)},U);if(q)W(q);else{var o=new MutationObserver(function(v){v.forEach(function(b){for(var T=0,_=Array.from(b.addedNodes);T<_.length;T++){var B=_[T];if(B.matches&&B.matches(j))return o.disconnect(),W(B),void clearTimeout(f)}})});o.observe(document.documentElement,{childList:!0,subtree:!0})}})}function S(j){return new Promise(function(U,W){if(j instanceof HTMLVideoElement){if(j.videoWidth*j.videoHeight>0)return void U({width:j.videoWidth,height:j.videoHeight});j.onloadedmetadata=function(){U({width:j.videoWidth,height:j.videoHeight})},j.onerror=function(){W()}}else j instanceof HTMLImageElement&&U({width:j.naturalWidth,height:j.naturalHeight})})}var E=function(j){return j instanceof HTMLMediaElement?!(j.paused||j.ended):j instanceof HTMLImageElement||void 0},x=function(j){var U,W=j||"production";switch(W){case"local":U="http://localhost:4000";break;case"staging":U="https://stream-staging.vectorly.io";break;default:U="https://stream.vectorly.io"}return U},A=function(){var j="1.6.10";return"https://cdn.vectorly.io/ai-filters/v1/".concat(j,"/")},F=function(){var j=(0,l.Z)(y().mark(function U(W,G,q){var f,o,v,b,T;return y().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return f=A(),o="".concat(x(q),"/upscaler/models/").concat(W.name,"?token=").concat(G,"&path=").concat(encodeURI(f),"&version=").concat(W.version,"&tag=").concat(W.tag),_.next=4,fetch(o);case 4:if(!(v=_.sent).ok){_.next=14;break}return _.next=8,v.json();case 8:return b=_.sent,T=b.token,_.abrupt("return",T);case 14:case 15:case"end":return _.stop()}},U)}));return function(U,W,G){return j.apply(this,arguments)}}(),D=function(){var j=(0,l.Z)(y().mark(function U(W,G,q){var f;return y().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(f={path:A()},!q||q!=="staging"&&q!=="local"){o.next=13;break}return o.prev=2,o.next=5,F(W,G,q);case 5:f.token=o.sent,o.next=11;break;case 8:o.prev=8,o.t0=o.catch(2),console.log("Error while fetching token in staging, defaulting to local files",o.t0);case 11:o.next=16;break;case 13:return o.next=15,F(W,G,q);case 15:f.token=o.sent;case 16:return o.abrupt("return",f);case 17:case"end":return o.stop()}},U,null,[[2,8]])}));return function(U,W,G){return j.apply(this,arguments)}}();function $(){var j={};return["load","error","stop","start"].forEach(function(U){j[U]=new Event("vectorly-upscaler-"+U)}),j}function k(){return!1}},841:function(u,h,s){s.r(h);var l=s(861),m=s(671),y=s(144),g=s(757),S=s.n(g),E=s(706),x=s(877),A=s(55),F=function(){function D(){(0,m.Z)(this,D),this.events=(0,A.Qy)()}var $,k,j,U,W,G,q,f;return(0,y.Z)(D,[{key:"load",value:(f=(0,l.Z)(S().mark(function o(v){var b,T,_;return S().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(v){B.next=4;break}throw console.log("load: "),document.dispatchEvent(this.events.error),new Error("Invalid load config");case 4:return this.token=v.token,this.serverType=v.serverType,b=this.initCanvasWebGL(v),T=this.initFrameBufferWebGL(b),B.next=10,this.importNetwork(T,v.networkParams,v.networkOptions);case 10:return _=B.sent,this.networkInstance=_,B.next=14,this.initRenderer(_,T,v.renderSize);case 14:this.renderer=B.sent;case 15:case"end":return B.stop()}},o,this)})),function(o){return f.apply(this,arguments)})},{key:"on",value:function(o,v){return document.addEventListener("vectorly-upscaler-"+o,v),this}},{key:"initCanvasWebGL",value:function(o){try{return o&&o.canvas&&o.w&&o.h,(0,E.yb)(o.canvas,o)}catch(v){throw console.error("Error in initCanvasWebGL: ",v),document.dispatchEvent(this.events.error),v}}},{key:"initFrameBufferWebGL",value:function(o){try{if(!o)throw new Error("WebGLContext not found");return new E.uL(o)}catch(v){throw console.error("Error in initFrameBufferWebGL: ",v),document.dispatchEvent(this.events.error),v}}},{key:"importNetwork",value:(q=(0,l.Z)(S().mark(function o(v,b,T){var _,B,ee,V;return S().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.prev=0,v.clearall()&&b.name&&b.tag&&b.version,Z.next=4,(0,A.re)(b,this.token,this.serverType);case 4:return _=Z.sent,Z.next=7,(0,E.ZS)(b.name,b.tag,b.version,_);case 7:return B=Z.sent,Z.next=10,(0,E.Hy)(b.name,_);case 10:return ee=Z.sent,T.networkParams=b,V=new ee(v.gl,v,B,T),Z.abrupt("return",V);case 16:throw Z.prev=16,Z.t0=Z.catch(0),console.error("Error in importNetwork: ",Z.t0),document.dispatchEvent(this.events.error),Z.t0;case 21:case"end":return Z.stop()}},o,this,[[0,16]])})),function(o,v,b){return q.apply(this,arguments)})},{key:"updateNetworkOptions",value:(G=(0,l.Z)(S().mark(function o(v){return S().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(b.t0=this.renderer,!b.t0){b.next=4;break}return b.next=4,this.renderer;case 4:if(b.t1=this.networkInstance,!b.t1){b.next=8;break}return b.next=8,this.networkInstance.updateOptions(v);case 8:case"end":return b.stop()}},o,this)})),function(o){return G.apply(this,arguments)})},{key:"initRenderer",value:(W=(0,l.Z)(S().mark(function o(v,b,T){var _;return S().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.prev=0,T==null&&(T={}),B.next=4,v;case 4:return v=B.sent,_=new E.Th(b.gl,v,b,T),document.dispatchEvent(this.events.load),B.abrupt("return",_);case 10:throw B.prev=10,B.t0=B.catch(0),console.error("Error in initRenderer: ",B.t0),document.dispatchEvent(this.events.error),B.t0;case 15:case"end":return B.stop()}},o,this,[[0,10]])})),function(o,v,b){return W.apply(this,arguments)})},{key:"render",value:(U=(0,l.Z)(S().mark(function o(){var v;return S().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,this.renderer;case 3:(v=b.sent)&&v.render(),b.next=12;break;case 7:throw b.prev=7,b.t0=b.catch(0),console.error("Error in render: ",b.t0),document.dispatchEvent(this.events.error),b.t0;case 12:case"end":return b.stop()}},o,this,[[0,7]])})),function(){return U.apply(this,arguments)})},{key:"updateInputResolution",value:(j=(0,l.Z)(S().mark(function o(v){return S().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,v.w&&v.h||console.warn("warning: Invalid InputSize width and height"),b.next=4,this.renderer;case 4:b.sent.setInputSize(v),b.next=13;break;case 8:throw b.prev=8,b.t0=b.catch(0),console.error("Error in updateInputResolution: ",b.t0),document.dispatchEvent(this.events.error),b.t0;case 13:case"end":return b.stop()}},o,this,[[0,8]])})),function(o){return j.apply(this,arguments)})},{key:"updateRenderResolution",value:(k=(0,l.Z)(S().mark(function o(v){return S().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,v.w&&v.h||console.warn("warning: Invalid renderSize width and height passed"),b.next=4,this.renderer;case 4:b.sent.setProperties(v),b.next=13;break;case 8:throw b.prev=8,b.t0=b.catch(0),console.error("Error in updateInputResolution: ",b.t0),document.dispatchEvent(this.events.error),b.t0;case 13:case"end":return b.stop()}},o,this,[[0,8]])})),function(o){return k.apply(this,arguments)})},{key:"setInput",value:($=(0,l.Z)(S().mark(function o(v){var b;return S().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,T.next=3,this.renderer;case 3:(b=T.sent).frameBuffer.setInputImage(v),b.frameBuffer.iterations+=1,T.next=13;break;case 8:throw T.prev=8,T.t0=T.catch(0),console.error("Error in setInput: ",T.t0),document.dispatchEvent(this.events.error),T.t0;case 13:case"end":return T.stop()}},o,this,[[0,8]])})),function(o){return $.apply(this,arguments)})},{key:"createCanvas",value:function(o){try{var v=document.createElement("canvas");return v.id=o.id||"canv-"+(0,x.v4)(),v.width=o.w||100,v.height=o.h||100,v}catch(b){throw console.error("Error in canvasConfig: ",b),document.dispatchEvent(this.events.error),b}}}]),D}();h.default={core:F}},444:function(u){u.exports=h=>{if(typeof h!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof h}\``);return!/^[a-zA-Z]:\\/.test(h)&&/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(h)}},190:function(u,h,s){const l=s(444);u.exports=m=>!l(m)},820:function(u,h,s){s.d(h,{Wx:function(){return D},U7:function(){return F}}),u=s.hmd(u);let l=1;const m=typeof self=="object"&&self.self==self?self:typeof s.g=="object"&&s.g.global==s.g?s.g:{},y=Date.now();let g={},S=Date.now();const E=k=>{if(typeof k!="function")throw new TypeError(k+" is not a function");const j=Date.now(),U=j-S,W=U>16?0:16-U,G=l++;return g[G]=k,Object.keys(g).length>1||setTimeout(()=>{S=j;const q=g;g={},Object.keys(q).forEach(f=>q[f](m.performance&&typeof m.performance.now=="function"?m.performance.now():Date.now()-y))},W),G},x=k=>typeof k!="string"?E:k===""?m.requestAnimationFrame:m[k+"RequestAnimationFrame"],A=((k,j)=>{let U=0;for(;k[U]!==void 0;){if(j(k[U]))return k[U];U+=1}})(["","webkit","moz","ms","o"],k=>!!x(k)),F=x(A),D=typeof($=A)!="string"?k=>{delete g[k]}:$===""?m.cancelAnimationFrame:m[$+"CancelAnimationFrame"]||m[$+"CancelRequestAnimationFrame"];var $;m.requestAnimationFrame=F,m.cancelAnimationFrame=D,u.exports&&(u.exports={requestAnimationFrame:F,cancelAnimationFrame:D})},33:function(u,h,s){var l=function(){if(typeof Map!="undefined")return Map;function T(_,B){var ee=-1;return _.some(function(V,Z){return V[0]===B&&(ee=Z,!0)}),ee}return function(){function _(){this.__entries__=[]}return Object.defineProperty(_.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),_.prototype.get=function(B){var ee=T(this.__entries__,B),V=this.__entries__[ee];return V&&V[1]},_.prototype.set=function(B,ee){var V=T(this.__entries__,B);~V?this.__entries__[V][1]=ee:this.__entries__.push([B,ee])},_.prototype.delete=function(B){var ee=this.__entries__,V=T(ee,B);~V&&ee.splice(V,1)},_.prototype.has=function(B){return!!~T(this.__entries__,B)},_.prototype.clear=function(){this.__entries__.splice(0)},_.prototype.forEach=function(B,ee){ee===void 0&&(ee=null);for(var V=0,Z=this.__entries__;V<Z.length;V++){var H=Z[V];B.call(ee,H[1],H[0])}},_}()}(),m=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,y=s.g!==void 0&&s.g.Math===Math?s.g:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")(),g=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(y):function(T){return setTimeout(function(){return T(Date.now())},1e3/60)},S=["top","right","bottom","left","width","height","size","weight"],E=typeof MutationObserver!="undefined",x=function(){function T(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(_,B){var ee=!1,V=!1,Z=0;function H(){ee&&(ee=!1,_()),V&&te()}function Q(){g(H)}function te(){var N=Date.now();if(ee){if(N-Z<2)return;V=!0}else ee=!0,V=!1,setTimeout(Q,20);Z=N}return te}(this.refresh.bind(this))}return T.prototype.addObserver=function(_){~this.observers_.indexOf(_)||this.observers_.push(_),this.connected_||this.connect_()},T.prototype.removeObserver=function(_){var B=this.observers_,ee=B.indexOf(_);~ee&&B.splice(ee,1),!B.length&&this.connected_&&this.disconnect_()},T.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},T.prototype.updateObservers_=function(){var _=this.observers_.filter(function(B){return B.gatherActive(),B.hasActive()});return _.forEach(function(B){return B.broadcastActive()}),_.length>0},T.prototype.connect_=function(){m&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),E?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},T.prototype.disconnect_=function(){m&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},T.prototype.onTransitionEnd_=function(_){var B=_.propertyName,ee=B===void 0?"":B;S.some(function(V){return!!~ee.indexOf(V)})&&this.refresh()},T.getInstance=function(){return this.instance_||(this.instance_=new T),this.instance_},T.instance_=null,T}(),A=function(T,_){for(var B=0,ee=Object.keys(_);B<ee.length;B++){var V=ee[B];Object.defineProperty(T,V,{value:_[V],enumerable:!1,writable:!1,configurable:!0})}return T},F=function(T){return T&&T.ownerDocument&&T.ownerDocument.defaultView||y},D=W(0,0,0,0);function $(T){return parseFloat(T)||0}function k(T){for(var _=[],B=1;B<arguments.length;B++)_[B-1]=arguments[B];return _.reduce(function(ee,V){return ee+$(T["border-"+V+"-width"])},0)}var j=typeof SVGGraphicsElement!="undefined"?function(T){return T instanceof F(T).SVGGraphicsElement}:function(T){return T instanceof F(T).SVGElement&&typeof T.getBBox=="function"};function U(T){return m?j(T)?function(_){var B=_.getBBox();return W(0,0,B.width,B.height)}(T):function(_){var B=_.clientWidth,ee=_.clientHeight;if(!B&&!ee)return D;var V=F(_).getComputedStyle(_),Z=function(O){for(var P={},L=0,re=["top","right","bottom","left"];L<re.length;L++){var Y=re[L],C=O["padding-"+Y];P[Y]=$(C)}return P}(V),H=Z.left+Z.right,Q=Z.top+Z.bottom,te=$(V.width),N=$(V.height);if(V.boxSizing==="border-box"&&(Math.round(te+H)!==B&&(te-=k(V,"left","right")+H),Math.round(N+Q)!==ee&&(N-=k(V,"top","bottom")+Q)),!function(O){return O===F(O).document.documentElement}(_)){var M=Math.round(te+H)-B,J=Math.round(N+Q)-ee;Math.abs(M)!==1&&(te-=M),Math.abs(J)!==1&&(N-=J)}return W(Z.left,Z.top,te,N)}(T):D}function W(T,_,B,ee){return{x:T,y:_,width:B,height:ee}}var G=function(){function T(_){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=W(0,0,0,0),this.target=_}return T.prototype.isActive=function(){var _=U(this.target);return this.contentRect_=_,_.width!==this.broadcastWidth||_.height!==this.broadcastHeight},T.prototype.broadcastRect=function(){var _=this.contentRect_;return this.broadcastWidth=_.width,this.broadcastHeight=_.height,_},T}(),q=function(T,_){var B,ee,V,Z,H,Q,te,N=(ee=(B=_).x,V=B.y,Z=B.width,H=B.height,Q=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,te=Object.create(Q.prototype),A(te,{x:ee,y:V,width:Z,height:H,top:V,right:ee+Z,bottom:H+V,left:ee}),te);A(this,{target:T,contentRect:N})},f=function(){function T(_,B,ee){if(this.activeObservations_=[],this.observations_=new l,typeof _!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=_,this.controller_=B,this.callbackCtx_=ee}return T.prototype.observe=function(_){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element!="undefined"&&Element instanceof Object){if(!(_ instanceof F(_).Element))throw new TypeError('parameter 1 is not of type "Element".');var B=this.observations_;B.has(_)||(B.set(_,new G(_)),this.controller_.addObserver(this),this.controller_.refresh())}},T.prototype.unobserve=function(_){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element!="undefined"&&Element instanceof Object){if(!(_ instanceof F(_).Element))throw new TypeError('parameter 1 is not of type "Element".');var B=this.observations_;B.has(_)&&(B.delete(_),B.size||this.controller_.removeObserver(this))}},T.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},T.prototype.gatherActive=function(){var _=this;this.clearActive(),this.observations_.forEach(function(B){B.isActive()&&_.activeObservations_.push(B)})},T.prototype.broadcastActive=function(){if(this.hasActive()){var _=this.callbackCtx_,B=this.activeObservations_.map(function(ee){return new q(ee.target,ee.broadcastRect())});this.callback_.call(_,B,_),this.clearActive()}},T.prototype.clearActive=function(){this.activeObservations_.splice(0)},T.prototype.hasActive=function(){return this.activeObservations_.length>0},T}(),o=typeof WeakMap!="undefined"?new WeakMap:new l,v=function T(_){if(!(this instanceof T))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var B=x.getInstance(),ee=new f(_,B,this);o.set(this,ee)};["observe","unobserve","disconnect"].forEach(function(T){v.prototype[T]=function(){var _;return(_=o.get(this))[T].apply(_,arguments)}});var b=y.ResizeObserver!==void 0?y.ResizeObserver:v;h.Z=b},877:function(u,h,s){var l=s(570),m=s(171),y=m;y.v1=l,y.v4=m,u.exports=y},327:function(u){for(var h=[],s=0;s<256;++s)h[s]=(s+256).toString(16).substr(1);u.exports=function(l,m){var y=m||0,g=h;return[g[l[y++]],g[l[y++]],g[l[y++]],g[l[y++]],"-",g[l[y++]],g[l[y++]],"-",g[l[y++]],g[l[y++]],"-",g[l[y++]],g[l[y++]],"-",g[l[y++]],g[l[y++]],g[l[y++]],g[l[y++]],g[l[y++]],g[l[y++]]].join("")}},217:function(u){var h=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(h){var s=new Uint8Array(16);u.exports=function(){return h(s),s}}else{var l=new Array(16);u.exports=function(){for(var m,y=0;y<16;y++)(3&y)==0&&(m=4294967296*Math.random()),l[y]=m>>>((3&y)<<3)&255;return l}}},570:function(u,h,s){var l,m,y=s(217),g=s(327),S=0,E=0;u.exports=function(x,A,F){var D=A&&F||0,$=A||[],k=(x=x||{}).node||l,j=x.clockseq!==void 0?x.clockseq:m;if(k==null||j==null){var U=y();k==null&&(k=l=[1|U[0],U[1],U[2],U[3],U[4],U[5]]),j==null&&(j=m=16383&(U[6]<<8|U[7]))}var W=x.msecs!==void 0?x.msecs:new Date().getTime(),G=x.nsecs!==void 0?x.nsecs:E+1,q=W-S+(G-E)/1e4;if(q<0&&x.clockseq===void 0&&(j=j+1&16383),(q<0||W>S)&&x.nsecs===void 0&&(G=0),G>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");S=W,E=G,m=j;var f=(1e4*(268435455&(W+=122192928e5))+G)%4294967296;$[D++]=f>>>24&255,$[D++]=f>>>16&255,$[D++]=f>>>8&255,$[D++]=255&f;var o=W/4294967296*1e4&268435455;$[D++]=o>>>8&255,$[D++]=255&o,$[D++]=o>>>24&15|16,$[D++]=o>>>16&255,$[D++]=j>>>8|128,$[D++]=255&j;for(var v=0;v<6;++v)$[D+v]=k[v];return A||g($)}},171:function(u,h,s){var l=s(217),m=s(327);u.exports=function(y,g,S){var E=g&&S||0;typeof y=="string"&&(g=y==="binary"?new Array(16):null,y=null);var x=(y=y||{}).random||(y.rng||l)();if(x[6]=15&x[6]|64,x[8]=63&x[8]|128,g)for(var A=0;A<16;++A)g[E+A]=x[A];return g||m(x)}},618:function(u){function h(b,T){if(!x)return!1;const _=b.buffer;let B=F.get(_);if(B==null){if((B=s.validate(_))&&T)try{new s.Instance(new s.Module(_)).exports[0]()}catch{B=!1}F.set(_,B)}return B}const s=WebAssembly,l=(...b)=>Uint8Array.of(0,97,115,109,1,0,0,0,...b),m=(...b)=>Uint32Array.of(1836278016,1,...b),y=(...b)=>m(1610679297,33751040,...b,40239360,259),g=(...b)=>l(1,4,1,96,0,0,3,2,1,0,...b,11,0,10,4,110,97,109,101,2,3,1,0,0),S=(...b)=>Uint16Array.of(24832,28019,1,0,1025,24577,0,515,1,...b),E=(...b)=>S(...b,2842,4096,28164,28001,357,260,256,560,259,0),x=typeof s=="object",A=b=>x&&typeof b=="function",F=new WeakMap,D=m(1610679553,58589440,117440770,805372165,101318656,1107297281,268438272,1835101700,17039717,36700416,259),$=S(773,1,2561,269,11,65,65,65,3068,2816,2560,28164,28001,613,259,0),k=m(1610679297,33751040,134873089,100664833,185276736),j=l(2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1,0,8,4,110,97,109,101,2,1,0),U=Uint16Array.of(24832,28019,1,0,1537,24577,512,32639,515,1,2058,1537,16640,16640,2816,2560,28164,28001,613,259,0),W=E(3082,2561,17152,0,0,252),G=E(2058,1537,16640,49152),q=y(101318657,301990913,268438272,1835101700,17039717),f=g(5,4,1,3,1,1,10,7,1,5,0,254,3,0),o=y(84344833,6357249,17369600,4259847,186257917,1845758464),v=g(10,7,1,5,0,208,112,26);u.exports={support:(b=1)=>x&&h(Uint32Array.of(1836278016,b)),get supportStreaming(){return A(s.instantiateStreaming)},feature:{get bigInt(){return h(D,!0)},get bulk(){return h($)},get exceptions(){return h(k)},get mutableGlobal(){return h(j)},get multiValue(){return h(U)},get saturateConversions(){return h(W)},get signExtensions(){return h(G)},get tailCall(){return h(q)},get threads(){return h(f)},get simd(){return h(o)},get references(){return h(v)},get typeReflection(){return A(s.Memory.type)},get funcReferences(){return A(s.Function)}}}},161:function(u,h){h.HR=function(){if((window==null?void 0:window.WebGLRenderingContext)!==void 0){var s=document.createElement("canvas");return s.getContext("webgl")!=null||s.getContext("experimental-webgl")!=null}return!1},h.W8=function(){return(window==null?void 0:window.WebGLRenderingContext)!==void 0&&document.createElement("canvas").getContext("webgl2")!=null}},477:function(u){u.exports=function(h,s,l,m){var y=self||window;try{try{var g;try{g=new y.Blob([h])}catch{(g=new(y.BlobBuilder||y.WebKitBlobBuilder||y.MozBlobBuilder||y.MSBlobBuilder)).append(h),g=g.getBlob()}var S=y.URL||y.webkitURL,E=S.createObjectURL(g),x=new y[s](E,l);return S.revokeObjectURL(E),x}catch{return new y[s]("data:application/javascript,".concat(encodeURIComponent(h)),l)}}catch{if(!m)throw Error("Inline worker is not supported");return new y[s](m,l)}}},907:function(u,h,s){function l(m,y){(y==null||y>m.length)&&(y=m.length);for(var g=0,S=new Array(y);g<y;g++)S[g]=m[g];return S}s.d(h,{Z:function(){return l}})},861:function(u,h,s){function l(y,g,S,E,x,A,F){try{var D=y[A](F),$=D.value}catch(k){return void S(k)}D.done?g($):Promise.resolve($).then(E,x)}function m(y){return function(){var g=this,S=arguments;return new Promise(function(E,x){var A=y.apply(g,S);function F($){l(A,E,x,F,D,"next",$)}function D($){l(A,E,x,F,D,"throw",$)}F(void 0)})}}s.d(h,{Z:function(){return m}})},671:function(u,h,s){function l(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}s.d(h,{Z:function(){return l}})},144:function(u,h,s){function l(y,g){for(var S=0;S<g.length;S++){var E=g[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}function m(y,g,S){return g&&l(y.prototype,g),S&&l(y,S),y}s.d(h,{Z:function(){return m}})},942:function(u,h,s){function l(m,y,g){return y in m?Object.defineProperty(m,y,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[y]=g,m}s.d(h,{Z:function(){return l}})},885:function(u,h,s){s.d(h,{Z:function(){return m}});var l=s(181);function m(y,g){return function(S){if(Array.isArray(S))return S}(y)||function(S,E){var x=S==null?null:typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(x!=null){var A,F,D=[],$=!0,k=!1;try{for(x=x.call(S);!($=(A=x.next()).done)&&(D.push(A.value),!E||D.length!==E);$=!0);}catch(j){k=!0,F=j}finally{try{$||x.return==null||x.return()}finally{if(k)throw F}}return D}}(y,g)||(0,l.Z)(y,g)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},181:function(u,h,s){s.d(h,{Z:function(){return m}});var l=s(907);function m(y,g){if(y){if(typeof y=="string")return(0,l.Z)(y,g);var S=Object.prototype.toString.call(y).slice(8,-1);return S==="Object"&&y.constructor&&(S=y.constructor.name),S==="Map"||S==="Set"?Array.from(y):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?(0,l.Z)(y,g):void 0}}},147:function(u){u.exports={i8:"1.6.10"}}},i={};function a(u){var h=i[u];if(h!==void 0)return h.exports;var s=i[u]={id:u,loaded:!1,exports:{}};return n[u](s,s.exports,a),s.loaded=!0,s.exports}a.n=function(u){var h=u&&u.__esModule?function(){return u.default}:function(){return u};return a.d(h,{a:h}),h},a.d=function(u,h){for(var s in h)a.o(h,s)&&!a.o(u,s)&&Object.defineProperty(u,s,{enumerable:!0,get:h[s]})},a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),a.hmd=function(u){return(u=Object.create(u)).children||(u.children=[]),Object.defineProperty(u,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+u.id)}}),u},a.o=function(u,h){return Object.prototype.hasOwnProperty.call(u,h)},a.r=function(u){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},a.p="";var c={};return function(){var u=a(296),h=a(423),s=a(841),l=a(720);c.default={UpscaleFilter:u.default,BackgroundFilter:h.default,BackgroundCoreFilter:l.default,UpscaleCoreFilter:s.default.core}}(),c.default}()})})(vectorly_filters);var ElementQueries$1={exports:{}},ResizeSensor={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(typeof window!="undefined"?window:commonjsGlobal,function(){if(typeof window=="undefined")return null;var n=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")(),i=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(m){return n.setTimeout(m,20)},a=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||function(m){n.clearTimeout(m)};function c(m,y){var g=Object.prototype.toString.call(m),S=g==="[object Array]"||g==="[object NodeList]"||g==="[object HTMLCollection]"||g==="[object Object]"||typeof jQuery!="undefined"&&m instanceof jQuery||typeof Elements!="undefined"&&m instanceof Elements,E=0,x=m.length;if(S)for(;E<x;E++)y(m[E]);else y(m)}function u(m){if(!m.getBoundingClientRect)return{width:m.offsetWidth,height:m.offsetHeight};var y=m.getBoundingClientRect();return{width:Math.round(y.width),height:Math.round(y.height)}}function h(m,y){Object.keys(y).forEach(function(g){m.style[g]=y[g]})}var s=function(m,y){var g=0;function S(){var x=[];this.add=function(D){x.push(D)};var A,F;this.call=function(D){for(A=0,F=x.length;A<F;A++)x[A].call(this,D)},this.remove=function(D){var $=[];for(A=0,F=x.length;A<F;A++)x[A]!==D&&$.push(x[A]);x=$},this.length=function(){return x.length}}function E(x,A){if(!!x){if(x.resizedAttached){x.resizedAttached.add(A);return}x.resizedAttached=new S,x.resizedAttached.add(A),x.resizeSensor=document.createElement("div"),x.resizeSensor.dir="ltr",x.resizeSensor.className="resize-sensor";var F={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},D={position:"absolute",left:"0px",top:"0px",transition:"0s"};h(x.resizeSensor,F);var $=document.createElement("div");$.className="resize-sensor-expand",h($,F);var k=document.createElement("div");h(k,D),$.appendChild(k);var j=document.createElement("div");j.className="resize-sensor-shrink",h(j,F);var U=document.createElement("div");h(U,D),h(U,{width:"200%",height:"200%"}),j.appendChild(U),x.resizeSensor.appendChild($),x.resizeSensor.appendChild(j),x.appendChild(x.resizeSensor);var W=window.getComputedStyle(x),G=W?W.getPropertyValue("position"):null;G!=="absolute"&&G!=="relative"&&G!=="fixed"&&G!=="sticky"&&(x.style.position="relative");var q=!1,f=0,o=u(x),v=0,b=0,T=!0;g=0;var _=function(){var H=x.offsetWidth,Q=x.offsetHeight;k.style.width=H+10+"px",k.style.height=Q+10+"px",$.scrollLeft=H+10,$.scrollTop=Q+10,j.scrollLeft=H+10,j.scrollTop=Q+10},B=function(){if(T){var H=x.offsetWidth===0&&x.offsetHeight===0;if(H){g||(g=i(function(){g=0,B()}));return}else T=!1}_()};x.resizeSensor.resetSensor=B;var ee=function(){f=0,q&&(v=o.width,b=o.height,x.resizedAttached&&x.resizedAttached.call(o))},V=function(){o=u(x),q=o.width!==v||o.height!==b,q&&!f&&(f=i(ee)),B()},Z=function(H,Q,te){H.attachEvent?H.attachEvent("on"+Q,te):H.addEventListener(Q,te)};Z($,"scroll",V),Z(j,"scroll",V),g=i(function(){g=0,B()})}}c(m,function(x){E(x,y)}),this.detach=function(x){g||(a(g),g=0),s.detach(m,x)},this.reset=function(){m.resizeSensor.resetSensor()}};if(s.reset=function(m){c(m,function(y){y.resizeSensor.resetSensor()})},s.detach=function(m,y){c(m,function(g){!g||g.resizedAttached&&typeof y=="function"&&(g.resizedAttached.remove(y),g.resizedAttached.length())||g.resizeSensor&&(g.contains(g.resizeSensor)&&g.removeChild(g.resizeSensor),delete g.resizeSensor,delete g.resizedAttached)})},typeof MutationObserver!="undefined"){var l=new MutationObserver(function(m){for(var y in m)if(m.hasOwnProperty(y))for(var g=m[y].addedNodes,S=0;S<g.length;S++)g[S].resizeSensor&&s.reset(g[S])});document.addEventListener("DOMContentLoaded",function(m){l.observe(document.body,{childList:!0,subtree:!0})})}return s})})(ResizeSensor);(function(t,e){(function(n,i){t.exports=i(ResizeSensor.exports)})(typeof window!="undefined"?window:commonjsGlobal,function(n){var i=function(){var c,u={},h=[];function s(W){W||(W=document.documentElement);var G=window.getComputedStyle(W,null).fontSize;return parseFloat(G)||16}function l(W){if(!W.getBoundingClientRect)return{width:W.offsetWidth,height:W.offsetHeight};var G=W.getBoundingClientRect();return{width:Math.round(G.width),height:Math.round(G.height)}}function m(W,G){var q=G.split(/\d/),f=q[q.length-1];switch(G=parseFloat(G),f){case"px":return G;case"em":return G*s(W);case"rem":return G*s();case"vw":return G*document.documentElement.clientWidth/100;case"vh":return G*document.documentElement.clientHeight/100;case"vmin":case"vmax":var o=document.documentElement.clientWidth/100,v=document.documentElement.clientHeight/100,b=Math[f==="vmin"?"min":"max"];return G*b(o,v);default:return G}}function y(W,G){this.element=W;var q,f,o,v,b,T,_,B,ee=["min-width","min-height","max-width","max-height"];this.call=function(){o=l(this.element),T={};for(q in u[G])!u[G].hasOwnProperty(q)||(f=u[G][q],v=m(this.element,f.value),b=f.property==="width"?o.width:o.height,B=f.mode+"-"+f.property,_="",f.mode==="min"&&b>=v&&(_+=f.value),f.mode==="max"&&b<=v&&(_+=f.value),T[B]||(T[B]=""),_&&(" "+T[B]+" ").indexOf(" "+_+" ")===-1&&(T[B]+=" "+_));for(var V in ee)!ee.hasOwnProperty(V)||(T[ee[V]]?this.element.setAttribute(ee[V],T[ee[V]].substr(1)):this.element.removeAttribute(ee[V]))}}function g(W,G){W.elementQueriesSetupInformation||(W.elementQueriesSetupInformation=new y(W,G)),W.elementQueriesSensor||(W.elementQueriesSensor=new n(W,function(){W.elementQueriesSetupInformation.call()}))}function S(W,G,q,f){if(typeof u[W]=="undefined"){u[W]=[];var o=h.length;c.innerHTML+=`
`+W+" {animation: 0.1s element-queries;}",c.innerHTML+=`
`+W+" > .resize-sensor {min-width: "+o+"px;}",h.push(W)}u[W].push({mode:G,property:q,value:f})}function E(W){var G;if(document.querySelectorAll&&(G=W?W.querySelectorAll.bind(W):document.querySelectorAll.bind(document)),!G&&typeof $$!="undefined"&&(G=$$),!G&&typeof jQuery!="undefined"&&(G=jQuery),!G)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return G}function x(W){var G=E(W);for(var q in u)if(u.hasOwnProperty(q))for(var f=G(q,W),o=0,v=f.length;o<v;o++)g(f[o],q)}function A(W){var G=[],q=[],f=[],o=0,v=-1,b=[];for(var T in W.children)if(!!W.children.hasOwnProperty(T)&&W.children[T].tagName&&W.children[T].tagName.toLowerCase()==="img"){G.push(W.children[T]);var _=W.children[T].getAttribute("min-width")||W.children[T].getAttribute("data-min-width"),B=W.children[T].getAttribute("data-src")||W.children[T].getAttribute("url");f.push(B);var ee={minWidth:_};q.push(ee),_?W.children[T].style.display="none":(o=G.length-1,W.children[T].style.display="block")}v=o;function V(){var Z=!1,H;for(H in G)!G.hasOwnProperty(H)||q[H].minWidth&&W.offsetWidth>q[H].minWidth&&(Z=H);if(Z||(Z=o),v!==Z)if(b[Z])G[v].style.display="none",G[Z].style.display="block",v=Z;else{var Q=new Image;Q.onload=function(){G[Z].src=f[Z],G[v].style.display="none",G[Z].style.display="block",b[Z]=!0,v=Z},Q.src=f[Z]}else G[Z].src=f[Z]}W.resizeSensorInstance=new n(W,V),V()}function F(){for(var W=E(),G=W("[data-responsive-image],[responsive-image]"),q=0,f=G.length;q<f;q++)A(G[q])}var D=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/mgi,$=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/mgi;function k(W){var G,q,f,o;for(W=W.replace(/'/g,'"');(G=D.exec(W))!==null;)for(q=G[1]+G[3],f=G[2];(o=$.exec(f))!==null;)S(q,o[1],o[2],o[3])}function j(W){var G="";if(!!W)if(typeof W=="string")W=W.toLowerCase(),(W.indexOf("min-width")!==-1||W.indexOf("max-width")!==-1)&&k(W);else for(var q=0,f=W.length;q<f;q++)W[q].type===1?(G=W[q].selectorText||W[q].cssText,(G.indexOf("min-height")!==-1||G.indexOf("max-height")!==-1||G.indexOf("min-width")!==-1||G.indexOf("max-width")!==-1)&&k(G)):W[q].type===4?j(W[q].cssRules||W[q].rules):W[q].type===3&&W[q].styleSheet.hasOwnProperty("cssRules")&&j(W[q].styleSheet.cssRules)}var U=!1;this.init=function(){var W="animationstart";typeof document.documentElement.style.webkitAnimationName!="undefined"?W="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName!="undefined"?W="mozanimationstart":typeof document.documentElement.style.OAnimationName!="undefined"&&(W="oanimationstart"),document.body.addEventListener(W,function(f){var o=f.target,v=o&&window.getComputedStyle(o,null),b=v&&v.getPropertyValue("animation-name"),T=b&&b.indexOf("element-queries")!==-1;if(T){o.elementQueriesSensor=new n(o,function(){o.elementQueriesSetupInformation&&o.elementQueriesSetupInformation.call()});var _=window.getComputedStyle(o.resizeSensor,null),B=_.getPropertyValue("min-width");B=parseInt(B.replace("px","")),g(f.target,h[B])}}),U||(c=document.createElement("style"),c.type="text/css",c.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",c.innerHTML+=`
@keyframes element-queries { 0% { visibility: inherit; } }`,document.getElementsByTagName("head")[0].appendChild(c),U=!0);for(var G=0,q=document.styleSheets.length;G<q;G++)try{document.styleSheets[G].href&&document.styleSheets[G].href.indexOf("file://")===0&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[G].href),j(document.styleSheets[G].cssRules||document.styleSheets[G].rules||document.styleSheets[G].cssText)}catch{}F()},this.findElementQueriesElements=function(W){x(W)},this.update=function(){this.init()}};i.update=function(){i.instance.update()},i.detach=function(c){c.elementQueriesSetupInformation?(c.elementQueriesSensor.detach(),delete c.elementQueriesSetupInformation,delete c.elementQueriesSensor):c.resizeSensorInstance&&(c.resizeSensorInstance.detach(),delete c.resizeSensorInstance)},i.init=function(){i.instance||(i.instance=new i),i.instance.init()};var a=function(c){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var u=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(c(),clearInterval(u))},10);else window.onload=c};return i.findElementQueriesElements=function(c){i.instance.findElementQueriesElements(c)},i.listen=function(){a(i.init)},i})})(ElementQueries$1);var ElementQueries=ElementQueries$1.exports;function styleInject(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}var css_248z='#ctw{margin:0;padding:0;height:100%;width:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}#ctw .container{box-sizing:border-box;height:100vh;padding:32px}#ctw ::selection{background:var(--ctwPrimary)}#ctw ::-moz-selection{background:var(--ctwPrimary)}#ctw ::-webkit-selection{background:var(--ctwPrimary)}#ctw .not-selectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@-webkit-keyframes slideInFromRight{0%{transform:translateX(100%)}to{transform:translateX(0)}}@keyframes slideInFromRight{0%{transform:translateX(100%)}to{transform:translateX(0)}}@-webkit-keyframes show{0%{opacity:0;transform:scale(.4) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}@keyframes show{0%{opacity:0;transform:scale(.4) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}#ctw .no-scrollbar::-webkit-scrollbar{display:none}#ctw .no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}#ctw .bullet-none{list-style-type:none!important;padding-inline:0}#ctw #local-vid-wrapper video,#ctw video#local-video{transform:scaleX(-1)}#ctw button.tooltip:hover span{display:block}#ctw .fade-in-bottom{-webkit-animation-name:fadeInBottom;animation-name:fadeInBottom;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}@-webkit-keyframes fadeInBottom{0%{opacity:0;transform:translateY(200%)}to{opacity:1}}@keyframes fadeInBottom{0%{opacity:0;transform:translateY(200%)}to{opacity:1}}@media (hover:none){#ctw button:hover span{display:none!important}}#ctw .popout-drag{transition-property:"tranform";transition-duration:.2s;transition-timing-function:ease-in}#ctw video ::--webkit-media-controls-play-button,#ctw video ::-webkit-media-controls-panel{display:none!important;-webkit-appearance:none}#ctw video ::-webkit-media-controls-start-playback-button{display:none!important;-webkit-appearance:none}#ctw #opt li>ul{transform:translatex(100%) scale(0)}#ctw #opt li:hover>ul{transform:translatex(101%) scale(1)}#ctw #opt li>button svg{transform:rotate(-90deg)}#ctw #opt li:hover>button svg{transform:rotate(-270deg)}#ctw #opt.group:hover .group-hover\\:scale-100{transform:scale(1)}#ctw #opt.group:hover .group-hover\\:-rotate-180{transform:rotate(180deg)}#ctw #opt .scale-0{transform:scale(0)}#ctw #opt .min-w-32{min-width:8rem}#ctw .catalyst-lds-roller{display:inline-block;position:relative;width:80px;height:80px}#ctw .catalyst-lds-roller div{-webkit-animation:catalyst-lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;animation:catalyst-lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;transform-origin:40px 40px}#ctw .catalyst-lds-roller div:after{content:" ";display:block;position:absolute;width:7px;height:7px;border-radius:50%;background:#fff;margin:-4px 0 0 -4px}#ctw .catalyst-lds-roller div:first-child{-webkit-animation-delay:-36ms;animation-delay:-36ms}#ctw .catalyst-lds-roller div:first-child:after{top:63px;left:63px}#ctw .catalyst-lds-roller div:nth-child(2){-webkit-animation-delay:-72ms;animation-delay:-72ms}#ctw .catalyst-lds-roller div:nth-child(2):after{top:68px;left:56px}#ctw .catalyst-lds-roller div:nth-child(3){-webkit-animation-delay:-.108s;animation-delay:-.108s}#ctw .catalyst-lds-roller div:nth-child(3):after{top:71px;left:48px}#ctw .catalyst-lds-roller div:nth-child(4){-webkit-animation-delay:-.144s;animation-delay:-.144s}#ctw .catalyst-lds-roller div:nth-child(4):after{top:72px;left:40px}#ctw .catalyst-lds-roller div:nth-child(5){-webkit-animation-delay:-.18s;animation-delay:-.18s}#ctw .catalyst-lds-roller div:nth-child(5):after{top:71px;left:32px}#ctw .catalyst-lds-roller div:nth-child(6){-webkit-animation-delay:-.216s;animation-delay:-.216s}#ctw .catalyst-lds-roller div:nth-child(6):after{top:68px;left:24px}#ctw .catalyst-lds-roller div:nth-child(7){-webkit-animation-delay:-.252s;animation-delay:-.252s}#ctw .catalyst-lds-roller div:nth-child(7):after{top:63px;left:17px}#ctw .catalyst-lds-roller div:nth-child(8){-webkit-animation-delay:-.288s;animation-delay:-.288s}#ctw .catalyst-lds-roller div:nth-child(8):after{top:56px;left:12px}@-webkit-keyframes catalyst-lds-roller{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes catalyst-lds-roller{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}#ctw .rm-uncanny-valley{transform:scaleX(-1)}.tippy-box[data-theme~=catalyst]{background-color:var(--ctwTertiary);color:#fff;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji!important;z-index:40}.tippy-box[data-theme~=catalyst][data-placement^=top]>.tippy-arrow:before{border-top-color:var(--ctwTertiary)}.tippy-box[data-theme~=catalyst][data-placement^=bottom]>.tippy-arrow:before{border-bottom-color:var(--ctwTertiary)}.tippy-box[data-theme~=catalyst][data-placement^=left]>.tippy-arrow:before{border-left-color:var(--ctwTertiary)}.tippy-box[data-theme~=catalyst][data-placement^=right]>.tippy-arrow:before{border-right-color:var(--ctwTertiary)}#ctw.catalyst-parent .text-c{font-size:.75rem;line-height:1rem}#ctw.catalyst-parent[min-width~="640px"] .text-c{font-size:.875rem;line-height:1.25rem}#ctw.catalyst-parent[min-width~="768px"] .text-c{font-size:1rem;line-height:1.5rem}#ctw.catalyst-parent[min-width~="1024px"] .text-c{font-size:1.125rem;line-height:1.75rem}#ctw.catalyst-parent[min-width~="1280px"] .text-c{font-size:1.25rem;line-height:1.75rem}#ctw .max-vid-height{max-height:250px}#ctw.catalyst-parent[min-width~="400px"] .max-vid-height{max-height:270px}#ctw.catalyst-parent[min-width~="640px"] .max-vid-height{max-height:inherit}#ctw .catalyst-fullscreen .max-vid-height{max-height:inherit!important}#ctw.catalyst-parent .header-bar{display:block}#ctw.catalyst-parent .header-img,#ctw.catalyst-parent[min-width~="768px"] .header-bar{display:none}#ctw.catalyst-parent[min-width~="768px"] .header-img{display:block}#ctw.catalyst-parent .nav-ops{right:.75rem;top:2.5rem}#ctw.catalyst-parent[min-width~="768px"] .nav-ops{right:1.25rem;top:1.25rem}#ctw.catalyst-parent .speaker-view{flex-direction:column;justify-content:center;padding:2.5rem .25rem}#ctw.catalyst-parent[min-width~="400px"] .speaker-view{padding-left:.5rem;padding-right:.5rem;flex-direction:row;justify-content:space-around}#ctw.catalyst-parent[min-width~="768px"] .speaker-view{padding-left:1.5rem;padding-right:1.5rem}#ctw.catalyst-parent[min-width~="1024px"] .speaker-view{padding-left:2.5rem;padding-right:2.5rem}#ctw.catalyst-parent[min-width~="1280px"] .speaker-view{padding-left:5rem;padding-right:5rem}#ctw.catalyst-parent .other-vids{display:none}#ctw.catalyst-parent[min-width~="400px"] .other-vids{width:30%;display:flex;height:auto;overflow-y:auto;flex-direction:column}#ctw.catalyst-parent[min-width~="1024px"] .other-vids{width:20%;height:100%}#ctw.catalyst-parent .speaker-vid{width:100%}#ctw.catalyst-parent[min-width~="400px"] .speaker-vid{width:70%}#ctw.catalyst-parent[min-width~="1024px"] .speaker-vid{width:80%}#ctw.catalyst-parent .text-n{font-size:.75rem;line-height:1rem}#ctw.catalyst-parent[min-width~="768px"] .text-n{font-size:.875rem;line-height:1.25rem}#ctw.catalyst-parent .vid-p{margin-left:.25rem;margin-right:.25rem}#ctw.catalyst-parent[min-width~="640px"] .vid-p{margin:.25rem 0}#ctw .bg-placeholder{min-height:4.2rem}#ctw.catalyst-parent[min-width~="640px"] .bg-placeholder{min-height:6.5rem}#ctw.catalyst-parent[min-width~="1024px"] .bg-placeholder{min-height:10rem}#ctw .chat-cont{position:absolute;width:18rem}#ctw.catalyst-parent[min-width~="768px"] .chat-cont{position:relative;width:16rem}#ctw .chat-open-shift{margin-right:0}#ctw.catalyst-parent[min-width~="768px"] .chat-open-shift{margin-right:14rem}#ctw .setup-logo{display:none}#ctw.catalyst-parent[min-width~="768px"] .setup-logo{display:block}#ctw .catalyst-ld{position:relative;border-radius:50%;display:inline-block;vertical-align:middle}#ctw .catalyst-ld-1 .catalyst-ld-outer{position:absolute;border:4px solid #fff;border-left-color:transparent;border-bottom:0;width:100%;height:100%;border-radius:50%;-webkit-animation:catalyst-ld-1-outer 1s cubic-bezier(.42,.61,.58,.41) infinite;animation:catalyst-ld-1-outer 1s cubic-bezier(.42,.61,.58,.41) infinite}#ctw .catalyst-ld-1 .catalyst-ld-inner{position:absolute;border-left:4px solid #fff;border-bottom:4px solid #fff;border-radius:50%;width:40px;height:40px;left:calc(50% - 20px);top:calc(50% - 20px);border-right:0;border-top:4px solid transparent;-webkit-animation:catalyst-ld-1-inner 1s cubic-bezier(.42,.61,.58,.41) infinite;animation:catalyst-ld-1-inner 1s cubic-bezier(.42,.61,.58,.41) infinite}@-webkit-keyframes catalyst-ld-1-outer{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes catalyst-ld-1-outer{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@-webkit-keyframes catalyst-ld-1-inner{0%{transform:rotate(0deg)}to{transform:rotate(-1turn)}}@keyframes catalyst-ld-1-inner{0%{transform:rotate(0deg)}to{transform:rotate(-1turn)}}';styleInject(css_248z,{insertAt:"top"});var css_248z$1=".aspect-w-1,.aspect-w-2,.aspect-w-3,.aspect-w-4,.aspect-w-5,.aspect-w-6,.aspect-w-7,.aspect-w-8,.aspect-w-9,.aspect-w-10,.aspect-w-11,.aspect-w-12,.aspect-w-13,.aspect-w-14,.aspect-w-15,.aspect-w-16{position:relative;padding-bottom:calc(var(--tw-aspect-h)/var(--tw-aspect-w)*100%)}.aspect-w-1>*,.aspect-w-2>*,.aspect-w-3>*,.aspect-w-4>*,.aspect-w-5>*,.aspect-w-6>*,.aspect-w-7>*,.aspect-w-8>*,.aspect-w-9>*,.aspect-w-10>*,.aspect-w-11>*,.aspect-w-12>*,.aspect-w-13>*,.aspect-w-14>*,.aspect-w-15>*,.aspect-w-16>*{position:absolute;height:100%;width:100%;top:0;right:0;bottom:0;left:0}.aspect-w-16{--tw-aspect-w:16}.aspect-h-9{--tw-aspect-h:9}#ctw .invisible{visibility:hidden}#ctw .visible{visibility:visible}#ctw .fixed{position:fixed}#ctw .absolute{position:absolute}#ctw .relative{position:relative}#ctw .sticky{position:sticky}#ctw .inset-0{top:0;right:0;bottom:0;left:0}#ctw .right-0{right:0}#ctw .top-2{top:.5rem}#ctw .left-2{left:.5rem}#ctw .bottom-0{bottom:0}#ctw .left-0{left:0}#ctw .top-0{top:0}#ctw .left-1{left:.25rem}#ctw .-right-1{right:-.25rem}#ctw .-bottom-1{bottom:-.25rem}#ctw .z-50{z-index:50}#ctw .z-20{z-index:20}#ctw .z-40{z-index:40}#ctw .z-30{z-index:30}#ctw .z-0{z-index:0}#ctw .z-10{z-index:10}#ctw .m-0{margin:0}#ctw .m-1{margin:.25rem}#ctw .mx-2{margin-left:.5rem;margin-right:.5rem}#ctw .mx-3{margin-left:.75rem;margin-right:.75rem}#ctw .my-3{margin-top:.75rem;margin-bottom:.75rem}#ctw .my-2{margin-top:.5rem;margin-bottom:.5rem}#ctw .my-6{margin-top:1.5rem;margin-bottom:1.5rem}#ctw .ml-20{margin-left:5rem}#ctw .ml-auto{margin-left:auto}#ctw .ml-1{margin-left:.25rem}#ctw .mt-2{margin-top:.5rem}#ctw .ml-2{margin-left:.5rem}#ctw .mr-1{margin-right:.25rem}#ctw .ml-5{margin-left:1.25rem}#ctw .mb-3{margin-bottom:.75rem}#ctw .mt-5{margin-top:1.25rem}#ctw .-mt-8{margin-top:-2rem}#ctw .mb-1{margin-bottom:.25rem}#ctw .mt-1{margin-top:.25rem}#ctw .box-border{box-sizing:border-box}#ctw .block{display:block}#ctw .inline-block{display:inline-block}#ctw .inline{display:inline}#ctw .flex{display:flex}#ctw .table{display:table}#ctw .hidden{display:none}#ctw .h-full{height:100%}#ctw .h-auto{height:auto}#ctw .h-1{height:.25rem}#ctw .h-10{height:2.5rem}#ctw .h-7{height:1.75rem}#ctw .h-16{height:4rem}#ctw .h-52{height:13rem}#ctw .h-14{height:3.5rem}#ctw .h-6{height:1.5rem}#ctw .max-h-screen{max-height:100vh}#ctw .min-h-full{min-height:100%}#ctw .min-h-0{min-height:0}#ctw .w-full{width:100%}#ctw .w-72{width:18rem}#ctw .w-7{width:1.75rem}#ctw .w-16{width:4rem}#ctw .w-80{width:20rem}#ctw .w-20{width:5rem}#ctw .w-14{width:3.5rem}#ctw .w-6{width:1.5rem}#ctw .min-w-0{min-width:0}#ctw .flex-1{flex:1 1 0%}#ctw .transform{--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;transform:translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@-webkit-keyframes fade-in-right{0%{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}#ctw .animate-fade-in-right{-webkit-animation:fade-in-right .25s ease-out;animation:fade-in-right .25s ease-out}@-webkit-keyframes fade-in-up{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes fade-in-up{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}#ctw .animate-fade-in-up{-webkit-animation:fade-in-up .18s ease-out;animation:fade-in-up .18s ease-out}@-webkit-keyframes fade-in-left{0%{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}#ctw .animate-fade-in-left{-webkit-animation:fade-in-left .25s ease-out;animation:fade-in-left .25s ease-out}@keyframes fade-in-right{0%{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}@keyframes fade-in-left{0%{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}@-webkit-keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}#ctw .animate-fade-in-down{-webkit-animation:fade-in-down .18s ease-out;animation:fade-in-down .18s ease-out}@-webkit-keyframes fade-out-up{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(10px)}}@keyframes fade-out-up{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(10px)}}#ctw .animate-fade-out-up{-webkit-animation:fade-out-up .18s ease-out;animation:fade-out-up .18s ease-out}@-webkit-keyframes fade-out-down{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(10px)}}@keyframes fade-out-down{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(10px)}}#ctw .animate-fade-out-down{-webkit-animation:fade-out-down .18s ease-out;animation:fade-out-down .18s ease-out}#ctw .cursor-pointer{cursor:pointer}#ctw .resize-none{resize:none}#ctw .resize{resize:both}#ctw .list-none{list-style-type:none}#ctw .flex-col{flex-direction:column}#ctw .flex-row{flex-direction:row}#ctw .flex-wrap{flex-wrap:wrap}#ctw .content-end{align-content:flex-end}#ctw .content-center{align-content:center}#ctw .items-start{align-items:flex-start}#ctw .items-center{align-items:center}#ctw .items-end{align-items:flex-end}#ctw .justify-center{justify-content:center}#ctw .justify-between{justify-content:space-between}#ctw .justify-around{justify-content:space-around}#ctw .justify-end{justify-content:flex-end}#ctw .self-center{align-self:center}#ctw .overflow-hidden{overflow:hidden}#ctw .overflow-y-auto{overflow-y:auto}#ctw .overflow-x-auto{overflow-x:auto}#ctw .whitespace-nowrap{white-space:nowrap}#ctw .break-all{word-break:break-all}#ctw .rounded-xl{border-radius:.75rem}#ctw .rounded-full{border-radius:9999px}#ctw .rounded-md{border-radius:.375rem}#ctw .rounded-2xl{border-radius:1rem}#ctw .rounded-lg{border-radius:.5rem}#ctw .rounded-t-xl{border-top-left-radius:.75rem;border-top-right-radius:.75rem}#ctw .rounded-b-none{border-bottom-right-radius:0;border-bottom-left-radius:0}#ctw .rounded-b-xl{border-bottom-right-radius:.75rem;border-bottom-left-radius:.75rem}#ctw .rounded-tl-2xl{border-top-left-radius:1rem}#ctw .rounded-tr-2xl{border-top-right-radius:1rem}#ctw .rounded-br-sm{border-bottom-right-radius:.125rem}#ctw .rounded-bl-2xl{border-bottom-left-radius:1rem}#ctw .rounded-br-2xl{border-bottom-right-radius:1rem}#ctw .rounded-bl-sm{border-bottom-left-radius:.125rem}#ctw .border{border-width:1px}#ctw .border-0{border-width:0}#ctw .border-4{border-width:4px}#ctw .border-b{border-bottom-width:1px}#ctw .border-t{border-top-width:1px}#ctw .border-white{--tw-border-opacity:1;border-color:rgba(255,255,255,var(--tw-border-opacity))}#ctw .border-secondary{border-color:var(--ctwSecondary)}#ctw .border-opacity-20{--tw-border-opacity:0.2}#ctw .bg-secondary{background-color:var(--ctwSecondary)}#ctw .bg-primary{background-color:var(--ctwPrimary)}#ctw .bg-gray-100{--tw-bg-opacity:1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}#ctw .bg-gray-800{--tw-bg-opacity:1;background-color:rgba(31,41,55,var(--tw-bg-opacity))}#ctw .bg-tertiary{background-color:var(--ctwTertiary)}#ctw .bg-black{--tw-bg-opacity:1;background-color:rgba(0,0,0,var(--tw-bg-opacity))}#ctw .bg-gray-300{--tw-bg-opacity:1;background-color:rgba(209,213,219,var(--tw-bg-opacity))}#ctw .bg-transparent{background-color:transparent}#ctw .bg-quinary{background-color:var(--ctwQuinary)}#ctw .bg-red{--tw-bg-opacity:1;background-color:rgba(246,79,89,var(--tw-bg-opacity))}#ctw .fill-current{fill:currentColor}#ctw .p-0{padding:0}#ctw .p-1{padding:.25rem}#ctw .p-2{padding:.5rem}#ctw .px-2{padding-left:.5rem;padding-right:.5rem}#ctw .py-1{padding-top:.25rem;padding-bottom:.25rem}#ctw .py-2{padding-top:.5rem;padding-bottom:.5rem}#ctw .px-1{padding-left:.25rem;padding-right:.25rem}#ctw .px-16{padding-left:4rem;padding-right:4rem}#ctw .px-4{padding-left:1rem;padding-right:1rem}#ctw .pt-4{padding-top:1rem}#ctw .pb-36{padding-bottom:9rem}#ctw .pr-2{padding-right:.5rem}#ctw .pl-2{padding-left:.5rem}#ctw .text-center{text-align:center}#ctw .align-middle{vertical-align:middle}#ctw .font-sans{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}#ctw .text-xs{font-size:.75rem;line-height:1rem}#ctw .text-xl{font-size:1.25rem;line-height:1.75rem}#ctw .text-sm{font-size:.875rem;line-height:1.25rem}#ctw .text-base{font-size:1rem;line-height:1.5rem}#ctw .font-semibold{font-weight:600}#ctw .font-bold{font-weight:700}#ctw .capitalize{text-transform:capitalize}#ctw .text-quinary{color:var(--ctwQuinary)}#ctw .text-primary{color:var(--ctwPrimary)}#ctw .text-black{--tw-text-opacity:1;color:rgba(0,0,0,var(--tw-text-opacity))}#ctw .text-red{--tw-text-opacity:1;color:rgba(246,79,89,var(--tw-text-opacity))}#ctw .text-gray-900{--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity))}#ctw .underline{text-decoration:underline}#ctw .opacity-50{opacity:.5}#ctw .shadow-2xl{--tw-shadow:0 25px 50px -12px rgba(0,0,0,0.25)}#ctw .shadow-2xl,#ctw .shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}#ctw .shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,0.1),0 10px 10px -5px rgba(0,0,0,0.04)}#ctw .shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,0.1),0 1px 2px 0 rgba(0,0,0,0.06)}#ctw .shadow,#ctw .shadow-md{box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}#ctw .shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06)}#ctw .outline-none{outline:2px solid transparent;outline-offset:2px}#ctw .ring-2{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color)}#ctw .ring,#ctw .ring-2{box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 transparent)}#ctw .ring{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color)}#ctw .ring-primary{--tw-ring-color:var(--ctwPrimary)}#ctw .ring-opacity-50{--tw-ring-opacity:0.5}#ctw .filter{--tw-blur:var(--tw-empty,/*!*/ /*!*/);--tw-brightness:var(--tw-empty,/*!*/ /*!*/);--tw-contrast:var(--tw-empty,/*!*/ /*!*/);--tw-grayscale:var(--tw-empty,/*!*/ /*!*/);--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);--tw-invert:var(--tw-empty,/*!*/ /*!*/);--tw-saturate:var(--tw-empty,/*!*/ /*!*/);--tw-sepia:var(--tw-empty,/*!*/ /*!*/);--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}#ctw .\\!filter{--tw-blur:var(--tw-empty,/*!*/ /*!*/)!important;--tw-brightness:var(--tw-empty,/*!*/ /*!*/)!important;--tw-contrast:var(--tw-empty,/*!*/ /*!*/)!important;--tw-grayscale:var(--tw-empty,/*!*/ /*!*/)!important;--tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/)!important;--tw-invert:var(--tw-empty,/*!*/ /*!*/)!important;--tw-saturate:var(--tw-empty,/*!*/ /*!*/)!important;--tw-sepia:var(--tw-empty,/*!*/ /*!*/)!important;--tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/)!important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important}#ctw .blur{--tw-blur:blur(8px)}#ctw .transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}#ctw .duration,#ctw .transition{transition-duration:.15s}#ctw .ease{transition-timing-function:cubic-bezier(.4,0,.2,1)}#ctw *{--tw-ring-inset:var(--tw-empty,/*!*/ /*!*/);--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}#ctw html{-moz-tab-size:4;-o-tab-size:4;tab-size:4;line-height:1.15;-webkit-text-size-adjust:100%}#ctw body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}#ctw hr{height:0;color:inherit}#ctw abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}#ctw b,#ctw strong{font-weight:bolder}#ctw code,#ctw kbd,#ctw pre,#ctw samp{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}#ctw small{font-size:80%}#ctw sub,#ctw sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}#ctw sub{bottom:-.25em}#ctw sup{top:-.5em}#ctw table{text-indent:0;border-color:inherit}#ctw button,#ctw input,#ctw optgroup,#ctw select,#ctw textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}#ctw button,#ctw select{text-transform:none}#ctw [type=button],#ctw [type=reset],#ctw [type=submit],#ctw button{-webkit-appearance:button}#ctw ::-moz-focus-inner{border-style:none;padding:0}#ctw :-moz-focusring{outline:1px dotted ButtonText}#ctw :-moz-ui-invalid{box-shadow:none}#ctw legend{padding:0}#ctw progress{vertical-align:baseline}#ctw ::-webkit-inner-spin-button,#ctw ::-webkit-outer-spin-button{height:auto}#ctw [type=search]{-webkit-appearance:textfield;outline-offset:-2px}#ctw ::-webkit-search-decoration{-webkit-appearance:none}#ctw ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}#ctw summary{display:list-item}#ctw blockquote,#ctw dd,#ctw dl,#ctw figure,#ctw h1,#ctw h2,#ctw h3,#ctw h4,#ctw h5,#ctw h6,#ctw hr,#ctw p,#ctw pre{margin:0}#ctw button{background-color:transparent;background-image:none}#ctw fieldset,#ctw ol,#ctw ul{margin:0;padding:0}#ctw ol,#ctw ul{list-style:none}#ctw html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}#ctw body{font-family:inherit;line-height:inherit}#ctw *,#ctw :after,#ctw :before{box-sizing:border-box;border:0 solid}#ctw hr{border-top-width:1px}#ctw img{border-style:solid}#ctw textarea{resize:vertical}#ctw input::-moz-placeholder,#ctw textarea::-moz-placeholder{opacity:1;color:#9ca3af}#ctw input:-ms-input-placeholder,#ctw textarea:-ms-input-placeholder{opacity:1;color:#9ca3af}#ctw input::placeholder,#ctw textarea::placeholder{opacity:1;color:#9ca3af}#ctw [role=button],#ctw button{cursor:pointer}#ctw table{border-collapse:collapse}#ctw h1,#ctw h2,#ctw h3,#ctw h4,#ctw h5,#ctw h6{font-size:inherit;font-weight:inherit}#ctw a{color:inherit;text-decoration:inherit}#ctw button,#ctw input,#ctw optgroup,#ctw select,#ctw textarea{padding:0;line-height:inherit;color:inherit}#ctw code,#ctw kbd,#ctw pre,#ctw samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}#ctw audio,#ctw canvas,#ctw embed,#ctw iframe,#ctw img,#ctw object,#ctw svg,#ctw video{display:block;vertical-align:middle}#ctw img,#ctw video{max-width:100%;height:auto}#ctw *,#ctw :after,#ctw :before{--tw-border-opacity:1;border-color:rgba(229,231,235,var(--tw-border-opacity))}#ctw .container{width:100%}@media (min-width:640px){#ctw .container{max-width:640px}}@media (min-width:768px){#ctw .container{max-width:768px}}@media (min-width:1024px){#ctw .container{max-width:1024px}}@media (min-width:1280px){#ctw .container{max-width:1280px}}@media (min-width:1536px){#ctw .container{max-width:1536px}}#ctw .aspect-w-1,#ctw .aspect-w-2,#ctw .aspect-w-3,#ctw .aspect-w-4,#ctw .aspect-w-5,#ctw .aspect-w-6,#ctw .aspect-w-7,#ctw .aspect-w-8,#ctw .aspect-w-9,#ctw .aspect-w-10,#ctw .aspect-w-11,#ctw .aspect-w-12,#ctw .aspect-w-13,#ctw .aspect-w-14,#ctw .aspect-w-15,#ctw .aspect-w-16{position:relative;padding-bottom:calc(var(--tw-aspect-h)/var(--tw-aspect-w)*100%)}#ctw .aspect-w-1>*,#ctw .aspect-w-2>*,#ctw .aspect-w-3>*,#ctw .aspect-w-4>*,#ctw .aspect-w-5>*,#ctw .aspect-w-6>*,#ctw .aspect-w-7>*,#ctw .aspect-w-8>*,#ctw .aspect-w-9>*,#ctw .aspect-w-10>*,#ctw .aspect-w-11>*,#ctw .aspect-w-12>*,#ctw .aspect-w-13>*,#ctw .aspect-w-14>*,#ctw .aspect-w-15>*,#ctw .aspect-w-16>*{position:absolute;height:100%;width:100%;top:0;right:0;bottom:0;left:0}#ctw .aspect-none{position:static;padding-bottom:0}#ctw .aspect-none>*{position:static;height:auto;width:auto;top:auto;right:auto;bottom:auto;left:auto}#ctw .aspect-w-1{--tw-aspect-w:1}#ctw .aspect-w-2{--tw-aspect-w:2}#ctw .aspect-w-3{--tw-aspect-w:3}#ctw .aspect-w-4{--tw-aspect-w:4}#ctw .aspect-w-5{--tw-aspect-w:5}#ctw .aspect-w-6{--tw-aspect-w:6}#ctw .aspect-w-7{--tw-aspect-w:7}#ctw .aspect-w-8{--tw-aspect-w:8}#ctw .aspect-w-9{--tw-aspect-w:9}#ctw .aspect-w-10{--tw-aspect-w:10}#ctw .aspect-w-11{--tw-aspect-w:11}#ctw .aspect-w-12{--tw-aspect-w:12}#ctw .aspect-w-13{--tw-aspect-w:13}#ctw .aspect-w-14{--tw-aspect-w:14}#ctw .aspect-w-15{--tw-aspect-w:15}#ctw .aspect-w-16{--tw-aspect-w:16}#ctw .aspect-h-1{--tw-aspect-h:1}#ctw .aspect-h-2{--tw-aspect-h:2}#ctw .aspect-h-3{--tw-aspect-h:3}#ctw .aspect-h-4{--tw-aspect-h:4}#ctw .aspect-h-5{--tw-aspect-h:5}#ctw .aspect-h-6{--tw-aspect-h:6}#ctw .aspect-h-7{--tw-aspect-h:7}#ctw .aspect-h-8{--tw-aspect-h:8}#ctw .aspect-h-9{--tw-aspect-h:9}#ctw .aspect-h-10{--tw-aspect-h:10}#ctw .aspect-h-11{--tw-aspect-h:11}#ctw .aspect-h-12{--tw-aspect-h:12}#ctw .aspect-h-13{--tw-aspect-h:13}#ctw .aspect-h-14{--tw-aspect-h:14}#ctw .aspect-h-15{--tw-aspect-h:15}#ctw .aspect-h-16{--tw-aspect-h:16}#ctw .hover\\:-translate-y-0\\.5:hover{--tw-translate-y:-0.125rem}#ctw .hover\\:-translate-y-0:hover{--tw-translate-y:0px}#ctw .hover\\:bg-gray-100:hover{--tw-bg-opacity:1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}#ctw .hover\\:bg-quaternary:hover{background-color:var(--ctwQuaternary)}#ctw .hover\\:text-gray-50:hover{--tw-text-opacity:1;color:rgba(249,250,251,var(--tw-text-opacity))}#ctw .focus\\:border-0:focus{border-width:0}#ctw .focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}#ctw .focus\\:ring-1:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 transparent)}#ctw .focus\\:ring-primary:focus{--tw-ring-color:var(--ctwPrimary)}@media (prefers-reduced-motion:reduce){#ctw .motion-reduce\\:transform-none{transform:none}#ctw .motion-reduce\\:transition-none{transition-property:none}}@media (min-width:640px){#ctw .sm\\:z-20{z-index:20}#ctw .sm\\:mt-1{margin-top:.25rem}#ctw .sm\\:mb-1{margin-bottom:.25rem}#ctw .sm\\:ml-0{margin-left:0}#ctw .sm\\:mr-0{margin-right:0}#ctw .sm\\:block{display:block}#ctw .sm\\:w-64{width:16rem}#ctw .sm\\:w-96{width:24rem}#ctw .sm\\:animate-fade-in-right{-webkit-animation:fade-in-right .25s ease-out;animation:fade-in-right .25s ease-out}#ctw .sm\\:animate-fade-in-left{-webkit-animation:fade-in-left .25s ease-out;animation:fade-in-left .25s ease-out}#ctw .sm\\:justify-around{justify-content:space-around}#ctw .sm\\:px-2{padding-left:.5rem;padding-right:.5rem}}@media (min-width:768px){#ctw .md\\:h-8{height:2rem}#ctw .md\\:w-8{width:2rem}#ctw .md\\:px-3{padding-left:.75rem;padding-right:.75rem}}@media (min-width:1024px){#ctw .lg\\:h-full{height:100%}#ctw .lg\\:p-2{padding:.5rem}#ctw .lg\\:px-10{padding-left:2.5rem;padding-right:2.5rem}}@media (min-width:1280px){#ctw .xl\\:px-20{padding-left:5rem;padding-right:5rem}}";styleInject(css_248z$1,{insertAt:"top"});var AUTH_ADDRESS="https://staging.catalyst.chat/auth/meeting/token",DEFAULT_AUTOFADE=600,SUPPORT_EMAIL="support@catalyst.chat",SUPPORT_URL="https://catalyst.chat/contact",DEFAULT_WELCOME_MESSAGE="\u{1F44B} Waiting for others to join...",THEMES={default:{primary:"#11c1e8",secondary:"#374151",tertiary:"#4B5563",quaternary:"#6B7280",quinary:"#fff"},light:{primary:"#11c1e8",secondary:"#d4def7",tertiary:"#b4bdc0",quaternary:"#6B7280",quinary:"#fff"},dark:{primary:"#11c1e8",secondary:"#111827",tertiary:"#374151",quaternary:"#4B5563",quinary:"#fff"},night:{primary:"#c471ed",secondary:"#000",tertiary:"#1F2937",quaternary:"#374151",quinary:"#fff"},hoursLight:{primary:"#50c878",secondary:"#e1e2ea",tertiary:"#b4bdc0",quaternary:"#6B7280",quinary:"#fff"},hoursDark:{primary:"#50c878",secondary:"#17171d",tertiary:"#252429",quaternary:"#45a566",quinary:"#fff"}},BUILT_IN_BACKGROUNDS=["https://demo.vectorly.io/virtual-backgrounds/1.jpg","https://demo.vectorly.io/virtual-backgrounds/2.jpg","https://demo.vectorly.io/virtual-backgrounds/3.jpg","https://demo.vectorly.io/virtual-backgrounds/4.jpg","https://demo.vectorly.io/virtual-backgrounds/5.jpg","https://demo.vectorly.io/virtual-backgrounds/6.jpg","https://demo.vectorly.io/virtual-backgrounds/7.jpg","https://demo.vectorly.io/virtual-backgrounds/8.jpg","https://demo.vectorly.io/virtual-backgrounds/9.jpg"];function setThemeColor(t){var e,n=new _temp,i=THEMES.default;if(typeof t=="string"&&t in THEMES)n.ctwPrimary=THEMES[t].primary,n.ctwSecondary=THEMES[t].secondary,n.ctwTertiary=THEMES[t].tertiary,n.ctwQuaternary=THEMES[t].quaternary,n.ctwQuinary=THEMES[t].quinary;else if(typeof t=="object"){var a,c,u,h,s;n.ctwPrimary=(a=t.primary)!=null?a:i.primary,n.ctwSecondary=(c=t.secondary)!=null?c:i.secondary,n.ctwTertiary=(u=t.tertiary)!=null?u:i.tertiary,n.ctwQuaternary=(h=t.quaternary)!=null?h:i.quaternary,n.ctwQuinary=(s=t.quinary)!=null?s:i.quinary}var l=document.createElement("style");document.head.appendChild(l),(e=l.sheet)==null||e.insertRule(":root { -- cssVar.ctwPrimary: "+n.ctwPrimary+`,
              -- cssVar.ctwSecondary: `+n.ctwSecondary+`,
              -- cssVar.ctwTertiary: `+n.ctwTertiary+`,
                -- cssVar.ctwQuaternary: `+n.ctwQuaternary+`,
                  -- cssVar.ctwQuinary: `+n.ctwQuinary+`,
      }`)}function generateUUID(){var t=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var i=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(n=="x"?i:i&3|8).toString(16)});return e}function contactSupport(t){window.open(t!=null?t:SUPPORT_URL,"_blank")}var adjectives=["aback","abaft","abandoned","abashed","aberrant","abhorrent","abiding","abject","ablaze","able","abnormal","aboard","aboriginal","abortive","abounding","abrasive","abrupt","absent","absorbed","absorbing","abstracted","absurd","abundant","abusive","acceptable","accessible","accidental","accurate","acid","acidic","acoustic","acrid","actually","ad","hoc","adamant","adaptable","addicted","adhesive","adjoining","adorable","adventurous","afraid","aggressive","agonizing","agreeable","ahead","ajar","alcoholic","alert","alike","alive","alleged","alluring","aloof","amazing","ambiguous","ambitious","amuck","amused","amusing","ancient","angry","animated","annoyed","annoying","anxious","apathetic","aquatic","aromatic","arrogant","ashamed","aspiring","assorted","astonishing","attractive","auspicious","automatic","available","average","awake","aware","awesome","awful","axiomatic","bad","barbarous","bashful","bawdy","beautiful","befitting","belligerent","beneficial","bent","berserk","best","better","bewildered","big","billowy","bite-sized","bitter","bizarre","black","bloody","blue","blue-eyed","blushing","boiling","boorish","bored","boring","bouncy","boundless","brainy","brash","brave","brawny","breakable","breezy","brief","bright","bright","broad","broken","brown","bumpy","burly","bustling","busy","cagey","calculating","callous","calm","capable","capricious","careful","careless","caring","cautious","ceaseless","certain","changeable","charming","cheap","cheerful","chemical","chief","childlike","chilly","chivalrous","chubby","chunky","clammy","classy","clean","clear","clever","cloistered","cloudy","closed","clumsy","cluttered","coherent","cold","colorful","colossal","combative","comfortable","common","complete","complex","concerned","condemned","confused","conscious","cooing","cool","cooperative","coordinated","courageous","cowardly","crabby","craven","crazy","creepy","crooked","crowded","cruel","cuddly","cultured","cumbersome","curious","curly","curved","curvy","cut","cute","cute","cynical","daffy","daily","damaged","damaging","damp","dangerous","dapper","dark","dashing","dazzling","dead","deadpan","deafening","dear","debonair","decisive","decorous","deep","deeply","defeated","defective","defiant","delicate","delicious","delightful","demonic","delirious","dependent","depressed","deranged","descriptive","deserted","detailed","determined","devilish","didactic","different","difficult","diligent","direful","dirty","disagreeable","disastrous","discreet","disgusted","disgusting","disillusioned","dispensable","distinct","disturbed","divergent","dizzy","domineering","doubtful","drab","draconian","dramatic","dreary","drunk","dry","dull","dusty","dynamic","dysfunctional","eager","early","earsplitting","earthy","easy","eatable","economic","educated","efficacious","efficient","eight","elastic","elated","elderly","electric","elegant","elfin","elite","embarrassed","eminent","empty","enchanted","enchanting","encouraging","endurable","energetic","enormous","entertaining","enthusiastic","envious","equable","equal","erratic","ethereal","evanescent","evasive","even","excellent","excited","exciting","exclusive","exotic","expensive","extra-large","extra-small","exuberant","exultant","fabulous","faded","faint","fair","faithful","fallacious","false","familiar","famous","fanatical","fancy","fantastic","far","far-flung","fascinated","fast","fat","faulty","fearful","fearless","feeble","feigned","female","fertile","festive","few","fierce","filthy","fine","finicky","first","five","fixed","flagrant","flaky","flashy","flat","flawless","flimsy","flippant","flowery","fluffy","fluttering","foamy","foolish","foregoing","forgetful","fortunate","four frail","fragile","frantic","free","freezing","frequent","fresh","fretful","friendly","frightened","frightening","full","fumbling","functional","funny","furry","furtive","future","futuristic","fuzzy ","gabby","gainful","gamy","gaping","garrulous","gaudy","general","gentle","giant","giddy","gifted","gigantic","glamorous","gleaming","glib","glistening","glorious","glossy","godly","good","godlike","goofy","gorgeous","graceful","grandiose","grateful","gratis","gray","greasy","great","greedy","green","grey","grieving","groovy","grotesque","grouchy","grubby","gruesome","grumpy","guarded","guiltless","gullible","gusty","guttural","habitual","half","hallowed","halting","handsome","handsomely","handy","hanging","hapless","happy","hard","harmonious","harsh","hateful","heady","healthy","heartbreaking","hearty","heavenly","heavy","hellish","helpful","helpless","hesitant","hideous","highfalutin","high-pitched","hilarious","hissing","historical","holistic","hollow","homeless","homely","honorable","horrible","hospitable","hot huge","hulking","humdrum","humorous","hungry","hurried","hurt","hushed","husky","hypnotic","hysterical","icky","icy","idiotic","ignorant","ill","illegal","ill-fated","ill-informed","illustrious","imaginary","immense","imminent","impartial","imperfect","impolite","important","imported","impossible","incandescent","incompetent","inconclusive","industrious","incredible","inexpensive","infamous","innate","innocent","inquisitive","insidious","instinctive","intelligent","interesting","internal","invincible","irate","irritating","itchy","jaded","jagged","jazzy","jealous","jittery","jobless","jolly","joyous","judicious","juicy","jumbled","jumpy","juvenile","kaput","keen","kind","kindhearted","kindly","knotty","knowing","knowledgeable","known","labored","lackadaisical","lacking","lame","lamentable","languid","large","last","late","laughable","lavish","lazy","lean","learned","left","legal","lethal","level","lewd","light","like","likeable","limping","literate","little","lively","lively","living","lonely","long","longing","long-term","loose","lopsided","loud","loutish","lovely","loving","low","lowly","lucky","ludicrous","lumpy","lush","luxuriant","lying","lyrical","macabre","macho","maddening","madly","magenta","magical","magnificent","majestic","makeshift","male","malicious","mammoth","maniacal","many","marked","massive","married","marvelous","material","materialistic","mature","mean","measly","meaty","medical","meek","mellow","melodic","melted","merciful","mere","messy","mighty","military","milky","mindless","miniature","minor","miscreant","misty","mixed","moaning","modern","moldy","momentous","motionless","mountainous","muddled","mundane","murky","mushy","mute","mysterious","naive","nappy","narrow","nasty","natural","naughty","nauseating","near","neat","nebulous","necessary","needless","needy","neighborly","nervous","new","next","nice","nifty","nimble","nine","nippy","noiseless","noisy","nonchalant","nondescript","nonstop","normal","nostalgic","nosy","noxious","null","numberless","numerous","nutritious","nutty","oafish","obedient","obeisant","obese","obnoxious","obscene","obsequious","observant","obsolete","obtainable","oceanic","odd","offbeat","old","old-fashioned","omniscient","one","onerous","open","opposite","optimal","orange","ordinary","organic","ossified","outgoing","outrageous","outstanding","oval","overconfident","overjoyed","overrated","overt","overwrought","painful","painstaking","pale","paltry","panicky","panoramic","parallel","parched","parsimonious","past","pastoral","pathetic","peaceful","penitent","perfect","periodic","permissible","perpetual","petite","petite","phobic","physical","picayune","pink","piquant","placid","plain","plant","plastic","plausible","pleasant","plucky","pointless","poised","polite","political","poor","possessive","possible","powerful","precious","premium","present","pretty","previous","pricey","prickly","private","probable","productive","profuse","protective","proud","psychedelic","psychotic","public","puffy","pumped","puny","purple","purring","pushy","puzzled","puzzling","quack","quaint","quarrelsome","questionable","quick","quickest","quiet","quirky","quixotic","quizzical","rabid","racial","ragged","rainy","rambunctious","rampant","rapid","rare","raspy","ratty","ready","real","rebel","receptive","recondite","red","redundant","reflective","regular","relieved","remarkable","reminiscent","repulsive","resolute","resonant","responsible","rhetorical","rich","right","righteous","rightful","rigid","ripe","ritzy","roasted","robust","romantic","roomy","rotten","rough","round","royal","ruddy","rude","rural","rustic","ruthless","sable","sad","safe","salty","same","sassy","satisfying","savory","scandalous","scarce","scared","scary","scattered","scientific","scintillating","scrawny","screeching","second","second-hand","secret","secretive","sedate","seemly","selective","selfish","separate","serious","shaggy","shaky","shallow","sharp","shiny","shivering","shocking","short","shrill","shut","shy","sick","silent","silent","silky","silly","simple","simplistic","sincere","six","skillful","skinny","sleepy","slim","slimy","slippery","sloppy","slow","small","smart","smelly","smiling","smoggy","smooth","sneaky","snobbish","snotty","soft","soggy","solid","somber","sophisticated","sordid","sore","sore","sour","sparkling","special","spectacular","spicy","spiffy","spiky","spiritual","spiteful","splendid","spooky","spotless","spotted","spotty","spurious","squalid","square","squealing","squeamish","staking","stale","standing","statuesque","steadfast","steady","steep","stereotyped","sticky","stiff","stimulating","stingy","stormy","straight","strange","striped","strong","stupendous","stupid","sturdy","subdued","subsequent","substantial","successful","succinct","sudden","sulky","super","superb","superficial","supreme","swanky","sweet","sweltering","swift","symptomatic","synonymous","taboo","tacit","tacky","talented","tall","tame","tan","tangible","tangy","tart","tasteful","tasteless","tasty","tawdry","tearful","tedious","teeny","teeny-tiny","telling","temporary","ten","tender tense","tense","tenuous","terrible","terrific","tested","testy","thankful","therapeutic","thick","thin","thinkable","third","thirsty","thoughtful","thoughtless","threatening","three","thundering","tidy","tight","tightfisted","tiny","tired","tiresome","toothsome","torpid","tough","towering","tranquil","trashy","tremendous","tricky","trite","troubled","truculent","true","truthful","two","typical","ubiquitous","ugliest","ugly","ultra","unable","unaccountable","unadvised","unarmed","unbecoming","unbiased","uncovered","understood","undesirable","unequal","unequaled","uneven","unhealthy","uninterested","unique","unkempt","unknown","unnatural","unruly","unsightly","unsuitable","untidy","unused","unusual","unwieldy","unwritten","upbeat","uppity","upset","uptight","used","useful","useless","utopian","utter","uttermost","vacuous","vagabond","vague","valuable","various","vast","vengeful","venomous","verdant","versed","victorious","vigorous","violent","violet","vivacious","voiceless","volatile","voracious","vulgar","wacky","waggish","waiting","wakeful","wandering","wanting","warlike","warm","wary","wasteful","watery","weak","wealthy","weary","well-groomed","well-made","well-off","well-to-do","wet","whimsical","whispering","white","whole","wholesale","wicked","wide","wide-eyed","wiggly","wild","willing","windy","wiry","wise","wistful","witty","woebegone","womanly","wonderful","wooden","woozy","workable","worried","worthless","wrathful","wretched","wrong","wry","xenophobic","yellow","yielding","young","youthful","yummy","zany","zealous","zesty","zippy","zonked"],nouns=["accelerator","accordion","account","accountant","acknowledgment","acoustic","acrylic","act","action","active","activity","actor","actress","adapter","addition","address","adjustment","adult","advantage","advertisement","advice","afghanistan","africa","aftermath","afternoon","aftershave","afterthought","age","agenda","agreement","air","airbus","airmail","airplane","airport","airship","alarm","albatross","alcohol","algebra","algeria","alibi","alley","alligator","alloy","almanac","alphabet","alto","aluminum","aluminum","ambulance","america","amount","amusement","anatomy","anesthesiologist","anger","angle","angora","animal","anime","ankle","answer","ant","antarctica","anteater","antelope","anthony","anthropology","apartment","apology","apparatus","apparel","appeal","appendix","apple","appliance","approval","april","aquarius","arch","archaeology","archeology","archer","architecture","area","argentina","argument","aries","arithmetic","arm","armadillo","armchair","armenian","army","arrow","art","ash","ashtray","asia","asparagus","asphalt","asterisk","astronomy","athlete","atm","atom","attack","attempt","attention","attic","attraction","august","aunt","australia","australian","author","authorization","authority","authorization","avenue","babies","baboon","baby","back","backbone","bacon","badge","badger","bag","bagel","bagpipe","bail","bait","baker","bakery","balance","balinese","ball","balloon","bamboo","banana","band","bandana","bangladesh","bangle","banjo","bank","bankbook","banker","bar","barbara","barber","barge","baritone","barometer","base","baseball","basement","basin","basket","basketball","bass","bassoon","bat","bath","bathroom","bathtub","battery","battle","bay","beach","bead","beam","bean","bear","beard","beast","beat","beautician","beauty","beaver","bed","bedroom","bee","beech","beef","beer","beet","beetle","beggar","beginner","begonia","behavior","belgian","belief","believe","bell","belt","bench","bengal","beret","berry","bestseller","betty","bibliography","bicycle","bike","bill","billboard","biology","biplane","birch","bird","birth","birthday","bit","bite","black","bladder","blade","blanket","blinker","blizzard","block","blood","blouse","blow","blowgun","blue","board","boat","bobcat","body","bolt","bomb","bomber","bone","bongo","bonsai","book","bookcase","booklet","boot","border","botany","bottle","bottom","boundary","bow","bowl","bowling","box","boy","bra","brace","bracket","brain","brake","branch","brand","brandy","brass","brazil","bread","break","breakfast","breath","brian","brick","bridge","british","broccoli","brochure","broker","bronze","brother","brother-in-law","brow","brown","brush","bubble","bucket","budget","buffer","buffet","bugle","building","bulb","bull","bulldozer","bumper","bun","burglar","burma","burn","burst","bus","bush","business","butane","butcher","butter","button","buzzard","c-clamp","cabbage","cabinet","cable","cactus","cafe","cake","calculator","calculus","calendar","calf","call","camel","camera","camp","can","canada","canadian","cancer","candle","cannon","canoe","canvas","cap","capital","capricorn","captain","caption","car","caravan","carbon","card","cardboard","cardigan","care","carnation","carol","carp","carpenter","carriage","carrot","cart","cartoon","case","cast","castanet","cat","catamaran","caterpillar","cathedral","catsup","cattle","cauliflower","cause","caution","cave","cd","ceiling","celery","celeste","cell","cellar","cello","celsius","cement","cemetery","cent","centimeter","century","ceramic","cereal","certification","chain","chair","chalk","chance","change","channel","character","chard","charles","chauffeur","check","cheek","cheese","cheetah","chef","chemistry","cheque","cherries","cherry","chess","chest","chick","chicken","chicory","chief","child","children","chill","chime","chimpanzee","chin","china","chinese","chive","chocolate","chord","christmas","christopher","chronometer","church","cicada","cinema","circle","circulation","cirrus","citizenship","city","clam","clarinet","class","claus","clave","clef","clerk","click","client","climb","clipper","cloakroom","clock","close","closet","cloth","cloud","cloudy","clover","club","clutch","coach","coal","coast","coat","cobweb","cocktail","cocoa","cod","coffee","coil","coin","coke","cold","collar","college","collision","colombia","colon","colony","color","colt","column","columnist","comb","comfort","comic","comma","command","commission","committee","community","company","comparison","competition","competitor","composer","composition","computer","condition","condor","cone","confirmation","conga","congo","conifer","connection","consonant","continent","control","cook","cooking","copper","copy","copyright","cord","cork","cormorant","corn","cornet","correspondent","cost","cotton","couch","cougar","cough","country","course","court","cousin","cover","cow","cowbell","crab","crack","cracker","craftsman","crate","crawdad","crayfish","crayon","cream","creator","creature","credit","creditor","creek","crib","cricket","crime","criminal","crocodile","crocus","croissant","crook","crop","cross","crow","crowd","crown","crush","cry","cub","cuban","cucumber","cultivator","cup","cupboard","cupcake","curler","currency","current","curtain","curve","cushion","custard","customer","cut","cuticle","cycle","cyclone","cylinder","cymbal","dad","daffodil","dahlia","daisy","damage","dance","dancer","danger","daniel","dash","dashboard","database","date","daughter","david","day","dead","deadline","deal","death","deborah","debt","debtor","decade","december","decimal","decision","decrease","dedication","deer","defense","deficit","degree","delete","delivery","den","denim","dentist","deodorant","department","deposit","description","desert","design","desire","desk","dessert","destruction","detail","detective","development","dew","diamond","diaphragm","dibble","dictionary","dietician","difference","digestion","digger","digital","dill","dime","dimple","dinghy","dinner","dinosaur","diploma","dipstick","direction","dirt","disadvantage","discovery","discussion","disease","disgust","dish","distance","distribution","distributor","diving","division","divorced","dock","doctor","dog","dogsled","doll","dollar","dolphin","domain","donald","donkey","donna","door","dorothy","double","doubt","downtown","dragon","dragonfly","drain","drake","drama","draw","drawbridge","drawer","dream","dredger","dress","dresser","dressing","drill","drink","drive","driver","driving","drizzle","drop","drug","drum","dry","dryer","duck","duckling","dugout","dungeon","dust","eagle","ear","earth","earthquake","ease","east","edge","edger","editor","editorial","education","edward","eel","effect","egg","eggnog","eggplant","egypt","eight","elbow","element","elephant","elizabeth","ellipse","emery","employee","employer","encyclopedia","end","enemy","energy","engine","engineer","engineering","english","enquiry","entrance","environment","epoch","epoxy","equinox","equipment","era","error","estimate","ethernet","ethiopia","euphonium","europe","evening","event","ex-husband","ex-wife","examination","example","exchange","exclamation","exhaust","existence","expansion","experience","expert","explanation","eye","eyebrow","eyelash","eyeliner","face","facilities","fact","factory","fahrenheit","fairies","fall","family","fan","fang","farm","farmer","fat","father","faucet","fear","feast","feather","feature","february","feedback","feeling","feet","felony","female","fender","ferry","ferryboat","fertilizer","fiber","fiberglass","fibre","fiction","field","fifth","fight","fighter","file","find","fine","finger","fir","fire","fired","fireman","fireplace","firewall","fish","fisherman","flag","flame","flare","flat","flavor","flax","flesh","flight","flock","flood","floor","flower","flugelhorn","flute","fly","foam","fog","fold","font","food","foot","football","footnote","force","forecast","forehead","forest","forgery","fork","form","format","fortnight","foundation","fountain","fowl","fox","foxglove","fragrance","frame","france","freckle","freeze","freezer","freighter","french","freon","friction","friday","fridge","friend","frog","front","frost","frown","fruit","fuel","fur","furniture","galley","gallon","game","gander","garage","garden","garlic","gas","gasoline","gate","gateway","gauge","gazelle","gear","gearshift","geese","gemini","gender","geography","geology","geometry","george","geranium","german","germany","ghana","ghost","giant","giraffe","girdle","girl","gladiolus","glass","glider","gliding","glockenspiel","glove","glue","goal","goat","gold","goldfish","golf","gondola","gong","good-bye","goose","gore-tex","gorilla","gosling","government","governor","grade","grain","gram","granddaughter","grandfather","grandmother","grandson","grape","graphic","grass","grasshopper","gray","grease","greece","greek","green","grenade","grey","grill","grip","ground","group","grouse","growth","guarantee","guatemalan","guide","guilty","guitar","gum","gun","gym","gymnast","hacksaw","hail","hair","haircut","halibut","hall","hallway","hamburger","hammer","hamster","hand","handball","handicap","handle","handsaw","harbor","hardboard","hardcover","hardhat","hardware","harmonica","harmony","harp","hat","hate","hawk","head","headlight","headline","health","hearing","heart","heat","heaven","hedge","height","helen","helicopter","helium","hell","helmet","help","hemp","hen","heron","herring","hexagon","hill","himalayan","hip","hippopotamus","history","hobbies","hockey","hoe","hole","holiday","home","honey","hood","hook","hope","horn","horse","hose","hospital","hot","hour","hourglass","house","hovercraft","hub","hubcap","humidity","humor","hurricane","hyacinth","hydrant","hydrofoil","hydrogen","hyena","hygienic","ice","icebreaker","icicle","icon","idea","ikebana","illegal","imprisonment","improvement","impulse","inch","income","increase","index","india","indonesia","industry","ink","innocent","input","insect","instruction","instrument","insulation","insurance","interactive","interest","internet","interviewer","intestine","invention","inventory","invoice","iran","iraq","iris","iron","island","israel","italian","italy","jacket","jaguar","jail","jam","james","january","japan","japanese","jar","jasmine","jason","jaw","jeans","jeep","jeff","jelly","jellyfish","jennifer","jet","jewel","jogging","john","join","joke","joseph","journey","judge","judo","juice","july","jumbo","jump","jumper","june","jury","justice","jute","kale","kamikaze","kangaroo","karate","karen","kayak","kendo","kenneth","kenya","ketchup","kettle","kettledrum","kevin","key","keyboard","keyboarding","kick","kidney","kilogram","kilometer","kimberly","kiss","kitchen","kite","kitten","kitty","knee","knickers","knife","knight","knot","knowledge","kohlrabi","korean","laborer","lace","ladybug","lake","lamb","lamp","lan","land","landmine","language","larch","lasagna","latency","latex","lathe","laugh","laundry","laura","law","lawyer","layer","lead","leaf","learning","leather","leek","leg","legal","lemonade","lentil","leo","leopard","letter","lettuce","level","libra","library","license","lier","lift","light","lightning","lilac","lily","limit","linda","line","linen","link","lion","lip","lipstick","liquid","liquor","lisa","list","literature","litter","liver","lizard","llama","loaf","loan","lobster","lock","locket","locust","look","loss","lotion","love","low","lumber","lunch","lunchroom","lung","lunge","lute","lettuce","lycra","lynx","lyondell","lyre","lyric","macaroni","machine","macrame","magazine","magic","magician","maid","mail","mailbox","mailman","makeup","malaysia","male","mall","mallet","man","manager","mandolin","manicure","manx","map","maple","maraca","marble","march","margaret","margin","maria","marimba","mark","market","married","mary","mascara","mask","mass","match","math","mattock","may","mayonnaise","meal","measure","meat","mechanic","medicine","meeting","melody","memory","men","menu","mercury","message","metal","meteorology","meter","methane","mexican","mexico","mice","michael","michelle","microwave","middle","mile","milk","milkshake","millennium","millimeter","millisecond","mimosa","mind","mine","mini-skirt","minibus","minister","mint","minute","mirror","missile","mist","mistake","mitten","moat","modem","mole","mom","monday","money","monkey","month","moon","morning","morocco","mosque","mosquito","mother","mother-in-law","motion","motorboat","motorcycle","mountain","mouse","moustache","mouth","move","multi-hop","multimedia","muscle","museum","music","musician","mustard","myanmar","nail","name","nancy","napkin","narcissus","nation","neck","need","needle","neon","nepal","nephew","nerve","nest","net","network","news","newsprint","newsstand","nic","nickel","niece","nigeria","night","nitrogen","node","noise","noodle","north","norwegian","nose","note","notebook","notify","novel","november","number","numeric","nurse","nut","nylon","oak","oatmeal","objective","oboe","observation","occupation","ocean","ocelot","octagon","octave","october","octopus","odometer","offence","offer","office","oil","okra","olive","onion","open","opera","operation","ophthalmologist","opinion","option","orange","orchestra","orchid","order","organ","organization","ornament","ostrich","otter","ounce","output","outrigger","oval","oven","overcoat","owl","owner","ox","oxygen","oyster","package","packet","page","pail","pain","paint","pair","pajama","pakistan","palm","pamphlet","pan","pancake","pancreas","panda","pansy","panther","panties","pantry","pants","panty","pantyhose","paper","paperback","parade","parallelogram","parcel","parent","parentheses","park","parrot","parsnip","part","particle","partner","partridge","party","passbook","passenger","passive","pasta","paste","pastor","pastry","patch","path","patient","patio","patricia","paul","payment","pea","peace","peak","peanut","pear","pedestrian","pediatrician","peen","peer-to-peer","pelican","pen","penalty","pencil","pendulum","pentagon","peony","pepper","perch","perfume","period","periodical","peripheral","permission","persian","person","peru","pest","pet","pharmacist","pheasant","philippines","philosophy","phone","physician","piano","piccolo","pickle","picture","pie","pig","pigeon","pike","pillow","pilot","pimple","pin","pine","ping","pink","pint","pipe","pisces","pizza","place","plain","plane","planet","plant","plantation","plaster","plasterboard","plastic","plate","platinum","play","playground","playroom","pleasure","plier","plot","plough","plow","plywood","pocket","poet","point","poison","poland","police","policeman","polish","politician","pollution","polo","polyester","pond","popcorn","poppy","population","porch","porcupine","port","porter","position","possibility","postage","postbox","pot","potato","poultry","pound","powder","power","precipitation","preface","prepared","pressure","price","priest","print","printer","prison","probation","process","processing","produce","product","production","professor","profit","promotion","propane","property","prose","prosecution","protest","protocol","pruner","psychiatrist","psychology","ptarmigan","puffin","pull","puma","pump","pumpkin","punch","punishment","puppy","purchase","purple","purpose","push","pvc","pajama","pyramid","quail","quality","quart","quarter","quartz","queen","question","quicksand","quiet","quill","quilt","quince","quit","quiver","quotation","rabbi","rabbit","racing","radar","radiator","radio","radish","raft","rail","railway","rain","rainbow","raincoat","rainstorm","rake","ramie","random","range","rat","rate","raven","ravioli","ray","rayon","reaction","reading","reason","receipt","recess","record","recorder","rectangle","red","reduction","refrigerator","refund","regret","reindeer","relation","relative","religion","relish","reminder","repair","replace","report","representative","request","resolution","respect","responsibility","rest","restaurant","result","retailer","revolve","revolver","reward","rhinoceros","rhythm","rice","richard","riddle","rifle","ring","rise","risk","river","riverbed","road","roadway","roast","robert","robin","rock","rocket","rod","roll","romania","romanian","ronald","roof","room","rooster","root","rose","rotate","route","router","rowboat","rub","rubber","rugby","rule","run","russia","russian","rutabaga","ruth","sack","sagittarius","sail","sailboat","sailor","salad","salary","sale","salesman","salmon","salt","sampan","samurai","sand","sandra","sandwich","santa","sarah","sardine","satin","saturday","sauce","saudi arabia","sausage","save","saw","saxophone","scale","scallion","scanner","scarecrow","scarf","scene","scent","schedule","school","science","scissors","scooter","scorpio","scorpion","scraper","screen","screw","screwdriver","sea","seagull","seal","seaplane","search","seashore","season","seat","second","secretary","secure","security","seed","seeder","segment","select","selection","self","semicircle","semicolon","sense","sentence","separated","september","servant","server","session","sex","shade","shadow","shake","shallot","shame","shampoo","shape","share","shark","sharon","shears","sheep","sheet","shelf","shell","shield","shingle","ship","shirt","shock","shoe","shoemaker","shop","shorts","shoulder","shovel","show","shrimp","shrine","siamese","siberian","side","sideboard","sidecar","sidewalk","sign","signature","silica","silk","silver","sing","singer","single","sink","sister","size","skate","skiing","skill","skin","skirt","sky","slash","slave","sled","sleep","sleet","slice","slime","slip","slipper","slope","smash","smell","smile","smoke","snail","snake","sneeze","snow","snowboarding","snowflake","snowman","snowplow","snowstorm","soap","soccer","society","sociology","sock","soda","sofa","softball","softdrink","software","soil","soldier","son","song","soprano","sort","sound","soup","sousaphone","soy","soybean","space","spade","spaghetti","spain","spandex","spark","sparrow","spear","specialist","speedboat","sphere","sphinx","spider","spike","spinach","spleen","sponge","spoon","spot","spring","sprout","spruce","spy","square","squash","squid","squirrel","stage","staircase","stamp","star","start","starter","state","statement","station","statistic","steam","steel","stem","step","stepdaughter","stepmother","stepson","steven","stew","stick","stinger","stitch","stock","stocking","stomach","stone","stool","stop","stopsign","stopwatch","store","storm","story","stove","stranger","straw","stream","street","streetcar","stretch","string","structure","study","sturgeon","submarine","substance","subway","success","sudan","suede","sugar","suggestion","suit","summer","sun","sunday","sundial","sunflower","sunshine","supermarket","supply","support","surfboard","surgeon","surname","surprise","susan","sushi","swallow","swamp","swan","sweater","sweatshirt","sweatshop","swedish","sweets","swim","swimming","swing","swiss","switch","sword","swordfish","sycamore","syria","syrup","system","t-shirt","table","tablecloth","tabletop","tachometer","tadpole","tail","tailor","taiwan","talk","tank","tanker","tanzania","target","taste","taurus","tax","taxi","taxicab","tea","teacher","teaching","team","technician","teeth","television","teller","temper","temperature","temple","tempo","tendency","tennis","tenor","tent","territory","test","text","textbook","texture","thailand","theater","theory","thermometer","thing","thistle","thomas","thought","thread","thrill","throat","throne","thumb","thunder","thunderstorm","thursday","ticket","tie","tiger","tights","tile","timbale","time","timer","timpani","tin","tip","tire","titanium","title","toad","toast","toe","toenail","toilet","tom-tom","tomato","ton","tongue","tooth","toothbrush","toothpaste","top","tornado","tortellini","tortoise","touch","tower","town","toy","tractor","trade","traffic","trail","train","tramp","transaction","transmission","transport","trapezoid","tray","treatment","tree","trial","triangle","trick","trigonometry","trip","trombone","trouble","trousers","trout","trowel","truck","trumpet","trunk","tsunami","tub","tuba","tuesday","tugboat","tulip","tuna","tune","turkey","turkish","turn","turnip","turnover","turret","turtle","tv","twig","twilight","twine","twist","typhoon","uganda","ukraine","ukrainian","umbrella","uncle","underclothes","underpants","undershirt","underwear","unit","united kingdom","unshielded","use","utensil","uzbekistan","vacation","vacuum","valley","value","van","aardvark","vase","vault","vegetable","vegetarian","veil","vein","velvet","venezuela","venezuelan","verdict","vermicelli","verse","vessel","vest","veterinarian","vibraphone","vietnam","view","vinyl","viola","violet","violin","virgo","viscose","vise","vision","visitor","voice","volcano","volleyball","voyage","vulture","waiter","waitress","walk","wall","wallaby","wallet","walrus","war","warm","wash","washer","wasp","waste","watch","watchmaker","water","waterfall","wave","wax","way","wealth","weapon","weasel","weather","wedge","wednesday","weed","weeder","week","weight","whale","wheel","whip","whiskey","whistle","white","wholesaler","whorl","wilderness","william","willow","wind","windchime","window","windscreen","windshield","wine","wing","winter","wire","wish","witch","withdrawal","witness","wolf","woman","women","wood","wool","woolen","word","work","workshop","worm","wound","wrecker","wren","wrench","wrinkle","wrist","writer","xylophone","yacht","yak","yam","yard","yarn","year","yellow","yew","yogurt","yoke","yugoslavian","zebra","zephyr","zinc","zipper","zone","zoo","zoology"];function genRandomName(){var t=adjectives[Math.floor(Math.random()*adjectives.length)],e=nouns[Math.floor(Math.random()*nouns.length)];return e=e.charAt(0).toUpperCase()+e.substring(1),t=t.charAt(0).toUpperCase()+t.substring(1),t+e}function useDebounce(t,e){var n=react.exports.useState(t),i=n[0],a=n[1];return react.exports.useEffect(function(){var c=setTimeout(function(){return a(t)},e||500);return function(){clearTimeout(c)}},[t,e]),i}var VidWrapper=React$1.memo(function(t){var e,n=t.track,i=t.isLocal,a=t.disableSelfieMode,c=react.exports.useRef(null),u=react.exports.useState(!1),h=u[0],s=u[1],l=useDebounce(h,250);react.exports.useEffect(function(){var y=c.current;if(!!y)return y.muted=!0,n.attach(y),function(){n.detach(y)}},[n,c]);var m=((e=n.mediaStreamTrack)==null?void 0:e.getSettings().facingMode)!=="environment";return jsxs(Fragment,{children:[l&&jsx("div",{className:"catalyst-ld-1 h-16 w-16 absolute self-center",children:jsx("div",{className:"catalyst-ld-inner"})}),jsx("video",{ref:c,onLoadStart:function(){return s(!0)},onWaiting:function(){return s(!0)},onPlaying:function(){return s(!1)},className:"min-h-0 min-w-0 rounded-lg z-10 h-auto w-full "+(i&&m&&!a?"rm-uncanny-valley":"")+" contain max-vid-height"})]})});function useIsMounted(){var t=react.exports.useRef(!1);return react.exports.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),function(){return t.current}}var ToolbarButton=React$1.memo(function(t){var e=t.ref,n=t.type,i=t.tooltip,a=t.disabled,c=t.disabledTooltip,u=t.onClick,h=t.icon,s=t.inputDevices,l=t.outputDevices,m=t.onIpDeviceClick,y=t.onOpDeviceClick,g=t.bgColor,S=t.iconColor,E=t.selectedOpDevice,x=t.selectedIpDevice,A=t.cstmSupportUrl,F=t.bgRemovalEffect,D=t.setBgRemovalEffect,$=t.bgRemovalEnabled,k=react.exports.useState(!1),j=k[0],U=k[1],W=react.exports.useRef(null),G=react.exports.useState(!1),q=G[0],f=G[1],o=react.exports.useRef(null),v=react.exports.useState(["none","blur",!F||F==="none"||F==="blur"?BUILT_IN_BACKGROUNDS[Math.floor(Math.random()*BUILT_IN_BACKGROUNDS.length)]:F]),b=v[0],T=function(ee){m&&m(ee),U(!1)},_=function(ee){y&&y(ee),U(!1)};return jsx(Tippy,{interactive:!0,triggerTarget:W.current,className:"bg-tertiary font-sans",trigger:"click",disabled:!s&&!l,onShown:function(){U(!0)},onHidden:function(){U(!1),q&&f(!1)},content:l||s?(s==null?void 0:s.length)===0&&!isMobile_1?jsxs("div",{className:"font-sans flex flex-col justify-center items-center text-center text-quinary text-c",children:[jsxs("span",{className:"block mb-1",children:["Catalyst couldn't find any ",n==null?void 0:n.toLowerCase()," devices."]}),jsxs("span",{className:"inline-block mb-1",children:["If you are having trouble,"," ",jsx("a",{className:"text-primary whitespace-nowrap font-semibold",href:"https://docs.catalyst.chat/docs-permissions",target:"_blank",rel:"noreferrer",children:"read our guide here"}),","]}),jsxs("span",{className:"block mb-1",children:["or"," ",jsx("a",{className:"text-primary font-semibold",target:"_blank",rel:"noreferrer",href:A&&(A==null?void 0:A.length)>0?A:SUPPORT_URL,children:"contact support"})]})]}):(s==null?void 0:s.length)!==0&&jsx("div",{children:jsxs("ul",{className:"font-sans list-none m-0 p-0",children:[l&&l.length>0&&jsxs(Fragment,{children:[jsxs("li",{className:"flex items-center text-xs text-quinary font-semibold p-1 border-white border-b border-opacity-20 whitespace-nowrap ",children:[n," Output"]},"input-row"),l==null?void 0:l.map(function(B,ee){var V=B.label.includes("(")?B.label.substring(0,B.label.indexOf("(")):B.label;return jsxs("li",{className:"flex items-center text-xs text-quinary p-1 cursor-pointer whitespace-nowrap",onClick:function(){return _(B)},children:[B.label===(E==null?void 0:E.label)?jsx(FontAwesomeIcon,{icon:faCheckCircle,className:"mr-1 text-primary "}):jsx(FontAwesomeIcon,{icon:faCircle,className:"mr-1 "}),V]},ee)})]}),jsxs("li",{className:"flex items-center text-xs text-quinary font-semibold p-1 border-white border-b border-opacity-20 whitespace-nowrap",children:[n," Input"]},"input-row"),s==null?void 0:s.map(function(B,ee){var V=B.label.includes("(")?B.label.substring(0,B.label.indexOf("(")):B.label;return jsxs("li",{className:"flex items-center text-xs text-quinary p-1 whitespace-nowrap cursor-pointer",onClick:function(){return T(B)},children:[B.label===(x==null?void 0:x.label)?jsx(FontAwesomeIcon,{icon:faCheckCircle,className:"mr-1 text-primary"}):jsx(FontAwesomeIcon,{icon:faCircle,className:"mr-1 "}),V]},ee)}),(n==null?void 0:n.toLowerCase())==="audio"&&jsxs("button",{className:"flex items-center text-xs text-quinary p-1 mt-1 w-full whitespace-nowrap border-white border-t border-opacity-20 focus:outline-none focus:border-0 focus:ring-1 focus:ring-primary",onClick:function(){var ee;return(ee=o.current)==null?void 0:ee.play()},children:[jsx(FontAwesomeIcon,{icon:faVolumeUp,className:"mr-1 "+(q?"text-primary":"text-quinary")}),q?jsxs(Fragment,{children:[" Testing ",n,"..."]}):jsxs(Fragment,{children:[" Test ",n," Output"]}),jsx("audio",{onPlay:function(){return f(!0)},onEnded:function(){return f(!1)},ref:o,children:jsx("source",{src:"https://github.com/Catalyst-Video/catalyst-react/blob/master/src/assets/sounds/audio-test.mp3?raw=true"})})]})," ",(n==null?void 0:n.toLowerCase())==="video"&&$&&jsxs("div",{children:[jsx("li",{className:"flex items-center text-xs text-quinary font-semibold p-2 whitespace-nowrap border-white border-b border-opacity-20",children:"Background Filters"},"input-row"),b.map(function(B,ee){return jsxs("button",{className:"flex items-center text-xs text-quinary p-1 w-full whitespace-nowrap focus:outline-none focus:border-0 focus:ring-1 focus:ring-primary capitalize",onClick:function(){D&&D(B)},children:[jsx(FontAwesomeIcon,{icon:B===F?faCheckCircle:faCircle,className:"mr-1 "+(B===F?"text-primary":"text-quinary")}),jsx("span",{className:"capitalize",children:B==="blur"?"Blur":B==="none"?"None":"Image"})]},"bg-rm"+ee)})]})]})}):null,children:jsxs("div",{className:"inline-block m-1 relative",children:[jsx(Tippy,{content:i,theme:"catalyst",disabled:j||c,zIndex:40,children:jsx("button",{id:n+"-btn",disabled:a,className:"rounded-full w-14 h-14 flex justify-center items-center "+(g||"bg-tertiary hover:bg-quaternary")+" focus:outline-none focus:border-0 ",onClick:u,children:h&&jsx(FontAwesomeIcon,{className:S||"text-quinary  hover:text-gray-50",size:"lg",icon:h})})}),s&&s.length>0&&jsx("button",{disabled:a,ref:e!=null?e:W,className:"absolute z-10 -right-1 -bottom-1 "+(g||"bg-tertiary hover:bg-quaternary ")+"  rounded-full border-4 border-secondary h-6 w-6 flex justify-center items-center focus:outline-none",onClick:function(){return U(function(ee){return!ee})},children:jsx(FontAwesomeIcon,{size:"xs",className:"transition transform hover:-translate-y-0.5 motion-reduce:transition-none motion-reduce:transform-none  "+(S?"text-gray-900":"text-quinary"),icon:j?faChevronUp:faChevronDown})})]})})}),AudioDeviceBtn=function t(e){var n=e.isMuted,i=e.onClick,a=e.onIpSelected,c=e.onOpSelected,u=e.audioDevice,h=e.outputDevice,s=e.cstmSupportUrl,l=react.exports.useState([]),m=l[0],y=l[1],g=react.exports.useState([]),S=g[0],E=g[1],x=react.exports.useState([]),A=x[0],F=x[1],D=react.exports.useState([]),$=D[0],k=D[1],j=useIsMounted();react.exports.useEffect(function(){navigator.mediaDevices.enumerateDevices().then(function(G){if(!!j()){var q=G.filter(function(o){return o.kind==="audioinput"&&o.deviceId});y(q),F(q.map(function(o){return{label:o.label}}));var f=G.filter(function(o){return o.kind==="audiooutput"&&o.deviceId});return E(f),k(f.map(function(o){return{label:o.label}})),G}}).catch(function(G){console.log(G)})},[n]);var U=function(q){var f=m.find(function(o){return o.label===q.label});f&&a&&a(f)},W=function(q){var f=S.find(function(o){return o.label===q.label});f&&c&&c(f)};return jsx(ToolbarButton,{type:"Audio",tooltip:n?"Unmute":"Mute",icon:n?faMicrophoneSlash:faMicrophone,bgColor:n?"bg-quinary  hover:bg-gray-100":void 0,iconColor:n?"text-red":void 0,onClick:i,inputDevices:A,outputDevices:$,onIpDeviceClick:U,onOpDeviceClick:W,selectedIpDevice:u,selectedOpDevice:h,cstmSupportUrl:s})},VidDeviceBtn=function t(e){var n=e.isEnabled,i=e.onClick,a=e.onIpSelected,c=e.videoDevice,u=e.cstmSupportUrl,h=e.bgRemovalEnabled,s=e.bgRemovalEffect,l=e.setBgRemovalEffect,m=react.exports.useState([]),y=m[0],g=m[1],S=react.exports.useState([]),E=S[0],x=S[1],A=useIsMounted();react.exports.useEffect(function(){navigator.mediaDevices.enumerateDevices().then(function(D){if(!!A()){var $=D.filter(function(k){return k.kind==="videoinput"&&k.deviceId});return g($),x($.map(function(k){return{label:k.label}})),D}})},[n]);var F=function($){var k=y.find(function(j){return j.label===$.label});k&&a&&a(k)};return jsx(ToolbarButton,{type:"Video",tooltip:n?"Disable Video":"Enable Video",icon:n?faVideo:faVideoSlash,bgColor:n?void 0:"bg-quinary  hover:bg-gray-100",iconColor:n?void 0:"text-red",onIpDeviceClick:F,onClick:i,bgRemovalEnabled:h,inputDevices:E,selectedIpDevice:c,cstmSupportUrl:u,bgRemovalEffect:s,setBgRemovalEffect:l})},HeaderImg=React$1.memo(function(t){var e=t.color;return jsx("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.0",height:"48",viewBox:"0 0 1561.000000 421.000000",preserveAspectRatio:"xMidYMid meet",className:"fill-current "+(e!=null?e:"text-primary"),children:jsxs("g",{transform:"translate(0.000000,421.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",className:"fill-current "+(e!=null?e:"text-primary"),children:[jsx("path",{d:"M3790 3883 c-614 -58 -1138 -421 -1395 -966 -100 -213 -164 -470 -165 -664 l0 -53 -425 0 -425 0 0 450 0 450 -450 0 -450 0 0 -450 0 -450 448 0 449 0 7 -111 c28 -458 246 -898 591 -1187 298 -250 617 -379 1013 -408 l92 -7 0 427 0 426 -45 0 c-178 0 -425 110 -562 252 -144 149 -242 370 -243 551 l0 57 425 0 425 0 0 53 c0 111 56 279 132 399 141 220 433 388 674 388 l44 0 0 425 0 425 -52 -2 c-29 0 -69 -3 -88 -5z"}),jsx("path",{d:"M10240 2200 l0 -840 175 0 175 0 0 840 0 840 -175 0 -175 0 0 -840z"}),jsx("path",{d:"M5427 2970 c-119 -21 -278 -84 -361 -143 -58 -40 -158 -142 -198 -201 -95 -139 -138 -285 -138 -471 0 -247 79 -437 248 -597 88 -83 181 -138 297 -177 127 -42 218 -54 365 -48 214 9 394 78 530 204 38 36 70 68 70 73 0 4 -52 56 -115 115 l-115 107 -55 -51 c-31 -28 -90 -67 -131 -87 -69 -35 -83 -38 -183 -42 -176 -7 -275 26 -385 129 -207 193 -207 555 0 748 110 103 209 136 385 129 100 -4 114 -7 183 -42 41 -20 100 -59 130 -87 l56 -51 102 93 c57 50 109 97 116 104 20 18 -7 56 -86 121 -83 68 -175 116 -287 149 -75 23 -114 28 -235 31 -80 1 -167 -1 -193 -6z"}),jsx("path",{d:"M7900 2700 l0 -150 -95 0 -95 0 0 -135 0 -135 94 0 95 0 3 -322 c3 -309 4 -325 26 -380 47 -117 156 -201 300 -228 86 -17 241 -8 317 19 104 37 102 32 55 157 -55 147 -50 141 -97 118 -52 -25 -149 -25 -187 -1 -15 10 -36 37 -47 60 -17 38 -19 69 -19 310 l0 267 155 0 155 0 0 135 0 135 -155 0 -155 0 0 150 0 150 -175 0 -175 0 0 -150z"}),jsx("path",{d:"M13510 2700 l0 -150 -95 0 -95 0 0 -135 0 -135 94 0 95 0 3 -322 c3 -309 4 -325 26 -380 47 -117 156 -201 300 -228 86 -17 241 -8 317 19 104 37 102 32 55 157 -55 147 -50 141 -97 118 -52 -25 -149 -25 -187 -1 -15 10 -36 37 -47 60 -17 38 -19 69 -19 310 l0 267 155 0 155 0 0 135 0 135 -155 0 -155 0 0 150 0 150 -175 0 -175 0 0 -150z"}),jsx("path",{d:"M6764 2585 c-105 -19 -181 -43 -259 -82 -38 -19 -74 -38 -78 -43 -9 -8 110 -253 121 -248 4 2 41 20 82 41 167 84 390 84 483 -1 27 -24 53 -80 61 -128 l7 -42 -223 -5 c-235 -5 -288 -13 -393 -61 -74 -33 -120 -79 -157 -153 -28 -57 -32 -75 -32 -147 1 -231 176 -376 454 -376 145 0 241 32 320 106 l50 47 0 -67 0 -66 165 0 165 0 0 403 c0 323 -3 415 -15 466 -45 189 -180 312 -388 355 -91 19 -262 20 -363 1z m416 -775 c0 -73 -24 -125 -77 -169 -101 -84 -289 -79 -355 9 -45 60 -27 154 36 187 48 25 89 31 249 32 l147 1 0 -60z"}),jsx("path",{d:"M9154 2585 c-105 -19 -181 -43 -259 -82 -38 -19 -74 -38 -78 -43 -9 -8 110 -253 121 -248 4 2 41 20 82 41 167 84 390 84 483 -1 27 -24 53 -80 61 -128 l7 -42 -223 -5 c-235 -5 -288 -13 -393 -61 -74 -33 -120 -79 -157 -153 -28 -57 -32 -75 -32 -147 1 -231 176 -376 454 -376 145 0 241 32 320 106 l50 47 0 -67 0 -66 165 0 165 0 0 403 c0 323 -3 415 -15 466 -45 189 -180 312 -388 355 -91 19 -262 20 -363 1z m416 -775 c0 -73 -24 -125 -77 -169 -101 -84 -289 -79 -355 9 -45 60 -27 154 36 187 48 25 89 31 249 32 l147 1 0 -60z"}),jsx("path",{d:"M12585 2593 c-141 -22 -262 -80 -335 -160 -120 -131 -117 -349 5 -462 80 -73 151 -99 383 -137 205 -33 262 -58 262 -113 0 -65 -59 -101 -176 -109 -141 -8 -318 29 -431 92 l-44 25 -30 -64 c-16 -36 -42 -94 -58 -130 l-30 -64 32 -20 c48 -30 200 -78 301 -96 49 -8 139 -15 200 -15 270 0 472 92 546 246 31 65 38 172 17 245 -42 143 -160 214 -433 259 -172 28 -239 48 -269 78 -28 27 -31 48 -13 86 41 92 319 100 506 15 36 -16 66 -28 67 -27 6 12 115 249 115 252 0 10 -127 58 -201 76 -83 21 -339 36 -414 23z"}),jsx("path",{d:"M11007 1964 c263 -612 265 -617 250 -648 -23 -49 -68 -97 -104 -112 -18 -8 -59 -14 -92 -14 -49 0 -72 6 -127 35 -37 19 -68 34 -69 33 -1 -2 -30 -58 -65 -126 -71 -140 -72 -129 27 -177 73 -35 165 -55 258 -55 197 0 346 86 440 254 26 48 389 890 600 1394 l14 32 -172 0 -173 0 -169 -409 c-93 -225 -172 -408 -174 -405 -3 2 -79 185 -171 407 l-166 402 -186 3 -186 2 265 -616z"})]})})});function useLocalStorage(t,e){var n=function(){if(typeof window=="undefined")return e;try{var s=window.localStorage.getItem(t);return s!=null?s:e}catch(l){return console.warn("Error reading localStorage key \u201C"+t+"\u201D:",l),e}},i=react.exports.useState(n),a=i[0],c=i[1],u=function(s){typeof window=="undefined"&&console.warn("Tried setting localStorage key \u201C"+t+"\u201D even though environment is not a client");try{var l=s instanceof Function?s(a):s;window.localStorage.setItem(t,l),c(l),window.dispatchEvent(new Event("local-storage"))}catch(m){console.warn("Error setting localStorage key \u201C"+t+"\u201D:",m)}};return react.exports.useEffect(function(){c(n())},[]),react.exports.useEffect(function(){var h=function(){c(n())};return window.addEventListener("storage",h),window.addEventListener("local-storage",h),function(){window.removeEventListener("storage",h),window.removeEventListener("local-storage",h)}},[]),[a,u]}var SetupView=function t(e){var n=e.audioOn,i=e.videoOn,a=e.setAudioOn,c=e.setVideoOn,u=e.setReady,h=e.userName,s=e.setUserName,l=e.cstmSetupBg,m=e.disableNameField,y=e.cstmSupportUrl,g=react.exports.useState(),S=g[0],E=g[1],x=react.exports.useState(),A=x[0],F=x[1],D=react.exports.useState(),$=D[0],k=D[1],j=react.exports.useState(),U=j[0],W=j[1],G=useLocalStorage("PREFERRED_AUDIO_DEVICE_ID","default"),q=G[0],f=G[1],o=useLocalStorage("PREFERRED_VIDEO_DEVICE_ID","default"),v=o[0],b=o[1],T=useLocalStorage("PREFERRED_OUTPUT_DEVICE_ID","default"),_=T[0],B=T[1],ee=react.exports.useRef(null),V=useIsMounted(),Z=react.exports.useState("linear-gradient(217deg, hsla(356, 90%, 64%, 0.8), hsla(280, 78%, 69%, 0.8), hsla(191, 86%, 49%, 0.8))"),H=Z[0];react.exports.useEffect(function(){if(!(!ee.current||!S)){var J=ee.current;return S.attach(J),function(){S.detach(J),S.stop()}}},[S,ee]),react.exports.useEffect(function(){(!U||!A||!$)&&localStorage&&navigator.mediaDevices.enumerateDevices().then(function(J){if(!!V()){if(!U){var O=J.filter(function(ne){return ne.kind==="audiooutput"&&(ne==null?void 0:ne.deviceId)}),P;if(_&&(P=O.find(function(ne){return(ne==null?void 0:ne.deviceId)===_})),!P){var L;P=O[0],B((L=P)==null?void 0:L.deviceId)}W(P)}if(!A){var re=J.filter(function(ne){return ne.kind==="audioinput"&&(ne==null?void 0:ne.deviceId)}),Y;if(q&&(Y=re.find(function(ne){return(ne==null?void 0:ne.deviceId)===q})),!Y){var C;Y=re[0],f((C=Y)==null?void 0:C.deviceId)}F(Y)}if(!$){var z=J.filter(function(ne){return ne.kind==="videoinput"&&(ne==null?void 0:ne.deviceId)}),I;if(v&&(I=z.find(function(ne){return(ne==null?void 0:ne.deviceId)===v})),!I&&(I=z.find(function(ne){var oe;return(ne==null?void 0:ne.deviceId)===(S==null||(oe=S.mediaStreamTrack.getSettings())==null?void 0:oe.deviceId)}),I&&!v)){var ae;b((ae=I)==null?void 0:ae.deviceId)}k(I)}return U&&A&&$}}),i&&dist.createLocalVideoTrack().then(function(J){if(!!V())return E(J),J})},[]),react.exports.useEffect(function(){A&&dist.createLocalAudioTrack({deviceId:A==null?void 0:A.deviceId}).then(function(J){if(!!V())return f(A==null?void 0:A.deviceId),J}).catch(function(J){console.log(J)})},[A]),react.exports.useEffect(function(){$&&dist.createLocalVideoTrack({deviceId:$==null?void 0:$.deviceId}).then(function(J){if(!!V())return E(J),J}).catch(function(J){console.log(J)})},[$]);var Q=function(){a(function(O){return!O})},te=function(O){if(S){var P;if(((P=S.mediaStreamTrack.getSettings())==null?void 0:P.deviceId)===(O==null?void 0:O.deviceId))return;k(O),b(O==null?void 0:O.deviceId)}},N=function(){if(S)S.stop(),c(!1),E(void 0);else{var O={};$&&(O.deviceId=$==null?void 0:$.deviceId),dist.createLocalVideoTrack(O).then(function(P){if(!!V())return E(P),c(!0),P})}},M=function(O){W(O),B(O==null?void 0:O.deviceId)};return jsxs("div",{className:"h-full w-full flex justify-between items-center flex-col flex-1",style:l?l.length>0?{background:l}:{background:"#f3f5fd"}:{background:H},children:[jsx("span",{id:"setuproom-header",className:"setup-logo mx-2 mt-5",children:jsx(HeaderImg,{color:"text-quinary "})}),jsx("div",{id:"setuproom-cont",className:" flex-col flex-1 text-center mx-3 my-3 rounded-md flex justify-center",children:jsx("div",{id:"setuproom-comp",className:"rounded-2xl my-2 mx-1z-10 overflow-hidden",children:jsxs("div",{className:"w-80 sm:w-96 lg:h-full rounded-t-xl bg-secondary rounded-b-none z-1",children:[jsx("div",{className:"flex justify-center",children:S&&i?jsx(VidWrapper,{track:S,isLocal:!0}):jsx("div",{className:"min-h-0 min-w-0 rounded-lg h-52 w-full bg-black"})}),!m&&jsx("div",{className:"pt-4 w-full flex justify-center",children:jsx("input",{className:"outline-none border-0 bg-gray-300 rounded-2xl px-4 py-1 -mt-8 z-10 text-black  text-center ",placeholder:"Display name",value:h,onChange:function(O){return s(O.target.value)}})}),jsxs("div",{id:"opts",className:"flex flex-row justify-around bg-secondary items-center my-6",children:[jsx(AudioDeviceBtn,{isMuted:!n,onClick:Q,onIpSelected:F,onOpSelected:M,audioDevice:A,outputDevice:U,cstmSupportUrl:y}),jsx(VidDeviceBtn,{isEnabled:S!==void 0&&i,onClick:N,videoDevice:$,onIpSelected:te,cstmSupportUrl:y})]}),jsx("button",{id:"setuproom-but",className:"rounded-b-xl cursor-pointer block outline-none border-0 font-bold text-md h-14 text-quinary  w-full focus:outline-none focus:border-0 bg-primary",onClick:function(){V()&&u(!0)},children:"Join Call"})]})})})]})};function asyncGeneratorStep(t,e,n,i,a,c,u){try{var h=t[c](u),s=h.value}catch(l){n(l);return}h.done?e(s):Promise.resolve(s).then(i,a)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var c=t.apply(e,n);function u(s){asyncGeneratorStep(c,i,a,u,h,"next",s)}function h(s){asyncGeneratorStep(c,i,a,u,h,"throw",s)}u(void 0)})}}function createCommonjsModule(t,e){return e={exports:{}},t(e,e.exports),e.exports}var runtime_1=createCommonjsModule(function(t){var e=function(n){var i=Object.prototype,a=i.hasOwnProperty,c,u=typeof Symbol=="function"?Symbol:{},h=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function m(V,Z,H){return Object.defineProperty(V,Z,{value:H,enumerable:!0,configurable:!0,writable:!0}),V[Z]}try{m({},"")}catch{m=function(Z,H,Q){return Z[H]=Q}}function y(V,Z,H,Q){var te=Z&&Z.prototype instanceof D?Z:D,N=Object.create(te.prototype),M=new _(Q||[]);return N._invoke=o(V,H,M),N}n.wrap=y;function g(V,Z,H){try{return{type:"normal",arg:V.call(Z,H)}}catch(Q){return{type:"throw",arg:Q}}}var S="suspendedStart",E="suspendedYield",x="executing",A="completed",F={};function D(){}function $(){}function k(){}var j={};j[h]=function(){return this};var U=Object.getPrototypeOf,W=U&&U(U(B([])));W&&W!==i&&a.call(W,h)&&(j=W);var G=k.prototype=D.prototype=Object.create(j);$.prototype=G.constructor=k,k.constructor=$,$.displayName=m(k,l,"GeneratorFunction");function q(V){["next","throw","return"].forEach(function(Z){m(V,Z,function(H){return this._invoke(Z,H)})})}n.isGeneratorFunction=function(V){var Z=typeof V=="function"&&V.constructor;return Z?Z===$||(Z.displayName||Z.name)==="GeneratorFunction":!1},n.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,k):(V.__proto__=k,m(V,l,"GeneratorFunction")),V.prototype=Object.create(G),V},n.awrap=function(V){return{__await:V}};function f(V,Z){function H(N,M,J,O){var P=g(V[N],V,M);if(P.type==="throw")O(P.arg);else{var L=P.arg,re=L.value;return re&&typeof re=="object"&&a.call(re,"__await")?Z.resolve(re.__await).then(function(Y){H("next",Y,J,O)},function(Y){H("throw",Y,J,O)}):Z.resolve(re).then(function(Y){L.value=Y,J(L)},function(Y){return H("throw",Y,J,O)})}}var Q;function te(N,M){function J(){return new Z(function(O,P){H(N,M,O,P)})}return Q=Q?Q.then(J,J):J()}this._invoke=te}q(f.prototype),f.prototype[s]=function(){return this},n.AsyncIterator=f,n.async=function(V,Z,H,Q,te){te===void 0&&(te=Promise);var N=new f(y(V,Z,H,Q),te);return n.isGeneratorFunction(Z)?N:N.next().then(function(M){return M.done?M.value:N.next()})};function o(V,Z,H){var Q=S;return function(N,M){if(Q===x)throw new Error("Generator is already running");if(Q===A){if(N==="throw")throw M;return ee()}for(H.method=N,H.arg=M;;){var J=H.delegate;if(J){var O=v(J,H);if(O){if(O===F)continue;return O}}if(H.method==="next")H.sent=H._sent=H.arg;else if(H.method==="throw"){if(Q===S)throw Q=A,H.arg;H.dispatchException(H.arg)}else H.method==="return"&&H.abrupt("return",H.arg);Q=x;var P=g(V,Z,H);if(P.type==="normal"){if(Q=H.done?A:E,P.arg===F)continue;return{value:P.arg,done:H.done}}else P.type==="throw"&&(Q=A,H.method="throw",H.arg=P.arg)}}}function v(V,Z){var H=V.iterator[Z.method];if(H===c){if(Z.delegate=null,Z.method==="throw"){if(V.iterator.return&&(Z.method="return",Z.arg=c,v(V,Z),Z.method==="throw"))return F;Z.method="throw",Z.arg=new TypeError("The iterator does not provide a 'throw' method")}return F}var Q=g(H,V.iterator,Z.arg);if(Q.type==="throw")return Z.method="throw",Z.arg=Q.arg,Z.delegate=null,F;var te=Q.arg;if(!te)return Z.method="throw",Z.arg=new TypeError("iterator result is not an object"),Z.delegate=null,F;if(te.done)Z[V.resultName]=te.value,Z.next=V.nextLoc,Z.method!=="return"&&(Z.method="next",Z.arg=c);else return te;return Z.delegate=null,F}q(G),m(G,l,"Generator"),G[h]=function(){return this},G.toString=function(){return"[object Generator]"};function b(V){var Z={tryLoc:V[0]};1 in V&&(Z.catchLoc=V[1]),2 in V&&(Z.finallyLoc=V[2],Z.afterLoc=V[3]),this.tryEntries.push(Z)}function T(V){var Z=V.completion||{};Z.type="normal",delete Z.arg,V.completion=Z}function _(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(b,this),this.reset(!0)}n.keys=function(V){var Z=[];for(var H in V)Z.push(H);return Z.reverse(),function Q(){for(;Z.length;){var te=Z.pop();if(te in V)return Q.value=te,Q.done=!1,Q}return Q.done=!0,Q}};function B(V){if(V){var Z=V[h];if(Z)return Z.call(V);if(typeof V.next=="function")return V;if(!isNaN(V.length)){var H=-1,Q=function te(){for(;++H<V.length;)if(a.call(V,H))return te.value=V[H],te.done=!1,te;return te.value=c,te.done=!0,te};return Q.next=Q}}return{next:ee}}n.values=B;function ee(){return{value:c,done:!0}}return _.prototype={constructor:_,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(T),!V)for(var Z in this)Z.charAt(0)==="t"&&a.call(this,Z)&&!isNaN(+Z.slice(1))&&(this[Z]=c)},stop:function(){this.done=!0;var V=this.tryEntries[0],Z=V.completion;if(Z.type==="throw")throw Z.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var Z=this;function H(O,P){return N.type="throw",N.arg=V,Z.next=O,P&&(Z.method="next",Z.arg=c),!!P}for(var Q=this.tryEntries.length-1;Q>=0;--Q){var te=this.tryEntries[Q],N=te.completion;if(te.tryLoc==="root")return H("end");if(te.tryLoc<=this.prev){var M=a.call(te,"catchLoc"),J=a.call(te,"finallyLoc");if(M&&J){if(this.prev<te.catchLoc)return H(te.catchLoc,!0);if(this.prev<te.finallyLoc)return H(te.finallyLoc)}else if(M){if(this.prev<te.catchLoc)return H(te.catchLoc,!0)}else if(J){if(this.prev<te.finallyLoc)return H(te.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(V,Z){for(var H=this.tryEntries.length-1;H>=0;--H){var Q=this.tryEntries[H];if(Q.tryLoc<=this.prev&&a.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var te=Q;break}}te&&(V==="break"||V==="continue")&&te.tryLoc<=Z&&Z<=te.finallyLoc&&(te=null);var N=te?te.completion:{};return N.type=V,N.arg=Z,te?(this.method="next",this.next=te.finallyLoc,F):this.complete(N)},complete:function(V,Z){if(V.type==="throw")throw V.arg;return V.type==="break"||V.type==="continue"?this.next=V.arg:V.type==="return"?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):V.type==="normal"&&Z&&(this.next=Z),F},finish:function(V){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var H=this.tryEntries[Z];if(H.finallyLoc===V)return this.complete(H.completion,H.afterLoc),T(H),F}},catch:function(V){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var H=this.tryEntries[Z];if(H.tryLoc===V){var Q=H.completion;if(Q.type==="throw"){var te=Q.arg;T(H)}return te}}throw new Error("illegal catch attempt")},delegateYield:function(V,Z,H){return this.delegate={iterator:B(V),resultName:Z,nextLoc:H},this.method==="next"&&(this.arg=c),F}},n}(t.exports);try{regeneratorRuntime=e}catch{Function("r","regeneratorRuntime = r")(e)}}),AudWrapper=React$1.memo(function(t){var e=t.track,n=t.isLocal,i=t.sinkId,a=react.exports.useRef();return react.exports.useEffect(function(){if(!n){if(a.current=e.attach(),e.sid&&a.current.setAttribute("data-audio-track-id",e.sid),i){var c;(c=a.current)==null||c.setSinkId(i)}return function(){return e.detach().forEach(function(u){return u.remove()})}}},[e,n,i]),null}),useMember=function t(e){var n=react.exports.useState(!1),i=n[0],a=n[1],c=react.exports.useState(!1),u=c[0],h=c[1],s=react.exports.useState(!1),l=s[0],m=s[1],y=react.exports.useState(),g=y[0],S=y[1],E=react.exports.useState([]),x=E[0],A=E[1],F=react.exports.useState([]),D=F[0],$=F[1],k=function(){A(Array.from(e.tracks.values())),$(Array.from(e.tracks.values()).filter(function(G){return G.track!==void 0}))},j=function(){var W=_asyncToGenerator(runtime_1.mark(function G(q){return runtime_1.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e instanceof dist.LocalParticipant){o.next=2;break}throw new Error("not local member: unable to unpublish");case 2:e.unpublishTrack(q),e.emit("localtrackchanged");case 4:case"end":return o.stop()}},G)}));return function(q){return W.apply(this,arguments)}}();react.exports.useEffect(function(){var W=function(v){v.kind===dist.Track.Kind.Audio?a(!0):v.kind===dist.Track.Kind.Video&&h(!0)},G=function(v){v.kind===dist.Track.Kind.Audio?a(!1):v.kind===dist.Track.Kind.Video&&h(!1)},q=function(){e.metadata&&S(e.metadata)},f=function(){m(e.isSpeaking)};return e.on(dist.ParticipantEvent.TrackMuted,W),e.on(dist.ParticipantEvent.TrackUnmuted,G),e.on(dist.ParticipantEvent.MetadataChanged,q),e.on(dist.ParticipantEvent.IsSpeakingChanged,f),e.on(dist.ParticipantEvent.TrackPublished,k),e.on(dist.ParticipantEvent.TrackUnpublished,k),e.on(dist.ParticipantEvent.TrackSubscribed,k),e.on(dist.ParticipantEvent.TrackUnsubscribed,k),e.on("localtrackchanged",k),q(),f(),k(),function(){e.off(dist.ParticipantEvent.TrackMuted,W),e.off(dist.ParticipantEvent.TrackUnmuted,G),e.off(dist.ParticipantEvent.MetadataChanged,q),e.off(dist.ParticipantEvent.IsSpeakingChanged,f),e.off(dist.ParticipantEvent.TrackPublished,k),e.off(dist.ParticipantEvent.TrackUnpublished,k),e.off(dist.ParticipantEvent.TrackSubscribed,k),e.off(dist.ParticipantEvent.TrackUnsubscribed,k),e.off("localtrackchanged",k)}},[e]);var U;return e.audioTracks.forEach(function(W){U=W.isMuted}),U===void 0&&(U=!0),i!==U&&a(U),{isLocal:e instanceof dist.LocalParticipant,isSpeaking:l,isMuted:i,isAudioMuted:i,isVideoMuted:u,publications:x,subscribedTracks:D,metadata:g,unpublishTrack:j}};function useTimeout(t,e){var n=react.exports.useRef(t);react.exports.useEffect(function(){n.current=t},[t]),react.exports.useEffect(function(){if(e!==null){var i=setTimeout(function(){return n.current()},e);return function(){return clearTimeout(i)}}},[e])}var MemberView=React$1.memo(function(t){var e=t.member,n=t.width,i=t.height,a=t.classes,c=t.disableSelfieMode,u=t.displayName,h=t.quality,s=t.onClick,l=react.exports.useState(!0),m=l[0],y=l[1],g=useMember(e),S=g.isLocal,E=g.isMuted,x=g.subscribedTracks,A=react.exports.useState(),F=A[0],D=A[1],$=useInView(),k=$.ref,j=$.inView,U=react.exports.useState(!1),W=U[1];return react.exports.useEffect(function(){if(!!k){var G=j;m!==G&&y(G)}},[k,j,e]),react.exports.useEffect(function(){var G;x.forEach(function(q){q.isSubscribed&&q.kind===dist.Track.Kind.Video&&q.trackName!=="screen"&&!G&&(G=q,W(!0))}),D(G)},[x]),react.exports.useEffect(function(){F instanceof dist.RemoteTrackPublication&&m&&F.setEnabled(!0)},[h,m,F]),useTimeout(function(){F instanceof dist.RemoteTrackPublication&&(F==null||F.setEnabled(m),m&&(F==null||F.setVideoQuality(h!=null?h:livekit_rtc.VideoQuality.HIGH)))},3e3),jsx("div",{className:"m-1 "+a+" cursor-pointer",children:jsxs("div",{ref:k,className:"relative z-0 align-middle self-center overflow-hidden text-center bg-gray-800 flex justify-center rounded-xl "+(e.isSpeaking?"ring-2 ring-primary ring-opacity-50 ":""),style:{height:i,width:n},onClick:s,children:[F!=null&&F.track?jsx(VidWrapper,{track:F.track,isLocal:S,disableSelfieMode:c}):jsx("div",{className:"bg-placeholder w-full h-full bg-primary min-h-full"}),jsxs("div",{className:"absolute bottom-0 left-0 flex text-quinary justify-between p-1 lg:p-2 w-full",children:[jsxs("div",{className:"h-7 md:h-8 not-selectable flex items-center justify-center px-2 py-1 relative",children:[jsx("span",{className:"absolute top-0 left-0 opacity-50 rounded-xl w-full h-full"}),jsx("span",{className:"text-n text-quinary z-30",children:(u!=null?u:S)?e.identity+" (You)":e.identity})]}),E&&jsxs("div",{className:"relative h-7 w-7 md:h-8 md:w-8 flex items-center justify-center p-1",children:[jsx("span",{className:"absolute rounded-full top-0 left-0 opacity-50 z-30 bg-tertiary w-full h-full"}),jsx(FontAwesomeIcon,{icon:faMicrophoneSlash,size:"2x",className:"text-quinary  not-selectable p-2 z-30"})]})]})]})})}),ScreenShareWrapper=function t(e){var n=e.track,i=e.width,a=e.height,c=e.classes,u=e.onClick;return jsx("div",{className:c,onClick:u,children:jsxs("div",{className:"relative z-0 cursor-pointer self-center overflow-hidden text-center bg-gray-800 rounded-lg m-1 flex justify-center",style:{height:a,width:i},children:[jsx(VidWrapper,{track:n,isLocal:!1}),jsx("div",{className:"absolute bottom-0 left-0 flex text-quinary  justify-end p-2 w-full",children:jsxs("div",{className:"relative h-7 w-7 md:h-8 md:w-8 flex items-center justify-center p-1",children:[jsx("span",{className:"absolute rounded-full top-0 left-0 opacity-50 z-30 bg-secondary  w-full h-full"}),jsx(FontAwesomeIcon,{icon:faDesktop,size:"2x",className:"text-quinary  not-selectable p-2 z-30"})]})})]})})},Chat=function t(e){var n=e.chatOpen,i=e.localParticipant,a=e.chatMessages,c=e.setChatMessages,u=e.setChatOpen,h=react.exports.useRef(null),s=react.exports.useState(""),l=s[0],m=s[1],y=new TextEncoder,g=function(x){if(x&&x.length>0&&RegExp(".").test(x)&&(x=x.replace(/</g,"&lt;").replace(/>/g,"&gt;"),i)){var A={type:"ctw-chat",text:x,sender:i.sid},F=y.encode(JSON.stringify(A));i.publishData(F,dist.DataPacket_Kind.RELIABLE),c(function(D){return[].concat(D,[{text:x,sender:i}])}),m("")}};react.exports.useEffect(function(){var E;(E=h.current)==null||E.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},[a,n]);var S=function(x,A){var F=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,D=x.match(F);return D?jsx("a",{target:"_blank",href:D[0],className:(A?"text-quinary ":"text-primary")+" underline",children:D[0]}):x};return jsx(Fragment,{children:n&&jsxs("div",{style:{zIndex:100},className:"chat-cont bg-secondary flex h-full right-0 shadow-2xl sm:z-20 z-50",children:[jsx(Tippy,{content:"Close Chat",theme:"catalyst",placement:"bottom",children:jsx("button",{className:"absolute top-2 left-2 z-50",onClick:function(){return u(function(x){return!x})},children:jsx(FontAwesomeIcon,{id:"chat-close",icon:faTimes,size:"lg",className:"text-quinary "})})}),jsx("div",{id:"chat-zone",className:"flex h-full absolute overflow-x-none inset-0 pt-4 pb-36",children:jsxs("div",{id:"chat-messages",className:"w-full h-auto overflow-x-none overflow-y-auto z-20 inset-0 relative no-scrollbar ",children:[a.map(function(E,x){var A,F;return E.sender instanceof dist.LocalParticipant?jsxs("div",{className:"sent-message flex flex-col items-start content-end p-1 pr-2 ml-20 fade-in-bottom z-40",children:[(x===0||a[x-1].sender!==E.sender)&&jsxs("span",{className:"text-quinary  font-semibold text-xs ml-auto p-1 not-selectable",children:[(A=E.sender)==null?void 0:A.identity," (You)"]}),jsx("div",{className:"bg-primary text-quinary  rounded-tl-2xl rounded-tr-2xl rounded-br-sm rounded-bl-2xl  ml-auto p-2",children:jsx("div",{className:"message break-all px-2 py-1 text-xs",children:S(E.text,!0)})})]},x):jsxs("div",{className:"received-message flex flex-col items-start content-end p-1 pl-2 fade-in-bottom",children:[(x===0||a[x-1].sender!==E.sender)&&jsx("span",{className:"text-quinary  font-semibold text-xs p-1 not-selectable",children:E==null||(F=E.sender)==null?void 0:F.identity}),jsx("div",{className:"bg-gray-100 text-black flex items-center justify-center rounded-tl-2xl rounded-tr-2xl rounded-br-2xl rounded-bl-sm p-2",children:jsx("div",{className:"message break-all px-2 py-1 text-xs",children:S(E.text,!1)})})]},x)}),jsx("div",{ref:h,id:"chat-end",className:"invisible w-full h-1 content-end"})]})}),jsxs("div",{id:"chat-compose-wrapper",className:"w-full absolute bottom-0 left-0 bg-secondary flex z-30 flex-row",children:[jsx("textarea",{id:"chat-compose",placeholder:"Type your message",className:"focus:outline-none focus:border-0 resize-none text-quinary  bg-secondary ml-1",rows:6,value:l,onKeyUp:function(x){x.keyCode===13&&(x.preventDefault(),g(l))},onChange:function(x){return m(x.target.value)}}),jsx("span",{onClick:function(){g(l)},className:"bg-primary mt-2 ml-2 p-2 cursor-pointer fixed right-0 z-30 rounded-xl text-quinary  h-10 mr-1",children:jsx(FontAwesomeIcon,{id:"chat-send",icon:faPaperPlane,size:"lg",className:"text-quinary "})})]})]})})};function useEventListener(t,e,n){var i=react.exports.useRef();react.exports.useEffect(function(){var a=(n==null?void 0:n.current)||window;if(!!(a&&a.addEventListener)){i.current!==e&&(i.current=e);var c=function(h){i!=null&&i.current&&i.current(h)};return a.addEventListener(t,c),function(){a.removeEventListener(t,c)}}},[t,n,e])}var RoomWrapper=function t(e){var n=e.roomState,i=e.speakerMode,a=e.setSpeakerMode,c=e.chatOpen,u=e.setChatOpen,h=e.disableChat,s=e.disableSelfieMode,l=e.chatMessages,m=e.setChatMessages,y=e.cstmWelcomeMsg,g=e.handleComponentRefresh,S=n.isConnecting,E=n.error,x=n.localMember,A=n.members,F=n.room,D=react.exports.useState(0),$=D[0],k=D[1],j=react.exports.useState(!1),U=j[0],W=j[1],G=react.exports.useState(),q=G[0],f=G[1],o=react.exports.useRef(null),v=react.exports.useState({width:"0px",height:"0px"}),b=v[0],T=v[1],_=useFullScreenHandle(),B=useIsMounted(),ee=function(){if(!!B()){var te=4,N=0,M=0;o.current&&(N=o.current.offsetWidth-te*2,M=o.current.offsetHeight-te*2);for(var J=0,O=1,P=(A.length<1?1:A.length)+$+(A.length<2?1:0);O<5e3;){var L=V(O,P,N,M,te);if(L===!1){J=O-1;break}O++}J=J-te*2,T({width:J+"px",height:J*.5625+"px"})}},V=function(te,N,M,J,O){O===void 0&&(O=10);for(var P=0,L=0,re=te*.75+O*2;P<N;)L+te>M&&(L=0,re=re+te*.75+O*2),L=L+te+O*2,P++;return re>J?!1:te};if(useEventListener("load",ee),useEventListener("resize",ee),useTimeout(function(){!B()||W(!0)},8e3),react.exports.useEffect(function(){if(B()){var Q;q||f((Q=A[0])==null?void 0:Q.sid),ee()}},[A,$,c,_.active,i]),A.length===0||E||!F||S)return jsxs("div",{className:"absolute not-selectable top-0 left-1 w-full h-full flex justify-center items-center text-xl text-quinary",children:[jsxs("div",{className:"flex flex-col items-center justify-between p-2",children:[jsxs("div",{className:"catalyst-ld catalyst-ld-1 h-16 w-16",children:[jsx("div",{className:"catalyst-ld-outer"}),jsx("div",{className:"catalyst-ld-inner"})]}),jsxs("div",{className:"pt-4",children:[E&&jsxs("span",{children:["\u26A0\uFE0F ",E.message]}),S&&jsx("span",{children:"\u26A1 Connecting..."}),!F&&!S&&!E&&jsx("span",{children:"\u{1F680} Preparing room..."}),A.length===0&&F&&!S&&jsx("span",{children:y!=null?y:DEFAULT_WELCOME_MESSAGE})]})]}),U&&jsxs("div",{className:"absolute bottom-0 flex flex-col py-2 justify-center w-full animate-fade-in-up",children:[jsx("div",{className:"py-1 text-sm text-center",children:"Having connection issues?"}),jsxs("button",{className:"cursor-pointer focus:border-0 focus:outline-none text-center",onClick:function(){F==null||F.disconnect(),g()},children:[jsx("span",{className:"pr-2 text-primary text-base",children:"Refresh"}),jsx(FontAwesomeIcon,{icon:faSync,size:"sm",className:"inline text-primary"})]})]})]});var Z,H=[];return A.forEach(function(Q){Q.videoTracks.forEach(function(te){te.trackName==="screen"&&te.track&&(Z=te.track,H.includes(Z)||(H=[].concat(H,[Z]),q!==Z.sid&&H.length!=$&&B()&&f(Z.sid)))})}),H.length!=$&&B()&&(k(H.length),!A.find(function(Q){return Q.sid===q})&&!H.find(function(Q){return Q.sid===q})&&f(A[0].sid)),jsxs(Fragment,{children:[!i&&jsxs("div",{id:"remote-vid-wrapper",ref:o,className:"flex justify-center content-center items-center flex-wrap align-middle z-2 w-full h-full max-h-screen max-w-screen box-border animate-fade-in-left",children:[H&&H.map(function(Q,te){return jsx(ScreenShareWrapper,{track:Q,height:b.height,width:b.width,onClick:function(){f(Q.sid),a(function(M){return!M})}},te+"-screen")}),A.map(function(Q,te){return jsx(MemberView,{member:Q,height:b.height,width:b.width,disableSelfieMode:s,quality:te>4?livekit_rtc.VideoQuality.LOW:livekit_rtc.VideoQuality.HIGH,onClick:function(){f(Q.sid),a(function(M){return!M})}},Q.identity)}),A.length===1&&jsx("div",{className:"relative z-0 inline-block align-middle self-center overflow-hidden text-center m-1 bg-gray-800 rounded-xl",style:{height:b.height,width:b.width},onClick:function(){return a(function(te){return!te})},children:jsx("div",{className:"absolute not-selectable top-0 left-1 w-full h-full flex justify-center items-center z-0 text-c text-quinary ",children:jsx("span",{children:y!=null?y:DEFAULT_WELCOME_MESSAGE})})})]}),i&&jsxs("div",{className:"speaker-view flex z-20 w-full justify-center sm:justify-around  animate-fade-in-right",children:[jsxs("div",{className:"speaker-vid flex flex-col p-1 justify-center content-center",children:[A.map(function(Q,te){if(Q.sid===q){var N;return jsx(MemberView,{member:Q!=null?Q:A[0],height:"100%",width:"100%",disableSelfieMode:s,classes:"aspect-w-16 aspect-h-9",quality:livekit_rtc.VideoQuality.HIGH,onClick:function(){return a(function(J){return!J})}},(N=Q.identity)!=null?N:"first-vid")}else return}),H.map(function(Q){if(Q.sid===q)return jsx(ScreenShareWrapper,{track:Q,height:"100%",width:"100%",classes:"aspect-w-16 aspect-h-9",onClick:function(){return a(function(N){return!N})}},"main-screen")})]}),jsxs("div",{className:"other-vids flex p-1 justify-center content-center no-scrollbar overflow-x-auto top-0 left-0",onClick:function(){return a(function(te){return!te})},children:[A.length===1&&jsx(Fragment,{children:jsx("div",{className:"box ml-1 mr-1 w-full sm:mt-1 sm:mb-1 sm:ml-0 sm:mr-0 aspect-w-16 aspect-h-9 bg-gray-800 rounded-xl",children:jsx("div",{className:"absolute not-selectable top-0 left-1 w-full h-full flex justify-center items-center z-0 text-c text-quinary  text-center px-1 sm:px-2 md:px-3 ",children:jsx("span",{children:y!=null?y:DEFAULT_WELCOME_MESSAGE})})})}),H&&H.map(function(Q,te){if(Q.sid!==q)return jsx(ScreenShareWrapper,{track:Q,height:"100%",width:"100%",classes:"box w-full vid-p h-auto aspect-w-16 aspect-h-9",onClick:function(){f(Q.sid),a(function(M){return!M})}},"sidebar-screen-"+te)}),A.map(function(Q,te){if(Q.sid!==q)return jsx(MemberView,{member:Q,height:"100%",width:"100%",disableSelfieMode:s,classes:"box vid-p w-full h-auto aspect-w-16 aspect-h-9",quality:te>4?livekit_rtc.VideoQuality.LOW:livekit_rtc.VideoQuality.HIGH,onClick:function(){f(Q.sid),a(function(M){return!M})}},Q.identity)})]})]}),!h&&jsx(Chat,{chatOpen:c,setChatOpen:u,localParticipant:x,chatMessages:l,setChatMessages:m})]})},HeaderLogo=React$1.memo(function(t){var e=t.alwaysBanner;return jsxs("div",{id:"header",children:[jsx("div",{className:"absolute left-0 top-0 block w-full text-center bg-primary p-1 text-quinary text-sm font-semibold z-40 "+(e?"":"header-bar"),children:"Powered by Catalyst"}),!e&&jsx("div",{className:"absolute z-40 hidden sm:block not-selectable top-2 left-2",children:jsx("div",{id:"header-img-wrapper",className:"inline bg-transparent header-img focus:border-0 focus:outline-none",children:jsx(HeaderImg,{})})}),jsx("div",{className:"hidden ring-2 ring-primary ring-opacity-50"})]})}),initBgFilter=function(){var t=_asyncToGenerator(runtime_1.mark(function e(n,i,a){return runtime_1.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(a&&a.length>0&&a!=="none"&&n.length>0)){u.next=3;break}if(!(i!=null&&i.mediaStreamTrack)){u.next=3;break}return u.abrupt("return",new vectorly_filters.exports.BackgroundFilter(i.mediaStreamTrack,{token:n!=null?n:"BG_REMOVAL_TOKEN",background:a,blurRadius:6}));case 3:return u.abrupt("return",null);case 4:case"end":return u.stop()}},e)}));return function(n,i,a){return t.apply(this,arguments)}}(),applyBgFilterToTracks=function(){var t=_asyncToGenerator(runtime_1.mark(function e(n,i){var a;return runtime_1.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!i){u.next=5;break}return u.next=3,i.getOutput();case 3:a=u.sent,n.forEach(function(h){h.kind==="video"&&!h.name.includes("screen")&&(h.mediaStreamTrack=a.getVideoTracks()[0])});case 5:return u.abrupt("return",n);case 6:case"end":return u.stop()}},e)}));return function(n,i){return t.apply(this,arguments)}}(),applyBgFilterToTrack=function(){var t=_asyncToGenerator(runtime_1.mark(function e(n,i){return runtime_1.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!i){c.next=3;break}return c.next=3,i.changeInput(n);case 3:case"end":return c.stop()}},e)}));return function(n,i){return t.apply(this,arguments)}}(),Toolbar=function t(e){var n,i,a,c,u,h,s=e.room,l=e.onLeave,m=e.setSpeakerMode,y=e.chatMessages,g=e.updateOutputDevice,S=e.outputDevice,E=e.chatOpen,x=e.bgRemoval,A=e.bgRemovalKey,F=e.bgFilter,D=e.setBgFilter,$=e.setChatOpen,k=e.disableChat,j=e.cstmSupportUrl,U=useMember(s.localParticipant),W=U.publications,G=U.isMuted,q=U.unpublishTrack,f=react.exports.useState(),o=f[0],v=f[1],b=react.exports.useState(),T=b[0],_=b[1],B=react.exports.useState(),ee=B[0],V=B[1],Z=react.exports.useState(),H=Z[0],Q=Z[1],te=react.exports.useState(),N=te[0],M=te[1],J=useLocalStorage("PREFERRED_AUDIO_DEVICE_ID","default"),O=J[0],P=J[1],L=useLocalStorage("PREFERRED_VIDEO_DEVICE_ID","default"),re=L[0],Y=L[1],C=react.exports.useState(!1),z=C[0],I=C[1],ae=react.exports.useState(!!(x&&x!=="none")),ne=ae[0],oe=ae[1],ve=react.exports.useState(x!=null?x:"none"),de=ve[0],Se=ve[1],we=react.exports.useRef(null),_e=useIsMounted();react.exports.useEffect(function(){v(W.find(function(ke){return ke.kind===dist.Track.Kind.Audio})),_(W.find(function(ke){return ke.kind===dist.Track.Kind.Video&&ke.trackName!=="screen"})),V(W.find(function(ke){return ke.kind===dist.Track.Kind.Video&&ke.trackName==="screen"}))},[W]),react.exports.useEffect(function(){!k&&y.length>0&&y[y.length-1].sender!==s.localParticipant&&!E&&(I(!0),setTimeout(function(){!_e()||I(!1)},2e3))},[y]),react.exports.useEffect(function(){(!H||!N)&&navigator.mediaDevices.enumerateDevices().then(function(ke){if(!H){var ce=ke.filter(function(ue){return ue.kind==="audioinput"&&ue.deviceId}),X;if(O&&(X=ce.find(function(ue){return ue.deviceId===O})),!X){var K;X=(K=ce.find(function(ue){var Ce;return ue.deviceId===(o==null||(Ce=o.audioTrack)==null?void 0:Ce.mediaStreamTrack.getSettings().deviceId)}))!=null?K:ce[0]}Q(X)}if(!N){var se=ke.filter(function(ue){return ue.kind==="videoinput"&&ue.deviceId}),fe;if(re&&(fe=se.find(function(ue){return ue.deviceId===re})),!fe){var pe;fe=(pe=se.find(function(ue){var Ce;return ue.deviceId===(T==null||(Ce=T.videoTrack)==null?void 0:Ce.mediaStreamTrack.getSettings().deviceId)}))!=null?pe:se[0]}M(fe)}}).catch(function(ke){console.log(ke)})},[o,T]),react.exports.useEffect(function(){var ke;H&&(H==null?void 0:H.deviceId)!==(o==null||(ke=o.audioTrack)==null?void 0:ke.mediaStreamTrack.getSettings().deviceId)&&(H==null?void 0:H.deviceId)!==O&&(P(H==null?void 0:H.deviceId),dist.createLocalAudioTrack({deviceId:H==null?void 0:H.deviceId}).then(function(ce){o&&q(o.track),s.localParticipant.publishTrack(ce)}).catch(function(ce){console.log(ce)}))},[H]),react.exports.useEffect(function(){var ke;N&&(N==null?void 0:N.deviceId)!==(T==null||(ke=T.videoTrack)==null?void 0:ke.mediaStreamTrack.getSettings())&&N&&(N==null?void 0:N.deviceId)!==re&&(Y(N==null?void 0:N.deviceId),dist.createLocalVideoTrack({deviceId:N==null?void 0:N.deviceId}).then(function(){var ce=_asyncToGenerator(runtime_1.mark(function X(K){var se;return runtime_1.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(T&&q(T.track),se=K,!(de&&F&&!isMobile_1)){pe.next=8;break}return pe.next=5,applyBgFilterToTrack(K.mediaStreamTrack,F);case 5:return pe.next=7,F.getOutputTrack();case 7:se=pe.sent;case 8:s.localParticipant.publishTrack(se);case 9:case"end":return pe.stop()}},X)}));return function(X){return ce.apply(this,arguments)}}()).catch(function(ce){console.log(ce)}))},[N]);var ye=function(){var ke=_asyncToGenerator(runtime_1.mark(function ce(){var X,K,se,fe;return runtime_1.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(X=F,!(!X&&T&&A.length>0&&!isMobile_1)){ue.next=5;break}dist.createLocalVideoTrack({deviceId:N==null?void 0:N.deviceId}).then(function(){var Ce=_asyncToGenerator(runtime_1.mark(function ie(ge){return runtime_1.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return T&&q(T.track),Ie.next=3,initBgFilter(A,T.track,de);case 3:if(X=Ie.sent,D(X),oe(!0),!X){Ie.next=10;break}return Ie.next=9,X.getOutputTrack();case 9:ge=Ie.sent;case 10:s.localParticipant.publishTrack(ge);case 11:case"end":return Ie.stop()}},ie)}));return function(ie){return Ce.apply(this,arguments)}}()).catch(function(Ce){console.log(Ce)}),ue.next=30;break;case 5:if(!X){ue.next=30;break}if(de!=="none"){ue.next=13;break}return ue.next=9,X.disable();case 9:se=ue.sent,se&&(K=se.getVideoTracks()[0],K&&(T&&q(T.track),s.localParticipant.publishTrack(K),oe(!1))),ue.next=30;break;case 13:if(ne){ue.next=22;break}return ue.next=16,X.enable();case 16:if(fe=ue.sent,!fe){ue.next=22;break}return ue.next=20,X.getOutputTrack();case 20:K=ue.sent,K&&(T&&q(T.track),s.localParticipant.publishTrack(K),oe(!0));case 22:if(!(de==="blur"&&X.background!=="blur")){ue.next=27;break}return ue.next=25,X.changeBackground("blur");case 25:ue.next=30;break;case 27:if(X.background===de){ue.next=30;break}return ue.next=30,X.changeBackground(de);case 30:case"end":return ue.stop()}},ce)}));return function(){return ke.apply(this,arguments)}}();react.exports.useEffect(function(){ye()},[de]);var Ee=function(){if(T!=null&&T.track)T&&q(T.track);else{var ce={};N&&(ce.deviceId=N==null?void 0:N.deviceId),dist.createLocalVideoTrack(ce).then(function(){var X=_asyncToGenerator(runtime_1.mark(function K(se){var fe;return runtime_1.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(fe=se,!(de&&F&&!isMobile_1)){ue.next=7;break}return ue.next=4,applyBgFilterToTrack(se.mediaStreamTrack,F);case 4:return ue.next=6,F.getOutputTrack();case 6:fe=ue.sent;case 7:s.localParticipant.publishTrack(fe);case 8:case"end":return ue.stop()}},K)}));return function(K){return X.apply(this,arguments)}}()).catch(function(X){console.log(X)})}},Te=function(){if(!o||G)if(o)o.unmute();else{var ce={};H&&(ce.deviceId=H==null?void 0:H.deviceId),dist.createLocalAudioTrack(ce).then(function(X){s.localParticipant.publishTrack(X)}).catch(function(X){console.log(X)})}else o.mute()};return jsxs("div",{id:"toolbar",className:E?"chat-open-shift":"",children:[jsx(AudioDeviceBtn,{isMuted:!o||G,onIpSelected:Q,onOpSelected:g,onClick:Te,audioDevice:H,outputDevice:S,cstmSupportUrl:j}),jsx(VidDeviceBtn,{isEnabled:!!(T!=null&&T.track),onIpSelected:M,onClick:Ee,videoDevice:N,bgRemovalEnabled:A.length>0&&!isMobile_1,cstmSupportUrl:j,bgRemovalEffect:de,setBgRemovalEffect:Se}),!isMobile_1&&jsx(ToolbarButton,{type:"screenshare",tooltip:ee!=null&&ee.track?"Stop Sharing":"Share Screen",icon:faDesktop,bgColor:ee!=null&&ee.track?"bg-primary":"bg-tertiary hover:bg-quaternary",onClick:ee!=null&&ee.track?function(){q(ee.track)}:function(){navigator.mediaDevices.getDisplayMedia({video:{width:dist.VideoPresets.fhd.resolution.width,height:dist.VideoPresets.fhd.resolution.height},audio:!0}).then(function(ke){s.localParticipant.publishTrack(ke.getTracks()[0],{name:"screen",videoEncoding:{maxBitrate:3e6,maxFramerate:30}}).then(function(ce){m(!0)})}).catch(function(ke){console.log("Error sharing screen: "+ke)})}}),!k&&jsx(Tippy,{visible:z,arrow:!1,onTrigger:function(){return $(!0)},content:jsxs("div",{className:"text-xs",children:[jsxs("strong",{children:[(n=y[y.length-1])==null||(i=n.sender)==null?void 0:i.identity,":"]}),jsx("br",{}),((a=y[y.length-1])==null?void 0:a.text.substring(0,((c=y[y.length-1])==null?void 0:c.text.length)<40?(u=y[y.length-1])==null?void 0:u.text.length:40))+(((h=y[y.length-1])==null?void 0:h.text.length)>40?"...":"")]}),theme:"catalyst",triggerTarget:we.current,children:jsx("div",{ref:we,className:"inline-block relative",children:jsx(ToolbarButton,{type:"chat",tooltip:"Toggle Chat",disabledTooltip:z,icon:faCommentAlt,bgColor:E?"bg-primary":"bg-tertiary hover:bg-quaternary  ",onClick:function(){$(function(ce){return!ce})}})})}),l&&jsx(ToolbarButton,{type:"endcall",tooltip:"End Call",icon:faPhoneSlash,bgColor:"bg-red",onClick:function(){s.disconnect(),l(s)}})]})},useRoom=function t(e){var n=react.exports.useState(),i=n[0],a=n[1],c=react.exports.useState(!1),u=c[0],h=c[1],s=react.exports.useState(),l=s[0],m=s[1],y=react.exports.useState([]),g=y[0],S=y[1],E=react.exports.useState([]),x=E[0],A=E[1],F=react.exports.useState(),D=F[0],$=F[1],k=react.exports.useCallback(function(){var U=_asyncToGenerator(runtime_1.mark(function W(G,q,f){var o,v,b;return runtime_1.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return h(!0),_.prev=1,_.next=4,dist.connect(G,q,f);case 4:return o=_.sent,a(o),$(o.localParticipant),v=function(){var ee=Array.from(o.participants.values()),V=[o.localParticipant];V.push.apply(V,ee),sortMembers(V,o.localParticipant),S(V)},b=function(ee){if(v(),!(ee&&ee.kind!==dist.Track.Kind.Audio)){var V=[];o.participants.forEach(function(Z){Z.audioTracks.forEach(function(H){H.track&&H.kind===dist.Track.Kind.Audio&&V.push(H.track)})}),A(V)}},o.once(dist.RoomEvent.Disconnected,function(){setTimeout(function(){return a(void 0)}),o.off(dist.RoomEvent.ParticipantConnected,v),o.off(dist.RoomEvent.ParticipantDisconnected,v),o.off(dist.RoomEvent.ActiveSpeakersChanged,v),o.off(dist.RoomEvent.TrackSubscribed,b),o.off(dist.RoomEvent.TrackUnsubscribed,b)}),o.on(dist.RoomEvent.ParticipantConnected,v),o.on(dist.RoomEvent.ParticipantDisconnected,v),o.on(dist.RoomEvent.ActiveSpeakersChanged,v),o.on(dist.RoomEvent.TrackSubscribed,b),o.on(dist.RoomEvent.TrackUnsubscribed,b),h(!1),b(),_.abrupt("return",o);case 20:return _.prev=20,_.t0=_.catch(1),h(!1),m(_.t0),_.abrupt("return",void 0);case 25:case"end":return _.stop()}},W,null,[[1,20]])}));return function(W,G,q){return U.apply(this,arguments)}}(),[]),j=function(){(i==null?void 0:i.state)!=dist.RoomState.Disconnected&&(i==null||i.disconnect())};return{connectAll:k,disconnectAll:j,isConnecting:u,room:i,error:l,localMember:D,members:g,audioTracks:x}};function sortMembers(t,e){if(t.sort(function(i,a){var c,u,h,s;if(i.isSpeaking&&a.isSpeaking)return a.audioLevel-i.audioLevel;if(i.isSpeaking!==a.isSpeaking)return i.isSpeaking?-1:1;if(i.lastSpokeAt!==a.lastSpokeAt){var l,m,y,g,S=(l=(m=i.lastSpokeAt)==null?void 0:m.getTime())!=null?l:0,E=(y=(g=a.lastSpokeAt)==null?void 0:g.getTime())!=null?y:0;return E-S}var x=i.videoTracks.size>0,A=a.videoTracks.size>0;return x!==A?x?-1:1:((c=(u=i.joinedAt)==null?void 0:u.getTime())!=null?c:0)-((h=(s=a.joinedAt)==null?void 0:s.getTime())!=null?h:0)}),e){var n=t.indexOf(e);n>=0&&(t.splice(n,1),t.length>0?t.splice(1,0,e):t.push(e))}}function useReadLocalStorage(t){var e=function(){if(typeof window=="undefined")return null;try{var u=window.localStorage.getItem(t);return u!=null?u:null}catch(h){return console.warn("Error reading localStorage key \u201C"+t+"\u201D:",h),null}},n=react.exports.useState(e),i=n[0],a=n[1];return react.exports.useEffect(function(){a(e())},[]),react.exports.useEffect(function(){var c=function(){a(e())};return window.addEventListener("storage",c),window.addEventListener("local-storage",c),function(){window.removeEventListener("storage",c),window.removeEventListener("local-storage",c)}},[]),i}var CatalystChatView=function t(e){var n=e.token,i=e.meta,a=e.fade,c=e.disableChat,u=e.disableSelfieMode,h=e.disableRefreshBtn,s=e.cstmWelcomeMsg,l=e.cstmSupportUrl,m=e.arbData,y=e.bgRemoval,g=e.bgRemovalKey,S=e.handleReceiveArbData,E=e.onJoinCall,x=e.onMemberJoin,A=e.onMemberLeave,F=e.onLeaveCall,D=e.handleComponentRefresh,$=useFullScreenHandle(),k=react.exports.useState(0),j=k[0],U=k[1],W=react.exports.useState(!1),G=W[0],q=W[1],f=react.exports.useState(!1),o=f[0],v=f[1],b=react.exports.useState([]),T=b[0],_=b[1],B=react.exports.useState(!1),ee=B[0],V=B[1],Z=react.exports.useState(),H=Z[0],Q=Z[1],te=react.exports.useState(),N=te[0],M=te[1],J=useRoom(),O=useIsMounted(),P=useReadLocalStorage("PREFERRED_AUDIO_DEVICE_ID"),L=useReadLocalStorage("PREFERRED_VIDEO_DEVICE_ID"),re=useLocalStorage("PREFERRED_OUTPUT_DEVICE_ID","default"),Y=re[0],C=re[1],z=react.exports.useRef(null),I=react.exports.useRef(null),ae=react.exports.useRef(null),ne=new TextDecoder,oe=function(){var we=_asyncToGenerator(runtime_1.mark(function _e(ye){var Ee,Te,ke;return runtime_1.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(O()){X.next=2;break}return X.abrupt("return");case 2:if(E&&E(),ye.on(dist.RoomEvent.ParticipantConnected,function(){!O()||(ve(ye),x&&x())}),ye.on(dist.RoomEvent.ParticipantDisconnected,function(){!O()||(ve(ye),A&&A())}),ye.on(dist.RoomEvent.DataReceived,function(K,se,fe){var pe;if(!!O()){var ue=ne.decode(K),Ce=JSON.parse(ue);((pe=JSON.parse(ue))==null?void 0:pe.type)==="ctw-chat"?_(function(ie){var ge,xe;return[].concat(ie,[{text:Ce.text,sender:(ge=(xe=ye.participants)==null?void 0:xe.get(Ce.sender))!=null?ge:""}])}):S&&S(K)}}),ve(ye),!(i.audioEnabled||i.videoEnabled)){X.next=23;break}return X.next=10,dist.createLocalTracks({audio:i.audioEnabled?P?{deviceId:P}:!0:!1,video:i.videoEnabled?L?{deviceId:L}:!0:!1});case 10:if(Ee=X.sent,!(y&&y!=="none"&&g.length>0&&!isMobile_1)){X.next=22;break}if(Te=Ee.find(function(K){return K.kind==="video"}),!Te){X.next=22;break}return X.next=16,initBgFilter(g,Te,y);case 16:if(ke=X.sent,!ke){X.next=22;break}return M(ke),X.next=21,applyBgFilterToTracks(Ee,ke);case 21:Ee=X.sent;case 22:Ee.forEach(function(K){!O()||ye.localParticipant.publishTrack(K,i.simulcast?{simulcast:!0}:{})});case 23:case"end":return X.stop()}},_e)}));return function(ye){return we.apply(this,arguments)}}();react.exports.useEffect(function(){var we;m&&((we=J.localMember)==null||we.publishData(m,dist.DataPacket_Kind.RELIABLE))},[m]),react.exports.useEffect(function(){n&&n.length>0&&n!=="INVALID"&&J.connectAll("wss://infra.catalyst.chat",n,i).then(function(we){if(!(!O()||!we))return oe&&oe(we),function(){we.disconnect()}}).catch(function(we){console.error(we)})},[n]),react.exports.useEffect(function(){return H||navigator.mediaDevices.enumerateDevices().then(function(we){var _e,ye;if(!!O()){var Ee=we.filter(function(ce){return ce.kind==="audiooutput"&&(ce==null?void 0:ce.deviceId)}),Te;if(Y&&(Te=Ee.find(function(ce){return(ce==null?void 0:ce.deviceId)===Y})),Te||(Te=Ee[0]),Q(Te),Y!==((_e=Te)==null?void 0:_e.deviceId)&&(ye=Te)!=null&&ye.deviceId){var ke;C((ke=Te)==null?void 0:ke.deviceId)}}}),function(){J.disconnectAll()}},[J.room]);var ve=function(_e){U(_e.participants.size+1)},de=function(){F&&F(),v(!0)},Se=function(_e){Q(_e),C(_e==null?void 0:_e.deviceId)};return a>0&&react.exports.useEffect(function(){var we,_e=function(){var K,se;if(!!O()){var fe=(K=I.current)==null?void 0:K.classList,pe=(se=z.current)==null?void 0:se.classList;fe&&pe&&(Ee===5&&!Te&&(fe==null||fe.remove("animate-fade-in-down"),fe==null||fe.add("animate-fade-out-up"),pe==null||pe.remove("animate-fade-in-up"),pe==null||pe.add("animate-fade-out-down"),setTimeout(function(){!O()||(fe==null||fe.remove("animate-fade-out-up"),fe==null||fe.add("hidden"),pe==null||pe.remove("animate-fade-out-down"),pe==null||pe.add("hidden"),Te=!0)},170),Ee=1),Ee+=1)}},ye=function(){var K,se;if(!!O()){var fe=(K=I.current)==null?void 0:K.classList,pe=(se=z.current)==null?void 0:se.classList;fe&&pe&&(fe==null||fe.remove("hidden"),fe==null||fe.add("animate-fade-in-down"),pe==null||pe.remove("hidden"),pe==null||pe.add("animate-fade-in-up"),Te=!1,Ee=1,clearInterval(ce),ce=setInterval(_e,a))}},Ee=1,Te=!1,ke=r(function(){!O()||ye()},25);(we=ae.current)==null||we.addEventListener("mousemove",ke);var ce=setInterval(_e,a);return function(){var X;clearInterval(ce),(X=ae.current)==null||X.removeEventListener("mousemove",ke)}},[]),jsx("div",{id:"video-chat",className:"relative w-full h-full",ref:ae,children:jsx("div",{id:"bg-theme",className:"w-full h-full bg-secondary ",children:n==="INVALID"?jsx("div",{className:"absolute top-0 flex items-center justify-center w-full h-full px-16 text-xl not-selectable left-1 text-quinary",children:jsxs("span",{className:"text-center",children:["\u26A0\uFE0F An error occurred generating your user token.",jsx("br",{}),"Please"," ",jsx("a",{href:l&&l.length>0?l:SUPPORT_EMAIL,target:"_blank",rel:"noreferrer",children:"contact us"})," ","for help"]})}):jsxs(FullScreen,{handle:$,className:"catalyst-fullscreen w-full h-full bg-secondary overflow-hidden",children:[J.room&&jsxs("div",{id:"header-wrapper",className:"animate-fade-in-down",ref:I,children:[jsx(HeaderLogo,{alwaysBanner:!1}),jsxs("div",{className:(ee?"chat-open-shift":"")+" absolute z-50 flex nav-ops",children:[jsx(FontAwesomeIcon,{icon:faUserFriends,size:"lg",className:"mr-1 text-quinary"}),jsx("span",{className:"text-quinary ",children:j}),(l==null?void 0:l.length)!=0&&jsx(Tippy,{content:"Help",theme:"catalyst",placement:"bottom",children:jsx("button",{className:"ml-5 cursor-pointer focus:border-0 focus:outline-none",onClick:function(){return contactSupport(l)},children:jsx(FontAwesomeIcon,{icon:faQuestion,size:"lg",className:"text-quinary"})})}),!h&&jsx(Tippy,{content:"Refresh",theme:"catalyst",placement:"bottom",children:jsx("button",{className:"ml-5 cursor-pointer focus:border-0 focus:outline-none",onClick:function(){var _e;J==null||(_e=J.room)==null||_e.disconnect(),D()},children:jsx(FontAwesomeIcon,{icon:faSync,size:"lg",className:"text-quinary"})})}),jsx(Tippy,{content:"Toggle View",theme:"catalyst",placement:"bottom",children:jsx("button",{className:"ml-5 cursor-pointer focus:border-0 focus:outline-none",onClick:function(){return q(function(_e){return!_e})},children:jsx(FontAwesomeIcon,{icon:G?faTh:faThLarge,size:"lg",className:"text-quinary"})})}),!isMobile_1&&jsx(Tippy,{content:"Full Screen",theme:"catalyst",placement:"bottom",children:jsx("button",{className:"ml-5 cursor-pointer focus:border-0 focus:outline-none",onClick:function(){$.active?$.exit():$.enter()},children:jsx(FontAwesomeIcon,{icon:$.active?faCompressAlt:faExpandAlt,size:"lg",className:"text-quinary"})})})]})]}),jsxs("div",{id:"call-section",className:"items-end w-full h-full",children:[!o&&jsxs("div",{id:"vid-chat-cont",className:"absolute inset-0 flex",children:[jsx(RoomWrapper,{onLeave:de,chatOpen:ee,setChatOpen:V,roomState:J,speakerMode:G,disableChat:c,disableSelfieMode:u,chatMessages:T,setSpeakerMode:q,setChatMessages:_,cstmWelcomeMsg:s,handleComponentRefresh:D}),J.room&&jsx("div",{ref:z,className:"absolute bottom-0 left-0 right-0 z-20 flex items-center justify-center mb-3",children:jsx(Toolbar,{room:J.room,onLeave:de,setSpeakerMode:q,chatMessages:T,setChatMessages:_,updateOutputDevice:Se,outputDevice:H,bgFilter:N,setBgFilter:M,bgRemoval:y,bgRemovalKey:g,chatOpen:ee,setChatOpen:V,disableChat:c,cstmSupportUrl:l})}),J.audioTracks.map(function(we){return jsx(AudWrapper,{track:we,isLocal:!1,sinkId:H==null?void 0:H.deviceId},we.sid)})]}),o&&jsx("div",{className:"absolute inset-0 z-40 flex items-center justify-center w-full h-full text-xl not-selectable text-quinary",children:jsx("span",{children:"\u{1F590}\uFE0F Call ended"})})]})]})})})};ElementQueries.listen();var CatalystChat=function t(e){var n=e.room,i=e.appId,a=e.name,c=e.theme,u=e.fade,h=e.audioOffDefault,s=e.videoOffDefault,l=e.simulcast,m=e.bgRemoval,y=e.disableChat,g=e.disableSelfieMode,S=e.disableSetupView,E=e.disableNameField,x=e.cstmSetupBg,A=e.disableRefreshBtn,F=e.cstmWelcomeMsg,D=e.cstmSupportUrl,$=e.arbData,k=e.handleReceiveArbData,j=e.handleUserData,U=e.onJoinCall,W=e.onMemberJoin,G=e.onMemberLeave,q=e.onLeaveCall,f=e.handleComponentRefresh,o=react.exports.useState(S!=null?S:!1),v=o[0],b=o[1],T=react.exports.useState(a!=null?a:genRandomName()),_=T[0],B=T[1],ee=useCookies(["PERSISTENT_CLIENT_ID"]),V=ee[0],Z=ee[1],H=react.exports.useState(!h),Q=H[0],te=H[1],N=react.exports.useState(!s),M=N[0],J=N[1],O=react.exports.useState(""),P=O[0],L=O[1],re=react.exports.useState(""),Y=re[0],C=re[1],z=useIsMounted();return f||(f=function(){}),react.exports.useEffect(function(){setThemeColor(c!=null?c:THEMES.default)},[]),react.exports.useEffect(function(){v&&Y.length<1&&setTimeout(function(){if(!!z()){var I=V.PERSISTENT_CLIENT_ID||generateUUID();V.PERSISTENT_CLIENT_ID||Z("PERSISTENT_CLIENT_ID",I,{expires:new Date(Date.now()+1e3*60*60*24*365)}),fetch(AUTH_ADDRESS+"?participantName="+_+"&appId="+i+"&roomName="+n+"&uniqueClientIdentifier="+I,{method:"GET",headers:{"Content-Type":"application/json",mode:"no-cors"}}).then(function(ae){if(!!z())return ae.status===200&&ae.json().then(function(ne){if(!!z())return ne.vectorlyToken.length>0&&L(ne.vectorlyToken),j&&j(ne),C(ne.token),ne.token}),ae.status===500&&(console.log("There is no user record corresponding to the provided identifier"),C("INVALID")),Y}).catch(function(ae){console.log(ae),C("INVALID")})}},500)},[v]),jsx("div",{id:"ctw",className:"catalyst-parent",ref:function(ae){var ne,oe;if(ae&&((ne=ae.parentNode)==null||(oe=ne.parentNode)==null?void 0:oe.nodeName)==="BODY"){var ve;ae.style.position="fixed";var de=document.createElement("style");document.head.appendChild(de),de==null||(ve=de.sheet)==null||ve.insertRule("html, body { margin: 0px; padding: 0px; height: 100%; }")}},children:jsx("div",{id:"catalyst-wrapper",className:"h-full w-full m-0 p-0 overflow-hidden max-h-screen max-w-screen box-border",children:v?jsx(CatalystChatView,{token:Y,meta:{audioEnabled:Q,videoEnabled:M,simulcast:l!=null?l:!0,loglevel:"trace"},fade:u!=null?u:DEFAULT_AUTOFADE,disableChat:y,disableSelfieMode:g,arbData:$,bgRemovalKey:P,bgRemoval:m,handleReceiveArbData:k,cstmWelcomeMsg:F,cstmSupportUrl:D,disableRefreshBtn:A,onJoinCall:U,onMemberJoin:W,onMemberLeave:G,onLeaveCall:q,handleComponentRefresh:f}):S?null:jsx(SetupView,{meta:{audioEnabled:Q,videoEnabled:M,simulcast:l!=null?l:!0,loglevel:"trace"},setAudioOn:te,setVideoOn:J,audioOn:Q,videoOn:M,setReady:b,userName:_,setUserName:B,disableNameField:E,cstmSetupBg:x,cstmSupportUrl:D})})})},CatalystChatWrapper=function t(e){var n=react.exports.useState(0),i=n[0],a=n[1],c=function(){e.onComponentRefresh&&e.onComponentRefresh(),a(i+1)};return jsx(CatalystChat,ft({},Object.assign({key:i},e,{handleComponentRefresh:c})))};const Videopage=()=>{const{user:t,selectedChat:e}=ChatState(),n=useHistory();return jsx(Box,{w:"100%",h:"100vh",children:jsx(CatalystChatWrapper,{room:e._id,appId:"Wq5fHCh2lHRYl0hz8ffbu2g8Ojp1",name:t.name,disableChat:!0,disableNameField:!0,disableSelfieMode:!0,onLeaveCall:()=>{n.push("/@"),window.location.reload()}})})};export{Videopage as default};
